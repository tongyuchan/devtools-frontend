{"version":3,"file":"get-stylesheet.js","sourceRoot":"","sources":["../../../../../front_end/component_helpers/get-stylesheet.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Root from '../root/root.js';\nimport * as ThemeSupport from '../theme_support/theme_support.js';\n\nconst sheetsCache = new Map<string, {sheets: CSSStyleSheet[], enableLegacyPatching: boolean}>();\n\n/**\n * Helper for importing a legacy stylesheet into a component.\n *\n * Given a path to a stylesheet, it returns a CSSStyleSheet that can then be\n * adopted by your component.\n *\n * Pass `enableLegacyPatching: true` to turn on the legacy dark mode theming and be\n * returned both the original stylesheet and the new patched rules for dark mode.\n */\nexport function getStyleSheets(path: string, {enableLegacyPatching = false} = {}): CSSStyleSheet[] {\n  const cachedResult = sheetsCache.get(path);\n  if (cachedResult && cachedResult.enableLegacyPatching === enableLegacyPatching) {\n    return cachedResult.sheets;\n  }\n\n  const content = Root.Runtime.cachedResources.get(path) || '';\n  if (!content) {\n    throw new Error(`${path} not preloaded.`);\n  }\n\n  const originalStylesheet = new CSSStyleSheet();\n  originalStylesheet.replaceSync(content);\n\n  const themeStyleSheet = ThemeSupport.ThemeSupport.instance().themeStyleSheet(path, content);\n  if (!enableLegacyPatching || !themeStyleSheet) {\n    sheetsCache.set(path, {enableLegacyPatching, sheets: [originalStylesheet]});\n    return [originalStylesheet];\n  }\n\n  const patchedStyleSheet = new CSSStyleSheet();\n\n  patchedStyleSheet.replaceSync(themeStyleSheet + '\\n' + Root.Runtime.Runtime.resolveSourceURL(path + '.theme'));\n  sheetsCache.set(path, {enableLegacyPatching, sheets: [originalStylesheet, patchedStyleSheet]});\n\n  return [originalStylesheet, patchedStyleSheet];\n}\n\n/*\n * The getStylesheet helper in components reads styles out of the runtime cache.\n * In a proper build this is populated but in test runs because we don't load\n * all of DevTools it's not. Therefore we fetch all the CSS files and populate\n * the cache before any tests are run.\n *\n * The out/Release/gen/front_end URL is prepended so within the Karma config we can proxy\n * them through to the right place, respecting Karma's ROOT_DIRECTORY setting.\n */\nexport const CSS_RESOURCES_TO_LOAD_INTO_RUNTIME = [\n  'ui/checkboxTextLabel.css',\n  'ui/closeButton.css',\n  'ui/confirmDialog.css',\n  'ui/dialog.css',\n  'ui/dropTarget.css',\n  'ui/emptyWidget.css',\n  'ui/filter.css',\n  'ui/glassPane.css',\n  'ui/infobar.css',\n  'ui/inlineButton.css',\n  'ui/inspectorCommon.css',\n  'ui/inspectorStyle.css',\n  'ui/themeColors.css',\n  'ui/inspectorSyntaxHighlight.css',\n  'ui/inspectorSyntaxHighlightDark.css',\n  'ui/inspectorViewTabbedPane.css',\n  'ui/listWidget.css',\n  'ui/popover.css',\n  'ui/progressIndicator.css',\n  'ui/radioButton.css',\n  'ui/remoteDebuggingTerminatedScreen.css',\n  'ui/reportView.css',\n  'ui/rootView.css',\n  'ui/searchableView.css',\n  'ui/slider.css',\n  'ui/smallBubble.css',\n  'ui/segmentedButton.css',\n  'ui/softContextMenu.css',\n  'ui/softDropDown.css',\n  'ui/softDropDownButton.css',\n  'ui/splitWidget.css',\n  'ui/toolbar.css',\n  'ui/suggestBox.css',\n  'ui/tabbedPane.css',\n  'ui/targetCrashedScreen.css',\n  'ui/textButton.css',\n  'ui/textPrompt.css',\n  'ui/tooltip.css',\n  'ui/treeoutline.css',\n  'ui/viewContainers.css',\n  'elements/layoutPane.css',\n  'components/imagePreview.css',\n  'components/jsUtils.css',\n  'persistence/editFileSystemView.css',\n  'persistence/workspaceSettingsTab.css',\n  'console_counters/warningErrorCounter.css',\n  'mobile_throttling/throttlingSettingsTab.css',\n  'emulation/deviceModeToolbar.css',\n  'emulation/deviceModeView.css',\n  'emulation/devicesSettingsTab.css',\n  'emulation/inspectedPagePlaceholder.css',\n  'emulation/locationsSettingsTab.css',\n  'emulation/mediaQueryInspector.css',\n  'emulation/sensors.css',\n  'inline_editor/colorSwatch.css',\n  'inspector_main/nodeIcon.css',\n  'inspector_main/renderingOptions.css',\n  'data_grid/dataGrid.css',\n  'help/releaseNote.css',\n  'object_ui/customPreviewComponent.css',\n  'object_ui/objectPopover.css',\n  'object_ui/objectPropertiesSection.css',\n  'object_ui/objectValue.css',\n  'console/consoleContextSelector.css',\n  'console/consolePinPane.css',\n  'console/consolePrompt.css',\n  'console/consoleSidebar.css',\n  'console/consoleView.css',\n  'cm/codemirror.css',\n  'text_editor/autocompleteTooltip.css',\n  'text_editor/cmdevtools.css',\n  'text_editor/cmdevtools.darkmode.css',\n];\n"]}
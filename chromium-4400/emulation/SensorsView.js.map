{"version":3,"file":"SensorsView.js","sourceRoot":"","sources":["../../../../../front_end/emulation/SensorsView.js"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) 2015 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';\nimport * as Host from '../host/host.js';\nimport * as SDK from '../sdk/sdk.js';\nimport * as UI from '../ui/ui.js';\n\n/**\n * @type {?SensorsView}\n */\nlet _instanceObject = null;\nconst {ls} = Common;\n\nexport class SensorsView extends UI.Widget.VBox {\n  constructor() {\n    super(true);\n    this.registerRequiredCSS('emulation/sensors.css', {enableLegacyPatching: true});\n    this.contentElement.classList.add('sensors-view');\n\n    this._LocationSetting = Common.Settings.Settings.instance().createSetting('emulation.locationOverride', '');\n    this._Location = SDK.EmulationModel.Location.parseSetting(this._LocationSetting.get());\n    this._LocationOverrideEnabled = false;\n\n    /**\n     * @type {!HTMLFieldSetElement}\n     */\n    this._fieldsetElement;\n\n    /**\n     * @type {!HTMLElement}\n     */\n    this._timezoneError;\n\n    /**\n     * @type {!HTMLSelectElement}\n     */\n    this._locationSelectElement;\n\n    /**\n     * @type {!HTMLInputElement}\n     */\n    this._latitudeInput;\n\n    /**\n     * @type {!HTMLInputElement}\n     */\n    this._longitudeInput;\n\n    /**\n     * @type {!HTMLInputElement}\n     */\n    this._timezoneInput;\n\n    /**\n     * @type {!HTMLInputElement}\n     */\n    this._localeInput;\n\n    /**\n     * @type {function(string):void}\n     */\n    this._latitudeSetter;\n\n    /**\n     * @type {function(string):void}\n     */\n    this._longitudeSetter;\n\n    /**\n     * @type {function(string):void}\n     */\n    this._timezoneSetter;\n\n    /**\n     * @type {function(string):void}\n     */\n    this._localeSetter;\n\n    /**\n     * @type {!HTMLElement}\n     */\n    this._localeError;\n\n    /**\n     * @type {!HTMLOptGroupElement}\n     */\n    this._customLocationsGroup;\n\n    this._createLocationSection(this._Location);\n\n    this.contentElement.createChild('div').classList.add('panel-section-separator');\n\n    this._deviceOrientationSetting =\n        Common.Settings.Settings.instance().createSetting('emulation.deviceOrientationOverride', '');\n    this._deviceOrientation = SDK.EmulationModel.DeviceOrientation.parseSetting(this._deviceOrientationSetting.get());\n    this._deviceOrientationOverrideEnabled = false;\n    /**\n     * @type {!HTMLFieldSetElement}\n     */\n    this._deviceOrientationFieldset;\n\n    /**\n     * @type {!HTMLElement}\n     */\n    this._stageElement;\n\n    /**\n     * @type {!HTMLSelectElement}\n     */\n    this._orientationSelectElement;\n\n    /**\n     * @type {!HTMLInputElement}\n     */\n    this._alphaElement;\n\n    /**\n     * @type {!HTMLInputElement}\n     */\n    this._betaElement;\n\n    /**\n     * @type {!HTMLInputElement}\n     */\n    this._gammaElement;\n\n    /**\n     * @type {function(string):void}\n     */\n    this._alphaSetter;\n\n    /**\n     * @type {function(string):void}\n     */\n    this._betaSetter;\n\n    /**\n     * @type {function(string):void}\n     */\n    this._gammaSetter;\n\n    /**\n     * @type {!HTMLDivElement}\n     */\n    this._orientationLayer;\n\n    this._createDeviceOrientationSection();\n\n    this.contentElement.createChild('div').classList.add('panel-section-separator');\n\n    this._appendTouchControl();\n\n    this.contentElement.createChild('div').classList.add('panel-section-separator');\n\n    this._appendIdleEmulator();\n\n    this.contentElement.createChild('div').classList.add('panel-section-separator');\n  }\n\n  /**\n   * @return {!SensorsView}\n   */\n  static instance() {\n    if (!_instanceObject) {\n      _instanceObject = new SensorsView();\n    }\n    return _instanceObject;\n  }\n\n  /**\n   * @param {!SDK.EmulationModel.Location} location\n   */\n  _createLocationSection(location) {\n    const geogroup = this.contentElement.createChild('section', 'sensors-group');\n    const geogroupTitle = UI.UIUtils.createLabel(ls`Location`, 'sensors-group-title');\n    geogroup.appendChild(geogroupTitle);\n    const fields = geogroup.createChild('div', 'geo-fields');\n    let selectedIndex = 0;\n\n    const noOverrideOption = {title: Common.UIString.UIString('No override'), location: NonPresetOptions.NoOverride};\n\n    this._locationSelectElement = /** @type {!HTMLSelectElement} */ (fields.createChild('select', 'chrome-select'));\n    UI.ARIAUtils.bindLabelToControl(geogroupTitle, this._locationSelectElement);\n\n    // No override\n    this._locationSelectElement.appendChild(new Option(noOverrideOption.title, noOverrideOption.location));\n\n    // Locations\n    this._customLocationsGroup =\n        /** @type {!HTMLOptGroupElement} */ (this._locationSelectElement.createChild('optgroup'));\n    this._customLocationsGroup.label = ls`Overrides`;\n    const customLocations = Common.Settings.Settings.instance().moduleSetting('emulation.locations');\n    const manageButton = UI.UIUtils.createTextButton(ls`Manage`, () => Common.Revealer.reveal(customLocations));\n    UI.ARIAUtils.setAccessibleName(manageButton, ls`Manage the list of locations`);\n    fields.appendChild(manageButton);\n    const fillCustomSettings = () => {\n      if (!this._customLocationsGroup) {\n        return;\n      }\n      this._customLocationsGroup.removeChildren();\n      for (const [i, customLocation] of customLocations.get().entries()) {\n        this._customLocationsGroup.appendChild(new Option(customLocation.title, JSON.stringify(customLocation)));\n        if (location.latitude === customLocation.lat && location.longitude === customLocation.long) {\n          // If the location coming from settings matches the custom location, use its index to select the option\n          selectedIndex = i + 1;\n        }\n      }\n    };\n    customLocations.addChangeListener(fillCustomSettings);\n    fillCustomSettings();\n\n    // Other location\n    const customLocationOption = {title: Common.UIString.UIString('Other…'), location: NonPresetOptions.Custom};\n    this._locationSelectElement.appendChild(new Option(customLocationOption.title, customLocationOption.location));\n\n    // Error location.\n    const group = /** @type {!HTMLOptGroupElement} */ (this._locationSelectElement.createChild('optgroup'));\n    group.label = ls`Error`;\n    group.appendChild(new Option(ls`Location unavailable`, NonPresetOptions.Unavailable));\n\n    this._locationSelectElement.selectedIndex = selectedIndex;\n    this._locationSelectElement.addEventListener('change', this._LocationSelectChanged.bind(this));\n\n    // Validated input fieldset.\n    this._fieldsetElement = /** @type {!HTMLFieldSetElement} */ (fields.createChild('fieldset'));\n    this._fieldsetElement.disabled = !this._LocationOverrideEnabled;\n    this._fieldsetElement.id = 'location-override-section';\n\n    const latitudeGroup = this._fieldsetElement.createChild('div', 'latlong-group');\n    const longitudeGroup = this._fieldsetElement.createChild('div', 'latlong-group');\n    const timezoneGroup = this._fieldsetElement.createChild('div', 'latlong-group');\n    const localeGroup = this._fieldsetElement.createChild('div', 'latlong-group');\n\n    const cmdOrCtrl = Host.Platform.isMac() ? '\\u2318' : 'Ctrl';\n    const modifierKeyMessage = ls`Adjust with mousewheel or up/down keys. ${cmdOrCtrl}: ±10, Shift: ±1, Alt: ±0.01`;\n\n    this._latitudeInput = UI.UIUtils.createInput('', 'number');\n    latitudeGroup.appendChild(this._latitudeInput);\n    this._latitudeInput.setAttribute('step', 'any');\n    this._latitudeInput.value = '0';\n    this._latitudeSetter = UI.UIUtils.bindInput(\n        this._latitudeInput, this._applyLocationUserInput.bind(this), SDK.EmulationModel.Location.latitudeValidator,\n        true, 0.1);\n    this._latitudeSetter(String(location.latitude));\n    UI.Tooltip.Tooltip.install(this._latitudeInput, modifierKeyMessage);\n    latitudeGroup.appendChild(UI.UIUtils.createLabel(ls`Latitude`, 'latlong-title', this._latitudeInput));\n\n    this._longitudeInput = UI.UIUtils.createInput('', 'number');\n    longitudeGroup.appendChild(this._longitudeInput);\n    this._longitudeInput.setAttribute('step', 'any');\n    this._longitudeInput.value = '0';\n    this._longitudeSetter = UI.UIUtils.bindInput(\n        this._longitudeInput, this._applyLocationUserInput.bind(this), SDK.EmulationModel.Location.longitudeValidator,\n        true, 0.1);\n    this._longitudeSetter(String(location.longitude));\n    UI.Tooltip.Tooltip.install(this._longitudeInput, modifierKeyMessage);\n    longitudeGroup.appendChild(UI.UIUtils.createLabel(ls`Longitude`, 'latlong-title', this._longitudeInput));\n\n    this._timezoneInput = UI.UIUtils.createInput('', 'text');\n    timezoneGroup.appendChild(this._timezoneInput);\n    this._timezoneInput.value = 'Europe/Berlin';\n    this._timezoneSetter = UI.UIUtils.bindInput(\n        this._timezoneInput, this._applyLocationUserInput.bind(this), SDK.EmulationModel.Location.timezoneIdValidator,\n        false);\n    this._timezoneSetter(location.timezoneId);\n    timezoneGroup.appendChild(UI.UIUtils.createLabel(ls`Timezone ID`, 'timezone-title', this._timezoneInput));\n    this._timezoneError = /** @type {!HTMLElement} */ (timezoneGroup.createChild('div', 'timezone-error'));\n\n    this._localeInput = UI.UIUtils.createInput('', 'text');\n    localeGroup.appendChild(this._localeInput);\n    this._localeInput.value = 'en-US';\n    this._localeSetter = UI.UIUtils.bindInput(\n        this._localeInput, this._applyLocationUserInput.bind(this), SDK.EmulationModel.Location.localeValidator, false);\n    this._localeSetter(location.locale);\n    localeGroup.appendChild(UI.UIUtils.createLabel(ls`Locale`, 'locale-title', this._localeInput));\n    this._localeError = /** @type {!HTMLElement} */ (localeGroup.createChild('div', 'locale-error'));\n  }\n\n  _LocationSelectChanged() {\n    this._fieldsetElement.disabled = false;\n    this._timezoneError.textContent = '';\n    const value = this._locationSelectElement.options[this._locationSelectElement.selectedIndex].value;\n    if (value === NonPresetOptions.NoOverride) {\n      this._LocationOverrideEnabled = false;\n      this._clearFieldsetElementInputs();\n      this._fieldsetElement.disabled = true;\n    } else if (value === NonPresetOptions.Custom) {\n      this._LocationOverrideEnabled = true;\n      const location = SDK.EmulationModel.Location.parseUserInput(\n          this._latitudeInput.value.trim(), this._longitudeInput.value.trim(), this._timezoneInput.value.trim(),\n          this._localeInput.value.trim());\n      if (!location) {\n        return;\n      }\n      this._Location = location;\n    } else if (value === NonPresetOptions.Unavailable) {\n      this._LocationOverrideEnabled = true;\n      this._Location = new SDK.EmulationModel.Location(0, 0, '', '', true);\n    } else {\n      this._LocationOverrideEnabled = true;\n      const coordinates = JSON.parse(value);\n      this._Location = new SDK.EmulationModel.Location(\n          coordinates.lat, coordinates.long, coordinates.timezoneId, coordinates.locale, false);\n      this._latitudeSetter(coordinates.lat);\n      this._longitudeSetter(coordinates.long);\n      this._timezoneSetter(coordinates.timezoneId);\n      this._localeSetter(coordinates.locale);\n    }\n\n    this._applyLocation();\n    if (value === NonPresetOptions.Custom) {\n      this._latitudeInput.focus();\n    }\n  }\n\n  _applyLocationUserInput() {\n    const location = SDK.EmulationModel.Location.parseUserInput(\n        this._latitudeInput.value.trim(), this._longitudeInput.value.trim(), this._timezoneInput.value.trim(),\n        this._localeInput.value.trim());\n    if (!location) {\n      return;\n    }\n\n    this._timezoneError.textContent = '';\n\n    this._setSelectElementLabel(this._locationSelectElement, NonPresetOptions.Custom);\n    this._Location = location;\n    this._applyLocation();\n  }\n\n  _applyLocation() {\n    if (this._LocationOverrideEnabled) {\n      this._LocationSetting.set(this._Location.toSetting());\n    } else {\n      this._LocationSetting.remove();\n    }\n    for (const emulationModel of SDK.SDKModel.TargetManager.instance().models(SDK.EmulationModel.EmulationModel)) {\n      emulationModel.emulateLocation(this._LocationOverrideEnabled ? this._Location : null).catch(err => {\n        switch (err.type) {\n          case 'emulation-set-timezone': {\n            this._timezoneError.textContent = err.message;\n            break;\n          }\n          case 'emulation-set-locale': {\n            this._localeError.textContent = err.message;\n            break;\n          }\n        }\n      });\n    }\n  }\n\n  _clearFieldsetElementInputs() {\n    this._latitudeSetter('0');\n    this._longitudeSetter('0');\n    this._timezoneSetter('');\n    this._localeSetter('');\n  }\n\n  _createDeviceOrientationSection() {\n    const orientationGroup = this.contentElement.createChild('section', 'sensors-group');\n    const orientationTitle = UI.UIUtils.createLabel(ls`Orientation`, 'sensors-group-title');\n    orientationGroup.appendChild(orientationTitle);\n    const orientationContent = orientationGroup.createChild('div', 'orientation-content');\n    const fields = orientationContent.createChild('div', 'orientation-fields');\n\n    const orientationOffOption = {title: Common.UIString.UIString('Off'), orientation: NonPresetOptions.NoOverride};\n    const customOrientationOption = {\n      title: Common.UIString.UIString('Custom orientation'),\n      orientation: NonPresetOptions.Custom,\n    };\n    this._orientationSelectElement =\n        /** @type {!HTMLSelectElement} */ (this.contentElement.createChild('select', 'chrome-select'));\n    UI.ARIAUtils.bindLabelToControl(orientationTitle, this._orientationSelectElement);\n    this._orientationSelectElement.appendChild(\n        new Option(orientationOffOption.title, orientationOffOption.orientation));\n    this._orientationSelectElement.appendChild(\n        new Option(customOrientationOption.title, customOrientationOption.orientation));\n\n    const orientationGroups = PresetOrientations;\n    for (let i = 0; i < orientationGroups.length; ++i) {\n      const groupElement = /** @type {!HTMLOptGroupElement} */ (this._orientationSelectElement.createChild('optgroup'));\n      groupElement.label = orientationGroups[i].title;\n      const group = orientationGroups[i].value;\n      for (let j = 0; j < group.length; ++j) {\n        groupElement.appendChild(new Option(group[j].title, group[j].orientation));\n      }\n    }\n    this._orientationSelectElement.selectedIndex = 0;\n    fields.appendChild(this._orientationSelectElement);\n    this._orientationSelectElement.addEventListener('change', this._orientationSelectChanged.bind(this));\n\n    this._deviceOrientationFieldset = this._createDeviceOrientationOverrideElement(this._deviceOrientation);\n\n    this._stageElement = /** @type {!HTMLElement} */ (orientationContent.createChild('div', 'orientation-stage'));\n    this._orientationLayer =\n        /** @type {!HTMLDivElement} */ (this._stageElement.createChild('div', 'orientation-layer'));\n    this._boxElement = this._orientationLayer.createChild('section', 'orientation-box orientation-element');\n\n    this._boxElement.createChild('section', 'orientation-front orientation-element');\n    this._boxElement.createChild('section', 'orientation-top orientation-element');\n    this._boxElement.createChild('section', 'orientation-back orientation-element');\n    this._boxElement.createChild('section', 'orientation-left orientation-element');\n    this._boxElement.createChild('section', 'orientation-right orientation-element');\n    this._boxElement.createChild('section', 'orientation-bottom orientation-element');\n\n    UI.UIUtils.installDragHandle(this._stageElement, this._onBoxDragStart.bind(this), event => {\n      this._onBoxDrag(event);\n    }, null, '-webkit-grabbing', '-webkit-grab');\n\n    fields.appendChild(this._deviceOrientationFieldset);\n    this._enableOrientationFields(true);\n    this._setBoxOrientation(this._deviceOrientation, false);\n  }\n\n  /**\n   * @param {?boolean} disable\n   */\n  _enableOrientationFields(disable) {\n    if (disable) {\n      this._deviceOrientationFieldset.disabled = true;\n      this._stageElement.classList.add('disabled');\n      UI.Tooltip.Tooltip.install(this._stageElement, ls`Enable orientation to rotate`);\n    } else {\n      this._deviceOrientationFieldset.disabled = false;\n      this._stageElement.classList.remove('disabled');\n      UI.Tooltip.Tooltip.install(this._stageElement, ls`Shift+drag horizontally to rotate around the y-axis`);\n    }\n  }\n\n  _orientationSelectChanged() {\n    const value = this._orientationSelectElement.options[this._orientationSelectElement.selectedIndex].value;\n    this._enableOrientationFields(false);\n\n    if (value === NonPresetOptions.NoOverride) {\n      this._deviceOrientationOverrideEnabled = false;\n      this._enableOrientationFields(true);\n    } else if (value === NonPresetOptions.Custom) {\n      this._deviceOrientationOverrideEnabled = true;\n      this._alphaElement.focus();\n    } else {\n      const parsedValue = JSON.parse(value);\n      this._deviceOrientationOverrideEnabled = true;\n      this._deviceOrientation =\n          new SDK.EmulationModel.DeviceOrientation(parsedValue[0], parsedValue[1], parsedValue[2]);\n      this._setDeviceOrientation(this._deviceOrientation, DeviceOrientationModificationSource.SelectPreset);\n    }\n  }\n\n  _applyDeviceOrientation() {\n    if (this._deviceOrientationOverrideEnabled) {\n      this._deviceOrientationSetting.set(this._deviceOrientation.toSetting());\n    }\n    for (const emulationModel of SDK.SDKModel.TargetManager.instance().models(SDK.EmulationModel.EmulationModel)) {\n      emulationModel.emulateDeviceOrientation(this._deviceOrientationOverrideEnabled ? this._deviceOrientation : null);\n    }\n  }\n\n  /**\n   * @param {!HTMLSelectElement} selectElement\n   * @param {string} labelValue\n   */\n  _setSelectElementLabel(selectElement, labelValue) {\n    const optionValues = Array.prototype.map.call(selectElement.options, x => x.value);\n    selectElement.selectedIndex = optionValues.indexOf(labelValue);\n  }\n\n  _applyDeviceOrientationUserInput() {\n    this._setDeviceOrientation(\n        SDK.EmulationModel.DeviceOrientation.parseUserInput(\n            this._alphaElement.value.trim(), this._betaElement.value.trim(), this._gammaElement.value.trim()),\n        DeviceOrientationModificationSource.UserInput);\n    this._setSelectElementLabel(this._orientationSelectElement, NonPresetOptions.Custom);\n  }\n\n  _resetDeviceOrientation() {\n    this._setDeviceOrientation(\n        new SDK.EmulationModel.DeviceOrientation(0, 90, 0), DeviceOrientationModificationSource.ResetButton);\n    this._setSelectElementLabel(this._orientationSelectElement, '[0, 90, 0]');\n  }\n\n  /**\n   * @param {?SDK.EmulationModel.DeviceOrientation} deviceOrientation\n   * @param {!DeviceOrientationModificationSource} modificationSource\n   */\n  _setDeviceOrientation(deviceOrientation, modificationSource) {\n    if (!deviceOrientation) {\n      return;\n    }\n\n    /**\n     * @param {number} angle\n     * @return {number}\n     */\n    function roundAngle(angle) {\n      return Math.round(angle * 10000) / 10000;\n    }\n\n    if (modificationSource !== DeviceOrientationModificationSource.UserInput) {\n      // Even though the angles in |deviceOrientation| will not be rounded\n      // here, their precision will be rounded by CSS when we change\n      // |this._orientationLayer.style| in _setBoxOrientation().\n      this._alphaSetter(String(roundAngle(deviceOrientation.alpha)));\n      this._betaSetter(String(roundAngle(deviceOrientation.beta)));\n      this._gammaSetter(String(roundAngle(deviceOrientation.gamma)));\n    }\n\n    const animate = modificationSource !== DeviceOrientationModificationSource.UserDrag;\n    this._setBoxOrientation(deviceOrientation, animate);\n\n    this._deviceOrientation = deviceOrientation;\n    this._applyDeviceOrientation();\n\n    UI.ARIAUtils.alert(\n        ls`Device orientation set to alpha: ${deviceOrientation.alpha}, beta: ${deviceOrientation.beta}, gamma: ${\n            deviceOrientation.gamma}`,\n        this._orientationSelectElement);\n  }\n\n  /**\n   * @param {!Element} parentElement\n   * @param {!HTMLInputElement} input\n   * @param {string} label\n   * @param {function(string):{valid: boolean, errorMessage: (string|undefined)}} validator\n   * @return {function(string)}\n   */\n  _createAxisInput(parentElement, input, label, validator) {\n    const div = parentElement.createChild('div', 'orientation-axis-input-container');\n    div.appendChild(input);\n    div.appendChild(UI.UIUtils.createLabel(label, /* className */ '', input));\n    return UI.UIUtils.bindInput(input, this._applyDeviceOrientationUserInput.bind(this), validator, true);\n  }\n\n  /**\n   * @param {!SDK.EmulationModel.DeviceOrientation} deviceOrientation\n   * @return {!HTMLFieldSetElement}\n   */\n  _createDeviceOrientationOverrideElement(deviceOrientation) {\n    const fieldsetElement = /** @type {!HTMLFieldSetElement} */ (document.createElement('fieldset'));\n    fieldsetElement.classList.add('device-orientation-override-section');\n    const cellElement = fieldsetElement.createChild('td', 'orientation-inputs-cell');\n\n    this._alphaElement = UI.UIUtils.createInput('', 'number');\n    this._alphaElement.setAttribute('step', 'any');\n    this._alphaSetter = this._createAxisInput(\n        cellElement, this._alphaElement, Common.UIString.UIString('\\u03B1 (alpha)'),\n        SDK.EmulationModel.DeviceOrientation.alphaAngleValidator);\n    this._alphaSetter(String(deviceOrientation.alpha));\n\n    this._betaElement = UI.UIUtils.createInput('', 'number');\n    this._betaElement.setAttribute('step', 'any');\n    this._betaSetter = this._createAxisInput(\n        cellElement, this._betaElement, Common.UIString.UIString('\\u03B2 (beta)'),\n        SDK.EmulationModel.DeviceOrientation.betaAngleValidator);\n    this._betaSetter(String(deviceOrientation.beta));\n\n    this._gammaElement = UI.UIUtils.createInput('', 'number');\n    this._gammaElement.setAttribute('step', 'any');\n    this._gammaSetter = this._createAxisInput(\n        cellElement, this._gammaElement, Common.UIString.UIString('\\u03B3 (gamma)'),\n        SDK.EmulationModel.DeviceOrientation.gammaAngleValidator);\n    this._gammaSetter(String(deviceOrientation.gamma));\n\n    const resetButton = UI.UIUtils.createTextButton(\n        Common.UIString.UIString('Reset'), this._resetDeviceOrientation.bind(this), 'orientation-reset-button');\n    UI.ARIAUtils.setAccessibleName(resetButton, ls`Reset device orientation`);\n    resetButton.setAttribute('type', 'reset');\n    cellElement.appendChild(resetButton);\n    return fieldsetElement;\n  }\n\n  /**\n   * @param {!SDK.EmulationModel.DeviceOrientation} deviceOrientation\n   * @param {boolean} animate\n   */\n  _setBoxOrientation(deviceOrientation, animate) {\n    if (animate) {\n      this._stageElement.classList.add('is-animating');\n    } else {\n      this._stageElement.classList.remove('is-animating');\n    }\n\n    // It is important to explain the multiple conversions happening here. A\n    // few notes on coordinate spaces first:\n    // 1. The CSS coordinate space is left-handed. X and Y are parallel to the\n    //    screen, and Z is perpendicular to the screen. X is positive to the\n    //    right, Y is positive downwards and Z increases towards the viewer.\n    //    See https://drafts.csswg.org/css-transforms-2/#transform-rendering\n    //    for more information.\n    // 2. The Device Orientation coordinate space is right-handed. X and Y are\n    //    parallel to the screen, and Z is perpenticular to the screen. X is\n    //    positive to the right, Y is positive upwards and Z increases towards\n    //    the viewer. See\n    //    https://w3c.github.io/deviceorientation/#deviceorientation for more\n    //    information.\n    // 3. Additionally, the phone model we display is rotated +90 degrees in\n    //    the X axis in the CSS coordinate space (i.e. when all angles are 0 we\n    //    cannot see its screen in DevTools).\n    //\n    // |this._boxMatrix| is set in the Device Orientation coordinate space\n    // because it represents the phone model we show users and also because the\n    // calculations in UI.Geometry.EulerAngles assume this coordinate space (so\n    // we apply the rotations in the Z-X'-Y'' order).\n    // The CSS transforms, on the other hand, are done in the CSS coordinate\n    // space, so we need to convert 2) to 1) while keeping 3) in mind. We can\n    // cover 3) by swapping the Y and Z axes, and 2) by inverting the X axis.\n    const {alpha, beta, gamma} = deviceOrientation;\n    this._boxMatrix = new DOMMatrixReadOnly().rotate(0, 0, alpha).rotate(beta, 0, 0).rotate(0, gamma, 0);\n    this._orientationLayer.style.transform = `rotateY(${alpha}deg) rotateX(${- beta}deg) rotateZ(${gamma}deg)`;\n  }\n\n  /**\n   * @param {!MouseEvent} event\n   * @return {boolean}\n   */\n  _onBoxDrag(event) {\n    const mouseMoveVector = this._calculateRadiusVector(event.x, event.y);\n    if (!mouseMoveVector) {\n      return true;\n    }\n\n    if (!this._mouseDownVector) {\n      return true;\n    }\n\n    event.consume(true);\n    let axis, angle;\n    if (event.shiftKey) {\n      axis = new UI.Geometry.Vector(0, 0, 1);\n      angle = (mouseMoveVector.x - this._mouseDownVector.x) * ShiftDragOrientationSpeed;\n    } else {\n      axis = UI.Geometry.crossProduct(this._mouseDownVector, mouseMoveVector);\n      angle = UI.Geometry.calculateAngle(this._mouseDownVector, mouseMoveVector);\n    }\n\n    // See the comment in _setBoxOrientation() for a longer explanation about\n    // the CSS coordinate space, the Device Orientation coordinate space and\n    // the conversions we make. |axis| and |angle| are in the CSS coordinate\n    // space, while |this._originalBoxMatrix| is rotated and in the Device\n    // Orientation coordinate space, which is why we swap Y and Z and invert X.\n    const currentMatrix =\n        new DOMMatrixReadOnly().rotateAxisAngle(-axis.x, axis.z, axis.y, angle).multiply(this._originalBoxMatrix);\n\n    const eulerAngles = UI.Geometry.EulerAngles.fromDeviceOrientationRotationMatrix(currentMatrix);\n    const newOrientation =\n        new SDK.EmulationModel.DeviceOrientation(eulerAngles.alpha, eulerAngles.beta, eulerAngles.gamma);\n    this._setDeviceOrientation(newOrientation, DeviceOrientationModificationSource.UserDrag);\n    this._setSelectElementLabel(this._orientationSelectElement, NonPresetOptions.Custom);\n    return false;\n  }\n\n  /**\n   * @param {!MouseEvent} event\n   * @return {boolean}\n   */\n  _onBoxDragStart(event) {\n    if (!this._deviceOrientationOverrideEnabled) {\n      return false;\n    }\n\n    this._mouseDownVector = this._calculateRadiusVector(event.x, event.y);\n    this._originalBoxMatrix = this._boxMatrix;\n\n    if (!this._mouseDownVector) {\n      return false;\n    }\n\n    event.consume(true);\n    return true;\n  }\n\n  /**\n   * @param {number} x\n   * @param {number} y\n   * @return {?UI.Geometry.Vector}\n   */\n  _calculateRadiusVector(x, y) {\n    const rect = this._stageElement.getBoundingClientRect();\n    const radius = Math.max(rect.width, rect.height) / 2;\n    const sphereX = (x - rect.left - rect.width / 2) / radius;\n    const sphereY = (y - rect.top - rect.height / 2) / radius;\n    const sqrSum = sphereX * sphereX + sphereY * sphereY;\n    if (sqrSum > 0.5) {\n      return new UI.Geometry.Vector(sphereX, sphereY, 0.5 / Math.sqrt(sqrSum));\n    }\n\n    return new UI.Geometry.Vector(sphereX, sphereY, Math.sqrt(1 - sqrSum));\n  }\n\n  _appendTouchControl() {\n    const container = this.contentElement.createChild('div', 'touch-section');\n    const control = UI.SettingsUI.createControlForSetting(\n        Common.Settings.Settings.instance().moduleSetting('emulation.touch'), ls`Forces touch instead of click`);\n\n    if (control) {\n      container.appendChild(control);\n    }\n  }\n\n  _appendIdleEmulator() {\n    const container = this.contentElement.createChild('div', 'idle-section');\n    const control = UI.SettingsUI.createControlForSetting(\n        Common.Settings.Settings.instance().moduleSetting('emulation.idleDetection'),\n        ls`Forces selected idle state emulation`);\n\n    if (control) {\n      container.appendChild(control);\n    }\n  }\n}\n\n/** @enum {string} */\nexport const DeviceOrientationModificationSource = {\n  UserInput: 'userInput',\n  UserDrag: 'userDrag',\n  ResetButton: 'resetButton',\n  SelectPreset: 'selectPreset'\n};\n\n/** {string} */\nexport const NonPresetOptions = {\n  NoOverride: 'noOverride',\n  Custom: 'custom',\n  Unavailable: 'unavailable'\n};\n\n/** @type {!Array.<{title: string, value: !Array.<{title: string, orientation: string}>}>} */\nexport const PresetOrientations = [{\n  title: ls`Presets`,\n  value: [\n    {title: Common.UIString.UIString('Portrait'), orientation: '[0, 90, 0]'},\n    {title: Common.UIString.UIString('Portrait upside down'), orientation: '[180, -90, 0]'},\n    {title: Common.UIString.UIString('Landscape left'), orientation: '[90, 0, -90]'},\n    {title: Common.UIString.UIString('Landscape right'), orientation: '[90, -180, -90]'},\n    {title: Common.UIString.UIString('Display up'), orientation: '[0, 0, 0]'},\n    {title: Common.UIString.UIString('Display down'), orientation: '[0, -180, 0]'}\n  ]\n}];\n\n/**\n * @implements {UI.ActionRegistration.ActionDelegate}\n */\nexport class ShowActionDelegate {\n  /**\n   * @override\n   * @param {!UI.Context.Context} context\n   * @param {string} actionId\n   * @return {boolean}\n   */\n  handleAction(context, actionId) {\n    UI.ViewManager.ViewManager.instance().showView('sensors');\n    return true;\n  }\n}\n\nexport const ShiftDragOrientationSpeed = 16;\n"]}
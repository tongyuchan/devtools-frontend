{"version":3,"file":"TimelineDetailsView.js","sourceRoot":"","sources":["../../../../../front_end/timeline/TimelineDetailsView.js"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,MAAM,MAAM,qBAAqB,CAAC;AAC9C,OAAO,KAAK,UAAU,MAAM,6BAA6B,CAAC;AAC1D,OAAO,EAAC,EAAE,EAAC,MAAM,yBAAyB,CAAC;AAC3C,OAAO,KAAK,GAAG,MAAM,eAAe,CAAC;AACrC,OAAO,KAAK,aAAa,MAAM,qCAAqC,CAAC;AACrE,OAAO,KAAK,EAAE,MAAM,aAAa,CAAC;AAElC,OAAO,EAAC,sBAAsB,EAAC,MAAM,6BAA6B,CAAC;AACnE,OAAO,EAAC,MAAM,EAAmB,MAAM,uBAAuB,CAAC,CAAE,qCAAqC;AACtG,OAAO,EAAC,kBAAkB,EAAC,MAAM,yBAAyB,CAAC;AAC3D,OAAO,EAAC,yBAAyB,EAAC,MAAM,gCAAgC,CAAC;AACzE,OAAO,EAA2B,iBAAiB,EAAC,MAAM,oBAAoB,CAAC,CAAE,qCAAqC;AACtH,OAAO,EAAC,wBAAwB,EAAE,wBAAwB,EAAmB,MAAM,uBAAuB,CAAC,CAAE,qCAAqC;AAClJ,OAAO,EAAC,4BAA4B,EAAE,eAAe,EAAC,MAAM,sBAAsB,CAAC;AAEnF,MAAM,OAAO,mBAAoB,SAAQ,EAAE,CAAC,MAAM,CAAC,IAAI;IACrD;;OAEG;IACH,YAAY,QAAQ;QAClB,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;QAE/C,IAAI,CAAC,iBAAiB,GAAG,IAAI,UAAU,CAAC,SAAS,CAAC,SAAS,EAAE,CAAC;QAE9D,IAAI,CAAC,WAAW,GAAG,IAAI,EAAE,CAAC,UAAU,CAAC,UAAU,EAAE,CAAC;QAClD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAEpC,MAAM,MAAM,GAAG,GAAG,CAAC;QAEnB,IAAI,CAAC,qBAAqB,GAAG,IAAI,EAAE,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;QAClD,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;QAC1E,IAAI,CAAC,6BAA6B;YAC9B,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,EAAE,iCAAiC,CAAC,CAAC;QAC7F,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;QACjG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QAErC,0CAA0C;QAC1C,IAAI,CAAC,iBAAiB,GAAG,IAAI,GAAG,EAAE,CAAC;QAEnC,MAAM,YAAY,GAAG,IAAI,wBAAwB,EAAE,CAAC;QACpD,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE,YAAY,CAAC,CAAC;QACtF,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;QAE1D,MAAM,YAAY,GAAG,IAAI,wBAAwB,EAAE,CAAC;QACpD,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE,YAAY,CAAC,CAAC;QACtF,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;QAE1D,MAAM,UAAU,GAAG,IAAI,sBAAsB,CAAC,QAAQ,CAAC,CAAC;QACxD,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE,UAAU,CAAC,CAAC;QACpF,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;QAExD,IAAI,CAAC,yBAAyB,GAAG,IAAI,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,6BAA6B,CAAC,CAAC;QACvF,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,yBAAyB,CAAC,OAAO,CAAC,CAAC;QAEjE,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,EAAE,CAAC,UAAU,CAAC,MAAM,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QAE7F,gCAAgC;QAChC,IAAI,CAAC,MAAM,CAAC;IACd,CAAC;IAED;;;OAGG;IACH,QAAQ,CAAC,KAAK,EAAE,KAAK;QACnB,IAAI,IAAI,CAAC,MAAM,KAAK,KAAK,EAAE;YACzB,IAAI,IAAI,CAAC,MAAM,EAAE;gBACf,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,MAAM,CAAC,aAAa,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;aACpF;YACD,IAAI,CAAC,MAAM,GAAG,gCAAgC,CAAC,CAAC,KAAK,CAAC,CAAC;YACvD,IAAI,IAAI,CAAC,MAAM,EAAE;gBACf,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,MAAM,CAAC,aAAa,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;aACjF;SACF;QACD,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,aAAa,EAAE,GAAG,CAAC,WAAW,CAAC,EAAE,KAAK,CAAC,CAAC;QACxE,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,EAAE;YAClD,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;SAC7B;QACD,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;QACnC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC5B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QAExB,8BAA8B;QAC9B,IAAI,CAAC,yBAAyB,CAAC,kBAAkB,EAAE,CAAC;QACpD,IAAI,KAAK,IAAI,KAAK,CAAC,aAAa,EAAE,EAAE;YAClC,MAAM,EAAC,SAAS,EAAE,IAAI,EAAC,GAAG,KAAK,CAAC,aAAa,EAAE,CAAC,iBAAiB,EAAE,CAAC;YACpE,MAAM,UAAU,GAAG,SAAS,CAAC,CAAC,CAAC,KAAK,EAAE,CAAA,WAAW,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;YAC1D,MAAM,OAAO,GAAG,EAAE,CAAA,wBAAwB,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,UAAU,EAAE,CAAC;YAE3E,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YAC/C,MAAM,OAAO,GAAG,8BAA8B,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,gBAAgB,CAAC,MAAM,EAAE,EAAE,CAAA,YAAY,CAAC,CAAC,CAAC;YACrG,8EAA8E;YAC9E,2EAA2E;YAC3E,kCAAkC;YAClC,OAAO,CAAC,KAAK,CAAC,WAAW,GAAG,KAAK,CAAC;YAClC,OAAO,CAAC,WAAW,CAAC,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,IAAI,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YAEjE,IAAI,CAAC,yBAAyB,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;YACnD,IAAI,CAAC,yBAAyB,CAAC,iBAAiB,CAAC,IAAI,EAAE,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC;SACvF;IACH,CAAC;IAED;;OAEG;IACH,WAAW,CAAC,IAAI;QACd,MAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACxD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;YACvC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE;gBAC3C,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;aACvC;SACF;QACD,IAAI,CAAC,6BAA6B,CAAC,cAAc,EAAE,CAAC;QACpD,IAAI,CAAC,6BAA6B,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IACvD,CAAC;IAED,eAAe;QACb,MAAM,IAAI,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,aAAa,IAAI,EAAE,CAAC,CAAC;QAC9E,IAAI,IAAI,EAAE;YACR,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;YACpC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,IAAI,iBAAiB,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;SAChG;IACH,CAAC;IAED;;;;;OAKG;IACH,UAAU,CAAC,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,WAAW;QACxC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,WAAW,CAAC,CAAC;QAClF,IAAI,IAAI,CAAC,eAAe,KAAK,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE;YAC3D,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;SAChC;IACH,CAAC;IAED;;OAEG;IACH,aAAa;QACX,OAAO,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC;IAC1C,CAAC;IAED;;OAEG;IACH,eAAe,CAAC,KAAK;QACnB,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;IAC/B,CAAC;IAED;;OAEG;IACH,gBAAgB,CAAC,KAAK;QACpB,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACpB,IAAI,CAAC,yBAAyB,EAAE,CAAC;SAClC;IACH,CAAC;IAED,yBAAyB;QACvB,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YAChB,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAA,QAAQ,CAAC,CAAC;YAC3C,OAAO;SACR;QACD,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;QACpC,IAAI,CAAC,yBAAyB,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC;QAC1D,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED;;OAEG;IACH,YAAY,CAAC,SAAS;QACpB,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,CAAC;QAC/B,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;QAC5B,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACpB,IAAI,CAAC,yBAAyB,EAAE,CAAC;YACjC,OAAO;SACR;QACD,QAAQ,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,EAAE;YAC9B,KAAK,iBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBACtC,MAAM,KAAK,GAAG,sCAAsC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,CAAC;gBAChF,eAAe,CAAC,sBAAsB,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,EAAE,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC;qBACnG,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,6CAA6C,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC;gBAC3F,MAAM;aACP;YACD,KAAK,iBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACjC,MAAM,KAAK,GAAG,8DAA8D,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,CAAC;gBACxG,MAAM,cAAc,GAAG,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC;gBAC9D,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,8BAA8B,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC,CAAC;gBACxF,IAAI,KAAK,CAAC,SAAS,EAAE;oBACnB,MAAM,UAAU,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;oBACtC,UAAU,CAAC,aAAa,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;oBAC1C,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE;wBAC7C,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,WAAW,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,UAAU,CAAC,CAAC;qBAClF;iBACF;gBACD,MAAM;aACP;YACD,KAAK,iBAAiB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;gBAC1C,MAAM,OAAO,GAAG,0DAA0D,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,CAAC;gBACtG,eAAe,CAAC,0BAA0B,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,EAAE,IAAI,CAAC,iBAAiB,CAAC;qBACnG,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gBACvC,MAAM;aACP;YACD,KAAK,iBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACjC,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,CAAC;gBACvF,MAAM;aACP;SACF;QAED,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED;;OAEG;IACH,YAAY,CAAC,KAAK;QAChB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,EAAE;YAC7B,OAAO;SACR;QACD,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACvC,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED;;OAEG;IACH,WAAW;QACT,IAAI,IAAI,CAAC,eAAe,EAAE;YACxB,OAAO,IAAI,CAAC,eAAe,CAAC;SAC7B;QACD,IAAI,CAAC,eAAe;YAChB,IAAI,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,EAAE,IAAI,CAAC,4BAA4B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACtG,OAAO,IAAI,CAAC,eAAe,CAAC;IAC9B,CAAC;IAED;;OAEG;IACH,kBAAkB;QAChB,IAAI,IAAI,CAAC,sBAAsB,EAAE;YAC/B,OAAO,IAAI,CAAC,sBAAsB,CAAC;SACpC;QACD,IAAI,CAAC,sBAAsB,GAAG,IAAI,yBAAyB,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC;QACtF,OAAO,IAAI,CAAC,sBAAsB,CAAC;IACrC,CAAC;IAED;;OAEG;IACH,4BAA4B,CAAC,QAAQ;QACnC,MAAM,iBAAiB,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;QACpD,iBAAiB,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;QACxC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE;YAC/C,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,aAAa,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,gBAAgB,CAAC,EAAE,iBAAiB,EAAE,IAAI,CAAC,CAAC;SACzG;QACD,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;IACtD,CAAC;IAED;;;OAGG;IACH,6CAA6C,CAAC,KAAK,EAAE,OAAO;QAC1D,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QAC1B,IAAI,KAAK,CAAC,IAAI,KAAK,aAAa,CAAC,aAAa,CAAC,UAAU,CAAC,KAAK;YAC3D,KAAK,CAAC,IAAI,KAAK,aAAa,CAAC,aAAa,CAAC,UAAU,CAAC,UAAU,EAAE;YACpE,IAAI,CAAC,yBAAyB,CAAC,KAAK,CAAC,CAAC;SACvC;IACH,CAAC;IAED;;OAEG;IACH,yBAAyB,CAAC,KAAK;QAC7B,MAAM,kBAAkB,GAAG,GAAG,CAAC,QAAQ,CAAC,aAAa,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC;QACjH,IAAI,CAAC,kBAAkB,EAAE;YACvB,OAAO;SACR;QACD,MAAM,iBAAiB,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;QACpD,MAAM,cAAc,GAAG,iBAAiB,CAAC,QAAQ,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC;QAC7E,IAAI,CAAC,cAAc,EAAE;YACnB,OAAO;SACR;QACD,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE;YAC9C,OAAO;SACR;QACD,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,aAAa,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,gBAAgB,CAAC,EAAE,iBAAiB,CAAC,CAAC;IACpG,CAAC;IAED;;;OAGG;IACH,yBAAyB,CAAC,SAAS,EAAE,OAAO;QAC1C,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YAChC,OAAO;SACR;QACD,MAAM,eAAe,GAAG,eAAe,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;QACxG,MAAM,WAAW,GAAG,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC,iBAAiB,EAAE,CAAC;QAChF,MAAM,SAAS,GAAG,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC,iBAAiB,EAAE,CAAC;QAE5E,MAAM,aAAa,GAAG,IAAI,4BAA4B,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QACnE,aAAa,CAAC,UAAU,CACpB,EAAE,CAAA,WAAW,MAAM,CAAC,cAAc,CAAC,WAAW,CAAC,WAAW,MAAM,CAAC,cAAc,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;QAClG,MAAM,QAAQ,GAAG,eAAe,CAAC,gBAAgB,CAAC,eAAe,CAAC,CAAC;QACnE,aAAa,CAAC,gBAAgB,CAAC,EAAE,EAAE,QAAQ,CAAC,CAAC;QAC7C,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;IAC3C,CAAC;CACF;AAED;;GAEG;AACH,MAAM,CAAC,MAAM,GAAG,GAAG;IACjB,OAAO,EAAE,SAAS;IAClB,QAAQ,EAAE,UAAU;IACpB,QAAQ,EAAE,UAAU;IACpB,QAAQ,EAAE,UAAU;IACpB,aAAa,EAAE,eAAe;IAC9B,WAAW,EAAE,aAAa;CAC3B,CAAC","sourcesContent":["// Copyright 2017 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';\nimport * as Components from '../components/components.js';\nimport {ls} from '../platform/platform.js';\nimport * as SDK from '../sdk/sdk.js';\nimport * as TimelineModel from '../timeline_model/timeline_model.js';\nimport * as UI from '../ui/ui.js';\n\nimport {EventsTimelineTreeView} from './EventsTimelineTreeView.js';\nimport {Events, PerformanceModel} from './PerformanceModel.js';  // eslint-disable-line no-unused-vars\nimport {TimelineLayersView} from './TimelineLayersView.js';\nimport {TimelinePaintProfilerView} from './TimelinePaintProfilerView.js';\nimport {TimelineModeViewDelegate, TimelineSelection} from './TimelinePanel.js';  // eslint-disable-line no-unused-vars\nimport {BottomUpTimelineTreeView, CallTreeTimelineTreeView, TimelineTreeView} from './TimelineTreeView.js';  // eslint-disable-line no-unused-vars\nimport {TimelineDetailsContentHelper, TimelineUIUtils} from './TimelineUIUtils.js';\n\nexport class TimelineDetailsView extends UI.Widget.VBox {\n  /**\n   * @param {!TimelineModeViewDelegate} delegate\n   */\n  constructor(delegate) {\n    super();\n    this.element.classList.add('timeline-details');\n\n    this._detailsLinkifier = new Components.Linkifier.Linkifier();\n\n    this._tabbedPane = new UI.TabbedPane.TabbedPane();\n    this._tabbedPane.show(this.element);\n\n    const tabIds = Tab;\n\n    this._defaultDetailsWidget = new UI.Widget.VBox();\n    this._defaultDetailsWidget.element.classList.add('timeline-details-view');\n    this._defaultDetailsContentElement =\n        this._defaultDetailsWidget.element.createChild('div', 'timeline-details-view-body vbox');\n    this._appendTab(tabIds.Details, Common.UIString.UIString('Summary'), this._defaultDetailsWidget);\n    this.setPreferredTab(tabIds.Details);\n\n    /** @type Map<string, TimelineTreeView> */\n    this._rangeDetailViews = new Map();\n\n    const bottomUpView = new BottomUpTimelineTreeView();\n    this._appendTab(tabIds.BottomUp, Common.UIString.UIString('Bottom-Up'), bottomUpView);\n    this._rangeDetailViews.set(tabIds.BottomUp, bottomUpView);\n\n    const callTreeView = new CallTreeTimelineTreeView();\n    this._appendTab(tabIds.CallTree, Common.UIString.UIString('Call Tree'), callTreeView);\n    this._rangeDetailViews.set(tabIds.CallTree, callTreeView);\n\n    const eventsView = new EventsTimelineTreeView(delegate);\n    this._appendTab(tabIds.EventLog, Common.UIString.UIString('Event Log'), eventsView);\n    this._rangeDetailViews.set(tabIds.EventLog, eventsView);\n\n    this._additionalMetricsToolbar = new UI.Toolbar.Toolbar('timeline-additional-metrics');\n    this.element.appendChild(this._additionalMetricsToolbar.element);\n\n    this._tabbedPane.addEventListener(UI.TabbedPane.Events.TabSelected, this._tabSelected, this);\n\n    /** @type {!PerformanceModel} */\n    this._model;\n  }\n\n  /**\n   * @param {?PerformanceModel} model\n   * @param {?TimelineModel.TimelineModel.Track} track\n   */\n  setModel(model, track) {\n    if (this._model !== model) {\n      if (this._model) {\n        this._model.removeEventListener(Events.WindowChanged, this._onWindowChanged, this);\n      }\n      this._model = /** @type {!PerformanceModel} */ (model);\n      if (this._model) {\n        this._model.addEventListener(Events.WindowChanged, this._onWindowChanged, this);\n      }\n    }\n    this._track = track;\n    this._tabbedPane.closeTabs([Tab.PaintProfiler, Tab.LayerViewer], false);\n    for (const view of this._rangeDetailViews.values()) {\n      view.setModel(model, track);\n    }\n    this._lazyPaintProfilerView = null;\n    this._lazyLayersView = null;\n    this.setSelection(null);\n\n    // Add TBT info to the footer.\n    this._additionalMetricsToolbar.removeToolbarItems();\n    if (model && model.timelineModel()) {\n      const {estimated, time} = model.timelineModel().totalBlockingTime();\n      const isEstimate = estimated ? ` (${ls`estimated`})` : '';\n      const message = ls`Total blocking time: ${time.toFixed(2)}ms${isEstimate}`;\n\n      const warning = document.createElement('span');\n      const clsLink = /** @type {!UI.XLink.XLink} */ (UI.UIUtils.createWebDevLink('tbt/', ls`Learn more`));\n      // crbug.com/1103188: In dark mode the focus ring is hidden by the surrounding\n      // container of this link. For some additional spacing on the right to make\n      // sure the ring is fully visible.\n      clsLink.style.marginRight = '2px';\n      warning.appendChild(UI.UIUtils.formatLocalized('%s', [clsLink]));\n\n      this._additionalMetricsToolbar.appendText(message);\n      this._additionalMetricsToolbar.appendToolbarItem(new UI.Toolbar.ToolbarItem(warning));\n    }\n  }\n\n  /**\n   * @param {!Node} node\n   */\n  _setContent(node) {\n    const allTabs = this._tabbedPane.otherTabs(Tab.Details);\n    for (let i = 0; i < allTabs.length; ++i) {\n      if (!this._rangeDetailViews.has(allTabs[i])) {\n        this._tabbedPane.closeTab(allTabs[i]);\n      }\n    }\n    this._defaultDetailsContentElement.removeChildren();\n    this._defaultDetailsContentElement.appendChild(node);\n  }\n\n  _updateContents() {\n    const view = this._rangeDetailViews.get(this._tabbedPane.selectedTabId || '');\n    if (view) {\n      const window = this._model.window();\n      view.updateContents(this._selection || TimelineSelection.fromRange(window.left, window.right));\n    }\n  }\n\n  /**\n   * @param {string} id\n   * @param {string} tabTitle\n   * @param {!UI.Widget.Widget} view\n   * @param {boolean=} isCloseable\n   */\n  _appendTab(id, tabTitle, view, isCloseable) {\n    this._tabbedPane.appendTab(id, tabTitle, view, undefined, undefined, isCloseable);\n    if (this._preferredTabId !== this._tabbedPane.selectedTabId) {\n      this._tabbedPane.selectTab(id);\n    }\n  }\n\n  /**\n   * @return {!Element}\n   */\n  headerElement() {\n    return this._tabbedPane.headerElement();\n  }\n\n  /**\n   * @param {string} tabId\n   */\n  setPreferredTab(tabId) {\n    this._preferredTabId = tabId;\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   */\n  _onWindowChanged(event) {\n    if (!this._selection) {\n      this._updateContentsFromWindow();\n    }\n  }\n\n  _updateContentsFromWindow() {\n    if (!this._model) {\n      this._setContent(UI.Fragment.html`<div/>`);\n      return;\n    }\n    const window = this._model.window();\n    this._updateSelectedRangeStats(window.left, window.right);\n    this._updateContents();\n  }\n\n  /**\n   * @param {?TimelineSelection} selection\n   */\n  setSelection(selection) {\n    this._detailsLinkifier.reset();\n    this._selection = selection;\n    if (!this._selection) {\n      this._updateContentsFromWindow();\n      return;\n    }\n    switch (this._selection.type()) {\n      case TimelineSelection.Type.TraceEvent: {\n        const event = /** @type {!SDK.TracingModel.Event} */ (this._selection.object());\n        TimelineUIUtils.buildTraceEventDetails(event, this._model.timelineModel(), this._detailsLinkifier, true)\n            .then(fragment => this._appendDetailsTabsForTraceEventAndShowDetails(event, fragment));\n        break;\n      }\n      case TimelineSelection.Type.Frame: {\n        const frame = /** @type {!TimelineModel.TimelineFrameModel.TimelineFrame} */ (this._selection.object());\n        const filmStripFrame = this._model.filmStripModelFrame(frame);\n        this._setContent(TimelineUIUtils.generateDetailsContentForFrame(frame, filmStripFrame));\n        if (frame.layerTree) {\n          const layersView = this._layersView();\n          layersView.showLayerTree(frame.layerTree);\n          if (!this._tabbedPane.hasTab(Tab.LayerViewer)) {\n            this._appendTab(Tab.LayerViewer, Common.UIString.UIString('Layers'), layersView);\n          }\n        }\n        break;\n      }\n      case TimelineSelection.Type.NetworkRequest: {\n        const request = /** @type {!TimelineModel.TimelineModel.NetworkRequest} */ (this._selection.object());\n        TimelineUIUtils.buildNetworkRequestDetails(request, this._model.timelineModel(), this._detailsLinkifier)\n            .then(this._setContent.bind(this));\n        break;\n      }\n      case TimelineSelection.Type.Range: {\n        this._updateSelectedRangeStats(this._selection.startTime(), this._selection.endTime());\n        break;\n      }\n    }\n\n    this._updateContents();\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   */\n  _tabSelected(event) {\n    if (!event.data.isUserGesture) {\n      return;\n    }\n    this.setPreferredTab(event.data.tabId);\n    this._updateContents();\n  }\n\n  /**\n   * @return {!TimelineLayersView}\n   */\n  _layersView() {\n    if (this._lazyLayersView) {\n      return this._lazyLayersView;\n    }\n    this._lazyLayersView =\n        new TimelineLayersView(this._model.timelineModel(), this._showSnapshotInPaintProfiler.bind(this));\n    return this._lazyLayersView;\n  }\n\n  /**\n   * @return {!TimelinePaintProfilerView}\n   */\n  _paintProfilerView() {\n    if (this._lazyPaintProfilerView) {\n      return this._lazyPaintProfilerView;\n    }\n    this._lazyPaintProfilerView = new TimelinePaintProfilerView(this._model.frameModel());\n    return this._lazyPaintProfilerView;\n  }\n\n  /**\n   * @param {!SDK.PaintProfiler.PaintProfilerSnapshot} snapshot\n   */\n  _showSnapshotInPaintProfiler(snapshot) {\n    const paintProfilerView = this._paintProfilerView();\n    paintProfilerView.setSnapshot(snapshot);\n    if (!this._tabbedPane.hasTab(Tab.PaintProfiler)) {\n      this._appendTab(Tab.PaintProfiler, Common.UIString.UIString('Paint Profiler'), paintProfilerView, true);\n    }\n    this._tabbedPane.selectTab(Tab.PaintProfiler, true);\n  }\n\n  /**\n   * @param {!SDK.TracingModel.Event} event\n   * @param {!Node} content\n   */\n  _appendDetailsTabsForTraceEventAndShowDetails(event, content) {\n    this._setContent(content);\n    if (event.name === TimelineModel.TimelineModel.RecordType.Paint ||\n        event.name === TimelineModel.TimelineModel.RecordType.RasterTask) {\n      this._showEventInPaintProfiler(event);\n    }\n  }\n\n  /**\n   * @param {!SDK.TracingModel.Event} event\n   */\n  _showEventInPaintProfiler(event) {\n    const paintProfilerModel = SDK.SDKModel.TargetManager.instance().models(SDK.PaintProfiler.PaintProfilerModel)[0];\n    if (!paintProfilerModel) {\n      return;\n    }\n    const paintProfilerView = this._paintProfilerView();\n    const hasProfileData = paintProfilerView.setEvent(paintProfilerModel, event);\n    if (!hasProfileData) {\n      return;\n    }\n    if (this._tabbedPane.hasTab(Tab.PaintProfiler)) {\n      return;\n    }\n    this._appendTab(Tab.PaintProfiler, Common.UIString.UIString('Paint Profiler'), paintProfilerView);\n  }\n\n  /**\n   * @param {number} startTime\n   * @param {number} endTime\n   */\n  _updateSelectedRangeStats(startTime, endTime) {\n    if (!this._model || !this._track) {\n      return;\n    }\n    const aggregatedStats = TimelineUIUtils.statsForTimeRange(this._track.syncEvents(), startTime, endTime);\n    const startOffset = startTime - this._model.timelineModel().minimumRecordTime();\n    const endOffset = endTime - this._model.timelineModel().minimumRecordTime();\n\n    const contentHelper = new TimelineDetailsContentHelper(null, null);\n    contentHelper.addSection(\n        ls`Range:  ${Number.millisToString(startOffset)} \\u2013 ${Number.millisToString(endOffset)}`);\n    const pieChart = TimelineUIUtils.generatePieChart(aggregatedStats);\n    contentHelper.appendElementRow('', pieChart);\n    this._setContent(contentHelper.fragment);\n  }\n}\n\n/**\n * @enum {string}\n */\nexport const Tab = {\n  Details: 'Details',\n  EventLog: 'EventLog',\n  CallTree: 'CallTree',\n  BottomUp: 'BottomUp',\n  PaintProfiler: 'PaintProfiler',\n  LayerViewer: 'LayerViewer'\n};\n"]}
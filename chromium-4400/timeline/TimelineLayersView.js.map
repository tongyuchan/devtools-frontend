{"version":3,"file":"TimelineLayersView.js","sourceRoot":"","sources":["../../../../../front_end/timeline/TimelineLayersView.js"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2014 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';  // eslint-disable-line no-unused-vars\nimport * as LayerViewer from '../layer_viewer/layer_viewer.js';\nimport * as SDK from '../sdk/sdk.js';                                  // eslint-disable-line no-unused-vars\nimport * as TimelineModel from '../timeline_model/timeline_model.js';  // eslint-disable-line no-unused-vars\nimport * as UI from '../ui/ui.js';\n\nexport class TimelineLayersView extends UI.SplitWidget.SplitWidget {\n  /**\n   * @param {!TimelineModel.TimelineModel.TimelineModelImpl} model\n   * @param {function(!SDK.PaintProfiler.PaintProfilerSnapshot):void} showPaintProfilerCallback\n   */\n  constructor(model, showPaintProfilerCallback) {\n    super(true, false, 'timelineLayersView');\n    this._model = model;\n    this._showPaintProfilerCallback = showPaintProfilerCallback;\n\n    this.element.classList.add('timeline-layers-view');\n    this._rightSplitWidget = new UI.SplitWidget.SplitWidget(true, true, 'timelineLayersViewDetails');\n    this._rightSplitWidget.element.classList.add('timeline-layers-view-properties');\n    this.setMainWidget(this._rightSplitWidget);\n\n    const vbox = new UI.Widget.VBox();\n    this.setSidebarWidget(vbox);\n\n    this._layerViewHost = new LayerViewer.LayerViewHost.LayerViewHost();\n\n    const layerTreeOutline = new LayerViewer.LayerTreeOutline.LayerTreeOutline(this._layerViewHost);\n    vbox.element.appendChild(layerTreeOutline.element);\n\n    this._layers3DView = new LayerViewer.Layers3DView.Layers3DView(this._layerViewHost);\n    this._layers3DView.addEventListener(\n        LayerViewer.Layers3DView.Events.PaintProfilerRequested, this._onPaintProfilerRequested, this);\n    this._rightSplitWidget.setMainWidget(this._layers3DView);\n\n    const layerDetailsView = new LayerViewer.LayerDetailsView.LayerDetailsView(this._layerViewHost);\n    this._rightSplitWidget.setSidebarWidget(layerDetailsView);\n    layerDetailsView.addEventListener(\n        LayerViewer.LayerDetailsView.Events.PaintProfilerRequested, this._onPaintProfilerRequested, this);\n  }\n\n  /**\n   * @param {!TimelineModel.TimelineFrameModel.TracingFrameLayerTree} frameLayerTree\n   */\n  showLayerTree(frameLayerTree) {\n    this._frameLayerTree = frameLayerTree;\n    if (this.isShowing()) {\n      this._update();\n    } else {\n      this._updateWhenVisible = true;\n    }\n  }\n\n  /**\n   * @override\n   */\n  wasShown() {\n    if (this._updateWhenVisible) {\n      this._updateWhenVisible = false;\n      this._update();\n    }\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   */\n  _onPaintProfilerRequested(event) {\n    const selection = /** @type {!LayerViewer.LayerViewHost.Selection} */ (event.data);\n    this._layers3DView.snapshotForSelection(selection).then(snapshotWithRect => {\n      if (snapshotWithRect) {\n        this._showPaintProfilerCallback(snapshotWithRect.snapshot);\n      }\n    });\n  }\n\n  _update() {\n    if (this._frameLayerTree) {\n      this._frameLayerTree.layerTreePromise().then(layerTree => this._layerViewHost.setLayerTree(layerTree));\n    }\n  }\n}\n"]}
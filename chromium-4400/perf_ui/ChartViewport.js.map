{"version":3,"file":"ChartViewport.js","sourceRoot":"","sources":["../../../../../front_end/perf_ui/ChartViewport.js"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2016 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';\nimport * as Platform from '../platform/platform.js';\nimport * as UI from '../ui/ui.js';\n\nimport {MinimalTimeWindowMs} from './FlameChart.js';\n\n/**\n * @interface\n */\nexport class ChartViewportDelegate {\n  /**\n   * @param {number} startTime\n   * @param {number} endTime\n   * @param {boolean} animate\n   */\n  windowChanged(startTime, endTime, animate) {\n  }\n\n  /**\n   * @param {number} startTime\n   * @param {number} endTime\n   */\n  updateRangeSelection(startTime, endTime) {\n  }\n\n  /**\n   * @param {number} width\n   * @param {number} height\n   */\n  setSize(width, height) {\n  }\n\n  update() {}\n}\n\nexport class ChartViewport extends UI.Widget.VBox {\n  /**\n   * @param {!ChartViewportDelegate} delegate\n   */\n  constructor(delegate) {\n    super();\n    this.registerRequiredCSS('perf_ui/chartViewport.css', {enableLegacyPatching: true});\n\n    this._delegate = delegate;\n\n    this.viewportElement = this.contentElement.createChild('div', 'fill');\n    this.viewportElement.addEventListener('mousemove', this._updateCursorPosition.bind(this), false);\n    this.viewportElement.addEventListener('mouseout', this._onMouseOut.bind(this), false);\n    this.viewportElement.addEventListener('wheel', this._onMouseWheel.bind(this), false);\n    this.viewportElement.addEventListener('keydown', this._onChartKeyDown.bind(this), false);\n    this.viewportElement.addEventListener('keyup', this._onChartKeyUp.bind(this), false);\n\n    UI.UIUtils.installDragHandle(\n        this.viewportElement, this._startDragging.bind(this), this._dragging.bind(this), this._endDragging.bind(this),\n        '-webkit-grabbing', null);\n    UI.UIUtils.installDragHandle(\n        this.viewportElement, this._startRangeSelection.bind(this), this._rangeSelectionDragging.bind(this),\n        this._endRangeSelection.bind(this), 'text', null);\n\n    this._alwaysShowVerticalScroll = false;\n    this._rangeSelectionEnabled = true;\n    this._vScrollElement = this.contentElement.createChild('div', 'chart-viewport-v-scroll');\n    this._vScrollContent = this._vScrollElement.createChild('div');\n    this._vScrollElement.addEventListener('scroll', this._onScroll.bind(this), false);\n\n    this._selectionOverlay = this.contentElement.createChild('div', 'chart-viewport-selection-overlay hidden');\n    this._selectedTimeSpanLabel = this._selectionOverlay.createChild('div', 'time-span');\n\n    this._cursorElement = this.contentElement.createChild('div', 'chart-cursor-element hidden');\n\n    this.reset();\n\n    /** @type {boolean} */\n    this._isDragging;\n\n    /** @type {number} */\n    this._totalHeight;\n\n    /** @type {number} */\n    this._offsetHeight;\n\n    /** @type {number} */\n    this._vScrollElement.scrollTop;\n\n    /** @type {number} */\n    this._scrollTop;\n\n    /** @type {number|null} */\n    this._rangeSelectionStart = null;\n\n    /** @type {number|null} */\n    this._rangeSelectionEnd = null;\n\n    /** @type {number} */\n    this._dragStartPointX;\n\n    /** @type {number} */\n    this._dragStartPointY;\n\n    /** @type {number} */\n    this._dragStartScrollTop;\n\n    /** @type {number} */\n    this._visibleLeftTime;\n\n    /** @type {number} */\n    this._visibleRightTime;\n\n    /** @type {number} */\n    this._offsetWidth;\n\n    /** @type {number} */\n    this._targetLeftTime;\n\n    /** @type {number} */\n    this._targetRightTime;\n\n    /** @type {number} */\n    this._selectionOffsetShiftX;\n\n    /** @type {number} */\n    this._selectionOffsetShiftY;\n\n    /** @type {number|null} */\n    this._selectionStartX;\n\n    /** @type {number} */\n    this._lastMouseOffsetX;\n\n    /** @type {number} */\n    this._minimumBoundary;\n\n    /** @type {number} */\n    this._totalTime;\n  }\n\n  alwaysShowVerticalScroll() {\n    this._alwaysShowVerticalScroll = true;\n    this._vScrollElement.classList.add('always-show-scrollbar');\n  }\n\n  disableRangeSelection() {\n    this._rangeSelectionEnabled = false;\n    this._rangeSelectionStart = null;\n    this._rangeSelectionEnd = null;\n    this._updateRangeSelectionOverlay();\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isDragging() {\n    return this._isDragging;\n  }\n\n  /**\n   * @override\n   * @return {!Array<!Element>}\n   */\n  elementsToRestoreScrollPositionsFor() {\n    return [this._vScrollElement];\n  }\n\n  _updateScrollBar() {\n    const showScroll = this._alwaysShowVerticalScroll || this._totalHeight > this._offsetHeight;\n    if (this._vScrollElement.classList.contains('hidden') !== showScroll) {\n      return;\n    }\n    this._vScrollElement.classList.toggle('hidden', !showScroll);\n    this._updateContentElementSize();\n  }\n\n  /**\n   * @override\n   */\n  onResize() {\n    this._updateScrollBar();\n    this._updateContentElementSize();\n    this.scheduleUpdate();\n  }\n\n  reset() {\n    this._vScrollElement.scrollTop = 0;\n    this._scrollTop = 0;\n    this._rangeSelectionStart = null;\n    this._rangeSelectionEnd = null;\n    this._isDragging = false;\n    this._dragStartPointX = 0;\n    this._dragStartPointY = 0;\n    this._dragStartScrollTop = 0;\n    this._visibleLeftTime = 0;\n    this._visibleRightTime = 0;\n    this._offsetWidth = 0;\n    this._offsetHeight = 0;\n    this._totalHeight = 0;\n    this._targetLeftTime = 0;\n    this._targetRightTime = 0;\n    this._updateContentElementSize();\n  }\n\n  _updateContentElementSize() {\n    let offsetWidth = this._vScrollElement.offsetLeft;\n    if (!offsetWidth) {\n      offsetWidth = this.contentElement.offsetWidth;\n    }\n    this._offsetWidth = offsetWidth;\n    this._offsetHeight = this.contentElement.offsetHeight;\n    this._delegate.setSize(this._offsetWidth, this._offsetHeight);\n  }\n\n  /**\n   * @param {number} totalHeight\n   */\n  setContentHeight(totalHeight) {\n    this._totalHeight = totalHeight;\n    this._vScrollContent.style.height = totalHeight + 'px';\n    this._updateScrollBar();\n    this._updateContentElementSize();\n    if (this._scrollTop + this._offsetHeight <= totalHeight) {\n      return;\n    }\n    this._scrollTop = Math.max(0, totalHeight - this._offsetHeight);\n    this._vScrollElement.scrollTop = this._scrollTop;\n  }\n\n  /**\n   * @param {number} offset\n   * @param {number=} height\n   */\n  setScrollOffset(offset, height) {\n    height = height || 0;\n    if (this._vScrollElement.scrollTop > offset) {\n      this._vScrollElement.scrollTop = offset;\n    } else if (this._vScrollElement.scrollTop < offset - this._offsetHeight + height) {\n      this._vScrollElement.scrollTop = offset - this._offsetHeight + height;\n    }\n  }\n\n  /**\n   * @return {number}\n   */\n  scrollOffset() {\n    return this._vScrollElement.scrollTop;\n  }\n\n  /**\n   * @return {number}\n   */\n  chartHeight() {\n    return this._offsetHeight;\n  }\n\n  /**\n   * @param {number} zeroTime\n   * @param {number} totalTime\n   */\n  setBoundaries(zeroTime, totalTime) {\n    this._minimumBoundary = zeroTime;\n    this._totalTime = totalTime;\n  }\n\n  /**\n   * @param {!Event} e\n   */\n  _onMouseWheel(e) {\n    const wheelEvent = /** @type {!WheelEvent} */ (e);\n    const doZoomInstead = wheelEvent.shiftKey !==\n        (Common.Settings.Settings.instance().moduleSetting('flamechartMouseWheelAction').get() === 'zoom');\n    const panVertically = !doZoomInstead && (wheelEvent.deltaY || Math.abs(wheelEvent.deltaX) === 53);\n    const panHorizontally = doZoomInstead && Math.abs(wheelEvent.deltaX) > Math.abs(wheelEvent.deltaY);\n    if (panVertically) {\n      this._vScrollElement.scrollTop += (wheelEvent.deltaY || wheelEvent.deltaX) / 53 * this._offsetHeight / 8;\n    } else if (panHorizontally) {\n      this._handlePanGesture(wheelEvent.deltaX, /* animate */ true);\n    } else {  // Zoom.\n      const wheelZoomSpeed = 1 / 53;\n      this._handleZoomGesture(Math.pow(1.2, (wheelEvent.deltaY || wheelEvent.deltaX) * wheelZoomSpeed) - 1);\n    }\n\n    // Block swipe gesture.\n    e.consume(true);\n  }\n\n  /**\n   * @param {!MouseEvent} event\n   * @return {boolean}\n   */\n  _startDragging(event) {\n    if (event.shiftKey) {\n      return false;\n    }\n    this._isDragging = true;\n    this._dragStartPointX = event.pageX;\n    this._dragStartPointY = event.pageY;\n    this._dragStartScrollTop = this._vScrollElement.scrollTop;\n    this.viewportElement.style.cursor = '';\n    return true;\n  }\n\n  /**\n   * @param {!MouseEvent} event\n   */\n  _dragging(event) {\n    const pixelShift = this._dragStartPointX - event.pageX;\n    this._dragStartPointX = event.pageX;\n    this._handlePanGesture(pixelShift);\n    const pixelScroll = this._dragStartPointY - event.pageY;\n    this._vScrollElement.scrollTop = this._dragStartScrollTop + pixelScroll;\n  }\n\n  _endDragging() {\n    this._isDragging = false;\n  }\n\n  /**\n   * @param {!MouseEvent} event\n   * @return {boolean}\n   */\n  _startRangeSelection(event) {\n    if (!event.shiftKey || !this._rangeSelectionEnabled) {\n      return false;\n    }\n    this._isDragging = true;\n    this._selectionOffsetShiftX = event.offsetX - event.pageX;\n    this._selectionOffsetShiftY = event.offsetY - event.pageY;\n    this._selectionStartX = event.offsetX;\n    const style = this._selectionOverlay.style;\n    style.left = this._selectionStartX + 'px';\n    style.width = '1px';\n    this._selectedTimeSpanLabel.textContent = '';\n    this._selectionOverlay.classList.remove('hidden');\n    return true;\n  }\n\n  _endRangeSelection() {\n    this._isDragging = false;\n    this._selectionStartX = null;\n  }\n\n  hideRangeSelection() {\n    this._selectionOverlay.classList.add('hidden');\n    this._rangeSelectionStart = null;\n    this._rangeSelectionEnd = null;\n  }\n\n  /**\n   * @param {number} startTime\n   * @param {number} endTime\n   */\n  setRangeSelection(startTime, endTime) {\n    if (!this._rangeSelectionEnabled) {\n      return;\n    }\n    this._rangeSelectionStart = Math.min(startTime, endTime);\n    this._rangeSelectionEnd = Math.max(startTime, endTime);\n    this._updateRangeSelectionOverlay();\n    this._delegate.updateRangeSelection(this._rangeSelectionStart, this._rangeSelectionEnd);\n  }\n\n  /**\n   * @param {!Event} event\n   */\n  onClick(event) {\n    const mouseEvent = /** @type {!MouseEvent} */ (event);\n    const time = this.pixelToTime(mouseEvent.offsetX);\n    if (this._rangeSelectionStart !== null && this._rangeSelectionEnd !== null && time >= this._rangeSelectionStart &&\n        time <= this._rangeSelectionEnd) {\n      return;\n    }\n    this.hideRangeSelection();\n  }\n\n  /**\n   * @param {!MouseEvent} event\n   */\n  _rangeSelectionDragging(event) {\n    const x = Platform.NumberUtilities.clamp(event.pageX + this._selectionOffsetShiftX, 0, this._offsetWidth);\n    const start = this.pixelToTime(this._selectionStartX || 0);\n    const end = this.pixelToTime(x);\n    this.setRangeSelection(start, end);\n  }\n\n  _updateRangeSelectionOverlay() {\n    const _rangeSelectionStart = this._rangeSelectionStart || 0;\n    const _rangeSelectionEnd = this._rangeSelectionEnd || 0;\n    const /** @const */ margin = 100;\n    const left =\n        Platform.NumberUtilities.clamp(this.timeToPosition(_rangeSelectionStart), -margin, this._offsetWidth + margin);\n    const right =\n        Platform.NumberUtilities.clamp(this.timeToPosition(_rangeSelectionEnd), -margin, this._offsetWidth + margin);\n    const style = this._selectionOverlay.style;\n    style.left = left + 'px';\n    style.width = (right - left) + 'px';\n    const timeSpan = _rangeSelectionEnd - _rangeSelectionStart;\n    this._selectedTimeSpanLabel.textContent = Number.preciseMillisToString(timeSpan, 2);\n  }\n\n  _onScroll() {\n    this._scrollTop = this._vScrollElement.scrollTop;\n    this.scheduleUpdate();\n  }\n\n  _onMouseOut() {\n    this._lastMouseOffsetX = -1;\n    this._showCursor(false);\n  }\n\n  /**\n   * @param {!Event} e\n   */\n  _updateCursorPosition(e) {\n    const mouseEvent = /** @type {!MouseEvent} */ (e);\n    this._showCursor(mouseEvent.shiftKey);\n    this._cursorElement.style.left = mouseEvent.offsetX + 'px';\n    this._lastMouseOffsetX = mouseEvent.offsetX;\n  }\n\n  /**\n   * @param {number} x\n   * @return {number}\n   */\n  pixelToTime(x) {\n    return this.pixelToTimeOffset(x) + this._visibleLeftTime;\n  }\n\n  /**\n   * @param {number} x\n   * @return {number}\n   */\n  pixelToTimeOffset(x) {\n    return x * (this._visibleRightTime - this._visibleLeftTime) / this._offsetWidth;\n  }\n\n  /**\n   * @param {number} time\n   * @return {number}\n   */\n  timeToPosition(time) {\n    return Math.floor(\n        (time - this._visibleLeftTime) / (this._visibleRightTime - this._visibleLeftTime) * this._offsetWidth);\n  }\n\n  /**\n   * @return {number}\n   */\n  timeToPixel() {\n    return this._offsetWidth / (this._visibleRightTime - this._visibleLeftTime);\n  }\n\n  /**\n   * @param {boolean} visible\n   */\n  _showCursor(visible) {\n    this._cursorElement.classList.toggle('hidden', !visible || this._isDragging);\n  }\n\n  /**\n   * @param {!Event} e\n   */\n  _onChartKeyDown(e) {\n    const mouseEvent = /** @type {!MouseEvent} */ (e);\n    this._showCursor(mouseEvent.shiftKey);\n    this._handleZoomPanKeys(e);\n  }\n\n  /**\n   * @param {!Event} e\n   */\n  _onChartKeyUp(e) {\n    const mouseEvent = /** @type {!MouseEvent} */ (e);\n    this._showCursor(mouseEvent.shiftKey);\n  }\n\n  /**\n   * @param {!Event} e\n   */\n  _handleZoomPanKeys(e) {\n    if (!UI.KeyboardShortcut.KeyboardShortcut.hasNoModifiers(e)) {\n      return;\n    }\n    const keyboardEvent = /** @type {!KeyboardEvent} */ (e);\n    const zoomFactor = keyboardEvent.shiftKey ? 0.8 : 0.3;\n    const panOffset = keyboardEvent.shiftKey ? 320 : 160;\n    switch (keyboardEvent.code) {\n      case 'KeyA':\n        this._handlePanGesture(-panOffset, /* animate */ true);\n        break;\n      case 'KeyD':\n        this._handlePanGesture(panOffset, /* animate */ true);\n        break;\n      case 'KeyW':\n        this._handleZoomGesture(-zoomFactor);\n        break;\n      case 'KeyS':\n        this._handleZoomGesture(zoomFactor);\n        break;\n      default:\n        return;\n    }\n    e.consume(true);\n  }\n\n  /**\n   * @param {number} zoom\n   */\n  _handleZoomGesture(zoom) {\n    const bounds = {left: this._targetLeftTime, right: this._targetRightTime};\n    const cursorTime = this.pixelToTime(this._lastMouseOffsetX);\n    bounds.left += (bounds.left - cursorTime) * zoom;\n    bounds.right += (bounds.right - cursorTime) * zoom;\n    this._requestWindowTimes(bounds, /* animate */ true);\n  }\n\n  /**\n   * @param {number} offset\n   * @param {boolean=} animate\n   */\n  _handlePanGesture(offset, animate) {\n    const bounds = {left: this._targetLeftTime, right: this._targetRightTime};\n    const timeOffset = Platform.NumberUtilities.clamp(\n        this.pixelToTimeOffset(offset), this._minimumBoundary - bounds.left,\n        this._totalTime + this._minimumBoundary - bounds.right);\n    bounds.left += timeOffset;\n    bounds.right += timeOffset;\n    this._requestWindowTimes(bounds, Boolean(animate));\n  }\n\n  /**\n   * @param {!{left: number, right: number}} bounds\n   * @param {boolean} animate\n   */\n  _requestWindowTimes(bounds, animate) {\n    const maxBound = this._minimumBoundary + this._totalTime;\n    if (bounds.left < this._minimumBoundary) {\n      bounds.right = Math.min(bounds.right + this._minimumBoundary - bounds.left, maxBound);\n      bounds.left = this._minimumBoundary;\n    } else if (bounds.right > maxBound) {\n      bounds.left = Math.max(bounds.left - bounds.right + maxBound, this._minimumBoundary);\n      bounds.right = maxBound;\n    }\n    if (bounds.right - bounds.left < MinimalTimeWindowMs) {\n      return;\n    }\n    this._delegate.windowChanged(bounds.left, bounds.right, animate);\n  }\n\n  scheduleUpdate() {\n    if (this._updateTimerId || this._cancelWindowTimesAnimation) {\n      return;\n    }\n    this._updateTimerId = this.element.window().requestAnimationFrame(() => {\n      this._updateTimerId = 0;\n      this._update();\n    });\n  }\n\n  _update() {\n    this._updateRangeSelectionOverlay();\n    this._delegate.update();\n  }\n\n  /**\n   * @param {number} startTime\n   * @param {number} endTime\n   * @param {boolean=} animate\n   */\n  setWindowTimes(startTime, endTime, animate) {\n    if (startTime === this._targetLeftTime && endTime === this._targetRightTime) {\n      return;\n    }\n    if (!animate || this._visibleLeftTime === 0 || this._visibleRightTime === Infinity ||\n        (startTime === 0 && endTime === Infinity) || (startTime === Infinity && endTime === Infinity)) {\n      // Skip animation, move instantly.\n      this._targetLeftTime = startTime;\n      this._targetRightTime = endTime;\n      this._visibleLeftTime = startTime;\n      this._visibleRightTime = endTime;\n      this.scheduleUpdate();\n      return;\n    }\n    if (this._cancelWindowTimesAnimation) {\n      this._cancelWindowTimesAnimation();\n      this._visibleLeftTime = this._targetLeftTime;\n      this._visibleRightTime = this._targetRightTime;\n    }\n    this._targetLeftTime = startTime;\n    this._targetRightTime = endTime;\n    this._cancelWindowTimesAnimation = UI.UIUtils.animateFunction(\n        this.element.window(), animateWindowTimes.bind(this),\n        [{from: this._visibleLeftTime, to: startTime}, {from: this._visibleRightTime, to: endTime}], 100, () => {\n          this._cancelWindowTimesAnimation = null;\n        });\n\n    /**\n     * @param {number} startTime\n     * @param {number} endTime\n     * @this {ChartViewport}\n     */\n    function animateWindowTimes(startTime, endTime) {\n      this._visibleLeftTime = startTime;\n      this._visibleRightTime = endTime;\n      this._update();\n    }\n  }\n\n  /**\n   * @return {number}\n   */\n  windowLeftTime() {\n    return this._visibleLeftTime;\n  }\n\n  /**\n   * @return {number}\n   */\n  windowRightTime() {\n    return this._visibleRightTime;\n  }\n}\n"]}
{"version":3,"file":"ConsoleContextSelector.js","sourceRoot":"","sources":["../../../../../front_end/console/ConsoleContextSelector.js"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2015 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';\nimport * as Platform from '../platform/platform.js';\nimport {ls} from '../platform/platform.js';\nimport * as SDK from '../sdk/sdk.js';\nimport * as UI from '../ui/ui.js';\n\n/**\n * @implements {SDK.SDKModel.SDKModelObserver<!SDK.RuntimeModel.RuntimeModel>}\n * @implements {UI.SoftDropDown.Delegate<!SDK.RuntimeModel.ExecutionContext>}\n */\nexport class ConsoleContextSelector {\n  constructor() {\n    /** @type {!UI.ListModel.ListModel<!SDK.RuntimeModel.ExecutionContext>} */\n    this._items = new UI.ListModel.ListModel();\n    /** @type {!UI.SoftDropDown.SoftDropDown<!SDK.RuntimeModel.ExecutionContext>} */\n    this._dropDown = new UI.SoftDropDown.SoftDropDown(this._items, this);\n    this._dropDown.setRowHeight(36);\n    this._toolbarItem = new UI.Toolbar.ToolbarItem(this._dropDown.element);\n    this._toolbarItem.setEnabled(false);\n    this._toolbarItem.setTitle(ls`JavaScript context: Not selected`);\n    this._items.addEventListener(\n        UI.ListModel.Events.ItemsReplaced, () => this._toolbarItem.setEnabled(Boolean(this._items.length)));\n\n    this._toolbarItem.element.classList.add('toolbar-has-dropdown');\n\n    SDK.SDKModel.TargetManager.instance().addModelListener(\n        SDK.RuntimeModel.RuntimeModel, SDK.RuntimeModel.Events.ExecutionContextCreated, this._onExecutionContextCreated,\n        this);\n    SDK.SDKModel.TargetManager.instance().addModelListener(\n        SDK.RuntimeModel.RuntimeModel, SDK.RuntimeModel.Events.ExecutionContextChanged, this._onExecutionContextChanged,\n        this);\n    SDK.SDKModel.TargetManager.instance().addModelListener(\n        SDK.RuntimeModel.RuntimeModel, SDK.RuntimeModel.Events.ExecutionContextDestroyed,\n        this._onExecutionContextDestroyed, this);\n    SDK.SDKModel.TargetManager.instance().addModelListener(\n        SDK.ResourceTreeModel.ResourceTreeModel, SDK.ResourceTreeModel.Events.FrameNavigated, this._frameNavigated,\n        this);\n\n    UI.Context.Context.instance().addFlavorChangeListener(\n        SDK.RuntimeModel.ExecutionContext, this._executionContextChangedExternally, this);\n    UI.Context.Context.instance().addFlavorChangeListener(\n        SDK.DebuggerModel.CallFrame, this._callFrameSelectedInUI, this);\n    SDK.SDKModel.TargetManager.instance().observeModels(SDK.RuntimeModel.RuntimeModel, this);\n    SDK.SDKModel.TargetManager.instance().addModelListener(\n        SDK.DebuggerModel.DebuggerModel, SDK.DebuggerModel.Events.CallFrameSelected, this._callFrameSelectedInModel,\n        this);\n  }\n\n  /**\n   * @return {!UI.Toolbar.ToolbarItem}\n   */\n  toolbarItem() {\n    return this._toolbarItem;\n  }\n\n  /**\n   * @override\n   * @param {?SDK.RuntimeModel.ExecutionContext} from\n   * @param {?SDK.RuntimeModel.ExecutionContext} to\n   * @param {?Element} fromElement\n   * @param {?Element} toElement\n   */\n  highlightedItemChanged(from, to, fromElement, toElement) {\n    SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n    if (to && to.frameId) {\n      const frame = SDK.FrameManager.FrameManager.instance().getFrame(to.frameId);\n      if (frame && !frame.isTopFrame()) {\n        frame.highlight();\n      }\n    }\n    if (fromElement) {\n      fromElement.classList.remove('highlighted');\n    }\n    if (toElement) {\n      toElement.classList.add('highlighted');\n    }\n  }\n\n  /**\n   * @override\n   * @param {!SDK.RuntimeModel.ExecutionContext} executionContext\n   * @return {string}\n   */\n  titleFor(executionContext) {\n    const target = executionContext.target();\n    const maybeLabel = executionContext.label();\n    let label = maybeLabel ? target.decorateLabel(maybeLabel) : '';\n    if (executionContext.frameId) {\n      const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n      const frame = resourceTreeModel && resourceTreeModel.frameForId(executionContext.frameId);\n      if (frame) {\n        label = label || frame.displayName();\n      }\n    }\n    label = label || executionContext.origin;\n\n    return label;\n  }\n\n  /**\n   * @param {!SDK.RuntimeModel.ExecutionContext} executionContext\n   * @return {number}\n   */\n  _depthFor(executionContext) {\n    let target = executionContext.target();\n    let depth = 0;\n    if (!executionContext.isDefault) {\n      depth++;\n    }\n    if (executionContext.frameId) {\n      let frame = SDK.FrameManager.FrameManager.instance().getFrame(executionContext.frameId);\n      while (frame) {\n        frame = frame.parentFrame();\n        if (frame) {\n          depth++;\n          target = frame.resourceTreeModel().target();\n        }\n      }\n    }\n    let targetDepth = 0;\n    let parentTarget = target.parentTarget();\n    // Special casing service workers to be top-level.\n    while (parentTarget && target.type() !== SDK.SDKModel.Type.ServiceWorker) {\n      targetDepth++;\n      target = parentTarget;\n      parentTarget = target.parentTarget();\n    }\n    depth += targetDepth;\n    return depth;\n  }\n\n  /**\n   * @param {!SDK.RuntimeModel.ExecutionContext} executionContext\n   */\n  _executionContextCreated(executionContext) {\n    this._items.insertWithComparator(executionContext, executionContext.runtimeModel.executionContextComparator());\n\n    if (executionContext === UI.Context.Context.instance().flavor(SDK.RuntimeModel.ExecutionContext)) {\n      this._dropDown.selectItem(executionContext);\n    }\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   */\n  _onExecutionContextCreated(event) {\n    const executionContext = /** @type {!SDK.RuntimeModel.ExecutionContext} */ (event.data);\n    this._executionContextCreated(executionContext);\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   */\n  _onExecutionContextChanged(event) {\n    const executionContext = /** @type {!SDK.RuntimeModel.ExecutionContext} */ (event.data);\n    if (this._items.indexOf(executionContext) === -1) {\n      return;\n    }\n    this._executionContextDestroyed(executionContext);\n    this._executionContextCreated(executionContext);\n  }\n\n  /**\n   * @param {!SDK.RuntimeModel.ExecutionContext} executionContext\n   */\n  _executionContextDestroyed(executionContext) {\n    const index = this._items.indexOf(executionContext);\n    if (index === -1) {\n      return;\n    }\n    this._items.remove(index);\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   */\n  _onExecutionContextDestroyed(event) {\n    const executionContext = /** @type {!SDK.RuntimeModel.ExecutionContext} */ (event.data);\n    this._executionContextDestroyed(executionContext);\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   */\n  _executionContextChangedExternally(event) {\n    const executionContext = /** @type {?SDK.RuntimeModel.ExecutionContext} */ (event.data);\n    this._dropDown.selectItem(executionContext);\n  }\n\n  /**\n   * @param {?SDK.RuntimeModel.ExecutionContext} executionContext\n   * @return {boolean}\n   */\n  _isTopContext(executionContext) {\n    if (!executionContext || !executionContext.isDefault) {\n      return false;\n    }\n    const resourceTreeModel = executionContext.target().model(SDK.ResourceTreeModel.ResourceTreeModel);\n    const frame =\n        executionContext.frameId && resourceTreeModel && resourceTreeModel.frameForId(executionContext.frameId);\n    if (!frame) {\n      return false;\n    }\n    return frame.isTopFrame();\n  }\n\n  /**\n   * @return {boolean}\n   */\n  _hasTopContext() {\n    return this._items.some(executionContext => this._isTopContext(executionContext));\n  }\n\n  /**\n   * @override\n   * @param {!SDK.RuntimeModel.RuntimeModel} runtimeModel\n   */\n  modelAdded(runtimeModel) {\n    runtimeModel.executionContexts().forEach(this._executionContextCreated, this);\n  }\n\n  /**\n   * @override\n   * @param {!SDK.RuntimeModel.RuntimeModel} runtimeModel\n   */\n  modelRemoved(runtimeModel) {\n    for (let i = this._items.length - 1; i >= 0; i--) {\n      if (this._items.at(i).runtimeModel === runtimeModel) {\n        this._executionContextDestroyed(this._items.at(i));\n      }\n    }\n  }\n\n  /**\n   * @override\n   * @param {!SDK.RuntimeModel.ExecutionContext} item\n   * @return {!Element}\n   */\n  createElementForItem(item) {\n    const element = document.createElement('div');\n    const shadowRoot = UI.Utils.createShadowRootWithCoreStyles(\n        element,\n        {cssFile: 'console/consoleContextSelector.css', enableLegacyPatching: true, delegatesFocus: undefined});\n    const title = shadowRoot.createChild('div', 'title');\n    UI.UIUtils.createTextChild(title, Platform.StringUtilities.trimEndWithMaxLength(this.titleFor(item), 100));\n    const subTitle = shadowRoot.createChild('div', 'subtitle');\n    UI.UIUtils.createTextChild(subTitle, this._subtitleFor(item));\n    element.style.paddingLeft = (8 + this._depthFor(item) * 15) + 'px';\n    return element;\n  }\n\n  /**\n   * @param {!SDK.RuntimeModel.ExecutionContext} executionContext\n   * @return {string}\n   */\n  _subtitleFor(executionContext) {\n    const target = executionContext.target();\n    /** @type {?SDK.ResourceTreeModel.ResourceTreeFrame} */\n    let frame = null;\n    if (executionContext.frameId) {\n      const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n      frame = resourceTreeModel && resourceTreeModel.frameForId(executionContext.frameId);\n    }\n    if (executionContext.origin.startsWith('chrome-extension://')) {\n      return Common.UIString.UIString('Extension');\n    }\n    const sameTargetParentFrame = frame && frame.sameTargetParentFrame();\n    // TODO(crbug.com/1159332): Understand why condition involves the sameTargetParentFrame.\n    if (!frame || !sameTargetParentFrame || sameTargetParentFrame.securityOrigin !== executionContext.origin) {\n      const url = Common.ParsedURL.ParsedURL.fromString(executionContext.origin);\n      if (url) {\n        return url.domain();\n      }\n    }\n\n    if (frame && frame.securityOrigin) {\n      const domain = new Common.ParsedURL.ParsedURL(frame.securityOrigin).domain();\n      if (domain) {\n        return domain;\n      }\n    }\n    return Common.UIString.UIString('IFrame');\n  }\n\n  /**\n   * @override\n   * @param {!SDK.RuntimeModel.ExecutionContext} item\n   * @return {boolean}\n   */\n  isItemSelectable(item) {\n    const callFrame = item.debuggerModel.selectedCallFrame();\n    const callFrameContext = callFrame && callFrame.script.executionContext();\n    return !callFrameContext || item === callFrameContext;\n  }\n\n  /**\n   * @override\n   * @param {?SDK.RuntimeModel.ExecutionContext} item\n   */\n  itemSelected(item) {\n    this._toolbarItem.element.classList.toggle('warning', !this._isTopContext(item) && this._hasTopContext());\n    const title = item ? ls`JavaScript context: ${this.titleFor(item)}` : ls`JavaScript context: Not selected`;\n    this._toolbarItem.setTitle(title);\n    UI.Context.Context.instance().setFlavor(SDK.RuntimeModel.ExecutionContext, item);\n  }\n\n  _callFrameSelectedInUI() {\n    const callFrame = UI.Context.Context.instance().flavor(SDK.DebuggerModel.CallFrame);\n    const callFrameContext = callFrame && callFrame.script.executionContext();\n    if (callFrameContext) {\n      UI.Context.Context.instance().setFlavor(SDK.RuntimeModel.ExecutionContext, callFrameContext);\n    }\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   */\n  _callFrameSelectedInModel(event) {\n    const debuggerModel = /** @type {!SDK.DebuggerModel.DebuggerModel} */ (event.data);\n    for (const executionContext of this._items) {\n      if (executionContext.debuggerModel === debuggerModel) {\n        this._dropDown.refreshItem(executionContext);\n      }\n    }\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   */\n  _frameNavigated(event) {\n    const frame = /** @type {!SDK.ResourceTreeModel.ResourceTreeFrame} */ (event.data);\n    const runtimeModel = frame.resourceTreeModel().target().model(SDK.RuntimeModel.RuntimeModel);\n    if (!runtimeModel) {\n      return;\n    }\n    for (const executionContext of runtimeModel.executionContexts()) {\n      if (frame.id === executionContext.frameId) {\n        this._dropDown.refreshItem(executionContext);\n      }\n    }\n  }\n}\n"]}
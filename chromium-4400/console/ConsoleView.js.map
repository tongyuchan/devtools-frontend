{"version":3,"file":"ConsoleView.js","sourceRoot":"","sources":["../../../../../front_end/console/ConsoleView.js"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2009 Joseph Pecoraro\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Bindings from '../bindings/bindings.js';\nimport * as BrowserSDK from '../browser_sdk/browser_sdk.js';\nimport * as Common from '../common/common.js';\nimport * as Components from '../components/components.js';\nimport * as Host from '../host/host.js';\nimport * as Platform from '../platform/platform.js';\nimport {ls} from '../platform/platform.js';\nimport * as SDK from '../sdk/sdk.js';\nimport * as TextUtils from '../text_utils/text_utils.js';\nimport * as UI from '../ui/ui.js';\n\nimport {ConsoleContextSelector} from './ConsoleContextSelector.js';\nimport {ConsoleFilter, FilterType} from './ConsoleFilter.js';\nimport {ConsolePinPane} from './ConsolePinPane.js';\nimport {ConsolePrompt, Events as ConsolePromptEvents} from './ConsolePrompt.js';\nimport {ConsoleSidebar, Events} from './ConsoleSidebar.js';\nimport {ConsoleCommand, ConsoleCommandResult, ConsoleGroupViewMessage, ConsoleTableMessageView, ConsoleViewMessage, getMessageForElement, MaxLengthForLinks} from './ConsoleViewMessage.js';  // eslint-disable-line no-unused-vars\nimport {ConsoleViewport, ConsoleViewportElement, ConsoleViewportProvider} from './ConsoleViewport.js';  // eslint-disable-line no-unused-vars\n\n/** @type {!ConsoleView} */\nlet consoleViewInstance;\n\n/**\n * This is a proper `ConsoleViewportElement` for the issue banner which can be inserted into the\n * `ConsoleViewport`. To make it play nicely, it is fakes being {ConsoleViewMessage} by implementing\n * `fastHeight` and `toExportString`.\n * @implements {ConsoleViewportElement}\n */\nclass IssueMessage {\n  constructor() {\n    this._cachedIssueBarHeight = 0;\n    /** @type {?UI.Infobar.Infobar} */\n    this._issueBar = null;\n  }\n\n  /**\n   * @override\n   */\n  willHide() {\n    this._cachedIssueBarHeight = this._issueBar && this._issueBar.element.offsetHeight || 0;\n  }\n\n  /**\n   * @override\n   */\n  wasShown() {\n  }\n\n  /**\n   * @override\n   */\n  element() {\n    if (!this._issueBar) {\n      const issueBarAction = /** @type {!UI.Infobar.InfobarAction} */ ({\n        text: ls`View issues`,\n        highlight: false,\n        delegate: () => {\n          Host.userMetrics.issuesPanelOpenedFrom(Host.UserMetrics.IssueOpener.ConsoleInfoBar);\n          UI.ViewManager.ViewManager.instance().showView('issues-pane');\n        },\n        dismiss: false,\n      });\n      this._issueBar = new UI.Infobar.Infobar(\n          UI.Infobar.Type.Issue, ls`Some messages have been moved to the Issues panel.`, [issueBarAction]);\n      this._issueBar.element.tabIndex = -1;\n      this._issueBar.element.classList.add('console-message-wrapper');\n    }\n    return this._issueBar.element;\n  }\n\n  /**\n   * @override\n   */\n  focusLastChildOrSelf() {\n    if (!this._issueBar) {\n      return;\n    }\n    this._issueBar.element.focus();\n  }\n\n  fastHeight() {\n    return this._cachedIssueBarHeight || 37;\n  }\n\n  toExportString() {\n    return ls`Some messages have been moved to the Issues panel.`;\n  }\n}\n\n/**\n * @implements {UI.SearchableView.Searchable}\n * @implements {ConsoleViewportProvider}\n */\nexport class ConsoleView extends UI.Widget.VBox {\n  constructor() {\n    super();\n    this.setMinimumSize(0, 35);\n    this.registerRequiredCSS('console/consoleView.css', {enableLegacyPatching: true});\n    this.registerRequiredCSS('object_ui/objectValue.css', {enableLegacyPatching: true});\n\n    this._searchableView = new UI.SearchableView.SearchableView(this, null);\n    this._searchableView.element.classList.add('console-searchable-view');\n    this._searchableView.setPlaceholder(Common.UIString.UIString('Find string in logs'));\n    this._searchableView.setMinimalSearchQuerySize(0);\n    this._sidebar = new ConsoleSidebar();\n    this._sidebar.addEventListener(Events.FilterSelected, this._onFilterChanged.bind(this));\n    this._isSidebarOpen = false;\n    this._filter = new ConsoleViewFilter(this._onFilterChanged.bind(this));\n\n    this._consoleToolbarContainer = this.element.createChild('div', 'console-toolbar-container');\n    this._splitWidget = new UI.SplitWidget.SplitWidget(\n        true /* isVertical */, false /* secondIsSidebar */, 'console.sidebar.width', 100);\n    this._splitWidget.setMainWidget(this._searchableView);\n    this._splitWidget.setSidebarWidget(this._sidebar);\n    this._splitWidget.show(this.element);\n    this._splitWidget.hideSidebar();\n    this._splitWidget.enableShowModeSaving();\n    this._isSidebarOpen = this._splitWidget.showMode() === UI.SplitWidget.ShowMode.Both;\n    this._filter.setLevelMenuOverridden(this._isSidebarOpen);\n    this._splitWidget.addEventListener(UI.SplitWidget.Events.ShowModeChanged, event => {\n      this._isSidebarOpen = event.data === UI.SplitWidget.ShowMode.Both;\n      this._filter.setLevelMenuOverridden(this._isSidebarOpen);\n      this._onFilterChanged();\n    });\n    this._contentsElement = this._searchableView.element;\n    this.element.classList.add('console-view');\n\n    /** @type {!Array.<!ConsoleViewMessage>} */\n    this._visibleViewMessages = [];\n    this._hiddenByFilterCount = 0;\n    /** @type {!Set<!ConsoleViewMessage>} */\n    this._shouldBeHiddenCache = new Set();\n    /** @type {number} */\n    this._lastShownHiddenByFilterCount;\n    /** @type {number} */\n    this._currentMatchRangeIndex;\n    /** @type {?RegExp} */\n    this._searchRegex;\n\n    /** @type {!Map<string, !Array<!ConsoleViewMessage>>} */\n    this._groupableMessages = new Map();\n    /** @type {!Map<string, !ConsoleViewMessage>} */\n    this._groupableMessageTitle = new Map();\n    /** @type {!Map<number, function():void>} */\n    this._shortcuts = new Map();\n\n    /**\n     * @type {!Array.<!RegexMatchRange>}\n     */\n    this._regexMatchRanges = [];\n\n    this._consoleContextSelector = new ConsoleContextSelector();\n\n    this._filterStatusText = new UI.Toolbar.ToolbarText();\n    this._filterStatusText.element.classList.add('dimmed');\n    this._showSettingsPaneSetting =\n        Common.Settings.Settings.instance().createSetting('consoleShowSettingsToolbar', false);\n    this._showSettingsPaneButton = new UI.Toolbar.ToolbarSettingToggle(\n        this._showSettingsPaneSetting, 'largeicon-settings-gear', Common.UIString.UIString('Console settings'));\n    this._progressToolbarItem = new UI.Toolbar.ToolbarItem(document.createElement('div'));\n    this._groupSimilarSetting = Common.Settings.Settings.instance().moduleSetting('consoleGroupSimilar');\n    this._groupSimilarSetting.addChangeListener(() => this._updateMessageList());\n    const groupSimilarToggle = new UI.Toolbar.ToolbarSettingCheckbox(\n        this._groupSimilarSetting, Common.UIString.UIString('Group similar messages in console'));\n\n    const toolbar = new UI.Toolbar.Toolbar('console-main-toolbar', this._consoleToolbarContainer);\n    const rightToolbar = new UI.Toolbar.Toolbar('', this._consoleToolbarContainer);\n    toolbar.appendToolbarItem(this._splitWidget.createShowHideSidebarButton(ls`console sidebar`));\n    toolbar.appendToolbarItem(UI.Toolbar.Toolbar.createActionButton(\n        /** @type {!UI.ActionRegistration.Action }*/ (\n            UI.ActionRegistry.ActionRegistry.instance().action('console.clear'))));\n    toolbar.appendSeparator();\n    toolbar.appendToolbarItem(this._consoleContextSelector.toolbarItem());\n    toolbar.appendSeparator();\n    const liveExpressionButton = UI.Toolbar.Toolbar.createActionButton(\n        /** @type {!UI.ActionRegistration.Action }*/ (\n            UI.ActionRegistry.ActionRegistry.instance().action('console.create-pin')));\n    toolbar.appendToolbarItem(liveExpressionButton);\n    toolbar.appendSeparator();\n    toolbar.appendToolbarItem(this._filter._textFilterUI);\n    toolbar.appendToolbarItem(this._filter._levelMenuButton);\n    toolbar.appendToolbarItem(this._progressToolbarItem);\n    rightToolbar.appendSeparator();\n    rightToolbar.appendToolbarItem(this._filterStatusText);\n    rightToolbar.appendToolbarItem(this._showSettingsPaneButton);\n\n    this._preserveLogCheckbox = new UI.Toolbar.ToolbarSettingCheckbox(\n        Common.Settings.Settings.instance().moduleSetting('preserveConsoleLog'),\n        Common.UIString.UIString('Do not clear log on page reload / navigation'),\n        Common.UIString.UIString('Preserve log'));\n    this._hideNetworkMessagesCheckbox = new UI.Toolbar.ToolbarSettingCheckbox(\n        this._filter._hideNetworkMessagesSetting, this._filter._hideNetworkMessagesSetting.title(),\n        Common.UIString.UIString('Hide network'));\n    const filterByExecutionContextCheckbox = new UI.Toolbar.ToolbarSettingCheckbox(\n        this._filter._filterByExecutionContextSetting,\n        Common.UIString.UIString('Only show messages from the current context (top, iframe, worker, extension)'),\n        Common.UIString.UIString('Selected context only'));\n    const monitoringXHREnabledSetting = Common.Settings.Settings.instance().moduleSetting('monitoringXHREnabled');\n    this._timestampsSetting = Common.Settings.Settings.instance().moduleSetting('consoleTimestampsEnabled');\n    this._consoleHistoryAutocompleteSetting =\n        Common.Settings.Settings.instance().moduleSetting('consoleHistoryAutocomplete');\n\n    const settingsPane = new UI.Widget.HBox();\n    settingsPane.show(this._contentsElement);\n    settingsPane.element.classList.add('console-settings-pane');\n\n    UI.ARIAUtils.setAccessibleName(settingsPane.element, ls`Console settings`);\n    UI.ARIAUtils.markAsGroup(settingsPane.element);\n    const settingsToolbarLeft = new UI.Toolbar.Toolbar('', settingsPane.element);\n    settingsToolbarLeft.makeVertical();\n    settingsToolbarLeft.appendToolbarItem(this._hideNetworkMessagesCheckbox);\n    settingsToolbarLeft.appendToolbarItem(this._preserveLogCheckbox);\n    settingsToolbarLeft.appendToolbarItem(filterByExecutionContextCheckbox);\n    settingsToolbarLeft.appendToolbarItem(groupSimilarToggle);\n\n    const settingsToolbarRight = new UI.Toolbar.Toolbar('', settingsPane.element);\n    settingsToolbarRight.makeVertical();\n    settingsToolbarRight.appendToolbarItem(new UI.Toolbar.ToolbarSettingCheckbox(monitoringXHREnabledSetting));\n    const eagerEvalCheckbox = new UI.Toolbar.ToolbarSettingCheckbox(\n        Common.Settings.Settings.instance().moduleSetting('consoleEagerEval'), ls`Eagerly evaluate text in the prompt`);\n    settingsToolbarRight.appendToolbarItem(eagerEvalCheckbox);\n    settingsToolbarRight.appendToolbarItem(\n        new UI.Toolbar.ToolbarSettingCheckbox(this._consoleHistoryAutocompleteSetting));\n    const userGestureCheckbox = new UI.Toolbar.ToolbarSettingCheckbox(\n        Common.Settings.Settings.instance().moduleSetting('consoleUserActivationEval'));\n    settingsToolbarRight.appendToolbarItem(userGestureCheckbox);\n    if (!this._showSettingsPaneSetting.get()) {\n      settingsPane.element.classList.add('hidden');\n    }\n    this._showSettingsPaneSetting.addChangeListener(\n        () => settingsPane.element.classList.toggle('hidden', !this._showSettingsPaneSetting.get()));\n\n    this._pinPane = new ConsolePinPane(liveExpressionButton);\n    this._pinPane.element.classList.add('console-view-pinpane');\n    this._pinPane.show(this._contentsElement);\n    this._pinPane.element.addEventListener('keydown', event => {\n      if ((event.key === 'Enter' &&\n           UI.KeyboardShortcut.KeyboardShortcut.eventHasCtrlOrMeta(/** @type {!KeyboardEvent} */ (event))) ||\n          event.keyCode === UI.KeyboardShortcut.Keys.Esc.code) {\n        this._prompt.focus();\n        event.consume();\n      }\n    });\n\n    this._viewport = new ConsoleViewport(this);\n    this._viewport.setStickToBottom(true);\n    this._viewport.contentElement().classList.add('console-group', 'console-group-messages');\n    this._contentsElement.appendChild(this._viewport.element);\n    this._messagesElement = this._viewport.element;\n    this._messagesElement.id = 'console-messages';\n    this._messagesElement.classList.add('monospace');\n    this._messagesElement.addEventListener('click', this._messagesClicked.bind(this), false);\n    this._messagesElement.addEventListener('paste', this._messagesPasted.bind(this), true);\n    this._messagesElement.addEventListener('clipboard-paste', this._messagesPasted.bind(this), true);\n    UI.ARIAUtils.markAsGroup(this._messagesElement);\n\n    this._viewportThrottler = new Common.Throttler.Throttler(50);\n    this._pendingBatchResize = false;\n    /**\n     * @param {!Common.EventTarget.EventTargetEvent} e\n     */\n    this._onMessageResizedBound = e => {\n      this._onMessageResized(e);\n    };\n\n    this._topGroup = ConsoleGroup.createTopGroup();\n    this._currentGroup = this._topGroup;\n\n    this._promptElement = this._messagesElement.createChild('div', 'source-code');\n    this._promptElement.id = 'console-prompt';\n\n    // FIXME: This is a workaround for the selection machinery bug. See crbug.com/410899\n    const selectAllFixer = this._messagesElement.createChild('div', 'console-view-fix-select-all');\n    selectAllFixer.textContent = '.';\n    UI.ARIAUtils.markAsHidden(selectAllFixer);\n\n    this._registerShortcuts();\n\n    this._messagesElement.addEventListener('contextmenu', this._handleContextMenuEvent.bind(this), false);\n\n    this._linkifier = new Components.Linkifier.Linkifier(MaxLengthForLinks);\n\n    /** @type {!Array.<!ConsoleViewMessage>} */\n    this._consoleMessages = [];\n    this._viewMessageSymbol = Symbol('viewMessage');\n\n    this._consoleHistorySetting = Common.Settings.Settings.instance().createLocalSetting('consoleHistory', []);\n\n    this._prompt = new ConsolePrompt();\n    this._prompt.show(this._promptElement);\n    this._prompt.element.addEventListener('keydown', this._promptKeyDown.bind(this), true);\n    this._prompt.addEventListener(ConsolePromptEvents.TextChanged, this._promptTextChanged, this);\n\n    this._messagesElement.addEventListener('keydown', this._messagesKeyDown.bind(this), false);\n    this._prompt.element.addEventListener('focusin', () => {\n      if (this._isScrolledToBottom()) {\n        this._viewport.setStickToBottom(true);\n      }\n    });\n\n    this._consoleHistoryAutocompleteSetting.addChangeListener(this._consoleHistoryAutocompleteChanged, this);\n\n    const historyData = this._consoleHistorySetting.get();\n    this._prompt.history().setHistoryData(historyData);\n    this._consoleHistoryAutocompleteChanged();\n\n    this._updateFilterStatus();\n    this._timestampsSetting.addChangeListener(this._consoleTimestampsSettingChanged, this);\n\n    this._registerWithMessageSink();\n\n    UI.Context.Context.instance().addFlavorChangeListener(\n        SDK.RuntimeModel.ExecutionContext, this._executionContextChanged, this);\n\n    this._messagesElement.addEventListener(\n        'mousedown', /** @param {!Event} event */\n        event => this._updateStickToBottomOnPointerDown(/** @type {!MouseEvent} */ (event).button === 2), false);\n    this._messagesElement.addEventListener('mouseup', this._updateStickToBottomOnPointerUp.bind(this), false);\n    this._messagesElement.addEventListener('mouseleave', this._updateStickToBottomOnPointerUp.bind(this), false);\n    this._messagesElement.addEventListener('wheel', this._updateStickToBottomOnWheel.bind(this), false);\n    this._messagesElement.addEventListener(\n        'touchstart', this._updateStickToBottomOnPointerDown.bind(this, false), false);\n    this._messagesElement.addEventListener('touchend', this._updateStickToBottomOnPointerUp.bind(this), false);\n    this._messagesElement.addEventListener('touchcancel', this._updateStickToBottomOnPointerUp.bind(this), false);\n\n    SDK.ConsoleModel.ConsoleModel.instance().addEventListener(\n        SDK.ConsoleModel.Events.ConsoleCleared, this._consoleCleared, this);\n    SDK.ConsoleModel.ConsoleModel.instance().addEventListener(\n        SDK.ConsoleModel.Events.MessageAdded, this._onConsoleMessageAdded, this);\n    SDK.ConsoleModel.ConsoleModel.instance().addEventListener(\n        SDK.ConsoleModel.Events.MessageUpdated, this._onConsoleMessageUpdated, this);\n    SDK.ConsoleModel.ConsoleModel.instance().addEventListener(\n        SDK.ConsoleModel.Events.CommandEvaluated, this._commandEvaluated, this);\n    SDK.ConsoleModel.ConsoleModel.instance().messages().forEach(this._addConsoleMessage, this);\n\n    /** @type {!IssueMessage|undefined} */\n    this._issueMessage = undefined;\n    const issuesManager = BrowserSDK.IssuesManager.IssuesManager.instance();\n    issuesManager.addEventListener(\n        BrowserSDK.IssuesManager.Events.IssuesCountUpdated, this._onIssuesCountChanged.bind(this));\n    if (issuesManager.numberOfIssues()) {\n      this._onIssuesCountChanged();\n    }\n  }\n\n  _onIssuesCountChanged() {\n    if (BrowserSDK.IssuesManager.IssuesManager.instance().numberOfIssues() === 0) {\n      if (this._issueMessage) {\n        this._issueMessage.element().remove();\n        this._issueMessage = undefined;\n        this._scheduleViewportRefresh();\n      }\n    } else if (!this._issueMessage) {\n      this._issueMessage = new IssueMessage();\n      this._scheduleViewportRefresh();\n    }\n  }\n\n  /**\n   * @return {!ConsoleView}\n   */\n  static instance() {\n    if (!consoleViewInstance) {\n      consoleViewInstance = new ConsoleView();\n    }\n    return consoleViewInstance;\n  }\n\n  static clearConsole() {\n    const consoleView = ConsoleView.instance();\n    if (consoleView._issueMessage) {\n      consoleView._issueMessage.element().remove();\n      consoleView._issueMessage = undefined;\n      consoleView._scheduleViewportRefresh();\n    }\n    SDK.ConsoleModel.ConsoleModel.instance().requestClearMessages();\n  }\n\n  _onFilterChanged() {\n    this._filter._currentFilter.levelsMask =\n        this._isSidebarOpen ? ConsoleFilter.allLevelsFilterValue() : this._filter._messageLevelFiltersSetting.get();\n    this._cancelBuildHiddenCache();\n    if (this._immediatelyFilterMessagesForTest) {\n      for (const viewMessage of this._consoleMessages) {\n        this._computeShouldMessageBeVisible(viewMessage);\n      }\n      this._updateMessageList();\n      return;\n    }\n    this._buildHiddenCache(0, this._consoleMessages.slice());\n  }\n\n  _setImmediatelyFilterMessagesForTest() {\n    this._immediatelyFilterMessagesForTest = true;\n  }\n\n  /**\n   * @return {!UI.SearchableView.SearchableView}\n   */\n  searchableView() {\n    return this._searchableView;\n  }\n\n  _clearHistory() {\n    this._consoleHistorySetting.set([]);\n    this._prompt.history().setHistoryData([]);\n  }\n\n  _consoleHistoryAutocompleteChanged() {\n    this._prompt.setAddCompletionsFromHistory(this._consoleHistoryAutocompleteSetting.get());\n  }\n\n  /**\n   * @override\n   * @return {number}\n   */\n  itemCount() {\n    if (this._issueMessage) {\n      return this._visibleViewMessages.length + 1;\n    }\n    return this._visibleViewMessages.length;\n  }\n\n  /**\n   * @override\n   * @param {number} index\n   * @return {?ConsoleViewportElement}\n   */\n  itemElement(index) {\n    const issueMessage = this._issueMessage;\n    if (issueMessage) {\n      if (index === 0) {\n        return issueMessage;\n      }\n      return this._visibleViewMessages[index - 1];\n    }\n    return this._visibleViewMessages[index];\n  }\n\n  /**\n   * @override\n   * @param {number} index\n   * @return {number}\n   */\n  fastHeight(index) {\n    const issueMessage = this._issueMessage;\n    if (issueMessage) {\n      if (index === 0) {\n        return issueMessage.fastHeight() || 37;\n      }\n      return this._visibleViewMessages[index - 1].fastHeight();\n    }\n    return this._visibleViewMessages[index].fastHeight();\n  }\n\n  /**\n   * @override\n   * @return {number}\n   */\n  minimumRowHeight() {\n    return 16;\n  }\n\n  _registerWithMessageSink() {\n    Common.Console.Console.instance().messages().forEach(this._addSinkMessage, this);\n    Common.Console.Console.instance().addEventListener(Common.Console.Events.MessageAdded, messageAdded, this);\n\n    /**\n     * @param {!Common.EventTarget.EventTargetEvent} event\n     * @this {ConsoleView}\n     */\n    function messageAdded(event) {\n      this._addSinkMessage(/** @type {!Common.Console.Message} */ (event.data));\n    }\n  }\n\n  /**\n   * @param {!Common.Console.Message} message\n   */\n  _addSinkMessage(message) {\n    /** @type {SDK.ConsoleModel.MessageLevel} */\n    let level = SDK.ConsoleModel.MessageLevel.Verbose;\n    switch (message.level) {\n      case Common.Console.MessageLevel.Info:\n        level = SDK.ConsoleModel.MessageLevel.Info;\n        break;\n      case Common.Console.MessageLevel.Error:\n        level = SDK.ConsoleModel.MessageLevel.Error;\n        break;\n      case Common.Console.MessageLevel.Warning:\n        level = SDK.ConsoleModel.MessageLevel.Warning;\n        break;\n    }\n\n    const consoleMessage = new SDK.ConsoleModel.ConsoleMessage(\n        null, SDK.ConsoleModel.MessageSource.Other, level, message.text, SDK.ConsoleModel.MessageType.System, undefined,\n        undefined, undefined, undefined, undefined, message.timestamp);\n    this._addConsoleMessage(consoleMessage);\n  }\n\n  _consoleTimestampsSettingChanged() {\n    this._updateMessageList();\n    this._consoleMessages.forEach(viewMessage => viewMessage.updateTimestamp());\n    this._groupableMessageTitle.forEach(viewMessage => viewMessage.updateTimestamp());\n  }\n\n  _executionContextChanged() {\n    this._prompt.clearAutocomplete();\n  }\n\n  /**\n   * @override\n   */\n  willHide() {\n    this._hidePromptSuggestBox();\n  }\n\n  /**\n   * @override\n   */\n  wasShown() {\n    this._viewport.refresh();\n  }\n\n  /**\n   * @override\n   */\n  focus() {\n    if (this._viewport.hasVirtualSelection()) {\n      /** @type {!HTMLElement} */ (this._viewport.contentElement()).focus();\n    } else {\n      this._focusPrompt();\n    }\n  }\n\n  _focusPrompt() {\n    if (!this._prompt.hasFocus()) {\n      const oldStickToBottom = this._viewport.stickToBottom();\n      const oldScrollTop = this._viewport.element.scrollTop;\n      this._prompt.focus();\n      this._viewport.setStickToBottom(oldStickToBottom);\n      this._viewport.element.scrollTop = oldScrollTop;\n    }\n  }\n\n  /**\n   * @override\n   */\n  restoreScrollPositions() {\n    if (this._viewport.stickToBottom()) {\n      this._immediatelyScrollToBottom();\n    } else {\n      super.restoreScrollPositions();\n    }\n  }\n\n  /**\n   * @override\n   */\n  onResize() {\n    this._scheduleViewportRefresh();\n    this._hidePromptSuggestBox();\n    if (this._viewport.stickToBottom()) {\n      this._immediatelyScrollToBottom();\n    }\n    for (let i = 0; i < this._visibleViewMessages.length; ++i) {\n      this._visibleViewMessages[i].onResize();\n    }\n  }\n\n  _hidePromptSuggestBox() {\n    this._prompt.clearAutocomplete();\n  }\n\n  /**\n   * @return {!Promise.<void>}\n   */\n  async _invalidateViewport() {\n    if (this._muteViewportUpdates) {\n      this._maybeDirtyWhileMuted = true;\n      return;\n    }\n    if (this._needsFullUpdate) {\n      this._updateMessageList();\n      delete this._needsFullUpdate;\n    } else {\n      this._viewport.invalidate();\n    }\n    return;\n  }\n\n  _scheduleViewportRefresh() {\n    if (this._muteViewportUpdates) {\n      this._maybeDirtyWhileMuted = true;\n      this._scheduleViewportRefreshForTest(true);\n      return;\n    }\n    this._scheduleViewportRefreshForTest(false);\n\n    this._scheduledRefreshPromiseForTest = this._viewportThrottler.schedule(this._invalidateViewport.bind(this));\n  }\n\n  /**\n   * @param {boolean} muted\n   */\n  _scheduleViewportRefreshForTest(muted) {\n    // This functions is sniffed in tests.\n  }\n\n  _immediatelyScrollToBottom() {\n    // This will scroll viewport and trigger its refresh.\n    this._viewport.setStickToBottom(true);\n    this._promptElement.scrollIntoView(true);\n  }\n\n  _updateFilterStatus() {\n    if (this._hiddenByFilterCount === this._lastShownHiddenByFilterCount) {\n      return;\n    }\n    this._filterStatusText.setText(ls`${this._hiddenByFilterCount} hidden`);\n    this._filterStatusText.setVisible(Boolean(this._hiddenByFilterCount));\n    this._lastShownHiddenByFilterCount = this._hiddenByFilterCount;\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   */\n  _onConsoleMessageAdded(event) {\n    const message = /** @type {!SDK.ConsoleModel.ConsoleMessage} */ (event.data);\n    this._addConsoleMessage(message);\n  }\n\n  /**\n   * @param {!SDK.ConsoleModel.ConsoleMessage} message\n   */\n  _addConsoleMessage(message) {\n    const viewMessage = this._createViewMessage(message);\n    consoleMessageToViewMessage.set(message, viewMessage);\n    if (message.type === SDK.ConsoleModel.MessageType.Command || message.type === SDK.ConsoleModel.MessageType.Result) {\n      const lastMessage = this._consoleMessages[this._consoleMessages.length - 1];\n      const newTimestamp = lastMessage && messagesSortedBySymbol.get(lastMessage) || 0;\n      messagesSortedBySymbol.set(viewMessage, newTimestamp);\n    } else {\n      messagesSortedBySymbol.set(viewMessage, viewMessage.consoleMessage().timestamp);\n    }\n\n    let insertAt;\n    if (!this._consoleMessages.length ||\n        timeComparator(viewMessage, this._consoleMessages[this._consoleMessages.length - 1]) > 0) {\n      insertAt = this._consoleMessages.length;\n    } else {\n      insertAt = Platform.ArrayUtilities.upperBound(this._consoleMessages, viewMessage, timeComparator);\n    }\n    const insertedInMiddle = insertAt < this._consoleMessages.length;\n    this._consoleMessages.splice(insertAt, 0, viewMessage);\n\n    this._filter.onMessageAdded(message);\n    this._sidebar.onMessageAdded(viewMessage);\n\n    // If we already have similar messages, go slow path.\n    let shouldGoIntoGroup = false;\n    const shouldGroupSimilar = this._groupSimilarSetting.get();\n    if (message.isGroupable()) {\n      const groupKey = viewMessage.groupKey();\n      shouldGoIntoGroup = shouldGroupSimilar && this._groupableMessages.has(groupKey);\n      let list = this._groupableMessages.get(groupKey);\n      if (!list) {\n        list = [];\n        this._groupableMessages.set(groupKey, list);\n      }\n      list.push(viewMessage);\n    }\n\n    this._computeShouldMessageBeVisible(viewMessage);\n    if (!shouldGoIntoGroup && !insertedInMiddle) {\n      this._appendMessageToEnd(\n          viewMessage,\n          !shouldGroupSimilar /* crbug.com/1082963: prevent collapse of same messages when \"Group similar\" is false */);\n      this._updateFilterStatus();\n      this._searchableView.updateSearchMatchesCount(this._regexMatchRanges.length);\n    } else {\n      this._needsFullUpdate = true;\n    }\n\n    this._scheduleViewportRefresh();\n    this._consoleMessageAddedForTest(viewMessage);\n\n    /**\n     * @param {!ConsoleViewMessage} viewMessage1\n     * @param {!ConsoleViewMessage} viewMessage2\n     */\n    function timeComparator(viewMessage1, viewMessage2) {\n      return (messagesSortedBySymbol.get(viewMessage1) || 0) - (messagesSortedBySymbol.get(viewMessage2) || 0);\n    }\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   */\n  _onConsoleMessageUpdated(event) {\n    const message = /** @type {!SDK.ConsoleModel.ConsoleMessage} */ (event.data);\n    const viewMessage = consoleMessageToViewMessage.get(message);\n    if (viewMessage) {\n      viewMessage.updateMessageElement();\n      this._computeShouldMessageBeVisible(viewMessage);\n      this._updateMessageList();\n    }\n  }\n\n  /**\n   * @param {!ConsoleViewMessage} viewMessage\n   */\n  _consoleMessageAddedForTest(viewMessage) {\n  }\n\n  /**\n   * @param {!ConsoleViewMessage} viewMessage\n   * @return {boolean}\n   */\n  _shouldMessageBeVisible(viewMessage) {\n    return !this._shouldBeHiddenCache.has(viewMessage);\n  }\n\n  /**\n   * @param {!ConsoleViewMessage} viewMessage\n   */\n  _computeShouldMessageBeVisible(viewMessage) {\n    if (this._filter.shouldBeVisible(viewMessage) &&\n        (!this._isSidebarOpen || this._sidebar.shouldBeVisible(viewMessage))) {\n      this._shouldBeHiddenCache.delete(viewMessage);\n    } else {\n      this._shouldBeHiddenCache.add(viewMessage);\n    }\n  }\n\n  /**\n   * @param {!ConsoleViewMessage} viewMessage\n   * @param {boolean=} preventCollapse\n   */\n  _appendMessageToEnd(viewMessage, preventCollapse) {\n    if (!this._shouldMessageBeVisible(viewMessage)) {\n      this._hiddenByFilterCount++;\n      return;\n    }\n\n    if (!preventCollapse &&\n        this._tryToCollapseMessages(viewMessage, this._visibleViewMessages[this._visibleViewMessages.length - 1])) {\n      return;\n    }\n\n    const lastMessage = this._visibleViewMessages[this._visibleViewMessages.length - 1];\n    if (viewMessage.consoleMessage().type === SDK.ConsoleModel.MessageType.EndGroup) {\n      if (lastMessage && !this._currentGroup.messagesHidden()) {\n        lastMessage.incrementCloseGroupDecorationCount();\n      }\n      this._currentGroup = this._currentGroup.parentGroup() || this._currentGroup;\n      return;\n    }\n    if (!this._currentGroup.messagesHidden()) {\n      const originatingMessage = viewMessage.consoleMessage().originatingMessage();\n      if (lastMessage && originatingMessage && lastMessage.consoleMessage() === originatingMessage) {\n        viewMessage.toMessageElement().classList.add('console-adjacent-user-command-result');\n      }\n\n      this._visibleViewMessages.push(viewMessage);\n      this._searchMessage(this._visibleViewMessages.length - 1);\n    }\n\n    if (viewMessage.consoleMessage().isGroupStartMessage()) {\n      this._currentGroup = new ConsoleGroup(this._currentGroup, /** @type {!ConsoleGroupViewMessage} */ (viewMessage));\n    }\n\n    this._messageAppendedForTests();\n  }\n\n  _messageAppendedForTests() {\n    // This method is sniffed in tests.\n  }\n\n  /**\n   * @param {!SDK.ConsoleModel.ConsoleMessage} message\n   * @return {!ConsoleViewMessage}\n   */\n  _createViewMessage(message) {\n    const nestingLevel = this._currentGroup.nestingLevel();\n    switch (message.type) {\n      case SDK.ConsoleModel.MessageType.Command:\n        return new ConsoleCommand(message, this._linkifier, nestingLevel, this._onMessageResizedBound);\n      case SDK.ConsoleModel.MessageType.Result:\n        return new ConsoleCommandResult(message, this._linkifier, nestingLevel, this._onMessageResizedBound);\n      case SDK.ConsoleModel.MessageType.StartGroupCollapsed:\n      case SDK.ConsoleModel.MessageType.StartGroup:\n        return new ConsoleGroupViewMessage(\n            message, this._linkifier, nestingLevel, this._updateMessageList.bind(this), this._onMessageResizedBound);\n      case SDK.ConsoleModel.MessageType.Table:\n        return new ConsoleTableMessageView(message, this._linkifier, nestingLevel, this._onMessageResizedBound);\n      default:\n        return new ConsoleViewMessage(message, this._linkifier, nestingLevel, this._onMessageResizedBound);\n    }\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   * @return {!Promise<void>}\n   */\n  async _onMessageResized(event) {\n    const treeElement = /** @type {!UI.TreeOutline.TreeElement} */ (event.data);\n    if (this._pendingBatchResize || !treeElement.treeOutline) {\n      return;\n    }\n    this._pendingBatchResize = true;\n    await Promise.resolve();\n    const treeOutlineElement = treeElement.treeOutline.element;\n    this._viewport.setStickToBottom(this._isScrolledToBottom());\n    // Scroll, in case mutations moved the element below the visible area.\n    if (treeOutlineElement.offsetHeight <= this._messagesElement.offsetHeight) {\n      treeOutlineElement.scrollIntoViewIfNeeded();\n    }\n\n    this._pendingBatchResize = false;\n  }\n\n  _consoleCleared() {\n    const hadFocus = this._viewport.element.hasFocus();\n    this._cancelBuildHiddenCache();\n    this._currentMatchRangeIndex = -1;\n    this._consoleMessages = [];\n    this._groupableMessages.clear();\n    this._groupableMessageTitle.clear();\n    this._sidebar.clear();\n    this._updateMessageList();\n    this._hidePromptSuggestBox();\n    this._viewport.setStickToBottom(true);\n    this._linkifier.reset();\n    this._filter.clear();\n    if (hadFocus) {\n      this._prompt.focus();\n    }\n    UI.ARIAUtils.alert(ls`Console cleared`, this._viewport.element);\n  }\n\n  /**\n   * @param {!Event} event\n   */\n  _handleContextMenuEvent(event) {\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    const eventTarget = /** @type {!Node} */ (event.target);\n    if (eventTarget.isSelfOrDescendant(this._promptElement)) {\n      contextMenu.show();\n      return;\n    }\n\n    const sourceElement = eventTarget.enclosingNodeOrSelfWithClass('console-message-wrapper');\n    const consoleViewMessage = sourceElement && getMessageForElement(sourceElement);\n    const consoleMessage = consoleViewMessage ? consoleViewMessage.consoleMessage() : null;\n\n    if (consoleMessage && consoleMessage.url) {\n      const menuTitle = ls`Hide messages from ${new Common.ParsedURL.ParsedURL(consoleMessage.url).displayName}`;\n      contextMenu.headerSection().appendItem(\n          menuTitle, this._filter.addMessageURLFilter.bind(this._filter, consoleMessage.url));\n    }\n\n    contextMenu.defaultSection().appendAction('console.clear');\n    contextMenu.defaultSection().appendAction('console.clear.history');\n    contextMenu.saveSection().appendItem(Common.UIString.UIString('Save as...'), this._saveConsole.bind(this));\n    if (this.element.hasSelection()) {\n      contextMenu.clipboardSection().appendItem(\n          Common.UIString.UIString('Copy visible styled selection'),\n          this._viewport.copyWithStyles.bind(this._viewport));\n    }\n\n    if (consoleMessage) {\n      const request = SDK.NetworkLog.NetworkLog.requestForConsoleMessage(consoleMessage);\n      if (request && SDK.NetworkManager.NetworkManager.canReplayRequest(request)) {\n        contextMenu.debugSection().appendItem(\n            ls`Replay XHR`, SDK.NetworkManager.NetworkManager.replayRequest.bind(null, request));\n      }\n    }\n\n    contextMenu.show();\n  }\n\n  async _saveConsole() {\n    const url = /** @type {!SDK.SDKModel.Target} */ (SDK.SDKModel.TargetManager.instance().mainTarget()).inspectedURL();\n    const parsedURL = Common.ParsedURL.ParsedURL.fromString(url);\n    const filename = Platform.StringUtilities.sprintf('%s-%d.log', parsedURL ? parsedURL.host : 'console', Date.now());\n    const stream = new Bindings.FileUtils.FileOutputStream();\n\n    const progressIndicator = new UI.ProgressIndicator.ProgressIndicator();\n    progressIndicator.setTitle(Common.UIString.UIString('Writing file'));\n    progressIndicator.setTotalWork(this.itemCount());\n\n    /** @const */\n    const chunkSize = 350;\n\n    if (!await stream.open(filename)) {\n      return;\n    }\n    this._progressToolbarItem.element.appendChild(progressIndicator.element);\n\n    let messageIndex = 0;\n    while (messageIndex < this.itemCount() && !progressIndicator.isCanceled()) {\n      const messageContents = [];\n      let i;\n      for (i = 0; i < chunkSize && i + messageIndex < this.itemCount(); ++i) {\n        const message = /** @type {!ConsoleViewMessage} */ (this.itemElement(messageIndex + i));\n        messageContents.push(message.toExportString());\n      }\n      messageIndex += i;\n      await stream.write(messageContents.join('\\n') + '\\n');\n      progressIndicator.setWorked(messageIndex);\n    }\n\n    stream.close();\n    progressIndicator.done();\n  }\n\n  /**\n   * @param {!ConsoleViewMessage} viewMessage\n   * @param {!ConsoleViewMessage=} lastMessage\n   * @return {boolean}\n   */\n  _tryToCollapseMessages(viewMessage, lastMessage) {\n    const timestampsShown = this._timestampsSetting.get();\n    if (!timestampsShown && lastMessage && !viewMessage.consoleMessage().isGroupMessage() &&\n        viewMessage.consoleMessage().type !== SDK.ConsoleModel.MessageType.Command &&\n        viewMessage.consoleMessage().type !== SDK.ConsoleModel.MessageType.Result &&\n        viewMessage.consoleMessage().isEqual(lastMessage.consoleMessage())) {\n      lastMessage.incrementRepeatCount();\n      if (viewMessage.isLastInSimilarGroup()) {\n        lastMessage.setInSimilarGroup(true, true);\n      }\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * @param {number} startIndex\n   * @param {!Array<!ConsoleViewMessage>} viewMessages\n   */\n  _buildHiddenCache(startIndex, viewMessages) {\n    const startTime = Date.now();\n    let i;\n    for (i = startIndex; i < viewMessages.length; ++i) {\n      this._computeShouldMessageBeVisible(viewMessages[i]);\n      if (i % 10 === 0 && Date.now() - startTime > 12) {\n        break;\n      }\n    }\n\n    if (i === viewMessages.length) {\n      this._updateMessageList();\n      return;\n    }\n    this._buildHiddenCacheTimeout =\n        this.element.window().requestAnimationFrame(this._buildHiddenCache.bind(this, i, viewMessages));\n  }\n\n  _cancelBuildHiddenCache() {\n    this._shouldBeHiddenCache.clear();\n    if (this._buildHiddenCacheTimeout) {\n      this.element.window().cancelAnimationFrame(this._buildHiddenCacheTimeout);\n      delete this._buildHiddenCacheTimeout;\n    }\n  }\n\n  _updateMessageList() {\n    this._topGroup = ConsoleGroup.createTopGroup();\n    this._currentGroup = this._topGroup;\n    this._regexMatchRanges = [];\n    this._hiddenByFilterCount = 0;\n    for (let i = 0; i < this._visibleViewMessages.length; ++i) {\n      this._visibleViewMessages[i].resetCloseGroupDecorationCount();\n      this._visibleViewMessages[i].resetIncrementRepeatCount();\n    }\n    this._visibleViewMessages = [];\n    if (this._groupSimilarSetting.get()) {\n      this._addGroupableMessagesToEnd();\n    } else {\n      for (let i = 0; i < this._consoleMessages.length; ++i) {\n        this._consoleMessages[i].setInSimilarGroup(false);\n        this._appendMessageToEnd(\n            this._consoleMessages[i],\n            true /* crbug.com/1082963: prevent collapse of same messages when \"Group similar\" is false */);\n      }\n    }\n    this._updateFilterStatus();\n    this._searchableView.updateSearchMatchesCount(this._regexMatchRanges.length);\n    this._viewport.invalidate();\n  }\n\n  _addGroupableMessagesToEnd() {\n    /** @type {!Set<(!SDK.ConsoleModel.ConsoleMessage|!ConsoleViewMessage)>} */\n    const alreadyAdded = new Set();\n    /** @type {!Set<string>} */\n    const processedGroupKeys = new Set();\n    for (let i = 0; i < this._consoleMessages.length; ++i) {\n      const viewMessage = this._consoleMessages[i];\n      const message = viewMessage.consoleMessage();\n      if (alreadyAdded.has(message)) {\n        continue;\n      }\n\n      if (!message.isGroupable()) {\n        this._appendMessageToEnd(viewMessage);\n        alreadyAdded.add(message);\n        continue;\n      }\n\n      const key = viewMessage.groupKey();\n      const viewMessagesInGroup = this._groupableMessages.get(key);\n      if (!viewMessagesInGroup || viewMessagesInGroup.length < 5) {\n        viewMessage.setInSimilarGroup(false);\n        this._appendMessageToEnd(viewMessage);\n        alreadyAdded.add(message);\n        continue;\n      }\n\n      if (processedGroupKeys.has(key)) {\n        continue;\n      }\n\n      if (!viewMessagesInGroup.find(x => this._shouldMessageBeVisible(x))) {\n        // Optimize for speed.\n        Platform.SetUtilities.addAll(alreadyAdded, viewMessagesInGroup);\n        processedGroupKeys.add(key);\n        continue;\n      }\n\n      // Create artificial group start and end messages.\n      let startGroupViewMessage = this._groupableMessageTitle.get(key);\n      if (!startGroupViewMessage) {\n        const startGroupMessage = new SDK.ConsoleModel.ConsoleMessage(\n            null, message.source, message.level, viewMessage.groupTitle(),\n            SDK.ConsoleModel.MessageType.StartGroupCollapsed);\n        startGroupViewMessage = this._createViewMessage(startGroupMessage);\n        this._groupableMessageTitle.set(key, startGroupViewMessage);\n      }\n      startGroupViewMessage.setRepeatCount(viewMessagesInGroup.length);\n      this._appendMessageToEnd(startGroupViewMessage);\n\n      for (const viewMessageInGroup of viewMessagesInGroup) {\n        viewMessageInGroup.setInSimilarGroup(\n            true, viewMessagesInGroup[viewMessagesInGroup.length - 1] === viewMessageInGroup);\n        this._appendMessageToEnd(viewMessageInGroup, true);\n        alreadyAdded.add(viewMessageInGroup.consoleMessage());\n      }\n\n      const endGroupMessage = new SDK.ConsoleModel.ConsoleMessage(\n          null, message.source, message.level, message.messageText, SDK.ConsoleModel.MessageType.EndGroup);\n      this._appendMessageToEnd(this._createViewMessage(endGroupMessage));\n    }\n  }\n\n  /**\n   * @param {!Event} event\n   */\n  _messagesClicked(event) {\n    const target = /** @type {?Node} */ (event.target);\n    // Do not focus prompt if messages have selection.\n    if (!this._messagesElement.hasSelection()) {\n      const clickedOutsideMessageList =\n          target === this._messagesElement || this._prompt.belowEditorElement().isSelfOrAncestor(target);\n      if (clickedOutsideMessageList) {\n        this._prompt.moveCaretToEndOfPrompt();\n        this._focusPrompt();\n      }\n    }\n  }\n\n  /**\n   * @param {!Event} event\n   */\n  _messagesKeyDown(event) {\n    const keyEvent = /** @type {!KeyboardEvent} */ (event);\n    const hasActionModifier = keyEvent.ctrlKey || keyEvent.altKey || keyEvent.metaKey;\n    if (hasActionModifier || keyEvent.key.length !== 1 || UI.UIUtils.isEditing() ||\n        this._messagesElement.hasSelection()) {\n      return;\n    }\n    this._prompt.moveCaretToEndOfPrompt();\n    this._focusPrompt();\n  }\n\n  /**\n   * @param {!Event} event\n   */\n  _messagesPasted(event) {\n    if (UI.UIUtils.isEditing()) {\n      return;\n    }\n    this._prompt.focus();\n  }\n\n  _registerShortcuts() {\n    this._shortcuts.set(\n        UI.KeyboardShortcut.KeyboardShortcut.makeKey('u', UI.KeyboardShortcut.Modifiers.Ctrl),\n        this._clearPromptBackwards.bind(this));\n  }\n\n  _clearPromptBackwards() {\n    this._prompt.setText('');\n  }\n\n  /**\n   * @param {!Event} event\n   */\n  _promptKeyDown(event) {\n    const keyboardEvent = /** @type {!KeyboardEvent} */ (event);\n    if (keyboardEvent.key === 'PageUp') {\n      this._updateStickToBottomOnWheel();\n      return;\n    }\n\n    const shortcut = UI.KeyboardShortcut.KeyboardShortcut.makeKeyFromEvent(keyboardEvent);\n    const handler = this._shortcuts.get(shortcut);\n    if (handler) {\n      handler();\n      keyboardEvent.preventDefault();\n    }\n  }\n\n  /**\n   * @param {?SDK.RemoteObject.RemoteObject} result\n   * @param {!SDK.ConsoleModel.ConsoleMessage} originatingConsoleMessage\n   * @param {!Protocol.Runtime.ExceptionDetails=} exceptionDetails\n   */\n  _printResult(result, originatingConsoleMessage, exceptionDetails) {\n    if (!result) {\n      return;\n    }\n\n    const level = Boolean(exceptionDetails) ? SDK.ConsoleModel.MessageLevel.Error : SDK.ConsoleModel.MessageLevel.Info;\n    let message;\n    if (!exceptionDetails) {\n      message = new SDK.ConsoleModel.ConsoleMessage(\n          result.runtimeModel(), SDK.ConsoleModel.MessageSource.Javascript, level, '',\n          SDK.ConsoleModel.MessageType.Result, undefined, undefined, undefined, [result]);\n    } else {\n      message = SDK.ConsoleModel.ConsoleMessage.fromException(\n          result.runtimeModel(), exceptionDetails, SDK.ConsoleModel.MessageType.Result, undefined, undefined);\n    }\n    message.setOriginatingMessage(originatingConsoleMessage);\n    SDK.ConsoleModel.ConsoleModel.instance().addMessage(message);\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   */\n  _commandEvaluated(event) {\n    const data =\n        /** @type {{result: ?SDK.RemoteObject.RemoteObject, commandMessage: !SDK.ConsoleModel.ConsoleMessage, exceptionDetails: (!Protocol.Runtime.ExceptionDetails|undefined)}} */\n        (event.data);\n    this._prompt.history().pushHistoryItem(data.commandMessage.messageText);\n    this._consoleHistorySetting.set(this._prompt.history().historyData().slice(-persistedHistorySize));\n    this._printResult(data.result, data.commandMessage, data.exceptionDetails);\n  }\n\n  /**\n   * @override\n   * @return {!Array.<!Element>}\n   */\n  elementsToRestoreScrollPositionsFor() {\n    return [this._messagesElement];\n  }\n\n  /**\n   * @override\n   */\n  searchCanceled() {\n    this._cleanupAfterSearch();\n    for (let i = 0; i < this._visibleViewMessages.length; ++i) {\n      const message = this._visibleViewMessages[i];\n      message.setSearchRegex(null);\n    }\n    this._currentMatchRangeIndex = -1;\n    this._regexMatchRanges = [];\n    this._searchRegex = null;\n    this._viewport.refresh();\n  }\n\n  /**\n   * @override\n   * @param {!UI.SearchableView.SearchConfig} searchConfig\n   * @param {boolean} shouldJump\n   * @param {boolean=} jumpBackwards\n   */\n  performSearch(searchConfig, shouldJump, jumpBackwards) {\n    this.searchCanceled();\n    this._searchableView.updateSearchMatchesCount(0);\n\n    this._searchRegex = searchConfig.toSearchRegex(true);\n\n    this._regexMatchRanges = [];\n    this._currentMatchRangeIndex = -1;\n\n    if (shouldJump) {\n      this._searchShouldJumpBackwards = Boolean(jumpBackwards);\n    }\n\n    this._searchProgressIndicator = new UI.ProgressIndicator.ProgressIndicator();\n    this._searchProgressIndicator.setTitle(Common.UIString.UIString('Searching'));\n    this._searchProgressIndicator.setTotalWork(this._visibleViewMessages.length);\n    this._progressToolbarItem.element.appendChild(this._searchProgressIndicator.element);\n\n    this._innerSearch(0);\n  }\n\n  _cleanupAfterSearch() {\n    delete this._searchShouldJumpBackwards;\n    if (this._innerSearchTimeoutId) {\n      clearTimeout(this._innerSearchTimeoutId);\n      delete this._innerSearchTimeoutId;\n    }\n    if (this._searchProgressIndicator) {\n      this._searchProgressIndicator.done();\n      delete this._searchProgressIndicator;\n    }\n  }\n\n  _searchFinishedForTests() {\n    // This method is sniffed in tests.\n  }\n\n  /**\n   * @param {number} index\n   */\n  _innerSearch(index) {\n    delete this._innerSearchTimeoutId;\n    if (this._searchProgressIndicator && this._searchProgressIndicator.isCanceled()) {\n      this._cleanupAfterSearch();\n      return;\n    }\n\n    const startTime = Date.now();\n    for (; index < this._visibleViewMessages.length && Date.now() - startTime < 100; ++index) {\n      this._searchMessage(index);\n    }\n\n    this._searchableView.updateSearchMatchesCount(this._regexMatchRanges.length);\n    if (typeof this._searchShouldJumpBackwards !== 'undefined' && this._regexMatchRanges.length) {\n      this._jumpToMatch(this._searchShouldJumpBackwards ? -1 : 0);\n      delete this._searchShouldJumpBackwards;\n    }\n\n    if (index === this._visibleViewMessages.length) {\n      this._cleanupAfterSearch();\n      setTimeout(this._searchFinishedForTests.bind(this), 0);\n      return;\n    }\n\n    this._innerSearchTimeoutId = setTimeout(this._innerSearch.bind(this, index), 100);\n    if (this._searchProgressIndicator) {\n      this._searchProgressIndicator.setWorked(index);\n    }\n  }\n\n  /**\n   * @param {number} index\n   */\n  _searchMessage(index) {\n    const message = this._visibleViewMessages[index];\n    message.setSearchRegex(this._searchRegex);\n    for (let i = 0; i < message.searchCount(); ++i) {\n      this._regexMatchRanges.push({messageIndex: index, matchIndex: i});\n    }\n  }\n\n  /**\n   * @override\n   */\n  jumpToNextSearchResult() {\n    this._jumpToMatch(this._currentMatchRangeIndex + 1);\n  }\n\n  /**\n   * @override\n   */\n  jumpToPreviousSearchResult() {\n    this._jumpToMatch(this._currentMatchRangeIndex - 1);\n  }\n\n  /**\n   * @override\n   * @return {boolean}\n   */\n  supportsCaseSensitiveSearch() {\n    return true;\n  }\n\n  /**\n   * @override\n   * @return {boolean}\n   */\n  supportsRegexSearch() {\n    return true;\n  }\n\n  /**\n   * @param {number} index\n   */\n  _jumpToMatch(index) {\n    if (!this._regexMatchRanges.length) {\n      return;\n    }\n\n    let matchRange;\n    if (this._currentMatchRangeIndex >= 0) {\n      matchRange = this._regexMatchRanges[this._currentMatchRangeIndex];\n      const message = this._visibleViewMessages[matchRange.messageIndex];\n      message.searchHighlightNode(matchRange.matchIndex)\n          .classList.remove(UI.UIUtils.highlightedCurrentSearchResultClassName);\n    }\n\n    index = Platform.NumberUtilities.mod(index, this._regexMatchRanges.length);\n    this._currentMatchRangeIndex = index;\n    this._searchableView.updateCurrentMatchIndex(index);\n    matchRange = this._regexMatchRanges[index];\n    const message = this._visibleViewMessages[matchRange.messageIndex];\n    const highlightNode = message.searchHighlightNode(matchRange.matchIndex);\n    highlightNode.classList.add(UI.UIUtils.highlightedCurrentSearchResultClassName);\n    const notifyOffset = this._issueMessage ? 1 : 0;\n    this._viewport.scrollItemIntoView(matchRange.messageIndex + notifyOffset);\n    highlightNode.scrollIntoViewIfNeeded();\n  }\n\n  /**\n   * @param {boolean=} isRightClick\n   */\n  _updateStickToBottomOnPointerDown(isRightClick) {\n    this._muteViewportUpdates = !isRightClick;\n    this._viewport.setStickToBottom(false);\n    if (this._waitForScrollTimeout) {\n      clearTimeout(this._waitForScrollTimeout);\n      delete this._waitForScrollTimeout;\n    }\n  }\n\n  _updateStickToBottomOnPointerUp() {\n    if (!this._muteViewportUpdates) {\n      return;\n    }\n\n    // Delay querying isScrolledToBottom to give time for smooth scroll\n    // events to arrive. The value for the longest timeout duration is\n    // retrieved from crbug.com/575409.\n    this._waitForScrollTimeout = setTimeout(updateViewportState.bind(this), 200);\n\n    /**\n     * @this {!ConsoleView}\n     */\n    function updateViewportState() {\n      this._muteViewportUpdates = false;\n      if (this.isShowing()) {\n        this._viewport.setStickToBottom(this._isScrolledToBottom());\n      }\n      if (this._maybeDirtyWhileMuted) {\n        this._scheduleViewportRefresh();\n        delete this._maybeDirtyWhileMuted;\n      }\n      delete this._waitForScrollTimeout;\n      this._updateViewportStickinessForTest();\n    }\n  }\n\n  _updateViewportStickinessForTest() {\n    // This method is sniffed in tests.\n  }\n\n  _updateStickToBottomOnWheel() {\n    this._updateStickToBottomOnPointerDown();\n    this._updateStickToBottomOnPointerUp();\n  }\n\n  _promptTextChanged() {\n    const oldStickToBottom = this._viewport.stickToBottom();\n    const willStickToBottom = this._isScrolledToBottom();\n    this._viewport.setStickToBottom(willStickToBottom);\n    if (willStickToBottom && !oldStickToBottom) {\n      this._scheduleViewportRefresh();\n    }\n    this._promptTextChangedForTest();\n  }\n\n  _promptTextChangedForTest() {\n    // This method is sniffed in tests.\n  }\n\n  /**\n   * @return {boolean}\n   */\n  _isScrolledToBottom() {\n    const distanceToPromptEditorBottom = this._messagesElement.scrollHeight - this._messagesElement.scrollTop -\n        this._messagesElement.clientHeight -\n        /** @type {!HTMLElement} */ (this._prompt.belowEditorElement()).offsetHeight;\n    return distanceToPromptEditorBottom <= 2;\n  }\n}\n\nconst persistedHistorySize = 300;\n\nexport class ConsoleViewFilter {\n  /**\n   * @param {function():void} filterChangedCallback\n   */\n  constructor(filterChangedCallback) {\n    this._filterChanged = filterChangedCallback;\n\n    this._messageLevelFiltersSetting = ConsoleViewFilter.levelFilterSetting();\n    this._hideNetworkMessagesSetting = Common.Settings.Settings.instance().moduleSetting('hideNetworkMessages');\n    this._filterByExecutionContextSetting =\n        Common.Settings.Settings.instance().moduleSetting('selectedContextFilterEnabled');\n\n    this._messageLevelFiltersSetting.addChangeListener(this._onFilterChanged.bind(this));\n    this._hideNetworkMessagesSetting.addChangeListener(this._onFilterChanged.bind(this));\n    this._filterByExecutionContextSetting.addChangeListener(this._onFilterChanged.bind(this));\n    UI.Context.Context.instance().addFlavorChangeListener(\n        SDK.RuntimeModel.ExecutionContext, this._onFilterChanged, this);\n\n    const filterKeys = Object.values(FilterType);\n    this._suggestionBuilder = new UI.FilterSuggestionBuilder.FilterSuggestionBuilder(filterKeys);\n    this._textFilterUI = new UI.Toolbar.ToolbarInput(\n        Common.UIString.UIString('Filter'), '', 0.2, 1, Common.UIString.UIString('e.g. /event\\\\d/ -cdn url:a.com'),\n        this._suggestionBuilder.completions.bind(this._suggestionBuilder), true);\n    this._textFilterSetting = Common.Settings.Settings.instance().createSetting('console.textFilter', '');\n    if (this._textFilterSetting.get()) {\n      this._textFilterUI.setValue(this._textFilterSetting.get());\n    }\n    this._textFilterUI.addEventListener(UI.Toolbar.ToolbarInput.Event.TextChanged, () => {\n      this._textFilterSetting.set(this._textFilterUI.value());\n      this._onFilterChanged();\n    });\n    this._filterParser = new TextUtils.TextUtils.FilterParser(filterKeys);\n    this._currentFilter = new ConsoleFilter('', [], null, this._messageLevelFiltersSetting.get());\n    this._updateCurrentFilter();\n\n    this._levelLabels = new Map(/** @type {[SDK.ConsoleModel.MessageLevel, string][]} */ ([\n      [SDK.ConsoleModel.MessageLevel.Verbose, Common.UIString.UIString('Verbose')],\n      [SDK.ConsoleModel.MessageLevel.Info, Common.UIString.UIString('Info')],\n      [SDK.ConsoleModel.MessageLevel.Warning, Common.UIString.UIString('Warnings')],\n      [SDK.ConsoleModel.MessageLevel.Error, Common.UIString.UIString('Errors')],\n    ]));\n\n    this._levelMenuButton = new UI.Toolbar.ToolbarButton(ls`Log levels`);\n    this._levelMenuButton.turnIntoSelect();\n    this._levelMenuButton.addEventListener(\n        UI.Toolbar.ToolbarButton.Events.Click, this._showLevelContextMenu.bind(this));\n    UI.ARIAUtils.markAsMenuButton(this._levelMenuButton.element);\n\n    this._updateLevelMenuButtonText();\n    this._messageLevelFiltersSetting.addChangeListener(this._updateLevelMenuButtonText.bind(this));\n  }\n\n  /**\n   * @param {!SDK.ConsoleModel.ConsoleMessage} message\n   */\n  onMessageAdded(message) {\n    if (message.type === SDK.ConsoleModel.MessageType.Command || message.type === SDK.ConsoleModel.MessageType.Result ||\n        message.isGroupMessage()) {\n      return;\n    }\n    if (message.context) {\n      this._suggestionBuilder.addItem(FilterType.Context, message.context);\n    }\n    if (message.source) {\n      this._suggestionBuilder.addItem(FilterType.Source, message.source);\n    }\n    if (message.url) {\n      this._suggestionBuilder.addItem(FilterType.Url, message.url);\n    }\n  }\n\n  /**\n   * @param {boolean} overridden\n   */\n  setLevelMenuOverridden(overridden) {\n    this._levelMenuButton.setEnabled(!overridden);\n    if (overridden) {\n      this._levelMenuButton.setTitle(Common.UIString.UIString('Overridden by filter sidebar'));\n    } else {\n      this._updateLevelMenuButtonText();\n    }\n  }\n\n  /**\n   * @return {!Common.Settings.Setting<!Object<string, boolean>>}\n   */\n  static levelFilterSetting() {\n    return Common.Settings.Settings.instance().createSetting(\n        'messageLevelFilters', ConsoleFilter.defaultLevelsFilterValue());\n  }\n\n  _updateCurrentFilter() {\n    const parsedFilters = this._filterParser.parse(this._textFilterUI.value());\n    if (this._hideNetworkMessagesSetting.get()) {\n      parsedFilters.push(\n          {key: FilterType.Source, text: SDK.ConsoleModel.MessageSource.Network, negative: true, regex: undefined});\n    }\n\n    this._currentFilter.executionContext = this._filterByExecutionContextSetting.get() ?\n        UI.Context.Context.instance().flavor(SDK.RuntimeModel.ExecutionContext) :\n        null;\n    this._currentFilter.parsedFilters = parsedFilters;\n    this._currentFilter.levelsMask = this._messageLevelFiltersSetting.get();\n  }\n\n  _onFilterChanged() {\n    this._updateCurrentFilter();\n    this._filterChanged();\n  }\n\n  _updateLevelMenuButtonText() {\n    let isAll = true;\n    let isDefault = true;\n    const allValue = ConsoleFilter.allLevelsFilterValue();\n    const defaultValue = ConsoleFilter.defaultLevelsFilterValue();\n\n    let text = null;\n    const levels = this._messageLevelFiltersSetting.get();\n    for (const name of Object.values(SDK.ConsoleModel.MessageLevel)) {\n      isAll = isAll && levels[name] === allValue[name];\n      isDefault = isDefault && levels[name] === defaultValue[name];\n      if (levels[name]) {\n        text = text ? Common.UIString.UIString('Custom levels') :\n                      Common.UIString.UIString('%s only', this._levelLabels.get(name));\n      }\n    }\n    if (isAll) {\n      text = Common.UIString.UIString('All levels');\n    } else if (isDefault) {\n      text = Common.UIString.UIString('Default levels');\n    } else {\n      text = text || Common.UIString.UIString('Hide all');\n    }\n    this._levelMenuButton.element.classList.toggle('warning', !isAll && !isDefault);\n    this._levelMenuButton.setText(text);\n    this._levelMenuButton.setTitle(ls`Log level: ${text}`);\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   */\n  _showLevelContextMenu(event) {\n    const mouseEvent = /** @type {!Event} */ (event.data);\n    const setting = this._messageLevelFiltersSetting;\n    const levels = setting.get();\n\n    const contextMenu = new UI.ContextMenu.ContextMenu(\n        mouseEvent, true /* useSoftMenu */, this._levelMenuButton.element.totalOffsetLeft(),\n        this._levelMenuButton.element.totalOffsetTop() +\n            /** @type {!HTMLElement} */ (this._levelMenuButton.element).offsetHeight);\n    contextMenu.headerSection().appendItem(\n        Common.UIString.UIString('Default'), () => setting.set(ConsoleFilter.defaultLevelsFilterValue()));\n    for (const [level, levelText] of this._levelLabels.entries()) {\n      contextMenu.defaultSection().appendCheckboxItem(levelText, toggleShowLevel.bind(null, level), levels[level]);\n    }\n    contextMenu.show();\n\n    /**\n     * @param {string} level\n     */\n    function toggleShowLevel(level) {\n      levels[level] = !levels[level];\n      setting.set(levels);\n    }\n  }\n\n  /**\n   * @param {string} url\n   */\n  addMessageURLFilter(url) {\n    if (!url) {\n      return;\n    }\n    const suffix = this._textFilterUI.value() ? ` ${this._textFilterUI.value()}` : '';\n    this._textFilterUI.setValue(`-url:${url}${suffix}`);\n    this._textFilterSetting.set(this._textFilterUI.value());\n    this._onFilterChanged();\n  }\n\n  /**\n   * @param {!ConsoleViewMessage} viewMessage\n   * @return {boolean}\n   */\n  shouldBeVisible(viewMessage) {\n    return this._currentFilter.shouldBeVisible(viewMessage);\n  }\n\n  clear() {\n    this._suggestionBuilder.clear();\n  }\n\n  reset() {\n    this._messageLevelFiltersSetting.set(ConsoleFilter.defaultLevelsFilterValue());\n    this._filterByExecutionContextSetting.set(false);\n    this._hideNetworkMessagesSetting.set(false);\n    this._textFilterUI.setValue('');\n    this._onFilterChanged();\n  }\n}\n\nexport class ConsoleGroup {\n  /**\n   * @param {?ConsoleGroup} parentGroup\n   * @param {?ConsoleGroupViewMessage} groupMessage\n   */\n  constructor(parentGroup, groupMessage) {\n    this._parentGroup = parentGroup;\n    this._nestingLevel = parentGroup ? parentGroup.nestingLevel() + 1 : 0;\n    this._messagesHidden =\n        groupMessage && groupMessage.collapsed() || this._parentGroup && this._parentGroup.messagesHidden() || false;\n  }\n\n  /**\n   * @return {!ConsoleGroup}\n   */\n  static createTopGroup() {\n    return new ConsoleGroup(null, null);\n  }\n\n  /**\n   * @return {boolean}\n   */\n  messagesHidden() {\n    return this._messagesHidden;\n  }\n\n  /**\n   * @return {number}\n   */\n  nestingLevel() {\n    return this._nestingLevel;\n  }\n\n  /**\n   * @return {?ConsoleGroup}\n   */\n  parentGroup() {\n    return this._parentGroup;\n  }\n}\n\n/**\n * @implements {UI.ActionRegistration.ActionDelegate}\n */\nexport class ActionDelegate {\n  /**\n   * @override\n   * @param {!UI.Context.Context} context\n   * @param {string} actionId\n   * @return {boolean}\n   */\n  handleAction(context, actionId) {\n    switch (actionId) {\n      case 'console.show':\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.bringToFront();\n        Common.Console.Console.instance().show();\n        ConsoleView.instance()._focusPrompt();\n        return true;\n      case 'console.clear':\n        ConsoleView.clearConsole();\n        return true;\n      case 'console.clear.history':\n        ConsoleView.instance()._clearHistory();\n        return true;\n      case 'console.create-pin':\n        ConsoleView.instance()._pinPane.addPin('', true /* userGesture */);\n        return true;\n    }\n    return false;\n  }\n}\n\n/** @type {!WeakMap<!ConsoleViewMessage, number>} */\nconst messagesSortedBySymbol = new WeakMap();\n/** @type {!WeakMap<!SDK.ConsoleModel.ConsoleMessage, !ConsoleViewMessage>} */\nconst consoleMessageToViewMessage = new WeakMap();\n\n/**\n * @typedef {{messageIndex: number, matchIndex: number}}\n */\n// @ts-expect-error typedef\nexport let RegexMatchRange;\n"]}
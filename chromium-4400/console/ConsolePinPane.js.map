{"version":3,"file":"ConsolePinPane.js","sourceRoot":"","sources":["../../../../../front_end/console/ConsolePinPane.js"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2018 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';\nimport * as ObjectUI from '../object_ui/object_ui.js';\nimport {ls} from '../platform/platform.js';\nimport * as Root from '../root/root.js';\nimport * as SDK from '../sdk/sdk.js';\nimport * as TextUtils from '../text_utils/text_utils.js';\nimport * as UI from '../ui/ui.js';\n\n\n/** @type {!WeakMap<!Element, !ConsolePin>} */\nconst elementToConsolePin = new WeakMap();\n\nexport class ConsolePinPane extends UI.ThrottledWidget.ThrottledWidget {\n  /**\n   * @param {!UI.Toolbar.ToolbarButton} liveExpressionButton\n   */\n  constructor(liveExpressionButton) {\n    super(true, 250);\n    this._liveExpressionButton = liveExpressionButton;\n    this.registerRequiredCSS('console/consolePinPane.css', {enableLegacyPatching: true});\n    this.registerRequiredCSS('object_ui/objectValue.css', {enableLegacyPatching: true});\n    this.contentElement.classList.add('console-pins', 'monospace');\n    this.contentElement.addEventListener('contextmenu', this._contextMenuEventFired.bind(this), false);\n\n    /** @type {!Set<!ConsolePin>} */\n    this._pins = new Set();\n    this._pinsSetting = Common.Settings.Settings.instance().createLocalSetting('consolePins', []);\n    for (const expression of this._pinsSetting.get()) {\n      this.addPin(expression);\n    }\n  }\n\n  /**\n   * @override\n   */\n  willHide() {\n    for (const pin of this._pins) {\n      pin.setHovered(false);\n    }\n  }\n\n  _savePins() {\n    const toSave = Array.from(this._pins).map(pin => pin.expression());\n    this._pinsSetting.set(toSave);\n  }\n\n  /**\n   * @param {!Event} event\n   */\n  _contextMenuEventFired(event) {\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    const target = UI.UIUtils.deepElementFromEvent(event);\n    if (target) {\n      const targetPinElement = target.enclosingNodeOrSelfWithClass('console-pin');\n      if (targetPinElement) {\n        const targetPin = elementToConsolePin.get(targetPinElement);\n        if (targetPin) {\n          contextMenu.editSection().appendItem(ls`Remove expression`, this._removePin.bind(this, targetPin));\n          targetPin.appendToContextMenu(contextMenu);\n        }\n      }\n    }\n    contextMenu.editSection().appendItem(ls`Remove all expressions`, this._removeAllPins.bind(this));\n    contextMenu.show();\n  }\n\n  _removeAllPins() {\n    for (const pin of this._pins) {\n      this._removePin(pin);\n    }\n  }\n\n  /**\n   * @param {!ConsolePin} pin\n   */\n  _removePin(pin) {\n    pin.element().remove();\n    const newFocusedPin = this._focusedPinAfterDeletion(pin);\n    this._pins.delete(pin);\n    this._savePins();\n    if (newFocusedPin) {\n      newFocusedPin.focus();\n    } else {\n      this._liveExpressionButton.focus();\n    }\n  }\n\n  /**\n   * @param {string} expression\n   * @param {boolean=} userGesture\n   */\n  addPin(expression, userGesture) {\n    const pin = new ConsolePin(expression, this);\n    this.contentElement.appendChild(pin.element());\n    this._pins.add(pin);\n    this._savePins();\n    if (userGesture) {\n      pin.focus();\n    }\n    this.update();\n  }\n\n  /**\n   * @param {!ConsolePin} deletedPin\n   * @return {?ConsolePin}\n   */\n  _focusedPinAfterDeletion(deletedPin) {\n    const pinArray = Array.from(this._pins);\n    for (let i = 0; i < pinArray.length; i++) {\n      if (pinArray[i] === deletedPin) {\n        if (pinArray.length === 1) {\n          return null;\n        }\n        if (i === pinArray.length - 1) {\n          return pinArray[i - 1];\n        }\n        return pinArray[i + 1];\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @override\n   */\n  async doUpdate() {\n    if (!this._pins.size || !this.isShowing()) {\n      return;\n    }\n    if (this.isShowing()) {\n      this.update();\n    }\n    const updatePromises = Array.from(this._pins, pin => pin.updatePreview());\n    await Promise.all(updatePromises);\n    this._updatedForTest();\n  }\n\n  _updatedForTest() {\n  }\n}\n\nexport class ConsolePin extends Common.ObjectWrapper.ObjectWrapper {\n  /**\n   * @param {string} expression\n   * @param {!ConsolePinPane} pinPane\n   */\n  constructor(expression, pinPane) {\n    super();\n    const deletePinIcon =\n        /** @type {!UI.UIUtils.DevToolsCloseButton} */ (document.createElement('div', {is: 'dt-close-button'}));\n    deletePinIcon.gray = true;\n    deletePinIcon.classList.add('close-button');\n    deletePinIcon.setTabbable(true);\n    if (expression.length) {\n      deletePinIcon.setAccessibleName(ls`Remove expression: ${expression}`);\n    } else {\n      deletePinIcon.setAccessibleName(ls`Remove blank expression`);\n    }\n    self.onInvokeElement(deletePinIcon, event => {\n      pinPane._removePin(this);\n      event.consume(true);\n    });\n\n    const fragment = UI.Fragment.Fragment.build`\n    <div class='console-pin'>\n      ${deletePinIcon}\n      <div class='console-pin-name' $='name'></div>\n      <div class='console-pin-preview' $='preview'></div>\n    </div>`;\n    this._pinElement = fragment.element();\n    /** @type {!HTMLElement} */\n    this._pinPreview = /** @type {!HTMLElement} */ (fragment.$('preview'));\n    const nameElement = /** @type {!HTMLElement} */ (fragment.$('name'));\n    UI.Tooltip.Tooltip.install(nameElement, expression);\n    elementToConsolePin.set(this._pinElement, this);\n\n    /** @type {?SDK.RuntimeModel.EvaluationResult} */\n    this._lastResult = null;\n    /** @type {?SDK.RuntimeModel.ExecutionContext} */\n    this._lastExecutionContext = null;\n    /** @type {?UI.TextEditor.TextEditor} */\n    this._editor = null;\n    this._committedExpression = expression;\n    this._hovered = false;\n    /** @type {?SDK.RemoteObject.RemoteObject} */\n    this._lastNode = null;\n\n    this._pinPreview.addEventListener('mouseenter', this.setHovered.bind(this, true), false);\n    this._pinPreview.addEventListener('mouseleave', this.setHovered.bind(this, false), false);\n    this._pinPreview.addEventListener('click', /** @param {!Event} event */ event => {\n      if (this._lastNode) {\n        Common.Revealer.reveal(this._lastNode);\n        event.consume();\n      }\n    }, false);\n\n    /**\n    * @param {!UI.TextEditor.TextEditorFactory} factory\n    * @return {!UI.TextEditor.TextEditor}\n    */\n    const createTextEditor = factory => {\n      this._editor = factory.createEditor({\n        devtoolsAccessibleName: ls`Live expression editor`,\n        lineNumbers: false,\n        lineWrapping: true,\n        mimeType: 'javascript',\n        autoHeight: true,\n        placeholder: ls`Expression`,\n        bracketMatchingSetting: undefined,\n        lineWiseCopyCut: undefined,\n        maxHighlightLength: undefined,\n        padBottom: undefined,\n        inputStyle: undefined,\n      });\n      this._editor.configureAutocomplete(\n          ObjectUI.JavaScriptAutocomplete.JavaScriptAutocompleteConfig.createConfigForEditor(this._editor));\n      this._editor.widget().show(nameElement);\n      this._editor.widget().element.classList.add('console-pin-editor');\n      this._editor.widget().element.tabIndex = -1;\n      this._editor.setText(expression);\n      this._editor.widget().element.addEventListener('keydown', event => {\n        if (!this._editor) {\n          return;\n        }\n        if (event.key === 'Tab' && !this._editor.text()) {\n          event.consume();\n          return;\n        }\n        if (event.keyCode === UI.KeyboardShortcut.Keys.Esc.code) {\n          this._editor.setText(this._committedExpression);\n        }\n      }, true);\n      this._editor.widget().element.addEventListener('focusout', event => {\n        if (!this._editor) {\n          return;\n        }\n        const text = this._editor.text();\n        const trimmedText = text.trim();\n        if (text.length !== trimmedText.length) {\n          this._editor.setText(trimmedText);\n        }\n        this._committedExpression = trimmedText;\n        pinPane._savePins();\n        if (this._committedExpression.length) {\n          deletePinIcon.setAccessibleName(ls`Remove expression: ${this._committedExpression}`);\n        } else {\n          deletePinIcon.setAccessibleName(ls`Remove blank expression`);\n        }\n        this._editor.setSelection(TextUtils.TextRange.TextRange.createFromLocation(Infinity, Infinity));\n      });\n      return this._editor;\n    };\n\n    const extension = /** @type {!Root.Runtime.Extension} */ (\n        Root.Runtime.Runtime.instance().extension(UI.TextEditor.TextEditorFactory));\n\n    this._editorPromise =\n        extension.instance().then(obj => createTextEditor(/** @type {!UI.TextEditor.TextEditorFactory} */ (obj)));\n  }\n\n  /**\n   * @param {boolean} hovered\n   */\n  setHovered(hovered) {\n    if (this._hovered === hovered) {\n      return;\n    }\n    this._hovered = hovered;\n    if (!hovered && this._lastNode) {\n      SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n    }\n  }\n\n  /**\n   * @return {string}\n   */\n  expression() {\n    return this._committedExpression;\n  }\n\n  /**\n   * @return {!Element}\n   */\n  element() {\n    return this._pinElement;\n  }\n\n  async focus() {\n    const editor = await this._editorPromise;\n    editor.widget().focus();\n    editor.setSelection(TextUtils.TextRange.TextRange.createFromLocation(Infinity, Infinity));\n  }\n\n  /**\n   * @param {!UI.ContextMenu.ContextMenu} contextMenu\n   */\n  appendToContextMenu(contextMenu) {\n    if (this._lastResult && !('error' in this._lastResult) && this._lastResult.object) {\n      contextMenu.appendApplicableItems(this._lastResult.object);\n      // Prevent result from being released manually. It will release along with 'console' group.\n      this._lastResult = null;\n    }\n  }\n\n  /**\n   * @return {!Promise<void>}\n   */\n  async updatePreview() {\n    if (!this._editor) {\n      return;\n    }\n    const text = this._editor.textWithCurrentSuggestion().trim();\n    const isEditing = this._pinElement.hasFocus();\n    const throwOnSideEffect = isEditing && text !== this._committedExpression;\n    const timeout = throwOnSideEffect ? 250 : undefined;\n    const executionContext = UI.Context.Context.instance().flavor(SDK.RuntimeModel.ExecutionContext);\n    const {preview, result} = await ObjectUI.JavaScriptREPL.JavaScriptREPL.evaluateAndBuildPreview(\n        text, throwOnSideEffect, timeout, !isEditing /* allowErrors */, 'console');\n    if (this._lastResult && this._lastExecutionContext) {\n      this._lastExecutionContext.runtimeModel.releaseEvaluationResult(this._lastResult);\n    }\n    this._lastResult = result || null;\n    this._lastExecutionContext = executionContext || null;\n\n    const previewText = preview.deepTextContent();\n    if (!previewText || previewText !== this._pinPreview.deepTextContent()) {\n      this._pinPreview.removeChildren();\n      if (result && SDK.RuntimeModel.RuntimeModel.isSideEffectFailure(result)) {\n        const sideEffectLabel =\n            /** @type {!HTMLElement} */ (this._pinPreview.createChild('span', 'object-value-calculate-value-button'));\n        sideEffectLabel.textContent = '(…)';\n        UI.Tooltip.Tooltip.install(sideEffectLabel, ls`Evaluate, allowing side effects`);\n      } else if (previewText) {\n        this._pinPreview.appendChild(preview);\n      } else if (!isEditing) {\n        UI.UIUtils.createTextChild(this._pinPreview, ls`not available`);\n      }\n      UI.Tooltip.Tooltip.install(this._pinPreview, previewText);\n    }\n\n    let node = null;\n    if (result && !('error' in result) && result.object.type === 'object' && result.object.subtype === 'node') {\n      node = result.object;\n    }\n    if (this._hovered) {\n      if (node) {\n        SDK.OverlayModel.OverlayModel.highlightObjectAsDOMNode(node);\n      } else if (this._lastNode) {\n        SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n      }\n    }\n    this._lastNode = node || null;\n\n    const isError = result && !('error' in result) && result.exceptionDetails &&\n        !SDK.RuntimeModel.RuntimeModel.isSideEffectFailure(result);\n    this._pinElement.classList.toggle('error-level', Boolean(isError));\n  }\n}\n"]}
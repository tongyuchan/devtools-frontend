{"version":3,"file":"ConsoleViewMessage.js","sourceRoot":"","sources":["../../../../../front_end/console/ConsoleViewMessage.js"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2011 Google Inc.  All rights reserved.\n * Copyright (C) 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2009 Joseph Pecoraro\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../common/common.js';\nimport * as Components from '../components/components.js';\nimport * as DataGrid from '../data_grid/data_grid.js';\nimport * as ObjectUI from '../object_ui/object_ui.js';\nimport * as Platform from '../platform/platform.js';\nimport {ls} from '../platform/platform.js';\nimport * as SDK from '../sdk/sdk.js';\nimport * as TextUtils from '../text_utils/text_utils.js';\nimport * as ThemeSupport from '../theme_support/theme_support.js';\nimport * as UI from '../ui/ui.js';\n\nimport {ConsoleViewportElement} from './ConsoleViewport.js';  // eslint-disable-line no-unused-vars\n\n/** @type {!WeakMap<!Element, !ConsoleViewMessage>} */\nconst elementToMessage = new WeakMap();\n\n/**\n * @param {!Element} element\n */\nexport const getMessageForElement = element => {\n  return elementToMessage.get(element);\n};\n\n// This value reflects the 18px min-height of .console-message, plus the\n// 1px border of .console-message-wrapper. Keep in sync with consoleView.css.\nconst defaultConsoleRowHeight = 19;\n\n/**\n * @param {?SDK.RuntimeModel.RuntimeModel} runtimeModel\n */\nconst parameterToRemoteObject = runtimeModel =>\n    /**\n     * @param {!SDK.RemoteObject.RemoteObject|!Protocol.Runtime.RemoteObject|string|undefined} parameter\n     * @return {!SDK.RemoteObject.RemoteObject}\n     */\n    parameter => {\n      if (parameter instanceof SDK.RemoteObject.RemoteObject) {\n        return parameter;\n      }\n      if (!runtimeModel) {\n        return SDK.RemoteObject.RemoteObject.fromLocalObject(parameter);\n      }\n      if (typeof parameter === 'object') {\n        return runtimeModel.createRemoteObject(parameter);\n      }\n      return runtimeModel.createRemoteObjectFromPrimitiveValue(parameter);\n    };\n\n/**\n * @implements {ConsoleViewportElement}\n */\nexport class ConsoleViewMessage {\n  /**\n   * @param {!SDK.ConsoleModel.ConsoleMessage} consoleMessage\n   * @param {!Components.Linkifier.Linkifier} linkifier\n   * @param {number} nestingLevel\n   * @param {function(!Common.EventTarget.EventTargetEvent): void} onResize\n   */\n  constructor(consoleMessage, linkifier, nestingLevel, onResize) {\n    this._message = consoleMessage;\n    this._linkifier = linkifier;\n    this._repeatCount = 1;\n    this._closeGroupDecorationCount = 0;\n    this._nestingLevel = nestingLevel;\n    /** @type {!Array<{element: !HTMLElement, forceSelect: function():void}>} */\n    this._selectableChildren = [];\n    this._messageResized = onResize;\n    /** @type {?HTMLElement} */\n    this._element = null;\n\n    this._previewFormatter = new ObjectUI.RemoteObjectPreviewFormatter.RemoteObjectPreviewFormatter();\n    this._searchRegex = null;\n    /** @type {?UI.Icon.Icon} */\n    this._messageLevelIcon = null;\n    this._traceExpanded = false;\n    /** @type {?function(boolean):void} */\n    this._expandTrace = null;\n    /** @type {?HTMLElement} */\n    this._anchorElement = null;\n    /** @type {?HTMLElement} */\n    this._contentElement = null;\n    /** @type {?Array<!HTMLElement>} */\n    this._nestingLevelMarkers = null;\n    /** @type {!Array<!Element>} */\n    this._searchHighlightNodes = [];\n    /** @type {!Array<!UI.UIUtils.HighlightChange>} */\n    this._searchHighlightNodeChanges = [];\n    this._isVisible = false;\n    this._cachedHeight = 0;\n    this._messagePrefix = '';\n    /** @type {?HTMLElement} */\n    this._timestampElement = null;\n    this._inSimilarGroup = false;\n    /** @type {?HTMLElement} */\n    this._similarGroupMarker = null;\n    this._lastInSimilarGroup = false;\n    this._groupKey = '';\n    /** @type {?UI.UIUtils.DevToolsSmallBubble} */\n    this._repeatCountElement = null;\n  }\n\n  /**\n   * @override\n   * @return {!HTMLElement}\n   */\n  element() {\n    return this.toMessageElement();\n  }\n\n  /**\n   * @override\n   */\n  wasShown() {\n    this._isVisible = true;\n  }\n\n  onResize() {\n  }\n\n  /**\n   * @override\n   */\n  willHide() {\n    this._isVisible = false;\n    this._cachedHeight = this.element().offsetHeight;\n  }\n\n  isVisible() {\n    return this._isVisible;\n  }\n\n  /**\n   * @return {number}\n   */\n  fastHeight() {\n    if (this._cachedHeight) {\n      return this._cachedHeight;\n    }\n    return this.approximateFastHeight();\n  }\n\n  approximateFastHeight() {\n    return defaultConsoleRowHeight;\n  }\n\n  /**\n   * @return {!SDK.ConsoleModel.ConsoleMessage}\n   */\n  consoleMessage() {\n    return this._message;\n  }\n\n  /**\n   * @return {!HTMLElement}\n   */\n  _buildMessage() {\n    let messageElement;\n    let messageText = this._message.messageText;\n    if (this._message.source === SDK.ConsoleModel.MessageSource.ConsoleAPI) {\n      switch (this._message.type) {\n        case SDK.ConsoleModel.MessageType.Trace:\n          messageElement = this._format(this._message.parameters || ['console.trace']);\n          break;\n        case SDK.ConsoleModel.MessageType.Clear:\n          messageElement = document.createElement('span');\n          messageElement.classList.add('console-info');\n          if (Common.Settings.Settings.instance().moduleSetting('preserveConsoleLog').get()) {\n            messageElement.textContent =\n                Common.UIString.UIString('console.clear() was prevented due to \\'Preserve log\\'');\n          } else {\n            messageElement.textContent = Common.UIString.UIString('Console was cleared');\n          }\n          UI.Tooltip.Tooltip.install(\n              messageElement,\n              ls`Clear all messages with ${\n                  UI.ShortcutRegistry.ShortcutRegistry.instance().shortcutTitleForAction('console.clear')}`);\n          break;\n        case SDK.ConsoleModel.MessageType.Dir: {\n          const obj = this._message.parameters ? this._message.parameters[0] : undefined;\n          const args = ['%O', obj];\n          messageElement = this._format(args);\n          break;\n        }\n        case SDK.ConsoleModel.MessageType.Profile:\n        case SDK.ConsoleModel.MessageType.ProfileEnd:\n          messageElement = this._format([messageText]);\n          break;\n        default: {\n          if (this._message.type === SDK.ConsoleModel.MessageType.Assert) {\n            this._messagePrefix = ls`Assertion failed: `;\n          }\n          if (this._message.parameters && this._message.parameters.length === 1) {\n            const parameter = this._message.parameters[0];\n            if (typeof parameter !== 'string' && parameter.type === 'string') {\n              messageElement = this._tryFormatAsError(/** @type {string} */ (parameter.value));\n            }\n          }\n          const args = this._message.parameters || [messageText];\n          messageElement = messageElement || this._format(args);\n        }\n      }\n    } else {\n      if (this._message.source === SDK.ConsoleModel.MessageSource.Network) {\n        messageElement = this._formatAsNetworkRequest() || this._format([messageText]);\n      } else {\n        const messageInParameters =\n            this._message.parameters && messageText === /** @type {string} */ (this._message.parameters[0]);\n        if (this._message.source === SDK.ConsoleModel.MessageSource.Violation) {\n          messageText = Common.UIString.UIString('[Violation] %s', messageText);\n        } else if (this._message.source === SDK.ConsoleModel.MessageSource.Intervention) {\n          messageText = Common.UIString.UIString('[Intervention] %s', messageText);\n        } else if (this._message.source === SDK.ConsoleModel.MessageSource.Deprecation) {\n          messageText = Common.UIString.UIString('[Deprecation] %s', messageText);\n        }\n        const args = this._message.parameters || [messageText];\n        if (messageInParameters) {\n          args[0] = messageText;\n        }\n        messageElement = this._format(args);\n      }\n    }\n    messageElement.classList.add('console-message-text');\n\n    const formattedMessage = /** @type {!HTMLElement} */ (document.createElement('span'));\n    formattedMessage.classList.add('source-code');\n    this._anchorElement = this._buildMessageAnchor();\n    if (this._anchorElement) {\n      formattedMessage.appendChild(this._anchorElement);\n    }\n    formattedMessage.appendChild(messageElement);\n    return formattedMessage;\n  }\n\n  /**\n   * @return {?HTMLElement}\n   */\n  _formatAsNetworkRequest() {\n    const request = SDK.NetworkLog.NetworkLog.requestForConsoleMessage(this._message);\n    if (!request) {\n      return null;\n    }\n    const messageElement = /** @type {!HTMLElement} */ (document.createElement('span'));\n    if (this._message.level === SDK.ConsoleModel.MessageLevel.Error) {\n      UI.UIUtils.createTextChild(messageElement, request.requestMethod + ' ');\n      const linkElement = Components.Linkifier.Linkifier.linkifyRevealable(request, request.url(), request.url());\n      // Focus is handled by the viewport.\n      linkElement.tabIndex = -1;\n      this._selectableChildren.push({element: linkElement, forceSelect: () => linkElement.focus()});\n      messageElement.appendChild(linkElement);\n      if (request.failed) {\n        UI.UIUtils.createTextChildren(messageElement, ' ', request.localizedFailDescription || '');\n      }\n      if (request.statusCode !== 0) {\n        UI.UIUtils.createTextChildren(messageElement, ' ', String(request.statusCode));\n      }\n      if (request.statusText) {\n        UI.UIUtils.createTextChildren(messageElement, ' (', request.statusText, ')');\n      }\n    } else {\n      const messageText = this._message.messageText;\n      const fragment = this._linkifyWithCustomLinkifier(messageText, (text, url, lineNumber, columnNumber) => {\n        const linkElement = url === request.url() ?\n            Components.Linkifier.Linkifier.linkifyRevealable(\n                /** @type {!SDK.NetworkRequest.NetworkRequest} */ (request), url, request.url()) :\n            Components.Linkifier.Linkifier.linkifyURL(\n                url, /** @type {!Components.Linkifier.LinkifyURLOptions} */ ({text, lineNumber, columnNumber}));\n        linkElement.tabIndex = -1;\n        this._selectableChildren.push({element: linkElement, forceSelect: () => linkElement.focus()});\n        return linkElement;\n      });\n      messageElement.appendChild(fragment);\n    }\n    return messageElement;\n  }\n\n  /**\n   * @return {?HTMLElement}\n   */\n  _buildMessageAnchor() {\n    /**\n     * @param {!SDK.ConsoleModel.ConsoleMessage} message\n     * @return {?HTMLElement}\n     */\n    const linkify = message => {\n      if (message.scriptId) {\n        return this._linkifyScriptId(message.scriptId, message.url || '', message.line, message.column);\n      }\n      if (message.stackTrace && message.stackTrace.callFrames.length) {\n        return this._linkifyStackTraceTopFrame(message.stackTrace);\n      }\n      if (message.url && message.url !== 'undefined') {\n        return this._linkifyLocation(message.url, message.line, message.column);\n      }\n      return null;\n    };\n    const anchorElement = linkify(this._message);\n    // Append a space to prevent the anchor text from being glued to the console message when the user selects and copies the console messages.\n    if (anchorElement) {\n      anchorElement.tabIndex = -1;\n      this._selectableChildren.push({\n        element: anchorElement,\n        forceSelect: () => anchorElement.focus(),\n      });\n      const anchorWrapperElement = /** @type {!HTMLElement} */ (document.createElement('span'));\n      anchorWrapperElement.classList.add('console-message-anchor');\n      anchorWrapperElement.appendChild(anchorElement);\n      UI.UIUtils.createTextChild(anchorWrapperElement, ' ');\n      return anchorWrapperElement;\n    }\n    return null;\n  }\n\n  /**\n   * @param {!SDK.RuntimeModel.RuntimeModel} runtimeModel\n   * @return {!HTMLElement}\n   */\n  _buildMessageWithStackTrace(runtimeModel) {\n    const toggleElement = /** @type {!HTMLElement} */ (document.createElement('div'));\n    toggleElement.classList.add('console-message-stack-trace-toggle');\n    const contentElement = toggleElement.createChild('div', 'console-message-stack-trace-wrapper');\n\n    const messageElement = this._buildMessage();\n    const icon = UI.Icon.Icon.create('smallicon-triangle-right', 'console-message-expand-icon');\n    const clickableElement = contentElement.createChild('div');\n    clickableElement.appendChild(icon);\n    // Intercept focus to avoid highlight on click.\n    clickableElement.tabIndex = -1;\n    clickableElement.appendChild(messageElement);\n    const stackTraceElement = contentElement.createChild('div');\n    const stackTracePreview = Components.JSPresentationUtils.buildStackTracePreviewContents(\n        runtimeModel.target(), this._linkifier,\n        {stackTrace: this._message.stackTrace, contentUpdated: undefined, tabStops: undefined});\n    stackTraceElement.appendChild(stackTracePreview.element);\n    for (const linkElement of stackTracePreview.links) {\n      this._selectableChildren.push({element: linkElement, forceSelect: () => linkElement.focus()});\n    }\n    stackTraceElement.classList.add('hidden');\n    UI.ARIAUtils.markAsTreeitem(this.element());\n    UI.ARIAUtils.setExpanded(this.element(), false);\n    this._expandTrace = expand => {\n      icon.setIconType(expand ? 'smallicon-triangle-down' : 'smallicon-triangle-right');\n      stackTraceElement.classList.toggle('hidden', !expand);\n      UI.ARIAUtils.setExpanded(this.element(), expand);\n      this._traceExpanded = expand;\n    };\n\n    /**\n     * @this {!ConsoleViewMessage}\n     * @param {!Event} event\n     */\n    const toggleStackTrace = event => {\n      if (UI.UIUtils.isEditing() || contentElement.hasSelection()) {\n        return;\n      }\n      this._expandTrace && this._expandTrace(stackTraceElement.classList.contains('hidden'));\n      event.consume();\n    };\n\n    clickableElement.addEventListener('click', toggleStackTrace, false);\n    if (this._message.type === SDK.ConsoleModel.MessageType.Trace) {\n      this._expandTrace(true);\n    }\n\n    // @ts-ignore\n    toggleElement._expandStackTraceForTest = this._expandTrace.bind(this, true);\n    return toggleElement;\n  }\n\n  /**\n   * @param {string} url\n   * @param {number} lineNumber\n   * @param {number} columnNumber\n   * @return {?HTMLElement}\n   */\n  _linkifyLocation(url, lineNumber, columnNumber) {\n    const runtimeModel = this._message.runtimeModel();\n    if (!runtimeModel) {\n      return null;\n    }\n    return this._linkifier.linkifyScriptLocation(\n        runtimeModel.target(), /* scriptId */ null, url, lineNumber,\n        {columnNumber, className: undefined, tabStop: undefined});\n  }\n\n  /**\n   * @param {!Protocol.Runtime.StackTrace} stackTrace\n   * @return {?HTMLElement}\n   */\n  _linkifyStackTraceTopFrame(stackTrace) {\n    const runtimeModel = this._message.runtimeModel();\n    if (!runtimeModel) {\n      return null;\n    }\n    return this._linkifier.linkifyStackTraceTopFrame(runtimeModel.target(), stackTrace);\n  }\n\n  /**\n   * @param {string} scriptId\n   * @param {string} url\n   * @param {number} lineNumber\n   * @param {number} columnNumber\n   * @return {?HTMLElement}\n   */\n  _linkifyScriptId(scriptId, url, lineNumber, columnNumber) {\n    const runtimeModel = this._message.runtimeModel();\n    if (!runtimeModel) {\n      return null;\n    }\n    return this._linkifier.linkifyScriptLocation(\n        runtimeModel.target(), scriptId, url, lineNumber, {columnNumber, className: undefined, tabStop: undefined});\n  }\n\n  /**\n   * @param {!Array.<!Protocol.Runtime.RemoteObject | !SDK.RemoteObject.RemoteObject | string | undefined>} rawParameters\n   * @return {!HTMLElement}\n   */\n  _format(rawParameters) {\n    // This node is used like a Builder. Values are continually appended onto it.\n    const formattedResult = /** @type {!HTMLElement} */ (document.createElement('span'));\n    if (this._messagePrefix) {\n      formattedResult.createChild('span').textContent = this._messagePrefix;\n    }\n    if (!rawParameters.length) {\n      return formattedResult;\n    }\n\n    // Formatting code below assumes that parameters are all wrappers whereas frontend console\n    // API allows passing arbitrary values as messages (strings, numbers, etc.). Wrap them here.\n    // FIXME: Only pass runtime wrappers here.\n    let parameters = rawParameters.map(parameterToRemoteObject(this._message.runtimeModel()));\n\n    // There can be string log and string eval result. We distinguish between them based on message type.\n    const shouldFormatMessage =\n        SDK.RemoteObject.RemoteObject.type(\n            (/** @type {!Array.<!SDK.RemoteObject.RemoteObject>} **/ (parameters))[0]) === 'string' &&\n        (this._message.type !== SDK.ConsoleModel.MessageType.Result ||\n         this._message.level === SDK.ConsoleModel.MessageLevel.Error);\n\n    // Multiple parameters with the first being a format string. Save unused substitutions.\n    if (shouldFormatMessage) {\n      const result = this._formatWithSubstitutionString(\n          /** @type {string} **/ (parameters[0].description), parameters.slice(1), formattedResult);\n      parameters = Array.from(result.unusedSubstitutions || []);\n      if (parameters.length) {\n        UI.UIUtils.createTextChild(formattedResult, ' ');\n      }\n    }\n\n    // Single parameter, or unused substitutions from above.\n    for (let i = 0; i < parameters.length; ++i) {\n      // Inline strings when formatting.\n      if (shouldFormatMessage && parameters[i].type === 'string') {\n        formattedResult.appendChild(this._linkifyStringAsFragment(parameters[i].description || ''));\n      } else {\n        formattedResult.appendChild(this._formatParameter(parameters[i], false, true));\n      }\n      if (i < parameters.length - 1) {\n        UI.UIUtils.createTextChild(formattedResult, ' ');\n      }\n    }\n    return formattedResult;\n  }\n\n  /**\n   * @param {!SDK.RemoteObject.RemoteObject} output\n   * @param {boolean=} forceObjectFormat\n   * @param {boolean=} includePreview\n   * @return {!HTMLElement}\n   */\n  _formatParameter(output, forceObjectFormat, includePreview) {\n    if (output.customPreview()) {\n      return /** @type {!HTMLElement} */ ((new ObjectUI.CustomPreviewComponent.CustomPreviewComponent(output)).element);\n    }\n\n    const outputType = forceObjectFormat ? 'object' : (output.subtype || output.type);\n    let element;\n    switch (outputType) {\n      case 'error':\n        element = this._formatParameterAsError(output);\n        break;\n      case 'function':\n        element = this._formatParameterAsFunction(output, includePreview);\n        break;\n      case 'array':\n      case 'arraybuffer':\n      case 'blob':\n      case 'dataview':\n      case 'generator':\n      case 'iterator':\n      case 'map':\n      case 'object':\n      case 'promise':\n      case 'proxy':\n      case 'set':\n      case 'typedarray':\n      case 'weakmap':\n      case 'weakset':\n      case 'webassemblymemory':\n        element = this._formatParameterAsObject(output, includePreview);\n        break;\n      case 'node':\n        element = output.isNode() ? this._formatParameterAsNode(output) : this._formatParameterAsObject(output, false);\n        break;\n      case 'trustedtype':\n        element = this._formatParameterAsObject(output, false);\n        break;\n      case 'string':\n        element = this._formatParameterAsString(output);\n        break;\n      case 'boolean':\n      case 'date':\n      case 'null':\n      case 'number':\n      case 'regexp':\n      case 'symbol':\n      case 'undefined':\n      case 'bigint':\n        element = this._formatParameterAsValue(output);\n        break;\n      default:\n        element = this._formatParameterAsValue(output);\n        console.error(`Tried to format remote object of unknown type ${outputType}.`);\n    }\n    element.classList.add(`object-value-${outputType}`);\n    element.classList.add('source-code');\n    return element;\n  }\n\n  /**\n   * @param {!SDK.RemoteObject.RemoteObject} obj\n   * @return {!HTMLElement}\n   */\n  _formatParameterAsValue(obj) {\n    const result = /** @type {!HTMLElement} */ (document.createElement('span'));\n    const description = obj.description || '';\n    if (description.length > getMaxTokenizableStringLength()) {\n      const propertyValue = new ObjectUI.ObjectPropertiesSection.ExpandableTextPropertyValue(\n          document.createElement('span'), description, getLongStringVisibleLength());\n      result.appendChild(propertyValue.element);\n    } else {\n      UI.UIUtils.createTextChild(result, description);\n    }\n    if (obj.objectId) {\n      result.addEventListener('contextmenu', this._contextMenuEventFired.bind(this, obj), false);\n    }\n    return result;\n  }\n\n  /**\n   * @param {!SDK.RemoteObject.RemoteObject} obj\n   * @return {!HTMLElement}\n   */\n  _formatParameterAsTrustedType(obj) {\n    const result = /** @type {!HTMLElement} */ (document.createElement('span'));\n    const trustedContentSpan = document.createElement('span');\n    trustedContentSpan.appendChild(this._formatParameterAsString(obj));\n    trustedContentSpan.classList.add('object-value-string');\n    UI.UIUtils.createTextChild(result, `${obj.className} `);\n    result.appendChild(trustedContentSpan);\n    return result;\n  }\n\n  /**\n   * @param {!SDK.RemoteObject.RemoteObject} obj\n   * @param {boolean=} includePreview\n   * @return {!HTMLElement}\n   */\n  _formatParameterAsObject(obj, includePreview) {\n    const titleElement = /** @type {!HTMLElement} */ (document.createElement('span'));\n    titleElement.classList.add('console-object');\n    if (includePreview && obj.preview) {\n      titleElement.classList.add('console-object-preview');\n      this._previewFormatter.appendObjectPreview(titleElement, obj.preview, false /* isEntry */);\n    } else if (obj.type === 'function') {\n      const functionElement = titleElement.createChild('span');\n      ObjectUI.ObjectPropertiesSection.ObjectPropertiesSection.formatObjectAsFunction(obj, functionElement, false);\n      titleElement.classList.add('object-value-function');\n    } else if (obj.subtype === 'trustedtype') {\n      titleElement.appendChild(this._formatParameterAsTrustedType(obj));\n    } else {\n      UI.UIUtils.createTextChild(titleElement, obj.description || '');\n    }\n\n    if (!obj.hasChildren || obj.customPreview()) {\n      return titleElement;\n    }\n\n    const note = titleElement.createChild('span', 'object-state-note info-note');\n    if (this._message.type === SDK.ConsoleModel.MessageType.QueryObjectResult) {\n      UI.Tooltip.Tooltip.install(note, ls`This value will not be collected until console is cleared.`);\n    } else {\n      UI.Tooltip.Tooltip.install(\n          note, ls`This value was evaluated upon first expanding. It may have changed since then.`);\n    }\n\n    const section = new ObjectUI.ObjectPropertiesSection.ObjectPropertiesSection(obj, titleElement, this._linkifier);\n    section.element.classList.add('console-view-object-properties-section');\n    section.enableContextMenu();\n    section.setShowSelectionOnKeyboardFocus(true, true);\n    this._selectableChildren.push(section);\n    section.addEventListener(UI.TreeOutline.Events.ElementAttached, this._messageResized);\n    section.addEventListener(UI.TreeOutline.Events.ElementExpanded, this._messageResized);\n    section.addEventListener(UI.TreeOutline.Events.ElementCollapsed, this._messageResized);\n    return section.element;\n  }\n\n  /**\n   * @param {!SDK.RemoteObject.RemoteObject} func\n   * @param {boolean=} includePreview\n   * @return {!HTMLElement}\n   */\n  _formatParameterAsFunction(func, includePreview) {\n    const result = /** @type {!HTMLElement} */ (document.createElement('span'));\n    SDK.RemoteObject.RemoteFunction.objectAsFunction(func).targetFunction().then(formatTargetFunction.bind(this));\n    return result;\n\n    /**\n     * @param {!SDK.RemoteObject.RemoteObject} targetFunction\n     * @this {ConsoleViewMessage}\n     */\n    function formatTargetFunction(targetFunction) {\n      const functionElement = document.createElement('span');\n      const promise = ObjectUI.ObjectPropertiesSection.ObjectPropertiesSection.formatObjectAsFunction(\n          targetFunction, functionElement, true, includePreview);\n      result.appendChild(functionElement);\n      if (targetFunction !== func) {\n        const note = result.createChild('span', 'object-info-state-note');\n        UI.Tooltip.Tooltip.install(note, Common.UIString.UIString('Function was resolved from bound function.'));\n      }\n      result.addEventListener('contextmenu', this._contextMenuEventFired.bind(this, targetFunction), false);\n      promise.then(() => this._formattedParameterAsFunctionForTest());\n    }\n  }\n\n  _formattedParameterAsFunctionForTest() {\n  }\n\n  /**\n   * @param {!SDK.RemoteObject.RemoteObject} obj\n   * @param {!Event} event\n   */\n  _contextMenuEventFired(obj, event) {\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    contextMenu.appendApplicableItems(obj);\n    contextMenu.show();\n  }\n\n  /**\n   * @param {?SDK.RemoteObject.RemoteObject} object\n   * @param {!Protocol.Runtime.PropertyPreview|!{name:(string|symbol), type: !Protocol.Runtime.PropertyPreviewType, value: (string|undefined)}} property\n   * @param {!Array.<!{name:(string|symbol)}>} propertyPath\n   * @return {!HTMLElement}\n   */\n  _renderPropertyPreviewOrAccessor(object, property, propertyPath) {\n    if (property.type === 'accessor') {\n      return this._formatAsAccessorProperty(object, propertyPath.map(property => property.name.toString()), false);\n    }\n    return this._previewFormatter.renderPropertyPreview(\n        property.type, 'subtype' in property ? property.subtype : undefined, null, property.value);\n  }\n\n  /**\n   * @param {!SDK.RemoteObject.RemoteObject} remoteObject\n   * @return {!HTMLElement}\n   */\n  _formatParameterAsNode(remoteObject) {\n    const result = /** @type {!HTMLElement} */ (document.createElement('span'));\n\n    const domModel = remoteObject.runtimeModel().target().model(SDK.DOMModel.DOMModel);\n    if (!domModel) {\n      return result;\n    }\n    domModel.pushObjectAsNodeToFrontend(remoteObject).then(async node => {\n      if (!node) {\n        result.appendChild(this._formatParameterAsObject(remoteObject, false));\n        return;\n      }\n      const renderResult = await UI.UIUtils.Renderer.render(/** @type {!Object} */ (node));\n      if (renderResult) {\n        if (renderResult.tree) {\n          this._selectableChildren.push(renderResult.tree);\n          renderResult.tree.addEventListener(UI.TreeOutline.Events.ElementAttached, this._messageResized);\n          renderResult.tree.addEventListener(UI.TreeOutline.Events.ElementExpanded, this._messageResized);\n          renderResult.tree.addEventListener(UI.TreeOutline.Events.ElementCollapsed, this._messageResized);\n        }\n        result.appendChild(renderResult.node);\n      } else {\n        result.appendChild(this._formatParameterAsObject(remoteObject, false));\n      }\n      this._formattedParameterAsNodeForTest();\n    });\n\n    return result;\n  }\n\n  _formattedParameterAsNodeForTest() {\n  }\n\n  /**\n   * @param {!SDK.RemoteObject.RemoteObject} output\n   * @return {!HTMLElement}\n   */\n  _formatParameterAsString(output) {\n    const span = /** @type {!HTMLElement} */ (document.createElement('span'));\n    span.appendChild(this._linkifyStringAsFragment(output.description || ''));\n\n    const result = /** @type {!HTMLElement} */ (document.createElement('span'));\n    result.createChild('span', 'object-value-string-quote').textContent = '\"';\n    result.appendChild(span);\n    result.createChild('span', 'object-value-string-quote').textContent = '\"';\n    return result;\n  }\n\n  /**\n   * @param {!SDK.RemoteObject.RemoteObject} output\n   * @return {!HTMLElement}\n   */\n  _formatParameterAsError(output) {\n    const result = /** @type {!HTMLElement} */ (document.createElement('span'));\n    const errorSpan = this._tryFormatAsError(output.description || '');\n    result.appendChild(errorSpan ? errorSpan : this._linkifyStringAsFragment(output.description || ''));\n    return result;\n  }\n\n  /**\n   * @param {!SDK.RemoteObject.RemoteObject} output\n   * @return {!HTMLElement}\n   */\n  _formatAsArrayEntry(output) {\n    return this._previewFormatter.renderPropertyPreview(\n        output.type, output.subtype, output.className, output.description);\n  }\n\n  /**\n   * @param {?SDK.RemoteObject.RemoteObject} object\n   * @param {!Array.<string>} propertyPath\n   * @param {boolean} isArrayEntry\n   * @return {!HTMLElement}\n   */\n  _formatAsAccessorProperty(object, propertyPath, isArrayEntry) {\n    const rootElement =\n        ObjectUI.ObjectPropertiesSection.ObjectPropertyTreeElement.createRemoteObjectAccessorPropertySpan(\n            object, propertyPath, onInvokeGetterClick.bind(this));\n\n    /**\n     * @param {!SDK.RemoteObject.CallFunctionResult} result\n     * @this {ConsoleViewMessage}\n     */\n    function onInvokeGetterClick(result) {\n      const wasThrown = result.wasThrown;\n      const object = result.object;\n      if (!object) {\n        return;\n      }\n      rootElement.removeChildren();\n      if (wasThrown) {\n        const element = rootElement.createChild('span');\n        element.textContent = Common.UIString.UIString('<exception>');\n        UI.Tooltip.Tooltip.install(element, /** @type {string} */ (object.description));\n      } else if (isArrayEntry) {\n        rootElement.appendChild(this._formatAsArrayEntry(object));\n      } else {\n        // Make a PropertyPreview from the RemoteObject similar to the backend logic.\n        const maxLength = 100;\n        const type = object.type;\n        const subtype = object.subtype;\n        let description = '';\n        if (type !== 'function' && object.description) {\n          if (type === 'string' || subtype === 'regexp' || subtype === 'trustedtype') {\n            description = Platform.StringUtilities.trimMiddle(object.description, maxLength);\n          } else {\n            description = Platform.StringUtilities.trimEndWithMaxLength(object.description, maxLength);\n          }\n        }\n        rootElement.appendChild(\n            this._previewFormatter.renderPropertyPreview(type, subtype, object.className, description));\n      }\n    }\n\n    return rootElement;\n  }\n\n  /**\n   * @param {string} format\n   * @param {!Array.<!SDK.RemoteObject.RemoteObject>} parameters\n   * @param {!HTMLElement} formattedResult\n   * @return {!{formattedResult:!Element, unusedSubstitutions: ?ArrayLike<!SDK.RemoteObject.RemoteObject>}}\n   */\n  _formatWithSubstitutionString(format, parameters, formattedResult) {\n    /**\n     * @param {boolean} force\n     * @param {boolean} includePreview\n     * @param {!SDK.RemoteObject.RemoteObject|string|{description:string}|undefined} obj\n     * @return {!HTMLElement|string|undefined}\n     * @this {ConsoleViewMessage}\n     */\n    function parameterFormatter(force, includePreview, obj) {\n      if (obj instanceof SDK.RemoteObject.RemoteObject) {\n        return this._formatParameter(obj, force, includePreview);\n      }\n      return stringFormatter(obj);\n    }\n\n    /**\n     * @param {!SDK.RemoteObject.RemoteObject|string|{description:string}|undefined} obj\n     */\n    function stringFormatter(obj) {\n      if (obj === undefined) {\n        return undefined;\n      }\n      if (typeof obj === 'string') {\n        return obj;\n      }\n      return obj.description;\n    }\n\n    /**\n     * @param {!SDK.RemoteObject.RemoteObject|string|{description:string}|undefined} obj\n     */\n    function floatFormatter(obj) {\n      if (obj instanceof SDK.RemoteObject.RemoteObject) {\n        if (typeof obj.value !== 'number') {\n          return 'NaN';\n        }\n        return obj.value;\n      }\n      return undefined;\n    }\n\n    /**\n     * @param {!SDK.RemoteObject.RemoteObject|string|{description:string}|undefined} obj\n     */\n    function integerFormatter(obj) {\n      if (obj instanceof SDK.RemoteObject.RemoteObject) {\n        if (obj.type === 'bigint') {\n          return obj.description;\n        }\n        if (typeof obj.value !== 'number') {\n          return 'NaN';\n        }\n        return Math.floor(obj.value);\n      }\n      return undefined;\n    }\n\n    /**\n     * @param {!SDK.RemoteObject.RemoteObject|string|{description:string}|undefined} obj\n     */\n    function bypassFormatter(obj) {\n      return (obj instanceof Node) ? obj : '';\n    }\n\n    /** @type {?Map<string, !{value:string, priority:string}>} */\n    let currentStyle = null;\n    /**\n     * @param {!SDK.RemoteObject.RemoteObject|string|{description:string}|undefined} obj\n     */\n    function styleFormatter(obj) {\n      currentStyle = new Map();\n      const buffer = document.createElement('span');\n      if (obj === undefined) {\n        return;\n      }\n      if (typeof obj === 'string' || !obj.description) {\n        return;\n      }\n      buffer.setAttribute('style', obj.description);\n      for (const property of buffer.style) {\n        if (isAllowedProperty(property)) {\n          const info = {\n            value: buffer.style.getPropertyValue(property),\n            priority: buffer.style.getPropertyPriority(property)\n          };\n          currentStyle.set(property, info);\n        }\n      }\n    }\n\n    /**\n     * @param {string} property\n     */\n    function isAllowedProperty(property) {\n      // Make sure that allowed properties do not interfere with link visibility.\n      const prefixes = [\n        'background', 'border', 'color', 'font', 'line', 'margin', 'padding', 'text', '-webkit-background',\n        '-webkit-border', '-webkit-font', '-webkit-margin', '-webkit-padding', '-webkit-text'\n      ];\n      for (const prefix of prefixes) {\n        if (property.startsWith(prefix)) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    /** @type {!Object.<string, function((string|!{description: string}|undefined|!SDK.RemoteObject.RemoteObject), !Platform.StringUtilities.FormatterToken):*>} */\n    const formatters = {};\n    // Firebug uses %o for formatting objects.\n    formatters.o = parameterFormatter.bind(this, false /* force */, true /* includePreview */);\n    formatters.s = stringFormatter;\n    formatters.f = floatFormatter;\n    // Firebug allows both %i and %d for formatting integers.\n    formatters.i = integerFormatter;\n    formatters.d = integerFormatter;\n\n    // Firebug uses %c for styling the message.\n    formatters.c = styleFormatter;\n\n    // Support %O to force object formatting, instead of the type-based %o formatting.\n    formatters.O = parameterFormatter.bind(this, true /* force */, false /* includePreview */);\n\n    formatters._ = bypassFormatter;\n\n    /**\n     * @param {!HTMLElement} a\n     * @param {*} b\n     * @this {!ConsoleViewMessage}\n     * @return {!HTMLElement}\n     */\n    function append(a, b) {\n      if (b instanceof Node) {\n        a.appendChild(b);\n        return a;\n      }\n      if (typeof b === 'undefined') {\n        return a;\n      }\n      if (!currentStyle) {\n        a.appendChild(this._linkifyStringAsFragment(String(b)));\n        return a;\n      }\n      const lines = String(b).split('\\n');\n      for (let i = 0; i < lines.length; i++) {\n        const line = lines[i];\n        const lineFragment = this._linkifyStringAsFragment(line);\n        const wrapper = /** @type {!HTMLElement} */ (document.createElement('span'));\n        wrapper.style.setProperty('contain', 'paint');\n        wrapper.style.setProperty('display', 'inline-block');\n        wrapper.style.setProperty('max-width', '100%');\n        wrapper.appendChild(lineFragment);\n        applyCurrentStyle(wrapper);\n        for (const child of wrapper.children) {\n          if (child.classList.contains('devtools-link') && child instanceof HTMLElement) {\n            this._applyForcedVisibleStyle(child);\n          }\n        }\n        a.appendChild(wrapper);\n        if (i < lines.length - 1) {\n          a.appendChild(document.createElement('br'));\n        }\n      }\n      return a;\n    }\n\n    /**\n     * @param {!HTMLElement} element\n     */\n    function applyCurrentStyle(element) {\n      if (!currentStyle) {\n        return;\n      }\n      for (const [property, {value, priority}] of currentStyle.entries()) {\n        element.style.setProperty(/** @type {string} */ (property), value, priority);\n      }\n    }\n\n    // Platform.StringUtilities.format does treat formattedResult like a Builder, result is an object.\n    return Platform.StringUtilities.format(format, parameters, formatters, formattedResult, append.bind(this));\n  }\n\n  /**\n   * @param {!HTMLElement} element\n   */\n  _applyForcedVisibleStyle(element) {\n    element.style.setProperty('-webkit-text-stroke', '0', 'important');\n    element.style.setProperty('text-decoration', 'underline', 'important');\n\n    const themedColor = ThemeSupport.ThemeSupport.instance().patchColorText(\n        'rgb(33%, 33%, 33%)', ThemeSupport.ThemeSupport.ColorUsage.Foreground);\n    element.style.setProperty('color', themedColor, 'important');\n\n    let backgroundColor = 'hsl(0, 0%, 100%)';\n    if (this._message.level === SDK.ConsoleModel.MessageLevel.Error) {\n      backgroundColor = 'hsl(0, 100%, 97%)';\n    } else if (this._message.level === SDK.ConsoleModel.MessageLevel.Warning || this._shouldRenderAsWarning()) {\n      backgroundColor = 'hsl(50, 100%, 95%)';\n    }\n    const themedBackgroundColor = ThemeSupport.ThemeSupport.instance().patchColorText(\n        backgroundColor, ThemeSupport.ThemeSupport.ColorUsage.Background);\n    element.style.setProperty('background-color', themedBackgroundColor, 'important');\n  }\n\n  /**\n   * @param {!RegExp} regexObject\n   * @return {boolean}\n   */\n  matchesFilterRegex(regexObject) {\n    regexObject.lastIndex = 0;\n    const contentElement = this.contentElement();\n    const anchorText = this._anchorElement ? this._anchorElement.deepTextContent() : '';\n    return (Boolean(anchorText) && regexObject.test(anchorText.trim())) ||\n        regexObject.test(contentElement.deepTextContent().slice(anchorText.length));\n  }\n\n  /**\n   * @param {string} filter\n   * @return {boolean}\n   */\n  matchesFilterText(filter) {\n    const text = this.contentElement().deepTextContent();\n    return text.toLowerCase().includes(filter.toLowerCase());\n  }\n\n  updateTimestamp() {\n    if (!this._contentElement) {\n      return;\n    }\n\n    if (Common.Settings.Settings.instance().moduleSetting('consoleTimestampsEnabled').get()) {\n      if (!this._timestampElement) {\n        this._timestampElement = /** @type {!HTMLElement} */ (document.createElement('span'));\n        this._timestampElement.classList.add('console-timestamp');\n      }\n      this._timestampElement.textContent = UI.UIUtils.formatTimestamp(this._message.timestamp, false) + ' ';\n      UI.Tooltip.Tooltip.install(this._timestampElement, UI.UIUtils.formatTimestamp(this._message.timestamp, true));\n      this._contentElement.insertBefore(this._timestampElement, this._contentElement.firstChild);\n    } else if (this._timestampElement) {\n      this._timestampElement.remove();\n      this._timestampElement = null;\n    }\n  }\n\n  /**\n   * @return {number}\n   */\n  nestingLevel() {\n    return this._nestingLevel;\n  }\n\n  /**\n   * @param {boolean} inSimilarGroup\n   * @param {boolean=} isLast\n   */\n  setInSimilarGroup(inSimilarGroup, isLast) {\n    this._inSimilarGroup = inSimilarGroup;\n    this._lastInSimilarGroup = inSimilarGroup && Boolean(isLast);\n    if (this._similarGroupMarker && !inSimilarGroup) {\n      this._similarGroupMarker.remove();\n      this._similarGroupMarker = null;\n    } else if (this._element && !this._similarGroupMarker && inSimilarGroup) {\n      this._similarGroupMarker = /** @type {!HTMLElement} */ (document.createElement('div'));\n      this._similarGroupMarker.classList.add('nesting-level-marker');\n      this._element.insertBefore(this._similarGroupMarker, this._element.firstChild);\n      this._similarGroupMarker.classList.toggle('group-closed', this._lastInSimilarGroup);\n    }\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isLastInSimilarGroup() {\n    return Boolean(this._inSimilarGroup) && Boolean(this._lastInSimilarGroup);\n  }\n\n  resetCloseGroupDecorationCount() {\n    if (!this._closeGroupDecorationCount) {\n      return;\n    }\n    this._closeGroupDecorationCount = 0;\n    this._updateCloseGroupDecorations();\n  }\n\n  incrementCloseGroupDecorationCount() {\n    ++this._closeGroupDecorationCount;\n    this._updateCloseGroupDecorations();\n  }\n\n  _updateCloseGroupDecorations() {\n    if (!this._nestingLevelMarkers) {\n      return;\n    }\n    for (let i = 0, n = this._nestingLevelMarkers.length; i < n; ++i) {\n      const marker = this._nestingLevelMarkers[i];\n      marker.classList.toggle('group-closed', n - i <= this._closeGroupDecorationCount);\n    }\n  }\n\n  /**\n   * @return {number}\n   */\n  _focusedChildIndex() {\n    if (!this._selectableChildren.length) {\n      return -1;\n    }\n    return this._selectableChildren.findIndex(child => child.element.hasFocus());\n  }\n\n  /**\n   * @param {!KeyboardEvent} event\n   */\n  _onKeyDown(event) {\n    if (UI.UIUtils.isEditing() || !this._element || !this._element.hasFocus() || this._element.hasSelection()) {\n      return;\n    }\n    if (this.maybeHandleOnKeyDown(event)) {\n      event.consume(true);\n    }\n  }\n\n  /**\n   * @protected\n   * @param {!KeyboardEvent} event\n   */\n  maybeHandleOnKeyDown(event) {\n    // Handle trace expansion.\n    const focusedChildIndex = this._focusedChildIndex();\n    const isWrapperFocused = focusedChildIndex === -1;\n    if (this._expandTrace && isWrapperFocused) {\n      if ((event.key === 'ArrowLeft' && this._traceExpanded) || (event.key === 'ArrowRight' && !this._traceExpanded)) {\n        this._expandTrace(!this._traceExpanded);\n        return true;\n      }\n    }\n    if (!this._selectableChildren.length) {\n      return false;\n    }\n\n    if (event.key === 'ArrowLeft') {\n      this._element && this._element.focus();\n      return true;\n    }\n    if (event.key === 'ArrowRight') {\n      if (isWrapperFocused && this._selectNearestVisibleChild(0)) {\n        return true;\n      }\n    }\n    if (event.key === 'ArrowUp') {\n      const firstVisibleChild = this._nearestVisibleChild(0);\n      if (this._selectableChildren[focusedChildIndex] === firstVisibleChild && firstVisibleChild) {\n        this._element && this._element.focus();\n        return true;\n      }\n      if (this._selectNearestVisibleChild(focusedChildIndex - 1, true /* backwards */)) {\n        return true;\n      }\n    }\n    if (event.key === 'ArrowDown') {\n      if (isWrapperFocused && this._selectNearestVisibleChild(0)) {\n        return true;\n      }\n      if (!isWrapperFocused && this._selectNearestVisibleChild(focusedChildIndex + 1)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @param {number} fromIndex\n   * @param {boolean=} backwards\n   * @return {boolean}\n   */\n  _selectNearestVisibleChild(fromIndex, backwards) {\n    const nearestChild = this._nearestVisibleChild(fromIndex, backwards);\n    if (nearestChild) {\n      nearestChild.forceSelect();\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @param {number} fromIndex\n   * @param {boolean=} backwards\n   * @return {?{element: !Element, forceSelect: function()}}\n   */\n  _nearestVisibleChild(fromIndex, backwards) {\n    const childCount = this._selectableChildren.length;\n    if (fromIndex < 0 || fromIndex >= childCount) {\n      return null;\n    }\n    const direction = backwards ? -1 : 1;\n    let index = fromIndex;\n\n    while (!this._selectableChildren[index].element.offsetParent) {\n      index += direction;\n      if (index < 0 || index >= childCount) {\n        return null;\n      }\n    }\n    return this._selectableChildren[index];\n  }\n\n  /**\n   * @override\n   */\n  focusLastChildOrSelf() {\n    if (this._element && !this._selectNearestVisibleChild(this._selectableChildren.length - 1, true /* backwards */)) {\n      this._element.focus();\n    }\n  }\n\n  /**\n   * @protected\n   * @param {!HTMLElement} element\n   */\n  setContentElement(element) {\n    console.assert(!this._contentElement, 'Cannot set content element twice');\n    this._contentElement = element;\n  }\n\n  /**\n   * @protected\n   * @return {?HTMLElement}\n   */\n  getContentElement() {\n    return this._contentElement;\n  }\n\n  /**\n   * @return {!HTMLElement}\n   */\n  contentElement() {\n    if (this._contentElement) {\n      return this._contentElement;\n    }\n\n    const contentElement = /** @type {!HTMLElement} */ (document.createElement('div'));\n    contentElement.classList.add('console-message');\n    if (this._messageLevelIcon) {\n      contentElement.appendChild(this._messageLevelIcon);\n    }\n    this._contentElement = contentElement;\n\n    const runtimeModel = this._message.runtimeModel();\n    let formattedMessage;\n    const shouldIncludeTrace = Boolean(this._message.stackTrace) &&\n        (this._message.source === SDK.ConsoleModel.MessageSource.Network ||\n         this._message.source === SDK.ConsoleModel.MessageSource.Violation ||\n         this._message.level === SDK.ConsoleModel.MessageLevel.Error ||\n         this._message.level === SDK.ConsoleModel.MessageLevel.Warning ||\n         this._message.type === SDK.ConsoleModel.MessageType.Trace);\n    if (runtimeModel && shouldIncludeTrace) {\n      formattedMessage = this._buildMessageWithStackTrace(runtimeModel);\n    } else {\n      formattedMessage = this._buildMessage();\n    }\n    contentElement.appendChild(formattedMessage);\n\n    this.updateTimestamp();\n    return this._contentElement;\n  }\n\n  /**\n   * @return {!HTMLElement}\n   */\n  toMessageElement() {\n    if (this._element) {\n      return this._element;\n    }\n\n    this._element = /** @type {!HTMLElement} */ (document.createElement('div'));\n    this._element.tabIndex = -1;\n    this._element.addEventListener('keydown', /** @type {!EventListener} */ (this._onKeyDown.bind(this)));\n    this.updateMessageElement();\n    return this._element;\n  }\n\n  updateMessageElement() {\n    if (!this._element) {\n      return;\n    }\n\n    this._element.className = 'console-message-wrapper';\n    this._element.removeChildren();\n    if (this._message.isGroupStartMessage()) {\n      this._element.classList.add('console-group-title');\n    }\n    if (this._message.source === SDK.ConsoleModel.MessageSource.ConsoleAPI) {\n      this._element.classList.add('console-from-api');\n    }\n    if (this._inSimilarGroup) {\n      this._similarGroupMarker = /** @type {!HTMLElement} */ (this._element.createChild('div', 'nesting-level-marker'));\n      this._similarGroupMarker.classList.toggle('group-closed', this._lastInSimilarGroup);\n    }\n\n    this._nestingLevelMarkers = [];\n    for (let i = 0; i < this._nestingLevel; ++i) {\n      this._nestingLevelMarkers.push(this._element.createChild('div', 'nesting-level-marker'));\n    }\n    this._updateCloseGroupDecorations();\n    elementToMessage.set(this._element, this);\n\n    switch (this._message.level) {\n      case SDK.ConsoleModel.MessageLevel.Verbose:\n        this._element.classList.add('console-verbose-level');\n        break;\n      case SDK.ConsoleModel.MessageLevel.Info:\n        this._element.classList.add('console-info-level');\n        if (this._message.type === SDK.ConsoleModel.MessageType.System) {\n          this._element.classList.add('console-system-type');\n        }\n        break;\n      case SDK.ConsoleModel.MessageLevel.Warning:\n        this._element.classList.add('console-warning-level');\n        break;\n      case SDK.ConsoleModel.MessageLevel.Error:\n        this._element.classList.add('console-error-level');\n        break;\n    }\n    this._updateMessageLevelIcon();\n    if (this._shouldRenderAsWarning()) {\n      this._element.classList.add('console-warning-level');\n    }\n\n    this._element.appendChild(this.contentElement());\n    if (this._repeatCount > 1) {\n      this._showRepeatCountElement();\n    }\n  }\n\n  /**\n   * @return {boolean}\n   */\n  _shouldRenderAsWarning() {\n    return (this._message.level === SDK.ConsoleModel.MessageLevel.Verbose ||\n            this._message.level === SDK.ConsoleModel.MessageLevel.Info) &&\n        (this._message.source === SDK.ConsoleModel.MessageSource.Violation ||\n         this._message.source === SDK.ConsoleModel.MessageSource.Deprecation ||\n         this._message.source === SDK.ConsoleModel.MessageSource.Intervention ||\n         this._message.source === SDK.ConsoleModel.MessageSource.Recommendation);\n  }\n\n  _updateMessageLevelIcon() {\n    let iconType = '';\n    let accessibleName = '';\n    if (this._message.level === SDK.ConsoleModel.MessageLevel.Warning) {\n      iconType = 'smallicon-warning';\n      accessibleName = ls`Warning`;\n    } else if (this._message.level === SDK.ConsoleModel.MessageLevel.Error) {\n      iconType = 'smallicon-error';\n      accessibleName = ls`Error`;\n    }\n    if (!this._messageLevelIcon) {\n      if (!iconType) {\n        return;\n      }\n      this._messageLevelIcon = UI.Icon.Icon.create('', 'message-level-icon');\n      if (this._contentElement) {\n        this._contentElement.insertBefore(this._messageLevelIcon, this._contentElement.firstChild);\n      }\n    }\n    this._messageLevelIcon.setIconType(iconType);\n    UI.ARIAUtils.setAccessibleName(this._messageLevelIcon, accessibleName);\n  }\n\n  /**\n   * @return {number}\n   */\n  repeatCount() {\n    return this._repeatCount || 1;\n  }\n\n  resetIncrementRepeatCount() {\n    this._repeatCount = 1;\n    if (!this._repeatCountElement) {\n      return;\n    }\n\n    this._repeatCountElement.remove();\n    if (this._contentElement) {\n      this._contentElement.classList.remove('repeated-message');\n    }\n    this._repeatCountElement = null;\n  }\n\n  incrementRepeatCount() {\n    this._repeatCount++;\n    this._showRepeatCountElement();\n  }\n\n  /**\n   * @param {number} repeatCount\n   */\n  setRepeatCount(repeatCount) {\n    this._repeatCount = repeatCount;\n    this._showRepeatCountElement();\n  }\n  _showRepeatCountElement() {\n    if (!this._element) {\n      return;\n    }\n\n    if (!this._repeatCountElement) {\n      this._repeatCountElement =\n          /** @type {!UI.UIUtils.DevToolsSmallBubble} */ (document.createElement('span', {is: 'dt-small-bubble'}));\n      this._repeatCountElement.classList.add('console-message-repeat-count');\n      switch (this._message.level) {\n        case SDK.ConsoleModel.MessageLevel.Warning:\n          this._repeatCountElement.type = 'warning';\n          break;\n        case SDK.ConsoleModel.MessageLevel.Error:\n          this._repeatCountElement.type = 'error';\n          break;\n        case SDK.ConsoleModel.MessageLevel.Verbose:\n          this._repeatCountElement.type = 'verbose';\n          break;\n        default:\n          this._repeatCountElement.type = 'info';\n      }\n      if (this._shouldRenderAsWarning()) {\n        this._repeatCountElement.type = 'warning';\n      }\n\n      this._element.insertBefore(this._repeatCountElement, this._contentElement);\n      this.contentElement().classList.add('repeated-message');\n    }\n    this._repeatCountElement.textContent = `${this._repeatCount}`;\n    let accessibleName = ls`Repeat ${this._repeatCount}`;\n    if (this._message.level === SDK.ConsoleModel.MessageLevel.Warning) {\n      accessibleName = ls`Warning ${accessibleName}`;\n    } else if (this._message.level === SDK.ConsoleModel.MessageLevel.Error) {\n      accessibleName = ls`Error ${accessibleName}`;\n    }\n    UI.ARIAUtils.setAccessibleName(this._repeatCountElement, accessibleName);\n  }\n\n  get text() {\n    return this._message.messageText;\n  }\n\n  /**\n   * @return {string}\n   */\n  toExportString() {\n    const lines = [];\n    const nodes = this.contentElement().childTextNodes();\n    const messageContent = nodes.map(Components.Linkifier.Linkifier.untruncatedNodeText).join('');\n    for (let i = 0; i < this.repeatCount(); ++i) {\n      lines.push(messageContent);\n    }\n    return lines.join('\\n');\n  }\n\n  /**\n   * @param {?RegExp} regex\n   */\n  setSearchRegex(regex) {\n    if (this._searchHighlightNodeChanges && this._searchHighlightNodeChanges.length) {\n      UI.UIUtils.revertDomChanges(this._searchHighlightNodeChanges);\n    }\n    this._searchRegex = regex;\n    this._searchHighlightNodes = [];\n    this._searchHighlightNodeChanges = [];\n    if (!this._searchRegex) {\n      return;\n    }\n\n    const text = this.contentElement().deepTextContent();\n    let match;\n    this._searchRegex.lastIndex = 0;\n    const sourceRanges = [];\n    while ((match = this._searchRegex.exec(text)) && match[0]) {\n      sourceRanges.push(new TextUtils.TextRange.SourceRange(match.index, match[0].length));\n    }\n\n    if (sourceRanges.length) {\n      this._searchHighlightNodes =\n          UI.UIUtils.highlightSearchResults(this.contentElement(), sourceRanges, this._searchHighlightNodeChanges);\n    }\n  }\n\n  /**\n   * @return {?RegExp}\n   */\n  searchRegex() {\n    return this._searchRegex;\n  }\n\n  /**\n   * @return {number}\n   */\n  searchCount() {\n    return this._searchHighlightNodes.length;\n  }\n\n  /**\n   * @param {number} index\n   * @return {!Element}\n   */\n  searchHighlightNode(index) {\n    return this._searchHighlightNodes[index];\n  }\n\n  /**\n   * @param {string} string\n   * @return {?HTMLElement}\n   */\n  _tryFormatAsError(string) {\n    /**\n     * @param {string} prefix\n     */\n    function startsWith(prefix) {\n      return string.startsWith(prefix);\n    }\n\n    const runtimeModel = this._message.runtimeModel();\n    const errorPrefixes =\n        ['EvalError', 'ReferenceError', 'SyntaxError', 'TypeError', 'RangeError', 'Error', 'URIError'];\n    if (!runtimeModel || !errorPrefixes.some(startsWith)) {\n      return null;\n    }\n    const debuggerModel = runtimeModel.debuggerModel();\n    const baseURL = runtimeModel.target().inspectedURL();\n\n    const lines = string.split('\\n');\n    const links = [];\n    let position = 0;\n    for (let i = 0; i < lines.length; ++i) {\n      position += i > 0 ? lines[i - 1].length + 1 : 0;\n      const isCallFrameLine = /^\\s*at\\s/.test(lines[i]);\n      if (!isCallFrameLine && links.length) {\n        return null;\n      }\n\n      if (!isCallFrameLine) {\n        continue;\n      }\n\n      let openBracketIndex = -1;\n      let closeBracketIndex = -1;\n      const inBracketsWithLineAndColumn = /\\([^\\)\\(]+:\\d+:\\d+\\)/g;\n      const inBrackets = /\\([^\\)\\(]+\\)/g;\n      let lastMatch = null;\n      let currentMatch;\n      while ((currentMatch = inBracketsWithLineAndColumn.exec(lines[i]))) {\n        lastMatch = currentMatch;\n      }\n      if (!lastMatch) {\n        while ((currentMatch = inBrackets.exec(lines[i]))) {\n          lastMatch = currentMatch;\n        }\n      }\n      if (lastMatch) {\n        openBracketIndex = lastMatch.index;\n        closeBracketIndex = lastMatch.index + lastMatch[0].length - 1;\n      }\n      const hasOpenBracket = openBracketIndex !== -1;\n      const left = hasOpenBracket ? openBracketIndex + 1 : lines[i].indexOf('at') + 3;\n      const right = hasOpenBracket ? closeBracketIndex : lines[i].length;\n      const linkCandidate = lines[i].substring(left, right);\n      const splitResult = Common.ParsedURL.ParsedURL.splitLineAndColumn(linkCandidate);\n      if (!splitResult) {\n        return null;\n      }\n\n      if (splitResult.url === '<anonymous>') {\n        continue;\n      }\n      let url = parseOrScriptMatch(splitResult.url);\n      if (!url && Common.ParsedURL.ParsedURL.isRelativeURL(splitResult.url)) {\n        url = parseOrScriptMatch(Common.ParsedURL.ParsedURL.completeURL(baseURL, splitResult.url));\n      }\n      if (!url) {\n        return null;\n      }\n\n      links.push({\n        url: url,\n        positionLeft: position + left,\n        positionRight: position + right,\n        lineNumber: splitResult.lineNumber,\n        columnNumber: splitResult.columnNumber\n      });\n    }\n\n    if (!links.length) {\n      return null;\n    }\n\n    const formattedResult = /** @type {!HTMLElement} */ (document.createElement('span'));\n    let start = 0;\n    for (let i = 0; i < links.length; ++i) {\n      formattedResult.appendChild(this._linkifyStringAsFragment(string.substring(start, links[i].positionLeft)));\n      const scriptLocationLink = this._linkifier.linkifyScriptLocation(\n          debuggerModel.target(), null, links[i].url, links[i].lineNumber,\n          {columnNumber: links[i].columnNumber, className: undefined, tabStop: undefined});\n      scriptLocationLink.tabIndex = -1;\n      this._selectableChildren.push({element: scriptLocationLink, forceSelect: () => scriptLocationLink.focus()});\n      formattedResult.appendChild(scriptLocationLink);\n      start = links[i].positionRight;\n    }\n\n    if (start !== string.length) {\n      formattedResult.appendChild(this._linkifyStringAsFragment(string.substring(start)));\n    }\n\n    return formattedResult;\n\n    /**\n     * @param {?string} url\n     * @return {?string}\n     */\n    function parseOrScriptMatch(url) {\n      if (!url) {\n        return null;\n      }\n      const parsedURL = Common.ParsedURL.ParsedURL.fromString(url);\n      if (parsedURL) {\n        return parsedURL.url;\n      }\n      if (debuggerModel.scriptsForSourceURL(url).length) {\n        return url;\n      }\n      return null;\n    }\n  }\n\n  /**\n   * @param {string} string\n   * @param {function(string,string,number=,number=):!Node} linkifier\n   * @return {!DocumentFragment}\n   */\n  _linkifyWithCustomLinkifier(string, linkifier) {\n    if (string.length > getMaxTokenizableStringLength()) {\n      const propertyValue = new ObjectUI.ObjectPropertiesSection.ExpandableTextPropertyValue(\n          document.createElement('span'), string, getLongStringVisibleLength());\n      const fragment = document.createDocumentFragment();\n      fragment.appendChild(propertyValue.element);\n      return fragment;\n    }\n    const container = document.createDocumentFragment();\n    const tokens = ConsoleViewMessage._tokenizeMessageText(string);\n    for (const token of tokens) {\n      if (!token.text) {\n        continue;\n      }\n      switch (token.type) {\n        case 'url': {\n          const realURL = (token.text.startsWith('www.') ? 'http://' + token.text : token.text);\n          const splitResult = Common.ParsedURL.ParsedURL.splitLineAndColumn(realURL);\n          const sourceURL = Common.ParsedURL.ParsedURL.removeWasmFunctionInfoFromURL(splitResult.url);\n          let linkNode;\n          if (splitResult) {\n            linkNode = linkifier(token.text, sourceURL, splitResult.lineNumber, splitResult.columnNumber);\n          } else {\n            linkNode = linkifier(token.text, '');\n          }\n          container.appendChild(linkNode);\n          break;\n        }\n        default:\n          container.appendChild(document.createTextNode(token.text));\n          break;\n      }\n    }\n    return container;\n  }\n\n  /**\n   * @param {string} string\n   * @return {!DocumentFragment}\n   */\n  _linkifyStringAsFragment(string) {\n    return this._linkifyWithCustomLinkifier(string, (text, url, lineNumber, columnNumber) => {\n      const options = {text, lineNumber, columnNumber};\n      const linkElement = Components.Linkifier.Linkifier.linkifyURL(\n          url, /** @type {!Components.Linkifier.LinkifyURLOptions} */ (options));\n      linkElement.tabIndex = -1;\n      this._selectableChildren.push({element: linkElement, forceSelect: () => linkElement.focus()});\n      return linkElement;\n    });\n  }\n\n  /**\n   * @param {string} string\n   * @return {!Array<{type: (string|undefined), text: string}>}\n   */\n  static _tokenizeMessageText(string) {\n    const {tokenizerRegexes, tokenizerTypes} = getOrCreateTokenizers();\n    if (string.length > getMaxTokenizableStringLength()) {\n      return [{text: string, type: undefined}];\n    }\n    const results = TextUtils.TextUtils.Utils.splitStringByRegexes(string, tokenizerRegexes);\n    return results.map(result => ({text: result.value, type: tokenizerTypes[result.regexIndex]}));\n  }\n\n  /**\n   * @return {string}\n   */\n  groupKey() {\n    if (!this._groupKey) {\n      this._groupKey = this._message.groupCategoryKey() + ':' + this.groupTitle();\n    }\n    return this._groupKey;\n  }\n\n  /**\n   * @return {string}\n   */\n  groupTitle() {\n    const tokens = ConsoleViewMessage._tokenizeMessageText(this._message.messageText);\n    const result = tokens.reduce((acc, token) => {\n      let text = token.text;\n      if (token.type === 'url') {\n        text = Common.UIString.UIString('<URL>');\n      } else if (token.type === 'time') {\n        text = Common.UIString.UIString('took <N>ms');\n      } else if (token.type === 'event') {\n        text = Common.UIString.UIString('<some> event');\n      } else if (token.type === 'milestone') {\n        text = Common.UIString.UIString(' M<XX>');\n      } else if (token.type === 'autofill') {\n        text = Common.UIString.UIString('<attribute>');\n      }\n      return acc + text;\n    }, '');\n    return result.replace(/[%]o/g, '');\n  }\n}\n\n/** @type {?Array<!RegExp>} */\nlet tokenizerRegexes = null;\n/** @type {?Array<string>} */\nlet tokenizerTypes = null;\n\n/**\n * @return {!{tokenizerRegexes:!Array<!RegExp>, tokenizerTypes:Array<string>}}\n */\nfunction getOrCreateTokenizers() {\n  if (!tokenizerRegexes || !tokenizerTypes) {\n    const controlCodes = '\\\\u0000-\\\\u0020\\\\u007f-\\\\u009f';\n    const linkStringRegex = new RegExp(\n        '(?:[a-zA-Z][a-zA-Z0-9+.-]{2,}:\\\\/\\\\/|data:|www\\\\.)[^\\\\s' + controlCodes + '\"]{2,}[^\\\\s' + controlCodes +\n            '\"\\')}\\\\],:;.!?]',\n        'u');\n    const pathLineRegex = /(?:\\/[\\w\\.-]*)+\\:[\\d]+/;\n    const timeRegex = /took [\\d]+ms/;\n    const eventRegex = /'\\w+' event/;\n    const milestoneRegex = /\\sM[6-7]\\d/;\n    const autofillRegex = /\\(suggested: \\\"[\\w-]+\\\"\\)/;\n    /** @type {!Map<!RegExp, string>} */\n    const handlers = new Map();\n    handlers.set(linkStringRegex, 'url');\n    handlers.set(pathLineRegex, 'url');\n    handlers.set(timeRegex, 'time');\n    handlers.set(eventRegex, 'event');\n    handlers.set(milestoneRegex, 'milestone');\n    handlers.set(autofillRegex, 'autofill');\n    tokenizerRegexes = Array.from(handlers.keys());\n    tokenizerTypes = Array.from(handlers.values());\n    return {tokenizerRegexes, tokenizerTypes};\n  }\n  return {tokenizerRegexes, tokenizerTypes};\n}\n\nexport class ConsoleGroupViewMessage extends ConsoleViewMessage {\n  /**\n   * @param {!SDK.ConsoleModel.ConsoleMessage} consoleMessage\n   * @param {!Components.Linkifier.Linkifier} linkifier\n   * @param {number} nestingLevel\n   * @param {function(): void} onToggle\n   * @param {function(!Common.EventTarget.EventTargetEvent): void} onResize\n   */\n  constructor(consoleMessage, linkifier, nestingLevel, onToggle, onResize) {\n    console.assert(consoleMessage.isGroupStartMessage());\n    super(consoleMessage, linkifier, nestingLevel, onResize);\n    this._collapsed = consoleMessage.type === SDK.ConsoleModel.MessageType.StartGroupCollapsed;\n    /** @type {?UI.Icon.Icon} */\n    this._expandGroupIcon = null;\n    this._onToggle = onToggle;\n  }\n\n  /**\n   * @param {boolean} collapsed\n   */\n  _setCollapsed(collapsed) {\n    this._collapsed = collapsed;\n    if (this._expandGroupIcon) {\n      this._expandGroupIcon.setIconType(this._collapsed ? 'smallicon-triangle-right' : 'smallicon-triangle-down');\n    }\n    this._onToggle.call(null);\n  }\n\n  /**\n   * @return {boolean}\n   */\n  collapsed() {\n    return this._collapsed;\n  }\n\n  /**\n   * @override\n   * @param {!KeyboardEvent} event\n   */\n  maybeHandleOnKeyDown(event) {\n    const focusedChildIndex = this._focusedChildIndex();\n    if (focusedChildIndex === -1) {\n      if ((event.key === 'ArrowLeft' && !this._collapsed) || (event.key === 'ArrowRight' && this._collapsed)) {\n        this._setCollapsed(!this._collapsed);\n        return true;\n      }\n    }\n    return super.maybeHandleOnKeyDown(event);\n  }\n\n  /**\n   * @override\n   * @return {!HTMLElement}\n   */\n  toMessageElement() {\n    /** @type {?HTMLElement} */\n    let element = this._element || null;\n    if (!element) {\n      element = super.toMessageElement();\n      const iconType = this._collapsed ? 'smallicon-triangle-right' : 'smallicon-triangle-down';\n      this._expandGroupIcon = UI.Icon.Icon.create(iconType, 'expand-group-icon');\n      // Intercept focus to avoid highlight on click.\n      this.contentElement().tabIndex = -1;\n      if (this._repeatCountElement) {\n        this._repeatCountElement.insertBefore(this._expandGroupIcon, this._repeatCountElement.firstChild);\n      } else {\n        element.insertBefore(this._expandGroupIcon, this._contentElement);\n      }\n      element.addEventListener('click', () => this._setCollapsed(!this._collapsed));\n    }\n    return element;\n  }\n\n  /**\n   * @override\n   */\n  _showRepeatCountElement() {\n    super._showRepeatCountElement();\n    if (this._repeatCountElement && this._expandGroupIcon) {\n      this._repeatCountElement.insertBefore(this._expandGroupIcon, this._repeatCountElement.firstChild);\n    }\n  }\n}\n\nexport class ConsoleCommand extends ConsoleViewMessage {\n  /**\n   * @param {!SDK.ConsoleModel.ConsoleMessage} consoleMessage\n   * @param {!Components.Linkifier.Linkifier} linkifier\n   * @param {number} nestingLevel\n   * @param {function(!Common.EventTarget.EventTargetEvent):void} onResize\n   */\n  constructor(consoleMessage, linkifier, nestingLevel, onResize) {\n    super(consoleMessage, linkifier, nestingLevel, onResize);\n    /** @type {?HTMLElement} */\n    this._formattedCommand = null;\n  }\n\n  /**\n   * @override\n   * @return {!HTMLElement}\n   */\n  contentElement() {\n    const contentElement = this.getContentElement();\n    if (contentElement) {\n      return contentElement;\n    }\n    const newContentElement = /** @type {!HTMLElement} */ (document.createElement('div'));\n    this.setContentElement(newContentElement);\n    newContentElement.classList.add('console-user-command');\n    const icon = UI.Icon.Icon.create('smallicon-user-command', 'command-result-icon');\n    newContentElement.appendChild(icon);\n\n    elementToMessage.set(newContentElement, this);\n\n    this._formattedCommand = /** @type {!HTMLElement} */ (document.createElement('span'));\n    this._formattedCommand.classList.add('source-code');\n    this._formattedCommand.textContent = Platform.StringUtilities.replaceControlCharacters(this.text);\n    newContentElement.appendChild(this._formattedCommand);\n\n    if (this._formattedCommand.textContent.length < MaxLengthToIgnoreHighlighter) {\n      const javascriptSyntaxHighlighter = new UI.SyntaxHighlighter.SyntaxHighlighter('text/javascript', true);\n      javascriptSyntaxHighlighter.syntaxHighlightNode(this._formattedCommand).then(this._updateSearch.bind(this));\n    } else {\n      this._updateSearch();\n    }\n\n    this.updateTimestamp();\n    return newContentElement;\n  }\n\n  _updateSearch() {\n    this.setSearchRegex(this.searchRegex());\n  }\n}\n\nexport class ConsoleCommandResult extends ConsoleViewMessage {\n  /**\n   * @override\n   * @return {!HTMLElement}\n   */\n  contentElement() {\n    const element = super.contentElement();\n    if (!element.classList.contains('console-user-command-result')) {\n      element.classList.add('console-user-command-result');\n      if (this.consoleMessage().level === SDK.ConsoleModel.MessageLevel.Info) {\n        const icon = UI.Icon.Icon.create('smallicon-command-result', 'command-result-icon');\n        element.insertBefore(icon, element.firstChild);\n      }\n    }\n    return element;\n  }\n}\n\nexport class ConsoleTableMessageView extends ConsoleViewMessage {\n  /**\n   * @param {!SDK.ConsoleModel.ConsoleMessage} consoleMessage\n   * @param {!Components.Linkifier.Linkifier} linkifier\n   * @param {number} nestingLevel\n   * @param {function(!Common.EventTarget.EventTargetEvent): void} onResize\n   */\n  constructor(consoleMessage, linkifier, nestingLevel, onResize) {\n    super(consoleMessage, linkifier, nestingLevel, onResize);\n    console.assert(consoleMessage.type === SDK.ConsoleModel.MessageType.Table);\n    /** @type {?DataGrid.SortableDataGrid.SortableDataGrid<?>} */\n    this._dataGrid = null;\n  }\n\n  /**\n   * @override\n   */\n  wasShown() {\n    if (this._dataGrid) {\n      this._dataGrid.updateWidths();\n    }\n    super.wasShown();\n  }\n\n  /**\n   * @override\n   */\n  onResize() {\n    if (!this.isVisible()) {\n      return;\n    }\n    if (this._dataGrid) {\n      this._dataGrid.onResize();\n    }\n  }\n\n  /**\n   * @override\n   * @return {!HTMLElement}\n   */\n  contentElement() {\n    const contentElement = this.getContentElement();\n    if (contentElement) {\n      return contentElement;\n    }\n\n    const newContentElement = /** @type {!HTMLElement} */ (document.createElement('div'));\n    newContentElement.classList.add('console-message');\n    if (this._messageLevelIcon) {\n      newContentElement.appendChild(this._messageLevelIcon);\n    }\n    this.setContentElement(newContentElement);\n\n    newContentElement.appendChild(this._buildTableMessage());\n    this.updateTimestamp();\n    return newContentElement;\n  }\n\n  /**\n   * @return {!HTMLElement}\n   */\n  _buildTableMessage() {\n    const formattedMessage = /** @type {!HTMLElement} */ (document.createElement('span'));\n    formattedMessage.classList.add('source-code');\n    this._anchorElement = this._buildMessageAnchor();\n    if (this._anchorElement) {\n      formattedMessage.appendChild(this._anchorElement);\n    }\n\n    const table = this._message.parameters && this._message.parameters.length ? this._message.parameters[0] : null;\n    if (!table) {\n      return this._buildMessage();\n    }\n    const actualTable = parameterToRemoteObject(this._message.runtimeModel())(table);\n    if (!actualTable || !actualTable.preview) {\n      return this._buildMessage();\n    }\n\n    const rawValueColumnSymbol = Symbol('rawValueColumn');\n    /** @type {!Array<string|symbol>} */\n    const columnNames = [];\n    const preview = actualTable.preview;\n    const rows = [];\n    for (let i = 0; i < preview.properties.length; ++i) {\n      const rowProperty = preview.properties[i];\n      /** @type {!Array<!Protocol.Runtime.PropertyPreview|!{name:(string|symbol), type: !Protocol.Runtime.PropertyPreviewType, value: (string|undefined)}>} */\n      let rowSubProperties;\n      if (rowProperty.valuePreview && rowProperty.valuePreview.properties.length) {\n        rowSubProperties = rowProperty.valuePreview.properties;\n      } else if (rowProperty.value) {\n        rowSubProperties = [{name: rawValueColumnSymbol, type: rowProperty.type, value: rowProperty.value}];\n      } else {\n        continue;\n      }\n\n      /** @type {!Map<string|symbol, !HTMLElement>} */\n      const rowValue = new Map();\n      const maxColumnsToRender = 20;\n      for (let j = 0; j < rowSubProperties.length; ++j) {\n        const cellProperty = rowSubProperties[j];\n        let columnRendered = columnNames.indexOf(cellProperty.name) !== -1;\n        if (!columnRendered) {\n          if (columnNames.length === maxColumnsToRender) {\n            continue;\n          }\n          columnRendered = true;\n          columnNames.push(cellProperty.name);\n        }\n\n        if (columnRendered) {\n          const cellElement =\n              this._renderPropertyPreviewOrAccessor(actualTable, cellProperty, [rowProperty, cellProperty]);\n          cellElement.classList.add('console-message-nowrap-below');\n          rowValue.set(cellProperty.name, cellElement);\n        }\n      }\n      rows.push({rowName: rowProperty.name, rowValue});\n    }\n\n    const flatValues = [];\n    for (const {rowName, rowValue} of rows) {\n      flatValues.push(rowName);\n      for (let j = 0; j < columnNames.length; ++j) {\n        flatValues.push(rowValue.get(columnNames[j]));\n      }\n    }\n    columnNames.unshift(Common.UIString.UIString('(index)'));\n    const columnDisplayNames =\n        columnNames.map(name => name === rawValueColumnSymbol ? Common.UIString.UIString('Value') : name.toString());\n\n    if (flatValues.length) {\n      this._dataGrid = DataGrid.SortableDataGrid.SortableDataGrid.create(columnDisplayNames, flatValues, ls`Console`);\n      if (this._dataGrid) {\n        this._dataGrid.setStriped(true);\n        this._dataGrid.setFocusable(false);\n\n        const formattedResult = document.createElement('span');\n        formattedResult.classList.add('console-message-text');\n        const tableElement = formattedResult.createChild('div', 'console-message-formatted-table');\n        const dataGridContainer = tableElement.createChild('span');\n        tableElement.appendChild(this._formatParameter(actualTable, true, false));\n        dataGridContainer.appendChild(this._dataGrid.element);\n        formattedMessage.appendChild(formattedResult);\n        this._dataGrid.renderInline();\n      }\n    }\n    return formattedMessage;\n  }\n\n  /**\n   * @override\n   * @return {number}\n   */\n  approximateFastHeight() {\n    const table = this._message.parameters && this._message.parameters[0];\n    if (table && typeof table !== 'string' && table.preview) {\n      return defaultConsoleRowHeight * table.preview.properties.length;\n    }\n    return defaultConsoleRowHeight;\n  }\n}\n\n/**\n * The maximum length before strings are considered too long for syntax highlighting.\n * @const\n * @type {number}\n */\nconst MaxLengthToIgnoreHighlighter = 10000;\n\n/**\n * @const\n * @type {number}\n */\nexport const MaxLengthForLinks = 40;\n\nlet _MaxTokenizableStringLength = 10000;\nlet _LongStringVisibleLength = 5000;\n\nexport const getMaxTokenizableStringLength = () => {\n  return _MaxTokenizableStringLength;\n};\n\n/**\n * @param {number} length\n */\nexport const setMaxTokenizableStringLength = length => {\n  _MaxTokenizableStringLength = length;\n};\n\nexport const getLongStringVisibleLength = () => {\n  return _LongStringVisibleLength;\n};\n\n/**\n * @param {number} length\n */\nexport const setLongStringVisibleLength = length => {\n  _LongStringVisibleLength = length;\n};\n"]}
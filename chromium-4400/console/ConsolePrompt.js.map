{"version":3,"file":"ConsolePrompt.js","sourceRoot":"","sources":["../../../../../front_end/console/ConsolePrompt.js"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2016 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';\nimport * as Host from '../host/host.js';\nimport * as ObjectUI from '../object_ui/object_ui.js';\nimport {ls} from '../platform/platform.js';\nimport * as Root from '../root/root.js';\nimport * as SDK from '../sdk/sdk.js';\nimport * as TextUtils from '../text_utils/text_utils.js';\nimport * as UI from '../ui/ui.js';\n\nimport {ConsolePanel} from './ConsolePanel.js';\n\nexport class ConsolePrompt extends UI.Widget.Widget {\n  constructor() {\n    super();\n    this.registerRequiredCSS('console/consolePrompt.css', {enableLegacyPatching: false});\n    this._addCompletionsFromHistory = true;\n    this._history = new ConsoleHistoryManager();\n\n    /** @type {string} */\n    this._initialText = '';\n    /** @type {?UI.TextEditor.TextEditor} */\n    this._editor = null;\n    this._eagerPreviewElement = document.createElement('div');\n    this._eagerPreviewElement.classList.add('console-eager-preview');\n    this._textChangeThrottler = new Common.Throttler.Throttler(150);\n    this._formatter = new ObjectUI.RemoteObjectPreviewFormatter.RemoteObjectPreviewFormatter();\n    this._requestPreviewBound = this._requestPreview.bind(this);\n    this._innerPreviewElement = this._eagerPreviewElement.createChild('div', 'console-eager-inner-preview');\n    this._eagerPreviewElement.appendChild(UI.Icon.Icon.create('smallicon-command-result', 'preview-result-icon'));\n\n    const editorContainerElement = this.element.createChild('div', 'console-prompt-editor-container');\n    this.element.appendChild(this._eagerPreviewElement);\n\n    this._promptIcon = UI.Icon.Icon.create('smallicon-text-prompt', 'console-prompt-icon');\n    this.element.appendChild(this._promptIcon);\n    this._iconThrottler = new Common.Throttler.Throttler(0);\n\n    this._eagerEvalSetting = Common.Settings.Settings.instance().moduleSetting('consoleEagerEval');\n    this._eagerEvalSetting.addChangeListener(this._eagerSettingChanged.bind(this));\n    this._eagerPreviewElement.classList.toggle('hidden', !this._eagerEvalSetting.get());\n\n    this.element.tabIndex = 0;\n    /** @type {?Promise<void>} */\n    this._previewRequestForTest = null;\n\n    /** @type {?UI.TextEditor.AutocompleteConfig} */\n    this._defaultAutocompleteConfig = null;\n\n    this._highlightingNode = false;\n\n    const extension = /** @type {!Root.Runtime.Extension} */ (\n        Root.Runtime.Runtime.instance().extension(UI.TextEditor.TextEditorFactory));\n    extension.instance().then(factory => {\n      gotFactory.call(this, /** @type {!UI.TextEditor.TextEditorFactory} */ (factory));\n    });\n\n    /**\n     * @param {!UI.TextEditor.TextEditorFactory} factory\n     * @this {ConsolePrompt}\n     */\n    function gotFactory(factory) {\n      const options = {\n        devtoolsAccessibleName: /** @type {string} */ (ls`Console prompt`),\n        lineNumbers: false,\n        lineWrapping: true,\n        mimeType: 'javascript',\n        autoHeight: true\n      };\n      this._editor = factory.createEditor(/** @type {!UI.TextEditor.Options} */ (options));\n\n      this._defaultAutocompleteConfig =\n          ObjectUI.JavaScriptAutocomplete.JavaScriptAutocompleteConfig.createConfigForEditor(this._editor);\n      this._editor.configureAutocomplete(Object.assign({}, this._defaultAutocompleteConfig, {\n        suggestionsCallback: this._wordsWithQuery.bind(this),\n        anchorBehavior: UI.GlassPane.AnchorBehavior.PreferTop\n      }));\n      this._editor.widget().element.addEventListener('keydown', this._editorKeyDown.bind(this), true);\n      this._editor.widget().show(editorContainerElement);\n      this._editor.addEventListener(UI.TextEditor.Events.CursorChanged, this._updatePromptIcon, this);\n      this._editor.addEventListener(UI.TextEditor.Events.TextChanged, this._onTextChanged, this);\n      this._editor.addEventListener(UI.TextEditor.Events.SuggestionChanged, this._onTextChanged, this);\n\n      this.setText(this._initialText);\n      this._initialText = '';\n      if (this.hasFocus()) {\n        this.focus();\n      }\n      this.element.removeAttribute('tabindex');\n      this._editor.widget().element.tabIndex = -1;\n\n      this._editorSetForTest();\n\n      // Record the console tool load time after the console prompt constructor is complete.\n      Host.userMetrics.panelLoaded('console', 'DevTools.Launch.Console');\n    }\n  }\n\n  _eagerSettingChanged() {\n    const enabled = this._eagerEvalSetting.get();\n    this._eagerPreviewElement.classList.toggle('hidden', !enabled);\n    if (enabled) {\n      this._requestPreview();\n    }\n  }\n\n  /**\n   * @return {!Element}\n   */\n  belowEditorElement() {\n    return this._eagerPreviewElement;\n  }\n\n  _onTextChanged() {\n    // ConsoleView and prompt both use a throttler, so we clear the preview\n    // ASAP to avoid inconsistency between a fresh viewport and stale preview.\n    if (this._eagerEvalSetting.get()) {\n      const asSoonAsPossible = !this._editor || !this._editor.textWithCurrentSuggestion();\n      this._previewRequestForTest = this._textChangeThrottler.schedule(this._requestPreviewBound, asSoonAsPossible);\n    }\n    this._updatePromptIcon();\n    this.dispatchEventToListeners(Events.TextChanged);\n  }\n\n  /**\n   * @return {!Promise<void>}\n   */\n  async _requestPreview() {\n    if (!this._editor) {\n      return;\n    }\n    const text = this._editor.textWithCurrentSuggestion().trim();\n    const executionContext = UI.Context.Context.instance().flavor(SDK.RuntimeModel.ExecutionContext);\n    const {preview, result} =\n        await ObjectUI.JavaScriptREPL.JavaScriptREPL.evaluateAndBuildPreview(text, true /* throwOnSideEffect */, 500);\n    this._innerPreviewElement.removeChildren();\n    if (preview.deepTextContent() !== this._editor.textWithCurrentSuggestion().trim()) {\n      this._innerPreviewElement.appendChild(preview);\n    }\n    if (result && 'object' in result && result.object && result.object.subtype === 'node') {\n      this._highlightingNode = true;\n      SDK.OverlayModel.OverlayModel.highlightObjectAsDOMNode(result.object);\n    } else if (this._highlightingNode) {\n      this._highlightingNode = false;\n      SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n    }\n    if (result && executionContext) {\n      executionContext.runtimeModel.releaseEvaluationResult(result);\n    }\n  }\n\n  /**\n   * @override\n   */\n  willHide() {\n    if (this._highlightingNode) {\n      this._highlightingNode = false;\n      SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n    }\n  }\n\n  /**\n   * @return {!ConsoleHistoryManager}\n   */\n  history() {\n    return this._history;\n  }\n\n  clearAutocomplete() {\n    if (this._editor) {\n      this._editor.clearAutocomplete();\n    }\n  }\n\n  /**\n   * @return {boolean}\n   */\n  _isCaretAtEndOfPrompt() {\n    return this._editor !== null &&\n        this._editor.selection().collapseToEnd().equal(this._editor.fullRange().collapseToEnd());\n  }\n\n  moveCaretToEndOfPrompt() {\n    if (this._editor) {\n      this._editor.setSelection(TextUtils.TextRange.TextRange.createFromLocation(Infinity, Infinity));\n    }\n  }\n\n  /**\n   * @param {string} text\n   */\n  setText(text) {\n    if (this._editor) {\n      this._editor.setText(text);\n    } else {\n      this._initialText = text;\n    }\n    this.dispatchEventToListeners(Events.TextChanged);\n  }\n\n  /**\n   * @return {string}\n   */\n  text() {\n    return this._editor ? this._editor.text() : this._initialText;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setAddCompletionsFromHistory(value) {\n    this._addCompletionsFromHistory = value;\n  }\n\n  /**\n   * @param {!Event} event\n   */\n  _editorKeyDown(event) {\n    if (!this._editor) {\n      return;\n    }\n    const keyboardEvent = /** @type {!KeyboardEvent} */ (event);\n    let newText;\n    let isPrevious;\n    // Check against visual coordinates in case lines wrap.\n    const selection = this._editor.selection();\n    const cursorY = this._editor.visualCoordinates(selection.endLine, selection.endColumn).y;\n\n    switch (keyboardEvent.keyCode) {\n      case UI.KeyboardShortcut.Keys.Up.code: {\n        const startY = this._editor.visualCoordinates(0, 0).y;\n        if (keyboardEvent.shiftKey || !selection.isEmpty() || cursorY !== startY) {\n          break;\n        }\n        newText = this._history.previous(this.text());\n        isPrevious = true;\n        break;\n      }\n      case UI.KeyboardShortcut.Keys.Down.code: {\n        const fullRange = this._editor.fullRange();\n        const endY = this._editor.visualCoordinates(fullRange.endLine, fullRange.endColumn).y;\n        if (keyboardEvent.shiftKey || !selection.isEmpty() || cursorY !== endY) {\n          break;\n        }\n        newText = this._history.next();\n        break;\n      }\n      case UI.KeyboardShortcut.Keys.P.code: {  // Ctrl+P = Previous\n        if (Host.Platform.isMac() && keyboardEvent.ctrlKey && !keyboardEvent.metaKey && !keyboardEvent.altKey &&\n            !keyboardEvent.shiftKey) {\n          newText = this._history.previous(this.text());\n          isPrevious = true;\n        }\n        break;\n      }\n      case UI.KeyboardShortcut.Keys.N.code: {  // Ctrl+N = Next\n        if (Host.Platform.isMac() && keyboardEvent.ctrlKey && !keyboardEvent.metaKey && !keyboardEvent.altKey &&\n            !keyboardEvent.shiftKey) {\n          newText = this._history.next();\n        }\n        break;\n      }\n      case UI.KeyboardShortcut.Keys.Enter.code: {\n        this._enterKeyPressed(keyboardEvent);\n        break;\n      }\n      case UI.KeyboardShortcut.Keys.Tab.code: {\n        if (!this.text()) {\n          keyboardEvent.consume();\n        }\n        break;\n      }\n    }\n\n    if (newText === undefined) {\n      return;\n    }\n    keyboardEvent.consume(true);\n    this.setText(newText);\n\n    if (isPrevious) {\n      this._editor.setSelection(TextUtils.TextRange.TextRange.createFromLocation(0, Infinity));\n    } else {\n      this.moveCaretToEndOfPrompt();\n    }\n  }\n\n  /**\n   * @return {!Promise<boolean>}\n   */\n  async _enterWillEvaluate() {\n    if (!this._isCaretAtEndOfPrompt()) {\n      return true;\n    }\n    return await ObjectUI.JavaScriptAutocomplete.JavaScriptAutocomplete.isExpressionComplete(this.text());\n  }\n\n  _updatePromptIcon() {\n    this._iconThrottler.schedule(async () => {\n      const canComplete = await this._enterWillEvaluate();\n      this._promptIcon.classList.toggle('console-prompt-incomplete', !canComplete);\n    });\n  }\n\n  /**\n   * @param {!KeyboardEvent} event\n   */\n  async _enterKeyPressed(event) {\n    if (event.altKey || event.ctrlKey || event.shiftKey) {\n      return;\n    }\n\n    event.consume(true);\n\n    // Since we prevent default, manually emulate the native \"scroll on key input\" behavior.\n    this.element.scrollIntoView();\n    this.clearAutocomplete();\n\n    const str = this.text();\n    if (!str.length) {\n      return;\n    }\n\n    if (await this._enterWillEvaluate()) {\n      await this._appendCommand(str, true);\n    } else if (this._editor) {\n      this._editor.newlineAndIndent();\n    }\n    this._enterProcessedForTest();\n  }\n\n  /**\n   * @param {string} text\n   * @param {boolean} useCommandLineAPI\n   */\n  async _appendCommand(text, useCommandLineAPI) {\n    this.setText('');\n    const currentExecutionContext = UI.Context.Context.instance().flavor(SDK.RuntimeModel.ExecutionContext);\n    if (currentExecutionContext) {\n      const executionContext = currentExecutionContext;\n      const message = SDK.ConsoleModel.ConsoleModel.instance().addCommandMessage(executionContext, text);\n      const expression = ObjectUI.JavaScriptREPL.JavaScriptREPL.preprocessExpression(text);\n      SDK.ConsoleModel.ConsoleModel.instance().evaluateCommandInConsole(\n          executionContext, message, expression, useCommandLineAPI);\n      if (ConsolePanel.instance().isShowing()) {\n        Host.userMetrics.actionTaken(Host.UserMetrics.Action.CommandEvaluatedInConsolePanel);\n      }\n    }\n  }\n\n  _enterProcessedForTest() {\n  }\n\n  /**\n   * @param {string} prefix\n   * @param {boolean=} force\n   * @return {!UI.SuggestBox.Suggestions}\n   */\n  _historyCompletions(prefix, force) {\n    const text = this.text();\n    if (!this._addCompletionsFromHistory || !this._isCaretAtEndOfPrompt() || (!text && !force)) {\n      return [];\n    }\n    const result = [];\n    const set = new Set();\n    const data = this._history.historyData();\n    for (let i = data.length - 1; i >= 0 && result.length < 50; --i) {\n      const item = data[i];\n      if (!item.startsWith(text)) {\n        continue;\n      }\n      if (set.has(item)) {\n        continue;\n      }\n      set.add(item);\n      result.push(\n          {text: item.substring(text.length - prefix.length), iconType: 'smallicon-text-prompt', isSecondary: true});\n    }\n    return /** @type {!UI.SuggestBox.Suggestions} */ (result);\n  }\n\n  /**\n   * @override\n   */\n  focus() {\n    if (this._editor) {\n      this._editor.widget().focus();\n    } else {\n      this.element.focus();\n    }\n  }\n\n  /**\n   * @param {!TextUtils.TextRange.TextRange} queryRange\n   * @param {!TextUtils.TextRange.TextRange} substituteRange\n   * @param {boolean=} force\n   * @return {!Promise<!UI.SuggestBox.Suggestions>}\n   */\n  async _wordsWithQuery(queryRange, substituteRange, force) {\n    if (!this._editor || !this._defaultAutocompleteConfig || !this._defaultAutocompleteConfig.suggestionsCallback) {\n      return [];\n    }\n    const query = this._editor.text(queryRange);\n    const words = await this._defaultAutocompleteConfig.suggestionsCallback(queryRange, substituteRange, force);\n    const historyWords = this._historyCompletions(query, force);\n    return words ? words.concat(historyWords) : historyWords;\n  }\n\n  _editorSetForTest() {\n  }\n}\n\nexport class ConsoleHistoryManager {\n  constructor() {\n    /**\n     * @type {!Array.<string>}\n     */\n    this._data = [];\n\n    /**\n     * 1-based entry in the history stack.\n     * @type {number}\n     */\n    this._historyOffset = 1;\n  }\n\n  /**\n   * @return {!Array.<string>}\n   */\n  historyData() {\n    return this._data;\n  }\n\n  /**\n   * @param {!Array.<string>} data\n   */\n  setHistoryData(data) {\n    this._data = data.slice();\n    this._historyOffset = 1;\n  }\n\n  /**\n   * Pushes a committed text into the history.\n   * @param {string} text\n   */\n  pushHistoryItem(text) {\n    if (this._uncommittedIsTop) {\n      this._data.pop();\n      delete this._uncommittedIsTop;\n    }\n\n    this._historyOffset = 1;\n    if (text === this._currentHistoryItem()) {\n      return;\n    }\n    this._data.push(text);\n  }\n\n  /**\n   * Pushes the current (uncommitted) text into the history.\n   * @param {string} currentText\n   */\n  _pushCurrentText(currentText) {\n    if (this._uncommittedIsTop) {\n      this._data.pop();\n    }  // Throw away obsolete uncommitted text.\n    this._uncommittedIsTop = true;\n    this._data.push(currentText);\n  }\n\n  /**\n   * @param {string} currentText\n   * @return {string|undefined}\n   */\n  previous(currentText) {\n    if (this._historyOffset > this._data.length) {\n      return undefined;\n    }\n    if (this._historyOffset === 1) {\n      this._pushCurrentText(currentText);\n    }\n    ++this._historyOffset;\n    return this._currentHistoryItem();\n  }\n\n  /**\n   * @return {string|undefined}\n   */\n  next() {\n    if (this._historyOffset === 1) {\n      return undefined;\n    }\n    --this._historyOffset;\n    return this._currentHistoryItem();\n  }\n\n  /**\n   * @return {string|undefined}\n   */\n  _currentHistoryItem() {\n    return this._data[this._data.length - this._historyOffset];\n  }\n}\n\nexport const Events = {\n  TextChanged: Symbol('TextChanged')\n};\n"]}
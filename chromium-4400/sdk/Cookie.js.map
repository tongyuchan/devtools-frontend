{"version":3,"file":"Cookie.js","sourceRoot":"","sources":["../../../../../front_end/sdk/Cookie.js"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2019 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nexport class Cookie {\n  /**\n     * @param {string} name\n     * @param {string} value\n     * @param {?Type=} type\n     * @param {!Protocol.Network.CookiePriority=} priority\n     */\n  constructor(name, value, type, priority) {\n    this._name = name;\n    this._value = value;\n    this._type = type;\n    /** @type {!Object<string, *>} */\n    this._attributes = {};\n    this._size = 0;\n    this._priority = /** @type {!Protocol.Network.CookiePriority} */ (priority || 'Medium');\n    /** @type {string|null} */\n    this._cookieLine = null;\n  }\n\n  /**\n     * @param {!Protocol.Network.Cookie} protocolCookie\n     * @return {!Cookie}\n     */\n  static fromProtocolCookie(protocolCookie) {\n    const cookie = new Cookie(protocolCookie.name, protocolCookie.value, null, protocolCookie.priority);\n    cookie.addAttribute('domain', protocolCookie['domain']);\n    cookie.addAttribute('path', protocolCookie['path']);\n    if (protocolCookie['expires']) {\n      cookie.addAttribute('expires', protocolCookie['expires'] * 1000);\n    }\n    if (protocolCookie['httpOnly']) {\n      cookie.addAttribute('httpOnly');\n    }\n    if (protocolCookie['secure']) {\n      cookie.addAttribute('secure');\n    }\n    if (protocolCookie['sameSite']) {\n      cookie.addAttribute('sameSite', protocolCookie['sameSite']);\n    }\n    cookie.setSize(protocolCookie['size']);\n    return cookie;\n  }\n\n  /**\n   * @returns {string}\n   */\n  key() {\n    return (this.domain() || '-') + ' ' + this.name() + ' ' + (this.path() || '-');\n  }\n\n  /**\n     * @return {string}\n     */\n  name() {\n    return this._name;\n  }\n\n  /**\n     * @return {string}\n     */\n  value() {\n    return this._value;\n  }\n\n  /**\n     * @return {?Type|undefined}\n     */\n  type() {\n    return this._type;\n  }\n\n  /**\n     * @return {boolean}\n     */\n  httpOnly() {\n    return 'httponly' in this._attributes;\n  }\n\n  /**\n     * @return {boolean}\n     */\n  secure() {\n    return 'secure' in this._attributes;\n  }\n\n  /**\n     * @return {!Protocol.Network.CookieSameSite}\n     */\n  sameSite() {\n    // TODO(allada) This should not rely on _attributes and instead store them individually.\n    // when attributes get added via addAttribute() they are lowercased, hence the lowercasing of samesite here\n    return /** @type {!Protocol.Network.CookieSameSite} */ (this._attributes['samesite']);\n  }\n\n  /**\n   * @return {!Protocol.Network.CookiePriority}\n   */\n  priority() {\n    return this._priority;\n  }\n\n  /**\n     * @return {boolean}\n     */\n  session() {\n    // RFC 2965 suggests using Discard attribute to mark session cookies, but this does not seem to be widely used.\n    // Check for absence of explicitly max-age or expiry date instead.\n    return !('expires' in this._attributes || 'max-age' in this._attributes);\n  }\n\n  /**\n     * @return {string}\n     */\n  path() {\n    return /** @type {string} */ (this._attributes['path']);\n  }\n\n  /**\n     * @return {string}\n     */\n  domain() {\n    return /** @type {string} */ (this._attributes['domain']);\n  }\n\n  /**\n     * @return {number}\n     */\n  expires() {\n    return /** @type {number} */ (this._attributes['expires']);\n  }\n\n  /**\n     * @return {number}\n     */\n  maxAge() {\n    return /** @type {number} */ (this._attributes['max-age']);\n  }\n\n  /**\n     * @return {number}\n     */\n  size() {\n    return this._size;\n  }\n\n  /**\n     * @return {string|null}\n     */\n  url() {\n    if (!this.domain() || !this.path()) {\n      return null;\n    }\n    return (this.secure() ? 'https://' : 'http://') + this.domain() + this.path();\n  }\n\n  /**\n     * @param {number} size\n     */\n  setSize(size) {\n    this._size = size;\n  }\n\n  /**\n   * @param {!Date} requestDate\n   * @return {!Date|null}\n   */\n  expiresDate(requestDate) {\n    // RFC 6265 indicates that the max-age attribute takes precedence over the expires attribute\n    if (this.maxAge()) {\n      return new Date(requestDate.getTime() + 1000 * this.maxAge());\n    }\n\n    if (this.expires()) {\n      return new Date(this.expires());\n    }\n\n    return null;\n  }\n\n  /**\n   * @param {string} key\n   * @param {string|number=} value\n   */\n  addAttribute(key, value) {\n    const normalizedKey = key.toLowerCase();\n    switch (normalizedKey) {\n      case 'priority':\n        this._priority = /** @type {!Protocol.Network.CookiePriority} */ (value);\n        break;\n      default:\n        this._attributes[normalizedKey] = value;\n    }\n  }\n\n  /**\n     * @param {string} cookieLine\n     */\n  setCookieLine(cookieLine) {\n    this._cookieLine = cookieLine;\n  }\n\n  /**\n     * @return {string|null}\n     */\n  getCookieLine() {\n    return this._cookieLine;\n  }\n}\n\n/**\n * @enum {number}\n */\nexport const Type = {\n  Request: 0,\n  Response: 1\n};\n\n/**\n * @enum {string}\n */\nexport const Attributes = {\n  Name: 'name',\n  Value: 'value',\n  Size: 'size',\n  Domain: 'domain',\n  Path: 'path',\n  Expires: 'expires',\n  HttpOnly: 'httpOnly',\n  Secure: 'secure',\n  SameSite: 'sameSite',\n  Priority: 'priority',\n};\n\n/**\n * A `CookieReference` uniquely identifies a cookie by the triple (name,domain,path). Additionally, a context may be\n * included to make it clear which site under Application>Cookies should be opened when revealing a `CookieReference`.\n */\nexport class CookieReference {\n  /**\n   * @param {string} name\n   * @param {string} domain\n   * @param {string} path\n   * @param {string|undefined} contextUrl - Context in which to reveal the cookie.\n   */\n  constructor(name, domain, path, contextUrl) {\n    this._name = name;\n    this._domain = domain;\n    this._path = path;\n    this._contextUrl = contextUrl;\n  }\n\n  /**\n   * @returns {string}\n   */\n  domain() {\n    return this._domain;\n  }\n\n  /**\n   * @returns {string|undefined}\n   */\n  contextUrl() {\n    return this._contextUrl;\n  }\n}\n"]}
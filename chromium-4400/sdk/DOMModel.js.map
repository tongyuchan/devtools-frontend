{"version":3,"file":"DOMModel.js","sourceRoot":"","sources":["../../../../../front_end/sdk/DOMModel.js"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2009, 2010 Google Inc. All rights reserved.\n * Copyright (C) 2009 Joseph Pecoraro\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../common/common.js';\nimport * as Host from '../host/host.js';\nimport * as Platform from '../platform/platform.js';\nimport * as ProtocolClient from '../protocol_client/protocol_client.js';  // eslint-disable-line no-unused-vars\nimport * as Root from '../root/root.js';\n\nimport {CSSModel} from './CSSModel.js';\nimport {FrameManager} from './FrameManager.js';\nimport {OverlayModel} from './OverlayModel.js';\nimport {RemoteObject} from './RemoteObject.js';  // eslint-disable-line no-unused-vars\nimport {RuntimeModel} from './RuntimeModel.js';\nimport {Capability, SDKModel, Target, TargetManager} from './SDKModel.js';  // eslint-disable-line no-unused-vars\n\nexport class DOMNode {\n  /**\n   * @param {!DOMModel} domModel\n   */\n  constructor(domModel) {\n    this._domModel = domModel;\n    this._agent = this._domModel._agent;\n    /** @type {?DOMDocument} */\n    this.ownerDocument;\n    /** @type {boolean} */\n    this._isInShadowTree;\n    /** @type {number} */\n    this.id;\n    /** @type {number|undefined} */\n    this.index = undefined;\n    /** @type {number} */\n    this._backendNodeId;\n    /** @type {number} */\n    this._nodeType;\n    /** @type {string} */\n    this._nodeName;\n    /** @type {string} */\n    this._localName;\n    /** @type {string} */\n    this._nodeValue;\n    /** @type {!Protocol.DOM.PseudoType|undefined} */\n    this._pseudoType;\n    /** @type {!Protocol.DOM.ShadowRootType|undefined} */\n    this._shadowRootType;\n    /** @type {?string} */\n    this._frameOwnerFrameId;\n    /** @type {string|undefined} */\n    this._xmlVersion;\n    /** @type {boolean} */\n    this._isSVGNode;\n    /** @type {?Promise<?Protocol.Runtime.StackTrace>} */\n    this._creationStackTrace = null;\n    /** @type {!Map<string, !DOMNode>} */\n    this._pseudoElements = new Map();\n    /** @type {!Array.<!DOMNodeShortcut>} */\n    this._distributedNodes = [];\n    /** @type {!Array.<!DOMNode>} */\n    this._shadowRoots = [];\n    /** @type {!Map<string, !Attribute>} */\n    this._attributes = new Map();\n    /** @type {!Map<string, ?>} */\n    this._markers = new Map();\n    /** @type {number} */\n    this._subtreeMarkerCount = 0;\n    /** @type {number} */\n    this._childNodeCount;\n    /** @type {?Array.<!DOMNode>} */\n    this._children = null;\n    /** @type {!DOMNode|null} */\n    this.nextSibling = null;\n    /** @type {!DOMNode|null} */\n    this.previousSibling = null;\n    /** @type {!DOMNode|null} */\n    this.firstChild = null;\n    /** @type {!DOMNode|null} */\n    this.lastChild = null;\n    /** @type {!DOMNode|null} */\n    this.parentNode = null;\n  }\n\n  /**\n   * @param {!DOMModel} domModel\n   * @param {?DOMDocument} doc\n   * @param {boolean} isInShadowTree\n   * @param {!Protocol.DOM.Node} payload\n   * @return {!DOMNode}\n   */\n  static create(domModel, doc, isInShadowTree, payload) {\n    const node = new DOMNode(domModel);\n    node._init(doc, isInShadowTree, payload);\n    return node;\n  }\n\n  /**\n  * @param {?DOMDocument} doc\n  * @param {boolean} isInShadowTree\n  * @param {!Protocol.DOM.Node} payload\n  */\n  _init(doc, isInShadowTree, payload) {\n    this._agent = this._domModel._agent;\n    this.ownerDocument = doc;\n    this._isInShadowTree = isInShadowTree;\n\n    this.id = payload.nodeId;\n    this._backendNodeId = payload.backendNodeId;\n    this._domModel._idToDOMNode[this.id] = this;\n    this._nodeType = payload.nodeType;\n    this._nodeName = payload.nodeName;\n    this._localName = payload.localName;\n    this._nodeValue = payload.nodeValue;\n    this._pseudoType = payload.pseudoType;\n    this._shadowRootType = payload.shadowRootType;\n    this._frameOwnerFrameId = payload.frameId || null;\n    this._xmlVersion = payload.xmlVersion;\n    this._isSVGNode = Boolean(payload.isSVG);\n\n    if (payload.attributes) {\n      this._setAttributesPayload(payload.attributes);\n    }\n\n\n    this._childNodeCount = payload.childNodeCount || 0;\n    if (payload.shadowRoots) {\n      for (let i = 0; i < payload.shadowRoots.length; ++i) {\n        const root = payload.shadowRoots[i];\n        const node = DOMNode.create(this._domModel, this.ownerDocument, true, root);\n        this._shadowRoots.push(node);\n        node.parentNode = this;\n      }\n    }\n\n    if (payload.templateContent) {\n      this._templateContent = DOMNode.create(this._domModel, this.ownerDocument, true, payload.templateContent);\n      this._templateContent.parentNode = this;\n      this._children = [];\n    }\n\n    if (payload.contentDocument) {\n      this._contentDocument = new DOMDocument(this._domModel, payload.contentDocument);\n      this._contentDocument.parentNode = this;\n      this._children = [];\n    } else if ((payload.nodeName === 'IFRAME' || payload.nodeName === 'PORTAL') && payload.frameId) {\n      const childTarget = TargetManager.instance().targetById(payload.frameId);\n      const childModel = childTarget ? childTarget.model(DOMModel) : null;\n      if (childModel) {\n        this._childDocumentPromiseForTesting = childModel.requestDocument();\n      }\n      this._children = [];\n    }\n\n    if (payload.importedDocument) {\n      this._importedDocument = DOMNode.create(this._domModel, this.ownerDocument, true, payload.importedDocument);\n      this._importedDocument.parentNode = this;\n      this._children = [];\n    }\n\n    if (payload.distributedNodes) {\n      this._setDistributedNodePayloads(payload.distributedNodes);\n    }\n\n    if (payload.children) {\n      this._setChildrenPayload(payload.children);\n    }\n\n    this._setPseudoElements(payload.pseudoElements);\n\n    if (this._nodeType === Node.ELEMENT_NODE) {\n      // HTML and BODY from internal iframes should not overwrite top-level ones.\n      if (this.ownerDocument && !this.ownerDocument.documentElement && this._nodeName === 'HTML') {\n        this.ownerDocument.documentElement = this;\n      }\n      if (this.ownerDocument && !this.ownerDocument.body && this._nodeName === 'BODY') {\n        this.ownerDocument.body = this;\n      }\n    } else if (this._nodeType === Node.DOCUMENT_TYPE_NODE) {\n      this.publicId = payload.publicId;\n      this.systemId = payload.systemId;\n      this.internalSubset = payload.internalSubset;\n    } else if (this._nodeType === Node.ATTRIBUTE_NODE) {\n      this.name = payload.name;\n      this.value = payload.value;\n    }\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isAdFrameNode() {\n    if (this.isIframe() && this._frameOwnerFrameId) {\n      const frame = FrameManager.instance().getFrame(this._frameOwnerFrameId);\n      if (!frame) {\n        return false;\n      }\n      return frame.adFrameType() !== Protocol.Page.AdFrameType.None;\n    }\n    return false;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isSVGNode() {\n    return this._isSVGNode;\n  }\n\n  /**\n   * @return {!Promise<?Protocol.Runtime.StackTrace>}\n   */\n  creationStackTrace() {\n    if (this._creationStackTrace) {\n      return this._creationStackTrace;\n    }\n\n    const stackTracesPromise = this._agent.invoke_getNodeStackTraces({nodeId: this.id});\n    this._creationStackTrace = stackTracesPromise.then(res => res.creation || null);\n    return this._creationStackTrace;\n  }\n\n  /**\n   * @return {!DOMModel}\n   */\n  domModel() {\n    return this._domModel;\n  }\n\n  /**\n   * @return {number}\n   */\n  backendNodeId() {\n    return this._backendNodeId;\n  }\n\n  /**\n   * @return {?Array.<!DOMNode>}\n   */\n  children() {\n    return this._children ? this._children.slice() : null;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasAttributes() {\n    return this._attributes.size > 0;\n  }\n\n  /**\n   * @return {number}\n   */\n  childNodeCount() {\n    return this._childNodeCount;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasShadowRoots() {\n    return Boolean(this._shadowRoots.length);\n  }\n\n  /**\n   * @return {!Array.<!DOMNode>}\n   */\n  shadowRoots() {\n    return this._shadowRoots.slice();\n  }\n\n  /**\n   * @return {?DOMNode}\n   */\n  templateContent() {\n    return this._templateContent || null;\n  }\n\n  /**\n   * @return {?DOMNode}\n   */\n  contentDocument() {\n    return this._contentDocument || null;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isIframe() {\n    return this._nodeName === 'IFRAME';\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isPortal() {\n    return this._nodeName === 'PORTAL';\n  }\n\n  /**\n   * @return {?DOMNode}\n   */\n  importedDocument() {\n    return this._importedDocument || null;\n  }\n\n  /**\n   * @return {number}\n   */\n  nodeType() {\n    return this._nodeType;\n  }\n\n  /**\n   * @return {string}\n   */\n  nodeName() {\n    return this._nodeName;\n  }\n\n  /**\n   * @return {string|undefined}\n   */\n  pseudoType() {\n    return this._pseudoType;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasPseudoElements() {\n    return this._pseudoElements.size > 0;\n  }\n\n  /**\n   * @return {!Map<string, !DOMNode>}\n   */\n  pseudoElements() {\n    return this._pseudoElements;\n  }\n\n  /**\n   * @return {?DOMNode}\n   */\n  beforePseudoElement() {\n    if (!this._pseudoElements) {\n      return null;\n    }\n    return this._pseudoElements.get(DOMNode.PseudoElementNames.Before) || null;\n  }\n\n  /**\n   * @return {?DOMNode}\n   */\n  afterPseudoElement() {\n    if (!this._pseudoElements) {\n      return null;\n    }\n    return this._pseudoElements.get(DOMNode.PseudoElementNames.After) || null;\n  }\n\n  /**\n   * @return {?DOMNode}\n   */\n  markerPseudoElement() {\n    if (!this._pseudoElements) {\n      return null;\n    }\n    return this._pseudoElements.get(DOMNode.PseudoElementNames.Marker) || null;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isInsertionPoint() {\n    return !this.isXMLNode() &&\n        (this._nodeName === 'SHADOW' || this._nodeName === 'CONTENT' || this._nodeName === 'SLOT');\n  }\n\n  /**\n   * @return {!Array.<!DOMNodeShortcut>}\n   */\n  distributedNodes() {\n    return this._distributedNodes;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isInShadowTree() {\n    return this._isInShadowTree;\n  }\n\n  /**\n   * @return {?DOMNode}\n   */\n  ancestorShadowHost() {\n    const ancestorShadowRoot = this.ancestorShadowRoot();\n    return ancestorShadowRoot ? ancestorShadowRoot.parentNode : null;\n  }\n\n  /**\n   * @return {?DOMNode}\n   */\n  ancestorShadowRoot() {\n    if (!this._isInShadowTree) {\n      return null;\n    }\n\n    let current = /** @type {?DOMNode} */ (this);\n    while (current && !current.isShadowRoot()) {\n      current = current.parentNode;\n    }\n    return current;\n  }\n\n  /**\n   * @return {?DOMNode}\n   */\n  ancestorUserAgentShadowRoot() {\n    const ancestorShadowRoot = this.ancestorShadowRoot();\n    if (!ancestorShadowRoot) {\n      return null;\n    }\n    return ancestorShadowRoot.shadowRootType() === DOMNode.ShadowRootTypes.UserAgent ? ancestorShadowRoot : null;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isShadowRoot() {\n    return Boolean(this._shadowRootType);\n  }\n\n  /**\n   * @return {?string}\n   */\n  shadowRootType() {\n    return this._shadowRootType || null;\n  }\n\n  /**\n   * @return {string}\n   */\n  nodeNameInCorrectCase() {\n    const shadowRootType = this.shadowRootType();\n    if (shadowRootType) {\n      return '#shadow-root (' + shadowRootType + ')';\n    }\n\n    // If there is no local name, it's case sensitive\n    if (!this.localName()) {\n      return this.nodeName();\n    }\n\n    // If the names are different lengths, there is a prefix and it's case sensitive\n    if (this.localName().length !== this.nodeName().length) {\n      return this.nodeName();\n    }\n\n    // Return the localname, which will be case insensitive if its an html node\n    return this.localName();\n  }\n\n  /**\n   * @param {string} name\n   * @param {function(?ProtocolClient.InspectorBackend.ProtocolError, ?DOMNode)=} callback\n   */\n  setNodeName(name, callback) {\n    this._agent.invoke_setNodeName({nodeId: this.id, name}).then(response => {\n      if (!response.getError()) {\n        this._domModel.markUndoableState();\n      }\n      if (callback) {\n        callback(response.getError() || null, this._domModel.nodeForId(response.nodeId));\n      }\n    });\n  }\n\n  /**\n   * @return {string}\n   */\n  localName() {\n    return this._localName;\n  }\n\n  /**\n   * @return {string}\n   */\n  nodeValue() {\n    return this._nodeValue;\n  }\n\n  /**\n   * @param {string} value\n   * @param {function(?ProtocolClient.InspectorBackend.ProtocolError)=} callback\n   */\n  setNodeValue(value, callback) {\n    this._agent.invoke_setNodeValue({nodeId: this.id, value}).then(response => {\n      if (!response.getError()) {\n        this._domModel.markUndoableState();\n      }\n      if (callback) {\n        callback(response.getError() || null);\n      }\n    });\n  }\n\n  /**\n   * @param {string} name\n   * @return {string|undefined}\n   */\n  getAttribute(name) {\n    const attr = this._attributes.get(name);\n    return attr ? attr.value : undefined;\n  }\n\n  /**\n   * @param {string} name\n   * @param {string} text\n   * @param {function(?ProtocolClient.InspectorBackend.ProtocolError)=} callback\n   */\n  setAttribute(name, text, callback) {\n    this._agent.invoke_setAttributesAsText({nodeId: this.id, text, name}).then(response => {\n      if (!response.getError()) {\n        this._domModel.markUndoableState();\n      }\n      if (callback) {\n        callback(response.getError() || null);\n      }\n    });\n  }\n\n  /**\n   * @param {string} name\n   * @param {string} value\n   * @param {function(?ProtocolClient.InspectorBackend.ProtocolError)=} callback\n   */\n  setAttributeValue(name, value, callback) {\n    this._agent.invoke_setAttributeValue({nodeId: this.id, name, value}).then(response => {\n      if (!response.getError()) {\n        this._domModel.markUndoableState();\n      }\n      if (callback) {\n        callback(response.getError() || null);\n      }\n    });\n  }\n\n  /**\n  * @param {string} name\n  * @param {string} value\n  * @return {!Promise<?ProtocolClient.InspectorBackend.ProtocolError>}\n  */\n  setAttributeValuePromise(name, value) {\n    return new Promise(fulfill => this.setAttributeValue(name, value, fulfill));\n  }\n\n  /**\n   * @return {!Array<!Attribute>}\n   */\n  attributes() {\n    return [...this._attributes.values()];\n  }\n\n  /**\n   * @param {string} name\n   * @return {!Promise<void>}\n   */\n  async removeAttribute(name) {\n    const response = await this._agent.invoke_removeAttribute({nodeId: this.id, name});\n    if (response.getError()) {\n      return;\n    }\n    this._attributes.delete(name);\n    this._domModel.markUndoableState();\n  }\n\n  /**\n   * @param {function(?Array<!DOMNode>):void} callback\n   */\n  getChildNodes(callback) {\n    if (this._children) {\n      callback(this.children());\n      return;\n    }\n    this._agent.invoke_requestChildNodes({nodeId: this.id}).then(response => {\n      callback(response.getError() ? null : this.children());\n    });\n  }\n\n  /**\n   * @param {number} depth\n   * @param {boolean} pierce\n   * @return {!Promise<?Array<!DOMNode>>}\n   */\n  async getSubtree(depth, pierce) {\n    const response = await this._agent.invoke_requestChildNodes({nodeId: this.id, depth: depth, pierce: pierce});\n    return response.getError() ? null : this._children;\n  }\n\n  /**\n   * @return {!Promise<?string>}\n   */\n  async getOuterHTML() {\n    const {outerHTML} = await this._agent.invoke_getOuterHTML({nodeId: this.id});\n    return outerHTML;\n  }\n\n  /**\n   * @param {string} html\n   * @param {function(?ProtocolClient.InspectorBackend.ProtocolError)=} callback\n   */\n  setOuterHTML(html, callback) {\n    this._agent.invoke_setOuterHTML({nodeId: this.id, outerHTML: html}).then(response => {\n      if (!response.getError()) {\n        this._domModel.markUndoableState();\n      }\n      if (callback) {\n        callback(response.getError() || null);\n      }\n    });\n  }\n\n  /**\n   * @param {function(?ProtocolClient.InspectorBackend.ProtocolError, !Protocol.DOM.NodeId=)=} callback\n   */\n  removeNode(callback) {\n    this._agent.invoke_removeNode({nodeId: this.id}).then(response => {\n      if (!response.getError()) {\n        this._domModel.markUndoableState();\n      }\n      if (callback) {\n        callback(response.getError() || null);\n      }\n    });\n  }\n\n  /**\n   * @return {!Promise<?string>}\n   */\n  async copyNode() {\n    const {outerHTML} = await this._agent.invoke_getOuterHTML({nodeId: this.id});\n    if (outerHTML !== null) {\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(outerHTML);\n    }\n    return outerHTML;\n  }\n\n  /**\n   * @return {string}\n   */\n  path() {\n    /**\n     * @param {!DOMNode} node\n     */\n    function canPush(node) {\n      return (node.index !== undefined || (node.isShadowRoot() && node.parentNode)) && node._nodeName.length;\n    }\n\n    const path = [];\n    let node = /** @type {?DOMNode} */ (this);\n    while (node && canPush(node)) {\n      const index = typeof node.index === 'number' ?\n          node.index :\n          (node.shadowRootType() === DOMNode.ShadowRootTypes.UserAgent ? 'u' : 'a');\n      path.push([index, node._nodeName]);\n      node = node.parentNode;\n    }\n    path.reverse();\n    return path.join(',');\n  }\n\n  /**\n   * @param {!DOMNode} node\n   * @return {boolean}\n   */\n  isAncestor(node) {\n    if (!node) {\n      return false;\n    }\n\n    let currentNode = node.parentNode;\n    while (currentNode) {\n      if (this === currentNode) {\n        return true;\n      }\n      currentNode = currentNode.parentNode;\n    }\n    return false;\n  }\n\n  /**\n   * @param {!DOMNode} descendant\n   * @return {boolean}\n   */\n  isDescendant(descendant) {\n    return descendant !== null && descendant.isAncestor(this);\n  }\n\n  /**\n   * @return {?Protocol.Page.FrameId}\n   */\n  frameId() {\n    let node = this.parentNode || this;\n    while (!node._frameOwnerFrameId && node.parentNode) {\n      node = node.parentNode;\n    }\n    return node._frameOwnerFrameId;\n  }\n\n  /**\n   * @param {!Array.<string>} attrs\n   * @return {boolean}\n   */\n  _setAttributesPayload(attrs) {\n    let attributesChanged = !this._attributes || attrs.length !== this._attributes.size * 2;\n    const oldAttributesMap = this._attributes || new Map();\n\n    this._attributes = new Map();\n\n    for (let i = 0; i < attrs.length; i += 2) {\n      const name = attrs[i];\n      const value = attrs[i + 1];\n      this._addAttribute(name, value);\n\n      if (attributesChanged) {\n        continue;\n      }\n\n      const oldAttribute = oldAttributesMap.get(name);\n      if (!oldAttribute || oldAttribute.value !== value) {\n        attributesChanged = true;\n      }\n    }\n    return attributesChanged;\n  }\n\n  /**\n   * @param {!DOMNode} prev\n   * @param {!Protocol.DOM.Node} payload\n   * @return {!DOMNode}\n   */\n  _insertChild(prev, payload) {\n    if (!this._children) {\n      throw new Error('DOMNode._children is expected to not be null.');\n    }\n    const node = DOMNode.create(this._domModel, this.ownerDocument, this._isInShadowTree, payload);\n    this._children.splice(this._children.indexOf(prev) + 1, 0, node);\n    this._renumber();\n    return node;\n  }\n\n  /**\n   * @param {!DOMNode} node\n   */\n  _removeChild(node) {\n    const pseudoType = node.pseudoType();\n    if (pseudoType) {\n      this._pseudoElements.delete(pseudoType);\n    } else {\n      const shadowRootIndex = this._shadowRoots.indexOf(node);\n      if (shadowRootIndex !== -1) {\n        this._shadowRoots.splice(shadowRootIndex, 1);\n      } else {\n        if (!this._children) {\n          throw new Error('DOMNode._children is expected to not be null.');\n        }\n        if (this._children.indexOf(node) === -1) {\n          throw new Error('DOMNode._children is expected to contain the node to be removed.');\n        }\n        this._children.splice(this._children.indexOf(node), 1);\n      }\n    }\n    node.parentNode = null;\n    this._subtreeMarkerCount -= node._subtreeMarkerCount;\n    if (node._subtreeMarkerCount) {\n      this._domModel.dispatchEventToListeners(Events.MarkersChanged, this);\n    }\n    this._renumber();\n  }\n\n  /**\n   * @param {!Array.<!Protocol.DOM.Node>} payloads\n   */\n  _setChildrenPayload(payloads) {\n    this._children = [];\n    for (let i = 0; i < payloads.length; ++i) {\n      const payload = payloads[i];\n      const node = DOMNode.create(this._domModel, this.ownerDocument, this._isInShadowTree, payload);\n      this._children.push(node);\n    }\n    this._renumber();\n  }\n\n  /**\n   * @param {!Array.<!Protocol.DOM.Node>|undefined} payloads\n   */\n  _setPseudoElements(payloads) {\n    if (!payloads) {\n      return;\n    }\n\n    for (let i = 0; i < payloads.length; ++i) {\n      const node = DOMNode.create(this._domModel, this.ownerDocument, this._isInShadowTree, payloads[i]);\n      node.parentNode = this;\n      const pseudoType = node.pseudoType();\n      if (!pseudoType) {\n        throw new Error('DOMNode.pseudoType() is expected to be defined.');\n      }\n      this._pseudoElements.set(pseudoType, node);\n    }\n  }\n\n  /**\n   * @param {!Array.<!Protocol.DOM.BackendNode>} payloads\n   */\n  _setDistributedNodePayloads(payloads) {\n    this._distributedNodes = [];\n    for (const payload of payloads) {\n      this._distributedNodes.push(\n          new DOMNodeShortcut(this._domModel.target(), payload.backendNodeId, payload.nodeType, payload.nodeName));\n    }\n  }\n\n  _renumber() {\n    if (!this._children) {\n      throw new Error('DOMNode._children is expected to not be null.');\n    }\n    this._childNodeCount = this._children.length;\n    if (this._childNodeCount === 0) {\n      this.firstChild = null;\n      this.lastChild = null;\n      return;\n    }\n    this.firstChild = this._children[0];\n    this.lastChild = this._children[this._childNodeCount - 1];\n    for (let i = 0; i < this._childNodeCount; ++i) {\n      const child = this._children[i];\n      child.index = i;\n      child.nextSibling = i + 1 < this._childNodeCount ? this._children[i + 1] : null;\n      child.previousSibling = i - 1 >= 0 ? this._children[i - 1] : null;\n      child.parentNode = this;\n    }\n  }\n\n  /**\n   * @param {string} name\n   * @param {string} value\n   */\n  _addAttribute(name, value) {\n    const attr = {name: name, value: value, _node: this};\n    this._attributes.set(name, attr);\n  }\n\n  /**\n   * @param {string} name\n   * @param {string} value\n   */\n  _setAttribute(name, value) {\n    const attr = this._attributes.get(name);\n    if (attr) {\n      attr.value = value;\n    } else {\n      this._addAttribute(name, value);\n    }\n  }\n\n  /**\n   * @param {string} name\n   */\n  _removeAttribute(name) {\n    this._attributes.delete(name);\n  }\n\n  /**\n   * @param {!DOMNode} targetNode\n   * @param {?DOMNode} anchorNode\n   * @param {function(?ProtocolClient.InspectorBackend.ProtocolError, ?DOMNode)=} callback\n   */\n  copyTo(targetNode, anchorNode, callback) {\n    this._agent\n        .invoke_copyTo(\n            {nodeId: this.id, targetNodeId: targetNode.id, insertBeforeNodeId: anchorNode ? anchorNode.id : undefined})\n        .then(response => {\n          if (!response.getError()) {\n            this._domModel.markUndoableState();\n          }\n          if (callback) {\n            callback(response.getError() || null, this._domModel.nodeForId(response.nodeId));\n          }\n        });\n  }\n\n  /**\n   * @param {!DOMNode} targetNode\n   * @param {?DOMNode} anchorNode\n   * @param {function(?ProtocolClient.InspectorBackend.ProtocolError, ?DOMNode)=} callback\n   */\n  moveTo(targetNode, anchorNode, callback) {\n    this._agent\n        .invoke_moveTo(\n            {nodeId: this.id, targetNodeId: targetNode.id, insertBeforeNodeId: anchorNode ? anchorNode.id : undefined})\n        .then(response => {\n          if (!response.getError()) {\n            this._domModel.markUndoableState();\n          }\n          if (callback) {\n            callback(response.getError() || null, this._domModel.nodeForId(response.nodeId));\n          }\n        });\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isXMLNode() {\n    return Boolean(this._xmlVersion);\n  }\n\n  /**\n   * @param {string} name\n   * @param {?*} value\n   */\n  setMarker(name, value) {\n    if (value === null) {\n      if (!this._markers.has(name)) {\n        return;\n      }\n\n      this._markers.delete(name);\n      for (let node = /** @type {?DOMNode} */ (this); node; node = node.parentNode) {\n        --node._subtreeMarkerCount;\n      }\n      for (let node = /** @type {?DOMNode} */ (this); node; node = node.parentNode) {\n        this._domModel.dispatchEventToListeners(Events.MarkersChanged, node);\n      }\n      return;\n    }\n\n    if (this.parentNode && !this._markers.has(name)) {\n      for (let node = /** @type {?DOMNode} */ (this); node; node = node.parentNode) {\n        ++node._subtreeMarkerCount;\n      }\n    }\n    this._markers.set(name, value);\n    for (let node = /** @type {?DOMNode} */ (this); node; node = node.parentNode) {\n      this._domModel.dispatchEventToListeners(Events.MarkersChanged, node);\n    }\n  }\n\n  /**\n   * @param {string} name\n   * @return {?T}\n   * @template T\n   */\n  marker(name) {\n    return this._markers.get(name) || null;\n  }\n\n  /**\n   * @param {function(!DOMNode, string):void} visitor\n   */\n  traverseMarkers(visitor) {\n    /**\n     * @param {!DOMNode} node\n     */\n    function traverse(node) {\n      if (!node._subtreeMarkerCount) {\n        return;\n      }\n      for (const marker of node._markers.keys()) {\n        visitor(node, marker);\n      }\n      if (!node._children) {\n        return;\n      }\n      for (const child of node._children) {\n        traverse(child);\n      }\n    }\n    traverse(this);\n  }\n\n  /**\n   * @param {string} url\n   * @return {?string}\n   */\n  resolveURL(url) {\n    if (!url) {\n      return url;\n    }\n    for (let frameOwnerCandidate = /** @type {?DOMNode} */ (this); frameOwnerCandidate;\n         frameOwnerCandidate = frameOwnerCandidate.parentNode) {\n      if (frameOwnerCandidate instanceof DOMDocument && frameOwnerCandidate.baseURL) {\n        return Common.ParsedURL.ParsedURL.completeURL(frameOwnerCandidate.baseURL, url);\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @param {string=} mode\n   */\n  highlight(mode) {\n    this._domModel.overlayModel().highlightInOverlay({node: this, selectorList: undefined}, mode);\n  }\n\n  highlightForTwoSeconds() {\n    this._domModel.overlayModel().highlightInOverlayForTwoSeconds({node: this, selectorList: undefined});\n  }\n\n  /**\n   * @param {string=} objectGroup\n   * @return {!Promise<?RemoteObject>}\n   */\n  async resolveToObject(objectGroup) {\n    const {object} = await this._agent.invoke_resolveNode({nodeId: this.id, backendNodeId: undefined, objectGroup});\n    return object && this._domModel._runtimeModel.createRemoteObject(object) || null;\n  }\n\n  /**\n   * @return {!Promise<?Protocol.DOM.BoxModel>}\n   */\n  async boxModel() {\n    const {model} = await this._agent.invoke_getBoxModel({nodeId: this.id});\n    return model;\n  }\n\n  async setAsInspectedNode() {\n    let node = /** @type {?DOMNode} */ (this);\n    if (node && node.pseudoType()) {\n      node = node.parentNode;\n    }\n    while (node) {\n      let ancestor = node.ancestorUserAgentShadowRoot();\n      if (!ancestor) {\n        break;\n      }\n      ancestor = node.ancestorShadowHost();\n      if (!ancestor) {\n        break;\n      }\n      // User agent shadow root, keep climbing up.\n      node = ancestor;\n    }\n    if (!node) {\n      throw new Error('In DOMNode.setAsInspectedNode: node is expected to not be null.');\n    }\n    await this._agent.invoke_setInspectedNode({nodeId: node.id});\n  }\n\n  /**\n   *  @return {?DOMNode}\n   */\n  enclosingElementOrSelf() {\n    let node = /** @type {?DOMNode} */ (this);\n    if (node && node.nodeType() === Node.TEXT_NODE && node.parentNode) {\n      node = node.parentNode;\n    }\n\n    if (node && node.nodeType() !== Node.ELEMENT_NODE) {\n      node = null;\n    }\n    return node;\n  }\n\n  async scrollIntoView() {\n    const node = this.enclosingElementOrSelf();\n    if (!node) {\n      return;\n    }\n    const object = await node.resolveToObject();\n    if (!object) {\n      return;\n    }\n    object.callFunction(scrollIntoView);\n    object.release();\n    node.highlightForTwoSeconds();\n\n    /**\n     * @this {!Element}\n     */\n    function scrollIntoView() {\n      this.scrollIntoViewIfNeeded(true);\n    }\n  }\n\n  async focus() {\n    const node = this.enclosingElementOrSelf();\n    if (!node) {\n      throw new Error('DOMNode.focus expects node to not be null.');\n    }\n    const object = await node.resolveToObject();\n    if (!object) {\n      return;\n    }\n    await object.callFunction(focusInPage);\n    object.release();\n    node.highlightForTwoSeconds();\n    await this._domModel.target().pageAgent().invoke_bringToFront();\n\n    /**\n     * @this {!HTMLElement}\n     */\n    function focusInPage() {\n      this.focus();\n    }\n  }\n\n  /**\n   * @return {string}\n   */\n  simpleSelector() {\n    const lowerCaseName = this.localName() || this.nodeName().toLowerCase();\n    if (this.nodeType() !== Node.ELEMENT_NODE) {\n      return lowerCaseName;\n    }\n    const type = this.getAttribute('type');\n    const id = this.getAttribute('id');\n    const classes = this.getAttribute('class');\n\n    if (lowerCaseName === 'input' && type && !id && !classes) {\n      return lowerCaseName + '[type=\"' + CSS.escape(type) + '\"]';\n    }\n    if (id) {\n      return lowerCaseName + '#' + CSS.escape(id);\n    }\n    if (classes) {\n      const classList = classes.trim().split(/\\s+/g);\n      return (lowerCaseName === 'div' ? '' : lowerCaseName) + '.' + classList.map(cls => CSS.escape(cls)).join('.');\n    }\n    return lowerCaseName;\n  }\n}\n\n/**\n * @enum {string}\n */\nDOMNode.PseudoElementNames = {\n  Before: 'before',\n  After: 'after',\n  Marker: 'marker'\n};\n\n/**\n * @enum {string}\n */\nDOMNode.ShadowRootTypes = {\n  UserAgent: 'user-agent',\n  Open: 'open',\n  Closed: 'closed'\n};\n\n\nexport class DeferredDOMNode {\n  /**\n   * @param {!Target} target\n   * @param {number} backendNodeId\n   */\n  constructor(target, backendNodeId) {\n    this._domModel = /** @type {!DOMModel} */ (target.model(DOMModel));\n    this._backendNodeId = backendNodeId;\n  }\n\n  /**\n   * @param {function(?DOMNode):void} callback\n   */\n  resolve(callback) {\n    this.resolvePromise().then(callback);\n  }\n\n  /**\n   * @return {!Promise<?DOMNode>}\n   */\n  async resolvePromise() {\n    const nodeIds = await this._domModel.pushNodesByBackendIdsToFrontend(new Set([this._backendNodeId]));\n    return nodeIds && nodeIds.get(this._backendNodeId) || null;\n  }\n\n  /**\n   * @return {number}\n   */\n  backendNodeId() {\n    return this._backendNodeId;\n  }\n\n  /**\n   * @return {!DOMModel}\n   */\n  domModel() {\n    return this._domModel;\n  }\n\n  highlight() {\n    this._domModel.overlayModel().highlightInOverlay({deferredNode: this, selectorList: undefined});\n  }\n}\n\n\nexport class DOMNodeShortcut {\n  /**\n   * @param {!Target} target\n   * @param {number} backendNodeId\n   * @param {number} nodeType\n   * @param {string} nodeName\n   */\n  constructor(target, backendNodeId, nodeType, nodeName) {\n    this.nodeType = nodeType;\n    this.nodeName = nodeName;\n    this.deferredNode = new DeferredDOMNode(target, backendNodeId);\n  }\n}\n\nexport class DOMDocument extends DOMNode {\n  /**\n   * @param {!DOMModel} domModel\n   * @param {!Protocol.DOM.Node} payload\n   */\n  constructor(domModel, payload) {\n    super(domModel);\n    /** @type {?DOMNode} */\n    this.body = null;\n    /** @type {?DOMNode} */\n    this.documentElement = null;\n    this._init(this, false, payload);\n    this.documentURL = payload.documentURL || '';\n    this.baseURL = payload.baseURL || '';\n  }\n}\n\nexport class DOMModel extends SDKModel {\n  /**\n   * @param {!Target} target\n   */\n  constructor(target) {\n    super(target);\n\n    this._agent = target.domAgent();\n\n    /** @type {!Object.<number, !DOMNode>} */\n    this._idToDOMNode = {};\n    /** @type {?DOMDocument} */\n    this._document = null;\n    /** @type {!Set<number>} */\n    this._attributeLoadNodeIds = new Set();\n    target.registerDOMDispatcher(new DOMDispatcher(this));\n\n    this._runtimeModel = /** @type {!RuntimeModel} */ (target.model(RuntimeModel));\n    /** @type {number} */\n    this._lastMutationId;\n\n    /** @type {?Promise<?DOMDocument>} */\n    this._pendingDocumentRequestPromise = null;\n\n    if (!target.suspended()) {\n      this._agent.invoke_enable();\n    }\n\n    if (Root.Runtime.experiments.isEnabled('captureNodeCreationStacks')) {\n      this._agent.invoke_setNodeStackTracesEnabled({enable: true});\n    }\n  }\n\n  /**\n   * @return {!RuntimeModel}\n   */\n  runtimeModel() {\n    return this._runtimeModel;\n  }\n\n  /**\n   * @return {!CSSModel}\n   */\n  cssModel() {\n    return /** @type {!CSSModel} */ (this.target().model(CSSModel));\n  }\n\n  /**\n   * @return {!OverlayModel}\n   */\n  overlayModel() {\n    return /** @type {!OverlayModel} */ (this.target().model(OverlayModel));\n  }\n\n  static cancelSearch() {\n    for (const domModel of TargetManager.instance().models(DOMModel)) {\n      domModel._cancelSearch();\n    }\n  }\n\n  /**\n   * @param {!DOMNode} node\n   */\n  _scheduleMutationEvent(node) {\n    if (!this.hasEventListeners(Events.DOMMutated)) {\n      return;\n    }\n\n    this._lastMutationId = (this._lastMutationId || 0) + 1;\n    Promise.resolve().then(callObserve.bind(this, node, this._lastMutationId));\n\n    /**\n     * @this {DOMModel}\n     * @param {!DOMNode} node\n     * @param {number} mutationId\n     */\n    function callObserve(node, mutationId) {\n      if (!this.hasEventListeners(Events.DOMMutated) || this._lastMutationId !== mutationId) {\n        return;\n      }\n\n      this.dispatchEventToListeners(Events.DOMMutated, node);\n    }\n  }\n\n  /**\n   * @return {!Promise<?DOMDocument>}\n   */\n  requestDocument() {\n    if (this._document) {\n      return Promise.resolve(this._document);\n    }\n    if (!this._pendingDocumentRequestPromise) {\n      this._pendingDocumentRequestPromise = this._requestDocument();\n    }\n    return this._pendingDocumentRequestPromise;\n  }\n\n  /**\n   * @param {!Protocol.Page.FrameId} frameId\n   * @returns {!Promise<?DeferredDOMNode>}\n   */\n  async getOwnerNodeForFrame(frameId) {\n    // Returns an error if the frameId does not belong to the current target.\n    const response = await this._agent.invoke_getFrameOwner({frameId});\n    if (response.getError()) {\n      return null;\n    }\n    return new DeferredDOMNode(this.target(), response.backendNodeId);\n  }\n\n  /**\n   * @return {!Promise<?DOMDocument>}\n   */\n  async _requestDocument() {\n    const {root: documentPayload} = await this._agent.invoke_getDocument({});\n    this._pendingDocumentRequestPromise = null;\n\n    if (documentPayload) {\n      this._setDocument(documentPayload);\n    }\n    if (!this._document) {\n      console.error('No document');\n      return null;\n    }\n\n    const parentModel = this.parentModel();\n    if (parentModel && !this._frameOwnerNode) {\n      await parentModel.requestDocument();\n      const response = await parentModel._agent.invoke_getFrameOwner({frameId: this.target().id()});\n      if (!response.getError() && response.nodeId) {\n        this._frameOwnerNode = parentModel.nodeForId(response.nodeId);\n      }\n    }\n\n    // Document could have been cleared by now.\n    if (this._frameOwnerNode) {\n      const oldDocument = this._frameOwnerNode._contentDocument;\n      this._frameOwnerNode._contentDocument = this._document;\n      this._frameOwnerNode._children = [];\n      if (this._document) {\n        this._document.parentNode = this._frameOwnerNode;\n        this.dispatchEventToListeners(Events.NodeInserted, this._document);\n      } else if (oldDocument) {\n        this.dispatchEventToListeners(Events.NodeRemoved, {node: oldDocument, parent: this._frameOwnerNode});\n      }\n    }\n    return this._document;\n  }\n\n  /**\n   * @return {?DOMDocument}\n   */\n  existingDocument() {\n    return this._document;\n  }\n\n  /**\n   * @param {!Protocol.Runtime.RemoteObjectId} objectId\n   * @return {!Promise<?DOMNode>}\n   */\n  async pushNodeToFrontend(objectId) {\n    await this.requestDocument();\n    const {nodeId} = await this._agent.invoke_requestNode({objectId});\n    return nodeId ? this.nodeForId(nodeId) : null;\n  }\n\n  /**\n   * @param {string} path\n   * @return {!Promise<?Protocol.DOM.NodeId>}\n   */\n  pushNodeByPathToFrontend(path) {\n    return this.requestDocument()\n        .then(() => this._agent.invoke_pushNodeByPathToFrontend({path}))\n        .then(({nodeId}) => nodeId);\n  }\n\n  /**\n   * @param {!Set<number>} backendNodeIds\n   * @return {!Promise<?Map<number, ?DOMNode>>}\n   */\n  async pushNodesByBackendIdsToFrontend(backendNodeIds) {\n    await this.requestDocument();\n    const backendNodeIdsArray = [...backendNodeIds];\n    const {nodeIds} = await this._agent.invoke_pushNodesByBackendIdsToFrontend({backendNodeIds: backendNodeIdsArray});\n    if (!nodeIds) {\n      return null;\n    }\n    /** @type {!Map<number, ?DOMNode>} */\n    const map = new Map();\n    for (let i = 0; i < nodeIds.length; ++i) {\n      if (nodeIds[i]) {\n        map.set(backendNodeIdsArray[i], this.nodeForId(nodeIds[i]));\n      }\n    }\n    return map;\n  }\n\n  /**\n   * @param {!Protocol.DOM.NodeId} nodeId\n   * @param {string} name\n   * @param {string} value\n   */\n  _attributeModified(nodeId, name, value) {\n    const node = this._idToDOMNode[nodeId];\n    if (!node) {\n      return;\n    }\n\n    node._setAttribute(name, value);\n    this.dispatchEventToListeners(Events.AttrModified, {node: node, name: name});\n    this._scheduleMutationEvent(node);\n  }\n\n  /**\n   * @param {!Protocol.DOM.NodeId} nodeId\n   * @param {string} name\n   */\n  _attributeRemoved(nodeId, name) {\n    const node = this._idToDOMNode[nodeId];\n    if (!node) {\n      return;\n    }\n    node._removeAttribute(name);\n    this.dispatchEventToListeners(Events.AttrRemoved, {node: node, name: name});\n    this._scheduleMutationEvent(node);\n  }\n\n  /**\n   * @param {!Array<!Protocol.DOM.NodeId>} nodeIds\n   */\n  _inlineStyleInvalidated(nodeIds) {\n    Platform.SetUtilities.addAll(this._attributeLoadNodeIds, nodeIds);\n    if (!this._loadNodeAttributesTimeout) {\n      this._loadNodeAttributesTimeout = setTimeout(this._loadNodeAttributes.bind(this), 20);\n    }\n  }\n\n  _loadNodeAttributes() {\n    delete this._loadNodeAttributesTimeout;\n    for (const nodeId of this._attributeLoadNodeIds) {\n      this._agent.invoke_getAttributes({nodeId}).then(({attributes}) => {\n        if (!attributes) {\n          // We are calling _loadNodeAttributes asynchronously, it is ok if node is not found.\n          return;\n        }\n        const node = this._idToDOMNode[nodeId];\n        if (!node) {\n          return;\n        }\n        if (node._setAttributesPayload(attributes)) {\n          this.dispatchEventToListeners(Events.AttrModified, {node: node, name: 'style'});\n          this._scheduleMutationEvent(node);\n        }\n      });\n    }\n    this._attributeLoadNodeIds.clear();\n  }\n\n  /**\n   * @param {!Protocol.DOM.NodeId} nodeId\n   * @param {string} newValue\n   */\n  _characterDataModified(nodeId, newValue) {\n    const node = this._idToDOMNode[nodeId];\n    node._nodeValue = newValue;\n    this.dispatchEventToListeners(Events.CharacterDataModified, node);\n    this._scheduleMutationEvent(node);\n  }\n\n  /**\n   * @param {?Protocol.DOM.NodeId} nodeId\n   * @return {?DOMNode}\n   */\n  nodeForId(nodeId) {\n    return nodeId ? this._idToDOMNode[nodeId] || null : null;\n  }\n\n  _documentUpdated() {\n    // If we have this._pendingDocumentRequestPromise in flight,\n    // if it hits backend post document update, it will contain most recent result.\n    const documentWasRequested = this._document || this._pendingDocumentRequestPromise;\n    this._setDocument(null);\n    if (this.parentModel() && documentWasRequested) {\n      this.requestDocument();\n    }\n  }\n\n  /**\n   * @param {?Protocol.DOM.Node} payload\n   */\n  _setDocument(payload) {\n    this._idToDOMNode = {};\n    if (payload && 'nodeId' in payload) {\n      this._document = new DOMDocument(this, payload);\n    } else {\n      this._document = null;\n    }\n    DOMModelUndoStack.instance()._dispose(this);\n\n    if (!this.parentModel()) {\n      this.dispatchEventToListeners(Events.DocumentUpdated, this);\n    }\n  }\n\n  /**\n   * @param {!Protocol.DOM.Node} payload\n   */\n  _setDetachedRoot(payload) {\n    if (payload.nodeName === '#document') {\n      new DOMDocument(this, payload);\n    } else {\n      DOMNode.create(this, null, false, payload);\n    }\n  }\n\n  /**\n   * @param {!Protocol.DOM.NodeId} parentId\n   * @param {!Array.<!Protocol.DOM.Node>} payloads\n   */\n  _setChildNodes(parentId, payloads) {\n    if (!parentId && payloads.length) {\n      this._setDetachedRoot(payloads[0]);\n      return;\n    }\n\n    const parent = this._idToDOMNode[parentId];\n    parent._setChildrenPayload(payloads);\n  }\n\n  /**\n   * @param {!Protocol.DOM.NodeId} nodeId\n   * @param {number} newValue\n   */\n  _childNodeCountUpdated(nodeId, newValue) {\n    const node = this._idToDOMNode[nodeId];\n    node._childNodeCount = newValue;\n    this.dispatchEventToListeners(Events.ChildNodeCountUpdated, node);\n    this._scheduleMutationEvent(node);\n  }\n\n  /**\n   * @param {!Protocol.DOM.NodeId} parentId\n   * @param {!Protocol.DOM.NodeId} prevId\n   * @param {!Protocol.DOM.Node} payload\n   */\n  _childNodeInserted(parentId, prevId, payload) {\n    const parent = this._idToDOMNode[parentId];\n    const prev = this._idToDOMNode[prevId];\n    const node = parent._insertChild(prev, payload);\n    this._idToDOMNode[node.id] = node;\n    this.dispatchEventToListeners(Events.NodeInserted, node);\n    this._scheduleMutationEvent(node);\n  }\n\n  /**\n   * @param {!Protocol.DOM.NodeId} parentId\n   * @param {!Protocol.DOM.NodeId} nodeId\n   */\n  _childNodeRemoved(parentId, nodeId) {\n    const parent = this._idToDOMNode[parentId];\n    const node = this._idToDOMNode[nodeId];\n    parent._removeChild(node);\n    this._unbind(node);\n    this.dispatchEventToListeners(Events.NodeRemoved, {node: node, parent: parent});\n    this._scheduleMutationEvent(node);\n  }\n\n  /**\n   * @param {!Protocol.DOM.NodeId} hostId\n   * @param {!Protocol.DOM.Node} root\n   */\n  _shadowRootPushed(hostId, root) {\n    const host = this._idToDOMNode[hostId];\n    if (!host) {\n      return;\n    }\n    const node = DOMNode.create(this, host.ownerDocument, true, root);\n    node.parentNode = host;\n    this._idToDOMNode[node.id] = node;\n    host._shadowRoots.unshift(node);\n    this.dispatchEventToListeners(Events.NodeInserted, node);\n    this._scheduleMutationEvent(node);\n  }\n\n  /**\n   * @param {!Protocol.DOM.NodeId} hostId\n   * @param {!Protocol.DOM.NodeId} rootId\n   */\n  _shadowRootPopped(hostId, rootId) {\n    const host = this._idToDOMNode[hostId];\n    if (!host) {\n      return;\n    }\n    const root = this._idToDOMNode[rootId];\n    if (!root) {\n      return;\n    }\n    host._removeChild(root);\n    this._unbind(root);\n    this.dispatchEventToListeners(Events.NodeRemoved, {node: root, parent: host});\n    this._scheduleMutationEvent(root);\n  }\n\n  /**\n   * @param {!Protocol.DOM.NodeId} parentId\n   * @param {!Protocol.DOM.Node} pseudoElement\n   */\n  _pseudoElementAdded(parentId, pseudoElement) {\n    const parent = this._idToDOMNode[parentId];\n    if (!parent) {\n      return;\n    }\n    const node = DOMNode.create(this, parent.ownerDocument, false, pseudoElement);\n    node.parentNode = parent;\n    this._idToDOMNode[node.id] = node;\n    const pseudoType = node.pseudoType();\n    if (!pseudoType) {\n      throw new Error('DOMModel._pseudoElementAdded expects pseudoType to be defined.');\n    }\n    const previousPseudoType = parent._pseudoElements.get(pseudoType);\n    if (previousPseudoType) {\n      throw new Error('DOMModel._pseudoElementAdded expects parent to not already have this pseudo type added.');\n    }\n    parent._pseudoElements.set(pseudoType, node);\n    this.dispatchEventToListeners(Events.NodeInserted, node);\n    this._scheduleMutationEvent(node);\n  }\n\n  /**\n   * @param {!Protocol.DOM.NodeId} parentId\n   * @param {!Protocol.DOM.NodeId} pseudoElementId\n   */\n  _pseudoElementRemoved(parentId, pseudoElementId) {\n    const parent = this._idToDOMNode[parentId];\n    if (!parent) {\n      return;\n    }\n    const pseudoElement = this._idToDOMNode[pseudoElementId];\n    if (!pseudoElement) {\n      return;\n    }\n    parent._removeChild(pseudoElement);\n    this._unbind(pseudoElement);\n    this.dispatchEventToListeners(Events.NodeRemoved, {node: pseudoElement, parent: parent});\n    this._scheduleMutationEvent(pseudoElement);\n  }\n\n  /**\n   * @param {!Protocol.DOM.NodeId} insertionPointId\n   * @param {!Array.<!Protocol.DOM.BackendNode>} distributedNodes\n   */\n  _distributedNodesUpdated(insertionPointId, distributedNodes) {\n    const insertionPoint = this._idToDOMNode[insertionPointId];\n    if (!insertionPoint) {\n      return;\n    }\n    insertionPoint._setDistributedNodePayloads(distributedNodes);\n    this.dispatchEventToListeners(Events.DistributedNodesChanged, insertionPoint);\n    this._scheduleMutationEvent(insertionPoint);\n  }\n\n  /**\n   * @param {!DOMNode} node\n   */\n  _unbind(node) {\n    delete this._idToDOMNode[node.id];\n    for (let i = 0; node._children && i < node._children.length; ++i) {\n      this._unbind(node._children[i]);\n    }\n    for (let i = 0; i < node._shadowRoots.length; ++i) {\n      this._unbind(node._shadowRoots[i]);\n    }\n    const pseudoElements = node.pseudoElements();\n    for (const value of pseudoElements.values()) {\n      this._unbind(value);\n    }\n    if (node._templateContent) {\n      this._unbind(node._templateContent);\n    }\n  }\n\n  /**\n   * @param {!Array<!{name: string, value: string}>} computedStyles\n   * @param {boolean} pierce\n   * @return {!Promise<!Array<number>>}\n   */\n  async getNodesByStyle(computedStyles, pierce = false) {\n    await this.requestDocument();\n    if (!this._document) {\n      throw new Error('DOMModel.getNodesByStyle expects to have a document.');\n    }\n    const response =\n        await this._agent.invoke_getNodesForSubtreeByStyle({nodeId: this._document.id, computedStyles, pierce});\n    if (response.getError()) {\n      throw response.getError();\n    }\n    return response.nodeIds;\n  }\n\n  /**\n   * @param {string} query\n   * @param {boolean} includeUserAgentShadowDOM\n   * @return {!Promise<number>}\n   */\n  async performSearch(query, includeUserAgentShadowDOM) {\n    const response = await this._agent.invoke_performSearch({query, includeUserAgentShadowDOM});\n    if (!response.getError()) {\n      this._searchId = response.searchId;\n    }\n    return response.getError() ? 0 : response.resultCount;\n  }\n\n  /**\n   * @param {number} index\n   * @return {!Promise<?DOMNode>}\n   */\n  async searchResult(index) {\n    if (!this._searchId) {\n      return null;\n    }\n    const {nodeIds} =\n        await this._agent.invoke_getSearchResults({searchId: this._searchId, fromIndex: index, toIndex: index + 1});\n    return nodeIds && nodeIds.length === 1 ? this.nodeForId(nodeIds[0]) : null;\n  }\n\n  _cancelSearch() {\n    if (!this._searchId) {\n      return;\n    }\n    this._agent.invoke_discardSearchResults({searchId: this._searchId});\n    delete this._searchId;\n  }\n\n  /**\n   * @param {!Protocol.DOM.NodeId} nodeId\n   * @return {!Promise<!Array<string>>}\n   */\n  classNamesPromise(nodeId) {\n    return this._agent.invoke_collectClassNamesFromSubtree({nodeId}).then(({classNames}) => classNames || []);\n  }\n\n  /**\n   * @param {!Protocol.DOM.NodeId} nodeId\n   * @param {string} selector\n   * @return {!Promise<?Protocol.DOM.NodeId>}\n   */\n  querySelector(nodeId, selector) {\n    return this._agent.invoke_querySelector({nodeId, selector}).then(({nodeId}) => nodeId);\n  }\n\n  /**\n   * @param {!Protocol.DOM.NodeId} nodeId\n   * @param {string} selector\n   * @return {!Promise<?Array<!Protocol.DOM.NodeId>>}\n   */\n  querySelectorAll(nodeId, selector) {\n    return this._agent.invoke_querySelectorAll({nodeId, selector}).then(({nodeIds}) => nodeIds);\n  }\n\n  /**\n   * @param {boolean=} minorChange\n   */\n  markUndoableState(minorChange) {\n    DOMModelUndoStack.instance()._markUndoableState(this, minorChange || false);\n  }\n\n  /**\n   * @param {number} x\n   * @param {number} y\n   * @param {boolean} includeUserAgentShadowDOM\n   * @return {!Promise<?DOMNode>}\n   */\n  async nodeForLocation(x, y, includeUserAgentShadowDOM) {\n    const response = await this._agent.invoke_getNodeForLocation({x, y, includeUserAgentShadowDOM});\n    if (response.getError() || !response.nodeId) {\n      return null;\n    }\n    return this.nodeForId(response.nodeId);\n  }\n\n  /**\n   * @param {!RemoteObject} object\n   * @return {!Promise<?DOMNode>}\n   */\n  pushObjectAsNodeToFrontend(object) {\n    return object.isNode() ? this.pushNodeToFrontend(/** @type {string} */ (object.objectId)) : Promise.resolve(null);\n  }\n\n  /**\n   * @override\n   * @return {!Promise<void>}\n   */\n  suspendModel() {\n    return this._agent.invoke_disable().then(() => this._setDocument(null));\n  }\n\n  /**\n   * @override\n   * @return {!Promise<void>}\n   */\n  async resumeModel() {\n    await this._agent.invoke_enable();\n  }\n\n  /**\n   * @override\n   */\n  dispose() {\n    DOMModelUndoStack.instance()._dispose(this);\n  }\n\n  /**\n   * @return {?DOMModel}\n   */\n  parentModel() {\n    const parentTarget = this.target().parentTarget();\n    return parentTarget ? parentTarget.model(DOMModel) : null;\n  }\n}\n\n/** @enum {symbol} */\nexport const Events = {\n  AttrModified: Symbol('AttrModified'),\n  AttrRemoved: Symbol('AttrRemoved'),\n  CharacterDataModified: Symbol('CharacterDataModified'),\n  DOMMutated: Symbol('DOMMutated'),\n  NodeInserted: Symbol('NodeInserted'),\n  NodeRemoved: Symbol('NodeRemoved'),\n  DocumentUpdated: Symbol('DocumentUpdated'),\n  ChildNodeCountUpdated: Symbol('ChildNodeCountUpdated'),\n  DistributedNodesChanged: Symbol('DistributedNodesChanged'),\n  MarkersChanged: Symbol('MarkersChanged')\n};\n\n/**\n * @implements {ProtocolProxyApi.DOMDispatcher}\n */\nclass DOMDispatcher {\n  /**\n   * @param {!DOMModel} domModel\n   */\n  constructor(domModel) {\n    this._domModel = domModel;\n  }\n\n  /**\n   * @override\n   */\n  documentUpdated() {\n    this._domModel._documentUpdated();\n  }\n\n  /**\n   * @override\n   * @param {!Protocol.DOM.AttributeModifiedEvent} event\n   */\n  attributeModified({nodeId, name, value}) {\n    this._domModel._attributeModified(nodeId, name, value);\n  }\n\n  /**\n   * @override\n   * @param {!Protocol.DOM.AttributeRemovedEvent} event\n   */\n  attributeRemoved({nodeId, name}) {\n    this._domModel._attributeRemoved(nodeId, name);\n  }\n\n  /**\n   * @override\n   * @param {!Protocol.DOM.InlineStyleInvalidatedEvent} event\n   */\n  inlineStyleInvalidated({nodeIds}) {\n    this._domModel._inlineStyleInvalidated(nodeIds);\n  }\n\n  /**\n   * @override\n   * @param {!Protocol.DOM.CharacterDataModifiedEvent} event\n   */\n  characterDataModified({nodeId, characterData}) {\n    this._domModel._characterDataModified(nodeId, characterData);\n  }\n\n  /**\n   * @override\n   * @param {!Protocol.DOM.SetChildNodesEvent} event\n   */\n  setChildNodes({parentId, nodes}) {\n    this._domModel._setChildNodes(parentId, nodes);\n  }\n\n  /**\n   * @override\n   * @param {!Protocol.DOM.ChildNodeCountUpdatedEvent} event\n   */\n  childNodeCountUpdated({nodeId, childNodeCount}) {\n    this._domModel._childNodeCountUpdated(nodeId, childNodeCount);\n  }\n\n  /**\n   * @override\n   * @param {!Protocol.DOM.ChildNodeInsertedEvent} event\n   */\n  childNodeInserted({parentNodeId, previousNodeId, node}) {\n    this._domModel._childNodeInserted(parentNodeId, previousNodeId, node);\n  }\n\n  /**\n   * @override\n   * @param {!Protocol.DOM.ChildNodeRemovedEvent} event\n   */\n  childNodeRemoved({parentNodeId, nodeId}) {\n    this._domModel._childNodeRemoved(parentNodeId, nodeId);\n  }\n\n  /**\n   * @override\n   * @param {!Protocol.DOM.ShadowRootPushedEvent} event\n   */\n  shadowRootPushed({hostId, root}) {\n    this._domModel._shadowRootPushed(hostId, root);\n  }\n\n  /**\n   * @override\n   * @param {!Protocol.DOM.ShadowRootPoppedEvent} event\n   */\n  shadowRootPopped({hostId, rootId}) {\n    this._domModel._shadowRootPopped(hostId, rootId);\n  }\n\n  /**\n   * @override\n   * @param {!Protocol.DOM.PseudoElementAddedEvent} event\n   */\n  pseudoElementAdded({parentId, pseudoElement}) {\n    this._domModel._pseudoElementAdded(parentId, pseudoElement);\n  }\n\n  /**\n   * @override\n   * @param {!Protocol.DOM.PseudoElementRemovedEvent} event\n   */\n  pseudoElementRemoved({parentId, pseudoElementId}) {\n    this._domModel._pseudoElementRemoved(parentId, pseudoElementId);\n  }\n\n  /**\n   * @override\n   * @param {!Protocol.DOM.DistributedNodesUpdatedEvent} event\n   */\n  distributedNodesUpdated({insertionPointId, distributedNodes}) {\n    this._domModel._distributedNodesUpdated(insertionPointId, distributedNodes);\n  }\n}\n\n/**\n * @type {?DOMModelUndoStack}\n */\nlet DOMModelUndoStackInstance;\n\nexport class DOMModelUndoStack {\n  constructor() {\n    /** @type {!Array<!DOMModel>} */\n    this._stack = [];\n    this._index = 0;\n    /** @type {?DOMModel} */\n    this._lastModelWithMinorChange = null;\n  }\n\n  /**\n   * @param {{forceNew: ?boolean}} opts\n   * @return {!DOMModelUndoStack}\n   */\n  static instance(opts = {forceNew: null}) {\n    const {forceNew} = opts;\n    if (!DOMModelUndoStackInstance || forceNew) {\n      DOMModelUndoStackInstance = new DOMModelUndoStack();\n    }\n\n    return DOMModelUndoStackInstance;\n  }\n\n  /**\n   * @param {!DOMModel} model\n   * @param {boolean} minorChange\n   */\n  async _markUndoableState(model, minorChange) {\n    // Both minor and major changes get into the stack, but minor updates are coalesced.\n    // Commit major undoable state in the old model upon model switch.\n    if (this._lastModelWithMinorChange && model !== this._lastModelWithMinorChange) {\n      this._lastModelWithMinorChange.markUndoableState();\n      this._lastModelWithMinorChange = null;\n    }\n\n    // Previous minor change is already in the stack.\n    if (minorChange && this._lastModelWithMinorChange === model) {\n      return;\n    }\n\n    this._stack = this._stack.slice(0, this._index);\n    this._stack.push(model);\n    this._index = this._stack.length;\n\n    // Delay marking as major undoable states in case of minor operations until the\n    // major or model switch.\n    if (minorChange) {\n      this._lastModelWithMinorChange = model;\n    } else {\n      await model._agent.invoke_markUndoableState();\n      this._lastModelWithMinorChange = null;\n    }\n  }\n\n  /**\n   * @return {!Promise<void>}\n   */\n  async undo() {\n    if (this._index === 0) {\n      return Promise.resolve();\n    }\n    --this._index;\n    this._lastModelWithMinorChange = null;\n    await this._stack[this._index]._agent.invoke_undo();\n  }\n\n  /**\n   * @return {!Promise<void>}\n   */\n  async redo() {\n    if (this._index >= this._stack.length) {\n      return Promise.resolve();\n    }\n    ++this._index;\n    this._lastModelWithMinorChange = null;\n    await this._stack[this._index - 1]._agent.invoke_redo();\n  }\n\n  /**\n   * @param {!DOMModel} model\n   */\n  _dispose(model) {\n    let shift = 0;\n    for (let i = 0; i < this._index; ++i) {\n      if (this._stack[i] === model) {\n        ++shift;\n      }\n    }\n    Platform.ArrayUtilities.removeElement(this._stack, model);\n    this._index -= shift;\n    if (this._lastModelWithMinorChange === model) {\n      this._lastModelWithMinorChange = null;\n    }\n  }\n}\n\nSDKModel.register(DOMModel, Capability.DOM, true);\n\n/** @typedef {{name: string, value: string, _node: DOMNode}} */\n// @ts-ignore typedef\nexport let Attribute;\n"]}
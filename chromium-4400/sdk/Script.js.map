{"version":3,"file":"Script.js","sourceRoot":"","sources":["../../../../../front_end/sdk/Script.js"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2008 Apple Inc. All Rights Reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../common/common.js';\nimport {ls} from '../platform/platform.js';\nimport * as ProtocolClient from '../protocol_client/protocol_client.js';  // eslint-disable-line no-unused-vars\nimport * as TextUtils from '../text_utils/text_utils.js';\n\nimport {DebuggerModel, Location} from './DebuggerModel.js';         // eslint-disable-line no-unused-vars\nimport {FrameAssociated} from './FrameAssociated.js';               // eslint-disable-line no-unused-vars\nimport {PageResourceLoadInitiator} from './PageResourceLoader.js';  // eslint-disable-line no-unused-vars\nimport {ResourceTreeModel} from './ResourceTreeModel.js';\nimport {ExecutionContext} from './RuntimeModel.js';  // eslint-disable-line no-unused-vars\nimport {Target} from './SDKModel.js';                // eslint-disable-line no-unused-vars\n\n/**\n * @implements {TextUtils.ContentProvider.ContentProvider}\n * TODO(chromium:1011811): make `implements {FrameAssociated}` annotation work here.\n */\nexport class Script {\n  /**\n   * @param {!DebuggerModel} debuggerModel\n   * @param {string} scriptId\n   * @param {string} sourceURL\n   * @param {number} startLine\n   * @param {number} startColumn\n   * @param {number} endLine\n   * @param {number} endColumn\n   * @param {!Protocol.Runtime.ExecutionContextId} executionContextId\n   * @param {string} hash\n   * @param {boolean} isContentScript\n   * @param {boolean} isLiveEdit\n   * @param {string|undefined} sourceMapURL\n   * @param {boolean} hasSourceURL\n   * @param {number} length\n   * @param {?Protocol.Runtime.StackTrace} originStackTrace\n   * @param {?number} codeOffset\n   * @param {?string} scriptLanguage\n   * @param {?Protocol.Debugger.DebugSymbols} debugSymbols\n   * @param {?string} embedderName\n   */\n  constructor(\n      debuggerModel, scriptId, sourceURL, startLine, startColumn, endLine, endColumn, executionContextId, hash,\n      isContentScript, isLiveEdit, sourceMapURL, hasSourceURL, length, originStackTrace, codeOffset, scriptLanguage,\n      debugSymbols, embedderName) {\n    this.debuggerModel = debuggerModel;\n    this.scriptId = scriptId;\n    this.sourceURL = sourceURL;\n    this.lineOffset = startLine;\n    this.columnOffset = startColumn;\n    this.endLine = endLine;\n    this.endColumn = endColumn;\n\n    this.executionContextId = executionContextId;\n    this.hash = hash;\n    this._isContentScript = isContentScript;\n    this._isLiveEdit = isLiveEdit;\n    this.sourceMapURL = sourceMapURL;\n    this.debugSymbols = debugSymbols;\n    this.hasSourceURL = hasSourceURL;\n    this.contentLength = length;\n    /** @type {?TextUtils.ContentProvider.ContentProvider} */\n    this._originalContentProvider = null;\n    this.originStackTrace = originStackTrace;\n    this._codeOffset = codeOffset;\n    this._language = scriptLanguage;\n    /** @type {?Promise<!TextUtils.ContentProvider.DeferredContent>} */\n    this._contentPromise = null;\n    this._embedderName = embedderName;\n  }\n\n  /**\n   * @returns {?string}\n   */\n  embedderName() {\n    return this._embedderName;\n  }\n\n  /**\n   * @returns {!Target}\n   */\n  target() {\n    return this.debuggerModel.target();\n  }\n\n  /**\n   * @param {string} source\n   * @return {string}\n   */\n  static _trimSourceURLComment(source) {\n    let sourceURLIndex = source.lastIndexOf('//# sourceURL=');\n    if (sourceURLIndex === -1) {\n      sourceURLIndex = source.lastIndexOf('//@ sourceURL=');\n      if (sourceURLIndex === -1) {\n        return source;\n      }\n    }\n    const sourceURLLineIndex = source.lastIndexOf('\\n', sourceURLIndex);\n    if (sourceURLLineIndex === -1) {\n      return source;\n    }\n    const sourceURLLine = source.substr(sourceURLLineIndex + 1);\n    if (!sourceURLLine.match(sourceURLRegex)) {\n      return source;\n    }\n    return source.substr(0, sourceURLLineIndex);\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isContentScript() {\n    return this._isContentScript;\n  }\n\n  /**\n   * @return {?number}\n   */\n  codeOffset() {\n    return this._codeOffset;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isJavaScript() {\n    return this._language === Protocol.Debugger.ScriptLanguage.JavaScript;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isWasm() {\n    return this._language === Protocol.Debugger.ScriptLanguage.WebAssembly;\n  }\n\n  /**\n   * @return {string|null}\n   */\n  scriptLanguage() {\n    return this._language;\n  }\n\n  /**\n   * @return {?ExecutionContext}\n   */\n  executionContext() {\n    return this.debuggerModel.runtimeModel().executionContext(this.executionContextId);\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isLiveEdit() {\n    return this._isLiveEdit;\n  }\n\n  /**\n   * @override\n   * @return {string}\n   */\n  contentURL() {\n    return this.sourceURL;\n  }\n\n  /**\n   * @override\n   * @return {!Common.ResourceType.ResourceType}\n   */\n  contentType() {\n    return Common.ResourceType.resourceTypes.Script;\n  }\n\n  /**\n   * @override\n   * @return {!Promise<boolean>}\n   */\n  contentEncoded() {\n    return Promise.resolve(false);\n  }\n\n  /**\n   * @override\n   * @return {!Promise<!TextUtils.ContentProvider.DeferredContent>}\n   */\n  requestContent() {\n    if (!this._contentPromise) {\n      this._contentPromise = this.originalContentProvider().requestContent();\n    }\n    return this._contentPromise;\n  }\n\n  /**\n   * @return {!Promise<!ArrayBuffer>}\n   */\n  async getWasmBytecode() {\n    const base64 = await this.debuggerModel.target().debuggerAgent().invoke_getWasmBytecode({scriptId: this.scriptId});\n    const response = await fetch(`data:application/wasm;base64,${base64.bytecode}`);\n    return response.arrayBuffer();\n  }\n\n  /**\n   * @return {!TextUtils.ContentProvider.ContentProvider}\n   */\n  originalContentProvider() {\n    if (!this._originalContentProvider) {\n      /** @type {?Promise<!TextUtils.ContentProvider.DeferredContent>} } */\n      let lazyContentPromise;\n      this._originalContentProvider =\n          new TextUtils.StaticContentProvider.StaticContentProvider(this.contentURL(), this.contentType(), () => {\n            if (!lazyContentPromise) {\n              lazyContentPromise = (async () => {\n                if (!this.scriptId) {\n                  return {content: null, error: ls`Script removed or deleted.`, isEncoded: false};\n                }\n                try {\n                  const result = await this.debuggerModel.target().debuggerAgent().invoke_getScriptSource(\n                      {scriptId: this.scriptId});\n                  if (result.getError()) {\n                    throw new Error(result.getError());\n                  }\n                  const {scriptSource, bytecode} = result;\n                  if (bytecode) {\n                    return {content: bytecode, isEncoded: true};\n                  }\n                  let content = scriptSource || '';\n                  if (this.hasSourceURL) {\n                    content = Script._trimSourceURLComment(content);\n                  }\n                  return {content, isEncoded: false};\n\n                } catch (err) {\n                  // TODO(bmeurer): Propagate errors as exceptions / rejections.\n                  return {content: null, error: ls`Unable to fetch script source.`, isEncoded: false};\n                }\n              })();\n            }\n            return lazyContentPromise;\n          });\n    }\n    return this._originalContentProvider;\n  }\n\n  /**\n   * @override\n   * @param {string} query\n   * @param {boolean} caseSensitive\n   * @param {boolean} isRegex\n   * @return {!Promise<!Array<!TextUtils.ContentProvider.SearchMatch>>}\n   */\n  async searchInContent(query, caseSensitive, isRegex) {\n    if (!this.scriptId) {\n      return [];\n    }\n\n    const matches = await this.debuggerModel.target().debuggerAgent().invoke_searchInContent(\n        {scriptId: this.scriptId, query, caseSensitive, isRegex});\n    return (matches.result || [])\n        .map(match => new TextUtils.ContentProvider.SearchMatch(match.lineNumber, match.lineContent));\n  }\n\n  /**\n   * @param {string} source\n   * @return {string}\n   */\n  _appendSourceURLCommentIfNeeded(source) {\n    if (!this.hasSourceURL) {\n      return source;\n    }\n    return source + '\\n //# sourceURL=' + this.sourceURL;\n  }\n\n  /**\n   * @param {string} newSource\n   * @param {function(?ProtocolClient.InspectorBackend.ProtocolError, !Protocol.Runtime.ExceptionDetails=, !Array.<!Protocol.Debugger.CallFrame>=, !Protocol.Runtime.StackTrace=, !Protocol.Runtime.StackTraceId=, boolean=):void} callback\n   */\n  async editSource(newSource, callback) {\n    newSource = Script._trimSourceURLComment(newSource);\n    // We append correct sourceURL to script for consistency only. It's not actually needed for things to work correctly.\n    newSource = this._appendSourceURLCommentIfNeeded(newSource);\n\n    if (!this.scriptId) {\n      callback('Script failed to parse');\n      return;\n    }\n\n    const {content: oldSource} = await this.requestContent();\n    if (oldSource === newSource) {\n      callback(null);\n      return;\n    }\n    const response = await this.debuggerModel.target().debuggerAgent().invoke_setScriptSource(\n        {scriptId: this.scriptId, scriptSource: newSource});\n\n    if (!response.getError() && !response.exceptionDetails) {\n      this._contentPromise = Promise.resolve({content: newSource, isEncoded: false});\n    }\n\n    const needsStepIn = Boolean(response.stackChanged);\n    callback(\n        response.getError() || null, response.exceptionDetails, response.callFrames, response.asyncStackTrace,\n        response.asyncStackTraceId, needsStepIn);\n  }\n\n  /**\n   * @param {number} lineNumber\n   * @param {number} columnNumber\n   * @return {?Location}\n   */\n  rawLocation(lineNumber, columnNumber) {\n    if (this.containsLocation(lineNumber, columnNumber)) {\n      return new Location(this.debuggerModel, this.scriptId, lineNumber, columnNumber);\n    }\n    return null;\n  }\n\n  /**\n   *\n   * @param {!Location} location\n   * @return {!Array.<number>}\n   */\n  toRelativeLocation(location) {\n    console.assert(\n        location.scriptId === this.scriptId, '`toRelativeLocation` must be used with location of the same script');\n    const relativeLineNumber = location.lineNumber - this.lineOffset;\n    const relativeColumnNumber = (location.columnNumber || 0) - (relativeLineNumber === 0 ? this.columnOffset : 0);\n    return [relativeLineNumber, relativeColumnNumber];\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isInlineScript() {\n    const startsAtZero = !this.lineOffset && !this.columnOffset;\n    return !this.isWasm() && Boolean(this.sourceURL) && !startsAtZero;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isAnonymousScript() {\n    return !this.sourceURL;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isInlineScriptWithSourceURL() {\n    return Boolean(this.hasSourceURL) && this.isInlineScript();\n  }\n\n  /**\n   * @param {!Array<!Protocol.Debugger.ScriptPosition>} positions\n   * @return {!Promise<boolean>}\n   */\n  async setBlackboxedRanges(positions) {\n    const response = await this.debuggerModel.target().debuggerAgent().invoke_setBlackboxedRanges(\n        {scriptId: this.scriptId, positions});\n    return !response.getError();\n  }\n\n  /**\n   * @param {number} lineNumber\n   * @param {number} columnNumber\n   * @return {boolean}\n   */\n  containsLocation(lineNumber, columnNumber) {\n    const afterStart =\n        (lineNumber === this.lineOffset && columnNumber >= this.columnOffset) || lineNumber > this.lineOffset;\n    const beforeEnd = lineNumber < this.endLine || (lineNumber === this.endLine && columnNumber <= this.endColumn);\n    return afterStart && beforeEnd;\n  }\n\n  /**\n   * @return {string}\n   */\n  get frameId() {\n    if (typeof this[frameIdSymbol] !== 'string') {\n      this[frameIdSymbol] = frameIdForScript(this);\n    }\n    return this[frameIdSymbol] || '';\n  }\n\n  /**\n   * @returns {!PageResourceLoadInitiator}\n   */\n  createPageResourceLoadInitiator() {\n    return {target: this.target(), frameId: this.frameId, initiatorUrl: this.embedderName()};\n  }\n}\n\nconst frameIdSymbol = Symbol('frameid');\n\n/**\n * @param {!Script} script\n * @return {string}\n */\nfunction frameIdForScript(script) {\n  const executionContext = script.executionContext();\n  if (executionContext) {\n    return executionContext.frameId || '';\n  }\n  // This is to overcome compilation cache which doesn't get reset.\n  const resourceTreeModel = script.debuggerModel.target().model(ResourceTreeModel);\n  if (!resourceTreeModel || !resourceTreeModel.mainFrame) {\n    return '';\n  }\n  return resourceTreeModel.mainFrame.id;\n}\n\nexport const sourceURLRegex = /^[\\040\\t]*\\/\\/[@#] sourceURL=\\s*(\\S*?)\\s*$/;\n"]}
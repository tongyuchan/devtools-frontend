{"version":3,"file":"SecurityOriginManager.js","sourceRoot":"","sources":["../../../../../front_end/sdk/SecurityOriginManager.js"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,EAAC,UAAU,EAAE,QAAQ,EAAS,MAAM,eAAe,CAAC,CAAE,qCAAqC;AAGlG,MAAM,OAAO,qBAAsB,SAAQ,QAAQ;IACjD;;OAEG;IACH,YAAY,MAAM;QAChB,KAAK,CAAC,MAAM,CAAC,CAAC;QAEd,qEAAqE;QACrE,yEAAyE;QACzE,yEAAyE;QACzE,kEAAkE;QAClE,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;QAC9B,sBAAsB;QACtB,IAAI,CAAC,8BAA8B,GAAG,EAAE,CAAC;QAEzC,2BAA2B;QAC3B,IAAI,CAAC,gBAAgB,GAAG,IAAI,GAAG,EAAE,CAAC;IACpC,CAAC;IAED;;OAEG;IACH,qBAAqB,CAAC,eAAe;QACnC,MAAM,UAAU,GAAG,IAAI,CAAC,gBAAgB,CAAC;QACzC,IAAI,CAAC,gBAAgB,GAAG,eAAe,CAAC;QAExC,KAAK,MAAM,MAAM,IAAI,UAAU,EAAE;YAC/B,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;gBACtC,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,qBAAqB,EAAE,MAAM,CAAC,CAAC;aACrE;SACF;QAED,KAAK,MAAM,MAAM,IAAI,IAAI,CAAC,gBAAgB,EAAE;YAC1C,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;gBAC3B,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,mBAAmB,EAAE,MAAM,CAAC,CAAC;aACnE;SACF;IACH,CAAC;IAED;;OAEG;IACH,eAAe;QACb,OAAO,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC,CAAC;IACpC,CAAC;IAED;;OAEG;IACH,kBAAkB;QAChB,OAAO,IAAI,CAAC,mBAAmB,CAAC;IAClC,CAAC;IAED;;OAEG;IACH,6BAA6B;QAC3B,OAAO,IAAI,CAAC,8BAA8B,CAAC;IAC7C,CAAC;IAED;;;OAGG;IACH,qBAAqB,CAAC,cAAc,EAAE,yBAAyB;QAC7D,IAAI,CAAC,mBAAmB,GAAG,cAAc,CAAC;QAC1C,IAAI,CAAC,8BAA8B,GAAG,yBAAyB,IAAI,IAAI,CAAC;QACxE,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,yBAAyB,EAAE;YAC9D,kBAAkB,EAAE,IAAI,CAAC,mBAAmB;YAC5C,6BAA6B,EAAE,IAAI,CAAC,8BAA8B;SACnE,CAAC,CAAC;IACL,CAAC;CACF;AAED,qBAAqB;AACrB,MAAM,CAAC,MAAM,MAAM,GAAG;IACpB,mBAAmB,EAAE,MAAM,CAAC,qBAAqB,CAAC;IAClD,qBAAqB,EAAE,MAAM,CAAC,uBAAuB,CAAC;IACtD,yBAAyB,EAAE,MAAM,CAAC,2BAA2B,CAAC;CAC/D,CAAC;AAEF,kFAAkF;AAClF,QAAQ,CAAC,QAAQ,CAAC,qBAAqB,EAAE,UAAU,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC","sourcesContent":["// Copyright 2016 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {Capability, SDKModel, Target} from './SDKModel.js';  // eslint-disable-line no-unused-vars\n\n\nexport class SecurityOriginManager extends SDKModel {\n  /**\n   * @param {!Target} target\n   */\n  constructor(target) {\n    super(target);\n\n    // if a URL is unreachable, the browser will jump to an error page at\n    // 'chrome-error://chromewebdata/', and |this._mainSecurityOrigin| stores\n    // its origin. In this situation, the original unreachable URL's security\n    // origin will be stored in |this._unreachableMainSecurityOrigin|.\n    this._mainSecurityOrigin = '';\n    /** @type {?string} */\n    this._unreachableMainSecurityOrigin = '';\n\n    /** @type {!Set<string>} */\n    this._securityOrigins = new Set();\n  }\n\n  /**\n   * @param {!Set<string>} securityOrigins\n   */\n  updateSecurityOrigins(securityOrigins) {\n    const oldOrigins = this._securityOrigins;\n    this._securityOrigins = securityOrigins;\n\n    for (const origin of oldOrigins) {\n      if (!this._securityOrigins.has(origin)) {\n        this.dispatchEventToListeners(Events.SecurityOriginRemoved, origin);\n      }\n    }\n\n    for (const origin of this._securityOrigins) {\n      if (!oldOrigins.has(origin)) {\n        this.dispatchEventToListeners(Events.SecurityOriginAdded, origin);\n      }\n    }\n  }\n\n  /**\n   * @return {!Array<string>}\n   */\n  securityOrigins() {\n    return [...this._securityOrigins];\n  }\n\n  /**\n   * @return {string}\n   */\n  mainSecurityOrigin() {\n    return this._mainSecurityOrigin;\n  }\n\n  /**\n   * @return {?string}\n   */\n  unreachableMainSecurityOrigin() {\n    return this._unreachableMainSecurityOrigin;\n  }\n\n  /**\n   * @param {string} securityOrigin\n   * @param {string} unreachableSecurityOrigin\n   */\n  setMainSecurityOrigin(securityOrigin, unreachableSecurityOrigin) {\n    this._mainSecurityOrigin = securityOrigin;\n    this._unreachableMainSecurityOrigin = unreachableSecurityOrigin || null;\n    this.dispatchEventToListeners(Events.MainSecurityOriginChanged, {\n      mainSecurityOrigin: this._mainSecurityOrigin,\n      unreachableMainSecurityOrigin: this._unreachableMainSecurityOrigin\n    });\n  }\n}\n\n/** @enum {symbol} */\nexport const Events = {\n  SecurityOriginAdded: Symbol('SecurityOriginAdded'),\n  SecurityOriginRemoved: Symbol('SecurityOriginRemoved'),\n  MainSecurityOriginChanged: Symbol('MainSecurityOriginChanged')\n};\n\n// TODO(jarhar): this is the only usage of Capability.None. Do something about it!\nSDKModel.register(SecurityOriginManager, Capability.None, false);\n"]}
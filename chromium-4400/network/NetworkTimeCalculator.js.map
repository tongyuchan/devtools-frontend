{"version":3,"file":"NetworkTimeCalculator.js","sourceRoot":"","sources":["../../../../../front_end/network/NetworkTimeCalculator.js"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2008, 2009 Anthony Ricaud <rik@webkit.org>\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../common/common.js';\nimport * as PerfUI from '../perf_ui/perf_ui.js';  // eslint-disable-line no-unused-vars\nimport * as SDK from '../sdk/sdk.js';             // eslint-disable-line no-unused-vars\n\nexport class NetworkTimeBoundary {\n  /**\n   * @param {number} minimum\n   * @param {number} maximum\n   */\n  constructor(minimum, maximum) {\n    this.minimum = minimum;\n    this.maximum = maximum;\n  }\n\n  /**\n   * @param {!NetworkTimeBoundary} other\n   * @return {boolean}\n   */\n  equals(other) {\n    return (this.minimum === other.minimum) && (this.maximum === other.maximum);\n  }\n}\n\n/**\n * @implements {PerfUI.TimelineGrid.Calculator}\n */\nexport class NetworkTimeCalculator extends Common.ObjectWrapper.ObjectWrapper {\n  /** @param {boolean} startAtZero */\n  constructor(startAtZero) {\n    super();\n    this.startAtZero = startAtZero;\n    this._minimumBoundary = -1;\n    this._maximumBoundary = -1;\n    this._boundryChangedEventThrottler = new Common.Throttler.Throttler(0);\n    /** @type {?NetworkTimeBoundary} */\n    this._window = null;\n  }\n\n  /**\n   * @param {?NetworkTimeBoundary} window\n   */\n  setWindow(window) {\n    this._window = window;\n    this._boundaryChanged();\n  }\n\n  setInitialUserFriendlyBoundaries() {\n    this._minimumBoundary = 0;\n    this._maximumBoundary = 1;\n  }\n\n  /**\n   * @override\n   * @param {number} time\n   * @return {number}\n   */\n  computePosition(time) {\n    return (time - this.minimumBoundary()) / this.boundarySpan() * (this._workingArea || 0);\n  }\n\n  /**\n   * @override\n   * @param {number} value\n   * @param {number=} precision\n   * @return {string}\n   */\n  formatValue(value, precision) {\n    return Number.secondsToString(value, Boolean(precision));\n  }\n\n  /**\n   * @override\n   * @return {number}\n   */\n  minimumBoundary() {\n    return this._window ? this._window.minimum : this._minimumBoundary;\n  }\n\n  /**\n   * @override\n   * @return {number}\n   */\n  zeroTime() {\n    return this._minimumBoundary;\n  }\n\n  /**\n   * @override\n   * @return {number}\n   */\n  maximumBoundary() {\n    return this._window ? this._window.maximum : this._maximumBoundary;\n  }\n\n  /**\n   * @return {!NetworkTimeBoundary}\n   */\n  boundary() {\n    return new NetworkTimeBoundary(this.minimumBoundary(), this.maximumBoundary());\n  }\n\n  /**\n   * @override\n   * @return {number}\n   */\n  boundarySpan() {\n    return this.maximumBoundary() - this.minimumBoundary();\n  }\n\n  reset() {\n    this._minimumBoundary = -1;\n    this._maximumBoundary = -1;\n    this._boundaryChanged();\n  }\n\n  /**\n   * @return {number}\n   */\n  _value() {\n    return 0;\n  }\n\n  /**\n   * @param {number} clientWidth\n   */\n  setDisplayWidth(clientWidth) {\n    this._workingArea = clientWidth;\n  }\n\n  /**\n   * @param {!SDK.NetworkRequest.NetworkRequest} request\n   * @return {!{start: number, middle: number, end: number}}\n   */\n  computeBarGraphPercentages(request) {\n    let start;\n    let middle;\n    let end;\n    if (request.startTime !== -1) {\n      start = ((request.startTime - this.minimumBoundary()) / this.boundarySpan()) * 100;\n    } else {\n      start = 0;\n    }\n\n    if (request.responseReceivedTime !== -1) {\n      middle = ((request.responseReceivedTime - this.minimumBoundary()) / this.boundarySpan()) * 100;\n    } else {\n      middle = (this.startAtZero ? start : 100);\n    }\n\n    if (request.endTime !== -1) {\n      end = ((request.endTime - this.minimumBoundary()) / this.boundarySpan()) * 100;\n    } else {\n      end = (this.startAtZero ? middle : 100);\n    }\n\n    if (this.startAtZero) {\n      end -= start;\n      middle -= start;\n      start = 0;\n    }\n\n    return {start: start, middle: middle, end: end};\n  }\n\n  /**\n   * @param {number} eventTime\n   * @return {number}\n   */\n  computePercentageFromEventTime(eventTime) {\n    // This function computes a percentage in terms of the total loading time\n    // of a specific event. If startAtZero is set, then this is useless, and we\n    // want to return 0.\n    if (eventTime !== -1 && !this.startAtZero) {\n      return ((eventTime - this.minimumBoundary()) / this.boundarySpan()) * 100;\n    }\n\n    return 0;\n  }\n\n  /**\n   * @param {number} percentage\n   * @return {number}\n   */\n  percentageToTime(percentage) {\n    return percentage * this.boundarySpan() / 100 + this.minimumBoundary();\n  }\n\n  _boundaryChanged() {\n    this._boundryChangedEventThrottler.schedule(async () => {\n      this.dispatchEventToListeners(Events.BoundariesChanged);\n    });\n  }\n\n  /**\n   * @param {number} eventTime\n   */\n  updateBoundariesForEventTime(eventTime) {\n    if (eventTime === -1 || this.startAtZero) {\n      return;\n    }\n\n    if (this._maximumBoundary === undefined || eventTime > this._maximumBoundary) {\n      this._maximumBoundary = eventTime;\n      this._boundaryChanged();\n    }\n  }\n\n  /**\n   * @param {!SDK.NetworkRequest.NetworkRequest} request\n   * @return {!{left: string, right: string, tooltip: (string|undefined)}}\n   */\n  computeBarGraphLabels(request) {\n    let rightLabel = '';\n    if (request.responseReceivedTime !== -1 && request.endTime !== -1) {\n      rightLabel = Number.secondsToString(request.endTime - request.responseReceivedTime);\n    }\n\n    const hasLatency = request.latency > 0;\n    const leftLabel = hasLatency ? Number.secondsToString(request.latency) : rightLabel;\n\n    if (request.timing) {\n      return {left: leftLabel, right: rightLabel, tooltip: undefined};\n    }\n\n    let tooltip;\n    if (hasLatency && rightLabel) {\n      const total = Number.secondsToString(request.duration);\n      tooltip = _latencyDownloadTotalFormat.format(leftLabel, rightLabel, total);\n    } else if (hasLatency) {\n      tooltip = _latencyFormat.format(leftLabel);\n    } else if (rightLabel) {\n      tooltip = _downloadFormat.format(rightLabel);\n    }\n\n    if (request.fetchedViaServiceWorker) {\n      tooltip = _fromServiceWorkerFormat.format(tooltip);\n    } else if (request.cached()) {\n      tooltip = _fromCacheFormat.format(tooltip);\n    }\n    return {left: leftLabel, right: rightLabel, tooltip: tooltip};\n  }\n\n  /**\n   * @param {!SDK.NetworkRequest.NetworkRequest} request\n   */\n  updateBoundaries(request) {\n    const lowerBound = this._lowerBound(request);\n    const upperBound = this._upperBound(request);\n    let changed = false;\n    if (lowerBound !== -1 || this.startAtZero) {\n      changed = this._extendBoundariesToIncludeTimestamp(this.startAtZero ? 0 : lowerBound);\n    }\n    if (upperBound !== -1) {\n      changed = this._extendBoundariesToIncludeTimestamp(upperBound) || changed;\n    }\n    if (changed) {\n      this._boundaryChanged();\n    }\n  }\n\n  /**\n   * @param {number} timestamp\n   * @return {boolean}\n   */\n  _extendBoundariesToIncludeTimestamp(timestamp) {\n    const previousMinimumBoundary = this._minimumBoundary;\n    const previousMaximumBoundary = this._maximumBoundary;\n    const minOffset = _minimumSpread;\n    if (this._minimumBoundary === -1 || this._maximumBoundary === -1) {\n      this._minimumBoundary = timestamp;\n      this._maximumBoundary = timestamp + minOffset;\n    } else {\n      this._minimumBoundary = Math.min(timestamp, this._minimumBoundary);\n      this._maximumBoundary = Math.max(timestamp, this._minimumBoundary + minOffset, this._maximumBoundary);\n    }\n    return previousMinimumBoundary !== this._minimumBoundary || previousMaximumBoundary !== this._maximumBoundary;\n  }\n\n  /**\n   * @param {!SDK.NetworkRequest.NetworkRequest} request\n   * @return {number}\n   */\n  _lowerBound(request) {\n    return 0;\n  }\n\n  /**\n   * @param {!SDK.NetworkRequest.NetworkRequest} request\n   * @return {number}\n   */\n  _upperBound(request) {\n    return 0;\n  }\n}\n\nexport const _minimumSpread = 0.1;\n\n/** @enum {symbol} */\nexport const Events = {\n  BoundariesChanged: Symbol('BoundariesChanged')\n};\n\n/** @type {!Common.UIString.UIStringFormat} */\nexport const _latencyDownloadTotalFormat = new Common.UIString.UIStringFormat('%s latency, %s download (%s total)');\n\n/** @type {!Common.UIString.UIStringFormat} */\nexport const _latencyFormat = new Common.UIString.UIStringFormat('%s latency');\n\n/** @type {!Common.UIString.UIStringFormat} */\nexport const _downloadFormat = new Common.UIString.UIStringFormat('%s download');\n\n/** @type {!Common.UIString.UIStringFormat} */\nexport const _fromServiceWorkerFormat = new Common.UIString.UIStringFormat('%s (from ServiceWorker)');\n\n/** @type {!Common.UIString.UIStringFormat} */\nexport const _fromCacheFormat = new Common.UIString.UIStringFormat('%s (from cache)');\n\nexport class NetworkTransferTimeCalculator extends NetworkTimeCalculator {\n  constructor() {\n    super(false);\n  }\n\n  /**\n   * @override\n   * @param {number} value\n   * @param {number=} precision\n   * @return {string}\n   */\n  formatValue(value, precision) {\n    return Number.secondsToString(value - this.zeroTime(), Boolean(precision));\n  }\n\n  /**\n   * @override\n   * @param {!SDK.NetworkRequest.NetworkRequest} request\n   * @return {number}\n   */\n  _lowerBound(request) {\n    return request.issueTime();\n  }\n\n  /**\n   * @override\n   * @param {!SDK.NetworkRequest.NetworkRequest} request\n   * @return {number}\n   */\n  _upperBound(request) {\n    return request.endTime;\n  }\n}\n\nexport class NetworkTransferDurationCalculator extends NetworkTimeCalculator {\n  constructor() {\n    super(true);\n  }\n\n  /**\n   * @override\n   * @param {number} value\n   * @param {number=} precision\n   * @return {string}\n   */\n  formatValue(value, precision) {\n    return Number.secondsToString(value, Boolean(precision));\n  }\n\n  /**\n   * @override\n   * @param {!SDK.NetworkRequest.NetworkRequest} request\n   * @return {number}\n   */\n  _upperBound(request) {\n    return request.duration;\n  }\n}\n"]}
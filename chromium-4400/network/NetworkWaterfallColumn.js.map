{"version":3,"file":"NetworkWaterfallColumn.js","sourceRoot":"","sources":["../../../../../front_end/network/NetworkWaterfallColumn.js"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,MAAM,MAAM,qBAAqB,CAAC;AAC9C,OAAO,KAAK,MAAM,MAAM,uBAAuB,CAAC;AAEhD,OAAO,KAAK,YAAY,MAAM,mCAAmC,CAAC;AAClE,OAAO,KAAK,EAAE,MAAM,aAAa,CAAC;AAIlC,OAAO,EAAmB,qBAAqB,EAAE,iBAAiB,EAAC,MAAM,wBAAwB,CAAC,CAAE,qCAAqC;AAEzI,MAAM,OAAO,sBAAuB,SAAQ,EAAE,CAAC,MAAM,CAAC,IAAI;IACxD;;OAEG;IACH,YAAY,UAAU;QACpB,4GAA4G;QAC5G,KAAK,CAAC,KAAK,CAAC,CAAC;QACb,IAAI,CAAC,mBAAmB,CAAC,oCAAoC,EAAE,EAAC,oBAAoB,EAAE,KAAK,EAAC,CAAC,CAAC;QAE9F,iCAAiC;QACjC,IAAI,CAAC,OAAO,GAAG,iCAAiC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC;QAC7F,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;QAC3B,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC5C,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,OAAO,CAAC,qBAAqB,EAAE,CAAC;QAE5D,aAAa;QACb,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;QACtB,aAAa;QACb,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QAEpB,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QAEpB,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;QAE9B,yDAAyD;QACzD,kGAAkG;QAClG,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QAEpB,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;QACtB,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;QACrD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;QAEnD,IAAI,CAAC,cAAc,GAAG,IAAI,EAAE,CAAC,aAAa,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC3G,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QACxC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QAEzC,mCAAmC;QACnC,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QAEjB,2BAA2B;QAC3B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QAEzB,2CAA2C;QAC3C,IAAI,CAAC,cAAc,GAAG,IAAI,GAAG,EAAE,CAAC;QAEhC,iCAAiC;QACjC,IAAI,CAAC,gBAAgB,CAAC;QAEtB,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;QAC/E,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,YAAY,EAAE,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9F,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;QAEvE,IAAI,CAAC,sBAAsB,GAAG,sBAAsB,CAAC,2BAA2B,EAAE,CAAC;QAEnF,MAAM,kBAAkB,GAAG,sBAAsB,CAAC,uBAAuB,EAAE,CAAC;QAC5E,oEAAoE;QACpE,IAAI,CAAC,4BAA4B,GAAG,kBAAkB,CAAC,CAAC,CAAC,CAAC;QAC1D,oEAAoE;QACpE,IAAI,CAAC,gCAAgC,GAAG,kBAAkB,CAAC,CAAC,CAAC,CAAC;QAE9D,MAAM,aAAa,GACf,YAAY,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,cAAc,CAAC,SAAS,EAAE,YAAY,CAAC,YAAY,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;QACpH,2BAA2B;QAC3B,IAAI,CAAC,YAAY,GAAG,EAAC,WAAW,EAAE,aAAa,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,SAAS,EAAC,CAAC;QACrF,2BAA2B;QAC3B,IAAI,CAAC,kBAAkB,GAAG,EAAC,SAAS,EAAE,aAAa,EAAE,SAAS,EAAE,CAAC,EAAE,WAAW,EAAE,aAAa,EAAC,CAAC;QAE/F,0CAA0C;QAC1C,IAAI,CAAC,aAAa,GAAG,IAAI,GAAG,EAAE,CAAC;QAC/B,kCAAkC;QAClC,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;IACxB,CAAC;IAED;;OAEG;IACH,MAAM,CAAC,2BAA2B;QAChC,MAAM,KAAK,GAAG,qBAAqB,CAAC;QACpC,MAAM,QAAQ,GAAG,IAAI,GAAG,EAAE,CAAC;QAC3B,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,UAAU,EAAE,EAAC,SAAS,EAAE,SAAS,EAAC,CAAC,CAAC;QACvD,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE,EAAC,SAAS,EAAE,SAAS,EAAC,CAAC,CAAC;QAChD,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE,EAAC,SAAS,EAAE,SAAS,EAAC,CAAC,CAAC;QAChD,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,EAAE,EAAC,SAAS,EAAE,SAAS,EAAC,CAAC,CAAC;QAClD,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAC,SAAS,EAAE,SAAS,EAAC,CAAC,CAAC;QACrD,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,EAAC,SAAS,EAAE,SAAS,EAAC,CAAC,CAAC;QACjD,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAC,SAAS,EAAE,OAAO,EAAE,SAAS,EAAE,CAAC,EAAE,WAAW,EAAE,WAAW,EAAC,CAAC,CAAC;QAC3F,2DAA2D;QAC3D,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,SAAS,EAAE,EAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,CAAC,EAAE,WAAW,EAAE,SAAS,EAAC,CAAC,CAAC;QAC5F,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,EAAE,EAAC,SAAS,EAAE,SAAS,EAAC,CAAC,CAAC;QACpD,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,aAAa,EAAE,EAAC,SAAS,EAAE,SAAS,EAAC,CAAC,CAAC;QAC1D,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,aAAa,EAAE,EAAC,SAAS,EAAE,QAAQ,EAAC,CAAC,CAAC;QACzD,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,wBAAwB,EAAE,EAAC,SAAS,EAAE,QAAQ,EAAC,CAAC,CAAC;QACpE,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,wBAAwB,EAAE,EAAC,SAAS,EAAE,SAAS,EAAC,CAAC,CAAC;QACrE,OAAO,QAAQ,CAAC;IAClB,CAAC;IAED;;OAEG;IACH,MAAM,CAAC,uBAAuB;QAC5B,MAAM,sBAAsB,GAAG,IAAI,GAAG,CAAC;YACrC,CAAC,UAAU,EAAE,qBAAqB,CAAC;YACnC,CAAC,MAAM,EAAE,mBAAmB,CAAC;YAC7B,CAAC,OAAO,EAAE,mBAAmB,CAAC;YAC9B,CAAC,OAAO,EAAE,mBAAmB,CAAC;YAC9B,CAAC,QAAQ,EAAE,oBAAoB,CAAC;YAChC,CAAC,YAAY,EAAE,oBAAoB,CAAC;YACpC,CAAC,WAAW,EAAE,mBAAmB,CAAC;YAClC,CAAC,WAAW,EAAE,iBAAiB,CAAC;YAChC,CAAC,KAAK,EAAE,oBAAoB,CAAC;YAC7B,CAAC,OAAO,EAAE,oBAAoB,CAAC;YAC/B,CAAC,OAAO,EAAE,iBAAiB,CAAC;SAC7B,CAAC,CAAC;QACH,MAAM,eAAe,GAAG,IAAI,GAAG,EAAE,CAAC;QAClC,MAAM,mBAAmB,GAAG,IAAI,GAAG,EAAE,CAAC;QAEtC,KAAK,MAAM,YAAY,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC,aAAa,CAAC,EAAE;YAC3E,IAAI,KAAK,GAAG,sBAAsB,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC,CAAC;YAC5D,IAAI,CAAC,KAAK,EAAE;gBACV,KAAK,GAAG,sBAAsB,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;aAC7C;YACD,MAAM,WAAW,GAAG,aAAa,CAAC,qBAAqB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YAEjE,eAAe,CAAC,GAAG,CACf,YAAY,EACZ,EAAC,SAAS,EAAE,cAAc,CAAC,qBAAqB,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,WAAW,EAAE,WAAW,EAAC,CAAC,CAAC;YACxG,mBAAmB,CAAC,GAAG,CAAC,YAAY,EAAE,EAAC,SAAS,EAAE,KAAK,EAAE,SAAS,EAAE,CAAC,EAAE,WAAW,EAAE,WAAW,EAAC,CAAC,CAAC;SACnG;QACD,OAAO,CAAC,eAAe,EAAE,mBAAmB,CAAC,CAAC;QAE9C;;WAEG;QACH,SAAS,aAAa,CAAC,KAAK;YAC1B,MAAM,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACpD,IAAI,CAAC,WAAW,EAAE;gBAChB,OAAO,EAAE,CAAC;aACX;YACD,MAAM,IAAI,GAAG,WAAW,CAAC,IAAI,EAAE,CAAC;YAChC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;YACb,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;YAClC,OAAO,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACpC,CAAC;QAED;;WAEG;QACH,SAAS,cAAc,CAAC,KAAK;YAC3B,MAAM,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACpD,IAAI,CAAC,WAAW,EAAE;gBAChB,OAAO,EAAE,CAAC;aACX;YACD,MAAM,IAAI,GAAG,WAAW,CAAC,IAAI,EAAE,CAAC;YAChC,IAAI,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC;YACf,OAAO,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACpC,CAAC;IACH,CAAC;IAED,WAAW;QACT,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;QAC3B,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,MAAM,EAAE,CAAC,CAAC;QACxD,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,MAAM,EAAE,CAAC,CAAC,CAAC;QAC1F,IAAI,CAAC,4BAA4B,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,MAAM,EAAE,CAAC,CAAC,CAAC;QAChG,IAAI,CAAC,gCAAgC,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,MAAM,EAAE,CAAC,CAAC,CAAC;QACpG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,EAAE,IAAI,MAAM,EAAE,CAAC,CAAC;IAChE,CAAC;IAED;;OAEG;IACH,QAAQ;QACN,IAAI,CAAC,cAAc,CAAC,WAAW,EAAE,CAAC;IACpC,CAAC;IAED;;OAEG;IACH,QAAQ;QACN,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IAED;;OAEG;IACH,YAAY,CAAC,0BAA0B,CAAC,KAAK;QAC3C,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,OAAO,EAAE,KAAK,CAAC,OAAO,CAAC,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAC;IAC5F,CAAC;IAED;;OAEG;IACH,QAAQ,CAAC,0BAA0B,CAAC,KAAK;QACvC,MAAM,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,OAAO,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;QAC3F,IAAI,OAAO,EAAE;YACX,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;SACrB;IACH,CAAC;IAED;;;OAGG;IACH,kBAAkB,CAAC,KAAK;QACtB,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACtB,OAAO,IAAI,CAAC;SACb;QACD,MAAM,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;QAC5C,IAAI,CAAC,OAAO,EAAE;YACZ,OAAO,IAAI,CAAC;SACb;QACD,MAAM,aAAa,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,+BAA+B,CAAC,CAAC,GAAG,EAAE;YAC3G,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC;QAClC,IAAI,KAAK,CAAC;QACV,IAAI,KAAK,CAAC;QACV,IAAI,GAAG,CAAC;QACR,IAAI,aAAa,EAAE;YACjB,KAAK,GAAG,iBAAiB,CAAC,0BAA0B,CAAC,OAAO,EAAE,CAAC,CAAC;iBACnD,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,KAAK,qBAAqB,CAAC,KAAK,CAAC,CAAC;YACrE,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,gCAAgC,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC;YAC7E,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC,gCAAgC,CAAC,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC;SAC1E;aAAM;YACL,KAAK,GAAG,IAAI,CAAC,sBAAsB,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;YAChD,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;YACpB,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC;SACjB;QAED,IAAI,GAAG,GAAG,KAAK,GAAG,EAAE,EAAE;YACpB,MAAM,SAAS,GAAG,CAAC,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC;YACpC,KAAK,GAAG,KAAK,GAAG,SAAS,GAAG,EAAE,CAAC;YAC/B,GAAG,GAAG,GAAG,GAAG,SAAS,GAAG,EAAE,CAAC;SAC5B;QAED,IAAI,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,GAAG,KAAK,IAAI,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,GAAG,GAAG,EAAE;YACxG,OAAO,IAAI,CAAC;SACb;QAED,MAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;QAC/D,MAAM,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,gCAAgC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC;QACpF,MAAM,CAAC,GAAG,IAAI,CAAC,aAAa,GAAG,CAAC,IAAI,CAAC,UAAU,GAAG,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;QAEpH,IAAI,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,GAAG,CAAC,IAAI,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,GAAG,CAAC,GAAG,SAAS,EAAE;YAC5G,OAAO,IAAI,CAAC;SACb;QAED,MAAM,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;QAC7C,SAAS,CAAC,CAAC,IAAI,KAAK,CAAC;QACrB,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC;QACjB,SAAS,CAAC,KAAK,GAAG,GAAG,GAAG,KAAK,CAAC;QAC9B,SAAS,CAAC,MAAM,GAAG,SAAS,CAAC;QAE7B,OAAO;YACL,GAAG,EAAE,SAAS;YACd,+CAA+C;YAC/C,IAAI,EAAE,OAAO,CAAC,EAAE;gBACd,MAAM,OAAO,GAAG,iBAAiB,CAAC,iBAAiB;gBAC/C,iDAAiD,CAAC,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;gBACnF,OAAO,CAAC,cAAc,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;gBAC5C,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YAC/B,CAAC;YACD,IAAI,EAAE,SAAS;SAChB,CAAC;IACJ,CAAC;IAED;;;OAGG;IACH,eAAe,CAAC,IAAI,EAAE,uBAAuB;QAC3C,IAAI,IAAI,CAAC,YAAY,EAAE;YACrB,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;SAC5C;QACD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,IAAI,IAAI,CAAC,YAAY,EAAE;YACrB,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,EAAE,uBAAuB,CAAC,CAAC;SAC7D;IACH,CAAC;IAED;;;OAGG;IACH,gBAAgB,CAAC,IAAI;QACnB,IAAI,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE;YACzB,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;YAC9B,OAAO,IAAI,CAAC;SACb;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IAED;;OAEG;IACH,YAAY,CAAC,MAAM;QACjB,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC;QAC5B,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC,gBAAgB,CAAC,GAAG,MAAM,CAAC,gBAAgB,CAAC;IACvG,CAAC;IAED;;OAEG;IACH,eAAe,CAAC,MAAM;QACpB,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC;IAC9B,CAAC;IAED;;OAEG;IACH,eAAe,CAAC,OAAO;QACrB,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC;QAC7B,IAAI,CAAC,oBAAoB,EAAE,CAAC;IAC9B,CAAC;IAED;;OAEG;IACH,aAAa,CAAC,UAAU;QACtB,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;IAChC,CAAC;IAED;;;;OAIG;IACH,gBAAgB,CAAC,CAAC,EAAE,CAAC;QACnB,IAAI,CAAC,IAAI,IAAI,CAAC,aAAa,EAAE;YAC3B,OAAO,IAAI,CAAC;SACb;QACD,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;IAC/F,CAAC;IAED,YAAY;QACV,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACzB,OAAO;SACR;QACD,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,qBAAqB,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;IAC3F,CAAC;IAED;;;;OAIG;IACH,MAAM,CAAC,SAAS,EAAE,aAAa,EAAE,KAAK;QACpC,IAAI,SAAS,KAAK,SAAS,IAAI,IAAI,CAAC,UAAU,KAAK,SAAS,EAAE;YAC5D,IAAI,CAAC,cAAc,CAAC,WAAW,EAAE,CAAC;YAClC,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;SAC7B;QACD,IAAI,KAAK,EAAE;YACT,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,CAAC,oBAAoB,EAAE,CAAC;SAC7B;QACD,IAAI,aAAa,KAAK,SAAS,EAAE;YAC/B,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC;SACrC;QACD,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACzB,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,oBAAoB,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;YAClE,OAAO,IAAI,CAAC,gBAAgB,CAAC;SAC9B;QAED,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;QACrD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;QACnD,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,KAAK,EAAE,CAAC;IACf,CAAC;IAED,YAAY;QACV,MAAM,KAAK,GAAG,MAAM,CAAC,gBAAgB,CAAC;QACtC,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC/C,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QACjD,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACpD,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;IACxD,CAAC;IAED;;OAEG;IACH,QAAQ;QACN,KAAK,CAAC,QAAQ,EAAE,CAAC;QACjB,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,IAAI,CAAC,YAAY,EAAE,CAAC;IACtB,CAAC;IAED,oBAAoB;QAClB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC;QACzE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC;QACtD,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACpD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,OAAO,CAAC,qBAAqB,EAAE,CAAC;IAC9D,CAAC;IAED;;;OAGG;IACH,eAAe,CAAC,IAAI;QAClB,MAAM,cAAc,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;QAC7D,MAAM,WAAW,GAAG,cAAc,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;QACvE,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,WAAW,CAAC,CAAC;IAChF,CAAC;IAED,eAAe;IACf,CAAC;IAED,KAAK;QACH,MAAM,aAAa,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,+BAA+B,CAAC,CAAC,GAAG,EAAE;YAC3G,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC;QAClC,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QAC1B,wCAAwC;QACxC,MAAM,OAAO,GAAG,wCAAwC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;QACzF,IAAI,CAAC,OAAO,EAAE;YACZ,OAAO;SACR;QACD,OAAO,CAAC,IAAI,EAAE,CAAC;QACf,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,gBAAgB,EAAE,MAAM,CAAC,gBAAgB,CAAC,CAAC;QAChE,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QACzC,OAAO,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAC1D,OAAO,CAAC,IAAI,EAAE,CAAC;QACf,MAAM,iBAAiB,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;QACxE,MAAM,gBAAgB,GAClB,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,EAAE,iBAAiB,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;QAChG,KAAK,IAAI,CAAC,GAAG,iBAAiB,EAAE,CAAC,GAAG,gBAAgB,EAAE,CAAC,EAAE,EAAE;YACzD,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;YACtC,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACtB,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,EAAE,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;YAC9D,mCAAmC;YACnC,IAAI,SAAS,GAAG,EAAE,CAAC;YACnB,IAAI,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;gBACxC,SAAS,GAAG,mCAAmC,CAAC,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC;aACvE;YACD,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACrB,KAAK,MAAM,QAAQ,IAAI,SAAS,EAAE;gBAChC,IAAI,aAAa,EAAE;oBACjB,IAAI,CAAC,qBAAqB,CAAC,QAAQ,EAAE,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;iBACnE;qBAAM;oBACL,IAAI,CAAC,yBAAyB,CAAC,OAAO,EAAE,QAAQ,EAAE,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;iBAChF;aACF;SACF;QACD,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QAE1B,OAAO,CAAC,IAAI,EAAE,CAAC;QACf,OAAO,CAAC,SAAS;YACb,YAAY,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,cAAc,CAAC,MAAM,EAAE,YAAY,CAAC,YAAY,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;QACjH,KAAK,MAAM,QAAQ,IAAI,IAAI,CAAC,WAAW,EAAE;YACvC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;SACzD;QACD,OAAO,CAAC,OAAO,EAAE,CAAC;QAElB,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC;QACjC,OAAO,CAAC,OAAO,EAAE,CAAC;QAElB,MAAM,cAAc,GAAG,EAAE,CAAC;QAC1B,MAAM,eAAe,GAAG,EAAE,CAAC;QAC3B,MAAM,YAAY,GAAG,MAAM,CAAC,YAAY,CAAC,YAAY,CAAC,oBAAoB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAC7F,MAAM,CAAC,YAAY,CAAC,YAAY,CAAC,cAAc,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;QACvE,MAAM,CAAC,YAAY,CAAC,YAAY,CAAC,iBAAiB,CAC9C,OAAO,EAAE,YAAY,EAAE,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,EAAE,YAAY,CAAC,SAAS,CAAC,EAAE,IAAI,CAAC,SAAS,EACzG,IAAI,CAAC,aAAa,EAAE,cAAc,CAAC,CAAC;QACxC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,GAAG,eAAe,EAAE,CAAC,EAAE,eAAe,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAC/F,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED;;OAEG;IACH,WAAW,CAAC,OAAO;QACjB,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,aAAa,EAAE;YACtC,MAAM,KAAK,GAAG,2BAA2B,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACrD,MAAM,IAAI,GAAG,sBAAsB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/C,OAAO,CAAC,IAAI,EAAE,CAAC;YACf,OAAO,CAAC,SAAS,EAAE,CAAC;YACpB,IAAI,KAAK,CAAC,SAAS,EAAE;gBACnB,OAAO,CAAC,SAAS,GAAG,KAAK,CAAC,SAAS,CAAC;gBACpC,IAAI,KAAK,CAAC,WAAW,EAAE;oBACrB,OAAO,CAAC,WAAW,GAAG,KAAK,CAAC,WAAW,CAAC;iBACzC;gBACD,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;aACtB;YACD,IAAI,KAAK,CAAC,SAAS,EAAE;gBACnB,OAAO,CAAC,SAAS,GAAG,KAAK,CAAC,SAAS,CAAC;gBACpC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACpB;YACD,OAAO,CAAC,OAAO,EAAE,CAAC;SACnB;IACH,CAAC;IAED;;OAEG;IACH,kBAAkB,CAAC,OAAO;QACxB,OAAO,CAAC,IAAI,EAAE,CAAC;QACf,OAAO,CAAC,SAAS,GAAG,CAAC,CAAC;QACtB,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,EAAE;YAC9C,OAAO,CAAC,WAAW,GAAG,KAAK,CAAC;YAC5B,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,EAAE;gBACvD,OAAO,CAAC,SAAS,EAAE,CAAC;gBACpB,MAAM,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;gBACrC,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBACrB,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;aACvC;YACD,OAAO,CAAC,MAAM,EAAE,CAAC;SAClB;QACD,OAAO,CAAC,OAAO,EAAE,CAAC;IACpB,CAAC;IAED;;;OAGG;IACH,aAAa,CAAC,IAAI;QAChB,MAAM,KAAK,GAAG,qBAAqB,CAAC;QACpC,QAAQ,IAAI,EAAE;YACZ,KAAK,KAAK,CAAC,UAAU,CAAC;YACtB,KAAK,KAAK,CAAC,GAAG,CAAC;YACf,KAAK,KAAK,CAAC,GAAG,CAAC;YACf,KAAK,KAAK,CAAC,KAAK,CAAC;YACjB,KAAK,KAAK,CAAC,QAAQ,CAAC;YACpB,KAAK,KAAK,CAAC,IAAI,CAAC;YAChB,KAAK,KAAK,CAAC,QAAQ;gBACjB,OAAO,CAAC,CAAC;YACX;gBACE,OAAO,EAAE,CAAC;SACb;IACH,CAAC;IAED;;;;OAIG;IACH,sBAAsB,CAAC,OAAO,EAAE,YAAY;QAC1C,MAAM,SAAS,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;QACxD,MAAM,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,0BAA0B,CAAC,OAAO,CAAC,CAAC;QACzE,OAAO;YACL,KAAK,EAAE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,WAAW,CAAC,KAAK,GAAG,GAAG,CAAC,GAAG,SAAS,CAAC,GAAG,YAAY;YAC3F,GAAG,EAAE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,WAAW,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,SAAS,CAAC,GAAG,YAAY;YAC1F,GAAG,EAAE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,WAAW,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,SAAS,CAAC,GAAG,YAAY;SACxF,CAAC;IACJ,CAAC;IAED;;;;OAIG;IACH,yBAAyB,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC;QACxC,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;QAC/B,IAAI,CAAC,OAAO,EAAE;YACZ,OAAO;SACR;QACD,MAAM,WAAW,GAAG,CAAC,CAAC;QACtB,MAAM,YAAY,GAAG,WAAW,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;QAErD,MAAM,MAAM,GAAG,IAAI,CAAC,sBAAsB,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;QAClE,MAAM,MAAM,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QACpC,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,GAAG,MAAM,GAAG,CAAC,GAAG,WAAW,CAAC,GAAG,WAAW,GAAG,CAAC,CAAC;QAElF,MAAM,YAAY,GAAG,2BAA2B,CAAC,CAAC,IAAI,CAAC,4BAA4B,CAAC,GAAG,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;QACjH,MAAM,WAAW,GAAG,sBAAsB,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC;QAClF,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,KAAK,EAAE,MAAM,GAAG,WAAW,CAAC,CAAC;QAEnF,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;QACtD,MAAM,gBAAgB;QAClB,2BAA2B,CAAC,CAAC,IAAI,CAAC,gCAAgC,CAAC,GAAG,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;QACpG,MAAM,eAAe,GAAG,sBAAsB,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC,CAAC;QAC1F,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,EAAE,QAAQ,EAAE,MAAM,GAAG,WAAW,CAAC,CAAC;QAEpE,0EAA0E;QAC1E,IAAI,MAAM,GAAG,IAAI,CAAC;QAClB,IAAI,IAAI,CAAC,OAAO,EAAE,EAAE;YAClB,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC;YACzD,MAAM,gBAAgB,GAAG,EAAE,CAAC;YAC5B,MAAM,cAAc,GAAG,OAAO,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC;YAC9D,MAAM,eAAe,GAAG,OAAO,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC;YAChE,MAAM,aAAa,GAAG,sBAAsB,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;YAE/F,IAAI,cAAc,GAAG,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,KAAK,EAAE;gBAC9C,MAAM,OAAO,GAAG,MAAM,CAAC,KAAK,GAAG,CAAC,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,KAAK,GAAG,cAAc,CAAC,GAAG,CAAC,CAAC;gBAChF,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAC,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,EAAC,CAAC,CAAC;aAC/E;iBAAM,IAAI,gBAAgB,GAAG,cAAc,GAAG,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,KAAK,EAAE;gBAC/E,IAAI,CAAC,WAAW,CAAC,IAAI,CACjB,EAAC,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,CAAC,EAAE,MAAM,CAAC,KAAK,GAAG,cAAc,GAAG,gBAAgB,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,EAAC,CAAC,CAAC;gBACzG,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,GAAG,gBAAgB,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAClF,aAAa,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;gBAC/E,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,GAAG,gBAAgB,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAClF,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;aAChE;YAED,MAAM,IAAI,GAAG,MAAM,CAAC,GAAG,GAAG,QAAQ,GAAG,YAAY,CAAC;YAClD,IAAI,eAAe,GAAG,IAAI,GAAG,MAAM,CAAC,GAAG,EAAE;gBACvC,MAAM,OAAO,GAAG,MAAM,CAAC,GAAG,GAAG,CAAC,IAAI,GAAG,MAAM,CAAC,GAAG,GAAG,eAAe,CAAC,GAAG,CAAC,CAAC;gBACvE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAC,IAAI,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,EAAC,CAAC,CAAC;aAChF;iBAAM,IAAI,IAAI,GAAG,gBAAgB,GAAG,eAAe,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,EAAE;gBAC5F,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAC,IAAI,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI,GAAG,gBAAgB,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,EAAC,CAAC,CAAC;gBACnG,aAAa,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACvD,aAAa,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;gBACvE,aAAa,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACvD,aAAa,CAAC,MAAM,CAAC,IAAI,GAAG,gBAAgB,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;aAC3E;SACF;QAED,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE;YACjC,MAAM,aAAa;YACf,gCAAgC,CAAC,CAAC,iBAAiB,CAAC,0BAA0B,CAAC,OAAO,EAAE,CAAC,CAAC;iBACnD,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,KAAK,qBAAqB,CAAC,KAAK,CAAC,CAAC,CAAC;YACpG,MAAM,cAAc,GAAG,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3E,MAAM,mBAAmB,GAAG,cAAc,GAAG,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,KAAK,CAAC;YACvE,MAAM,iBAAiB,GAAG,EAAE,CAAC;YAC7B,MAAM,UAAU,GAAG,CAAC,MAAM,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,cAAc,GAAG,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7F,MAAM,aAAa,GAAG,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAChE,IAAI,MAAM,CAAC,KAAK,GAAG,UAAU,GAAG,aAAa,EAAE;gBAC7C,MAAM,UAAU,GAAG,sBAAsB,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gBACtF,UAAU,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC7D,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,GAAG,UAAU,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAEzE,yCAAyC;gBACzC,MAAM,YAAY,GAAG,MAAM,GAAG,CAAC,CAAC;gBAChC,UAAU,CAAC,MAAM,CAAC,aAAa,GAAG,YAAY,EAAE,CAAC,GAAG,YAAY,GAAG,CAAC,CAAC,CAAC;gBACtE,UAAU,CAAC,MAAM,CAAC,aAAa,GAAG,YAAY,EAAE,CAAC,GAAG,MAAM,GAAG,YAAY,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;aACpF;SACF;IACH,CAAC;IAED;;;OAGG;IACH,qBAAqB,CAAC,IAAI,EAAE,CAAC;QAC3B,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;QAC/B,IAAI,CAAC,OAAO,EAAE;YACZ,OAAO;SACR;QACD,MAAM,MAAM,GAAG,iBAAiB,CAAC,0BAA0B,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QACxE,KAAK,MAAM,KAAK,IAAI,MAAM,EAAE;YAC1B,IAAI,KAAK,CAAC,IAAI,KAAK,qBAAqB,CAAC,KAAK,IAAI,KAAK,CAAC,IAAI,KAAK,qBAAqB,CAAC,OAAO;gBAC1F,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,KAAK,KAAK,CAAC,EAAE;gBACjC,SAAS;aACV;YAED,MAAM,KAAK,GAAG,2BAA2B,CAAC,CAAC,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;YACxF,MAAM,IAAI,GAAG,sBAAsB,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;YACpE,MAAM,SAAS,GAAG,KAAK,CAAC,SAAS,IAAI,CAAC,CAAC;YACvC,MAAM,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YAC9C,MAAM,UAAU,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,GAAG,MAAM,GAAG,CAAC,CAAC,GAAG,SAAS,GAAG,CAAC,CAAC;YACpF,MAAM,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YAChD,MAAM,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC5C,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,EAAE,GAAG,GAAG,KAAK,EAAE,MAAM,GAAG,SAAS,CAAC,CAAC;SAC/D;IACH,CAAC;IAED;;;;OAIG;IACH,YAAY,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC;QAC3B,MAAM,aAAa,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAC7C,OAAO,CAAC,IAAI,EAAE,CAAC;QACf,OAAO,CAAC,SAAS,EAAE,CAAC;QACpB,OAAO,CAAC,SAAS,GAAG,YAAY,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC;QACzF,OAAO,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QACvD,OAAO,CAAC,IAAI,EAAE,CAAC;QACf,OAAO,CAAC,OAAO,EAAE,CAAC;IACpB,CAAC;CACF;AAED,uDAAuD;AACvD,qBAAqB;AACrB,MAAM,CAAC,IAAI,UAAU,CAAC;AAEtB,kHAAkH;AAClH,qBAAqB;AACrB,MAAM,CAAC,IAAI,WAAW,CAAC","sourcesContent":["// Copyright 2016 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';\nimport * as PerfUI from '../perf_ui/perf_ui.js';\nimport * as SDK from '../sdk/sdk.js';  // eslint-disable-line no-unused-vars\nimport * as ThemeSupport from '../theme_support/theme_support.js';\nimport * as UI from '../ui/ui.js';\n\nimport {NetworkNode} from './NetworkDataGridNode.js';              // eslint-disable-line no-unused-vars\nimport {NetworkTimeCalculator} from './NetworkTimeCalculator.js';  // eslint-disable-line no-unused-vars\nimport {RequestTimeRange, RequestTimeRangeNames, RequestTimingView} from './RequestTimingView.js';  // eslint-disable-line no-unused-vars\n\nexport class NetworkWaterfallColumn extends UI.Widget.VBox {\n  /**\n   * @param {!NetworkTimeCalculator} calculator\n   */\n  constructor(calculator) {\n    // TODO(allada) Make this a shadowDOM when the NetworkWaterfallColumn gets moved into NetworkLogViewColumns.\n    super(false);\n    this.registerRequiredCSS('network/networkWaterfallColumn.css', {enableLegacyPatching: false});\n\n    /** @type {!HTMLCanvasElement} */\n    this._canvas = /** @type {!HTMLCanvasElement} */ (this.contentElement.createChild('canvas'));\n    this._canvas.tabIndex = -1;\n    this.setDefaultFocusedElement(this._canvas);\n    this._canvasPosition = this._canvas.getBoundingClientRect();\n\n    /** @const */\n    this._leftPadding = 5;\n    /** @const */\n    this._fontSize = 10;\n\n    this._rightPadding = 0;\n    this._scrollTop = 0;\n\n    this._headerHeight = 0;\n    this._calculator = calculator;\n\n    // this._rawRowHeight captures model height (41 or 21px),\n    // this._rowHeight is computed height of the row in CSS pixels, can be 20.8 for zoomed-in content.\n    this._rawRowHeight = 0;\n    this._rowHeight = 0;\n\n    this._offsetWidth = 0;\n    this._offsetHeight = 0;\n    this._startTime = this._calculator.minimumBoundary();\n    this._endTime = this._calculator.maximumBoundary();\n\n    this._popoverHelper = new UI.PopoverHelper.PopoverHelper(this.element, this._getPopoverRequest.bind(this));\n    this._popoverHelper.setHasPadding(true);\n    this._popoverHelper.setTimeout(300, 300);\n\n    /** @type {!Array<!NetworkNode>} */\n    this._nodes = [];\n\n    /** @type {?NetworkNode} */\n    this._hoveredNode = null;\n\n    /** @type {!Map<string, !Array<number>>} */\n    this._eventDividers = new Map();\n\n    /** @type {(number|undefined)} */\n    this._updateRequestID;\n\n    this.element.addEventListener('mousemove', this._onMouseMove.bind(this), true);\n    this.element.addEventListener('mouseleave', event => this._setHoveredNode(null, false), true);\n    this.element.addEventListener('click', this._onClick.bind(this), true);\n\n    this._styleForTimeRangeName = NetworkWaterfallColumn._buildRequestTimeRangeStyle();\n\n    const resourceStyleTuple = NetworkWaterfallColumn._buildResourceTypeStyle();\n    /** @type {!Map<!Common.ResourceType.ResourceType, !_LayerStyle>} */\n    this._styleForWaitingResourceType = resourceStyleTuple[0];\n    /** @type {!Map<!Common.ResourceType.ResourceType, !_LayerStyle>} */\n    this._styleForDownloadingResourceType = resourceStyleTuple[1];\n\n    const baseLineColor =\n        ThemeSupport.ThemeSupport.instance().patchColorText('#a5a5a5', ThemeSupport.ThemeSupport.ColorUsage.Foreground);\n    /** @type {!_LayerStyle} */\n    this._wiskerStyle = {borderColor: baseLineColor, lineWidth: 1, fillStyle: undefined};\n    /** @type {!_LayerStyle} */\n    this._hoverDetailsStyle = {fillStyle: baseLineColor, lineWidth: 1, borderColor: baseLineColor};\n\n    /** @type {!Map<!_LayerStyle, !Path2D>} */\n    this._pathForStyle = new Map();\n    /** @type {!Array<!_TextLayer>} */\n    this._textLayers = [];\n  }\n\n  /**\n   * @return {!Map<!RequestTimeRangeNames, !_LayerStyle>}\n   */\n  static _buildRequestTimeRangeStyle() {\n    const types = RequestTimeRangeNames;\n    const styleMap = new Map();\n    styleMap.set(types.Connecting, {fillStyle: '#FF9800'});\n    styleMap.set(types.SSL, {fillStyle: '#9C27B0'});\n    styleMap.set(types.DNS, {fillStyle: '#009688'});\n    styleMap.set(types.Proxy, {fillStyle: '#A1887F'});\n    styleMap.set(types.Blocking, {fillStyle: '#AAAAAA'});\n    styleMap.set(types.Push, {fillStyle: '#8CDBff'});\n    styleMap.set(types.Queueing, {fillStyle: 'white', lineWidth: 2, borderColor: 'lightgrey'});\n    // This ensures we always show at least 2 px for a request.\n    styleMap.set(types.Receiving, {fillStyle: '#03A9F4', lineWidth: 2, borderColor: '#03A9F4'});\n    styleMap.set(types.Waiting, {fillStyle: '#00C853'});\n    styleMap.set(types.ReceivingPush, {fillStyle: '#03A9F4'});\n    styleMap.set(types.ServiceWorker, {fillStyle: 'orange'});\n    styleMap.set(types.ServiceWorkerPreparation, {fillStyle: 'orange'});\n    styleMap.set(types.ServiceWorkerRespondWith, {fillStyle: '#A8A3FF'});\n    return styleMap;\n  }\n\n  /**\n   * @return {!Array<!Map<!Common.ResourceType.ResourceType, !_LayerStyle>>}\n   */\n  static _buildResourceTypeStyle() {\n    const baseResourceTypeColors = new Map([\n      ['document', 'hsl(215, 100%, 80%)'],\n      ['font', 'hsl(8, 100%, 80%)'],\n      ['media', 'hsl(90, 50%, 80%)'],\n      ['image', 'hsl(90, 50%, 80%)'],\n      ['script', 'hsl(31, 100%, 80%)'],\n      ['stylesheet', 'hsl(272, 64%, 80%)'],\n      ['texttrack', 'hsl(8, 100%, 80%)'],\n      ['websocket', 'hsl(0, 0%, 95%)'],\n      ['xhr', 'hsl(53, 100%, 80%)'],\n      ['fetch', 'hsl(53, 100%, 80%)'],\n      ['other', 'hsl(0, 0%, 95%)'],\n    ]);\n    const waitingStyleMap = new Map();\n    const downloadingStyleMap = new Map();\n\n    for (const resourceType of Object.values(Common.ResourceType.resourceTypes)) {\n      let color = baseResourceTypeColors.get(resourceType.name());\n      if (!color) {\n        color = baseResourceTypeColors.get('other');\n      }\n      const borderColor = toBorderColor(/** @type {string} */ (color));\n\n      waitingStyleMap.set(\n          resourceType,\n          {fillStyle: toWaitingColor(/** @type {string} */ (color)), lineWidth: 1, borderColor: borderColor});\n      downloadingStyleMap.set(resourceType, {fillStyle: color, lineWidth: 1, borderColor: borderColor});\n    }\n    return [waitingStyleMap, downloadingStyleMap];\n\n    /**\n     * @param {string} color\n     */\n    function toBorderColor(color) {\n      const parsedColor = Common.Color.Color.parse(color);\n      if (!parsedColor) {\n        return '';\n      }\n      const hsla = parsedColor.hsla();\n      hsla[1] /= 2;\n      hsla[2] -= Math.min(hsla[2], 0.2);\n      return parsedColor.asString(null);\n    }\n\n    /**\n     * @param {string} color\n     */\n    function toWaitingColor(color) {\n      const parsedColor = Common.Color.Color.parse(color);\n      if (!parsedColor) {\n        return '';\n      }\n      const hsla = parsedColor.hsla();\n      hsla[2] *= 1.1;\n      return parsedColor.asString(null);\n    }\n  }\n\n  _resetPaths() {\n    this._pathForStyle.clear();\n    this._pathForStyle.set(this._wiskerStyle, new Path2D());\n    this._styleForTimeRangeName.forEach(style => this._pathForStyle.set(style, new Path2D()));\n    this._styleForWaitingResourceType.forEach(style => this._pathForStyle.set(style, new Path2D()));\n    this._styleForDownloadingResourceType.forEach(style => this._pathForStyle.set(style, new Path2D()));\n    this._pathForStyle.set(this._hoverDetailsStyle, new Path2D());\n  }\n\n  /**\n   * @override\n   */\n  willHide() {\n    this._popoverHelper.hidePopover();\n  }\n\n  /**\n   * @override\n   */\n  wasShown() {\n    this.update();\n  }\n\n  /**\n   * @param {!Event} event\n   */\n  _onMouseMove(/** @type {!MouseEvent} */ event) {\n    this._setHoveredNode(this.getNodeFromPoint(event.offsetX, event.offsetY), event.shiftKey);\n  }\n\n  /**\n   * @param {!Event} event\n   */\n  _onClick(/** @type {!MouseEvent} */ event) {\n    const handled = this._setSelectedNode(this.getNodeFromPoint(event.offsetX, event.offsetY));\n    if (handled) {\n      event.consume(true);\n    }\n  }\n\n  /**\n   * @param {!MouseEvent} event\n   * @return {?UI.PopoverHelper.PopoverRequest}\n   */\n  _getPopoverRequest(event) {\n    if (!this._hoveredNode) {\n      return null;\n    }\n    const request = this._hoveredNode.request();\n    if (!request) {\n      return null;\n    }\n    const useTimingBars = !Common.Settings.Settings.instance().moduleSetting('networkColorCodeResourceTypes').get() &&\n        !this._calculator.startAtZero;\n    let range;\n    let start;\n    let end;\n    if (useTimingBars) {\n      range = RequestTimingView.calculateRequestTimeRanges(request, 0)\n                  .find(data => data.name === RequestTimeRangeNames.Total);\n      start = this._timeToPosition(/** @type {!RequestTimeRange} */ (range).start);\n      end = this._timeToPosition(/** @type {!RequestTimeRange} */ (range).end);\n    } else {\n      range = this._getSimplifiedBarRange(request, 0);\n      start = range.start;\n      end = range.end;\n    }\n\n    if (end - start < 50) {\n      const halfWidth = (end - start) / 2;\n      start = start + halfWidth - 25;\n      end = end - halfWidth + 25;\n    }\n\n    if (event.clientX < this._canvasPosition.left + start || event.clientX > this._canvasPosition.left + end) {\n      return null;\n    }\n\n    const rowIndex = this._nodes.findIndex(node => node.hovered());\n    const barHeight = this._getBarHeight(/** @type {!RequestTimeRange} */ (range).name);\n    const y = this._headerHeight + (this._rowHeight * rowIndex - this._scrollTop) + ((this._rowHeight - barHeight) / 2);\n\n    if (event.clientY < this._canvasPosition.top + y || event.clientY > this._canvasPosition.top + y + barHeight) {\n      return null;\n    }\n\n    const anchorBox = this.element.boxInWindow();\n    anchorBox.x += start;\n    anchorBox.y += y;\n    anchorBox.width = end - start;\n    anchorBox.height = barHeight;\n\n    return {\n      box: anchorBox,\n      /** @param {!UI.GlassPane.GlassPane} popover */\n      show: popover => {\n        const content = RequestTimingView.createTimingTable(\n            /** @type {!SDK.NetworkRequest.NetworkRequest} */ (request), this._calculator);\n        popover.contentElement.appendChild(content);\n        return Promise.resolve(true);\n      },\n      hide: undefined\n    };\n  }\n\n  /**\n   * @param {?NetworkNode} node\n   * @param {boolean} highlightInitiatorChain\n   */\n  _setHoveredNode(node, highlightInitiatorChain) {\n    if (this._hoveredNode) {\n      this._hoveredNode.setHovered(false, false);\n    }\n    this._hoveredNode = node;\n    if (this._hoveredNode) {\n      this._hoveredNode.setHovered(true, highlightInitiatorChain);\n    }\n  }\n\n  /**\n   * @param {?NetworkNode} node\n   * @returns {boolean}\n   */\n  _setSelectedNode(node) {\n    if (node && node.dataGrid) {\n      node.select();\n      node.dataGrid.element.focus();\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @param {number} height\n   */\n  setRowHeight(height) {\n    this._rawRowHeight = height;\n    this._updateRowHeight();\n  }\n\n  _updateRowHeight() {\n    this._rowHeight = Math.round(this._rawRowHeight * window.devicePixelRatio) / window.devicePixelRatio;\n  }\n\n  /**\n   * @param {number} height\n   */\n  setHeaderHeight(height) {\n    this._headerHeight = height;\n  }\n\n  /**\n   * @param {number} padding\n   */\n  setRightPadding(padding) {\n    this._rightPadding = padding;\n    this._calculateCanvasSize();\n  }\n\n  /**\n   * @param {!NetworkTimeCalculator} calculator\n   */\n  setCalculator(calculator) {\n    this._calculator = calculator;\n  }\n\n  /**\n   * @param {number} x\n   * @param {number} y\n   * @return {?NetworkNode}\n   */\n  getNodeFromPoint(x, y) {\n    if (y <= this._headerHeight) {\n      return null;\n    }\n    return this._nodes[Math.floor((this._scrollTop + y - this._headerHeight) / this._rowHeight)];\n  }\n\n  scheduleDraw() {\n    if (this._updateRequestID) {\n      return;\n    }\n    this._updateRequestID = this.element.window().requestAnimationFrame(() => this.update());\n  }\n\n  /**\n   * @param {number=} scrollTop\n   * @param {!Map<string, !Array<number>>=} eventDividers\n   * @param {!Array<!NetworkNode>=} nodes\n   */\n  update(scrollTop, eventDividers, nodes) {\n    if (scrollTop !== undefined && this._scrollTop !== scrollTop) {\n      this._popoverHelper.hidePopover();\n      this._scrollTop = scrollTop;\n    }\n    if (nodes) {\n      this._nodes = nodes;\n      this._calculateCanvasSize();\n    }\n    if (eventDividers !== undefined) {\n      this._eventDividers = eventDividers;\n    }\n    if (this._updateRequestID) {\n      this.element.window().cancelAnimationFrame(this._updateRequestID);\n      delete this._updateRequestID;\n    }\n\n    this._startTime = this._calculator.minimumBoundary();\n    this._endTime = this._calculator.maximumBoundary();\n    this._resetCanvas();\n    this._resetPaths();\n    this._textLayers = [];\n    this._draw();\n  }\n\n  _resetCanvas() {\n    const ratio = window.devicePixelRatio;\n    this._canvas.width = this._offsetWidth * ratio;\n    this._canvas.height = this._offsetHeight * ratio;\n    this._canvas.style.width = this._offsetWidth + 'px';\n    this._canvas.style.height = this._offsetHeight + 'px';\n  }\n\n  /**\n   * @override\n   */\n  onResize() {\n    super.onResize();\n    this._updateRowHeight();\n    this._calculateCanvasSize();\n    this.scheduleDraw();\n  }\n\n  _calculateCanvasSize() {\n    this._offsetWidth = this.contentElement.offsetWidth - this._rightPadding;\n    this._offsetHeight = this.contentElement.offsetHeight;\n    this._calculator.setDisplayWidth(this._offsetWidth);\n    this._canvasPosition = this._canvas.getBoundingClientRect();\n  }\n\n  /**\n   * @param {number} time\n   * @return {number}\n   */\n  _timeToPosition(time) {\n    const availableWidth = this._offsetWidth - this._leftPadding;\n    const timeToPixel = availableWidth / (this._endTime - this._startTime);\n    return Math.floor(this._leftPadding + (time - this._startTime) * timeToPixel);\n  }\n\n  _didDrawForTest() {\n  }\n\n  _draw() {\n    const useTimingBars = !Common.Settings.Settings.instance().moduleSetting('networkColorCodeResourceTypes').get() &&\n        !this._calculator.startAtZero;\n    const nodes = this._nodes;\n    /** @type {?CanvasRenderingContext2D} */\n    const context = /** @type {?CanvasRenderingContext2D} */ (this._canvas.getContext('2d'));\n    if (!context) {\n      return;\n    }\n    context.save();\n    context.scale(window.devicePixelRatio, window.devicePixelRatio);\n    context.translate(0, this._headerHeight);\n    context.rect(0, 0, this._offsetWidth, this._offsetHeight);\n    context.clip();\n    const firstRequestIndex = Math.floor(this._scrollTop / this._rowHeight);\n    const lastRequestIndex =\n        Math.min(nodes.length, firstRequestIndex + Math.ceil(this._offsetHeight / this._rowHeight));\n    for (let i = firstRequestIndex; i < lastRequestIndex; i++) {\n      const rowOffset = this._rowHeight * i;\n      const node = nodes[i];\n      this._decorateRow(context, node, rowOffset - this._scrollTop);\n      /** @type {!Array<!NetworkNode>} */\n      let drawNodes = [];\n      if (node.hasChildren() && !node.expanded) {\n        drawNodes = /** @type {!Array<!NetworkNode>} */ (node.flatChildren());\n      }\n      drawNodes.push(node);\n      for (const drawNode of drawNodes) {\n        if (useTimingBars) {\n          this._buildTimingBarLayers(drawNode, rowOffset - this._scrollTop);\n        } else {\n          this._buildSimplifiedBarLayers(context, drawNode, rowOffset - this._scrollTop);\n        }\n      }\n    }\n    this._drawLayers(context);\n\n    context.save();\n    context.fillStyle =\n        ThemeSupport.ThemeSupport.instance().patchColorText('#888', ThemeSupport.ThemeSupport.ColorUsage.Foreground);\n    for (const textData of this._textLayers) {\n      context.fillText(textData.text, textData.x, textData.y);\n    }\n    context.restore();\n\n    this._drawEventDividers(context);\n    context.restore();\n\n    const freeZoneAtLeft = 75;\n    const freeZoneAtRight = 18;\n    const dividersData = PerfUI.TimelineGrid.TimelineGrid.calculateGridOffsets(this._calculator);\n    PerfUI.TimelineGrid.TimelineGrid.drawCanvasGrid(context, dividersData);\n    PerfUI.TimelineGrid.TimelineGrid.drawCanvasHeaders(\n        context, dividersData, time => this._calculator.formatValue(time, dividersData.precision), this._fontSize,\n        this._headerHeight, freeZoneAtLeft);\n    context.clearRect(this._offsetWidth - freeZoneAtRight, 0, freeZoneAtRight, this._headerHeight);\n    this._didDrawForTest();\n  }\n\n  /**\n   * @param {!CanvasRenderingContext2D} context\n   */\n  _drawLayers(context) {\n    for (const entry of this._pathForStyle) {\n      const style = /** @type {!_LayerStyle} */ (entry[0]);\n      const path = /** @type {!Path2D} */ (entry[1]);\n      context.save();\n      context.beginPath();\n      if (style.lineWidth) {\n        context.lineWidth = style.lineWidth;\n        if (style.borderColor) {\n          context.strokeStyle = style.borderColor;\n        }\n        context.stroke(path);\n      }\n      if (style.fillStyle) {\n        context.fillStyle = style.fillStyle;\n        context.fill(path);\n      }\n      context.restore();\n    }\n  }\n\n  /**\n   * @param {!CanvasRenderingContext2D} context\n   */\n  _drawEventDividers(context) {\n    context.save();\n    context.lineWidth = 1;\n    for (const color of this._eventDividers.keys()) {\n      context.strokeStyle = color;\n      for (const time of this._eventDividers.get(color) || []) {\n        context.beginPath();\n        const x = this._timeToPosition(time);\n        context.moveTo(x, 0);\n        context.lineTo(x, this._offsetHeight);\n      }\n      context.stroke();\n    }\n    context.restore();\n  }\n\n  /**\n   * @param {!RequestTimeRangeNames=} type\n   * @return {number}\n   */\n  _getBarHeight(type) {\n    const types = RequestTimeRangeNames;\n    switch (type) {\n      case types.Connecting:\n      case types.SSL:\n      case types.DNS:\n      case types.Proxy:\n      case types.Blocking:\n      case types.Push:\n      case types.Queueing:\n        return 7;\n      default:\n        return 13;\n    }\n  }\n\n  /**\n   * @param {!SDK.NetworkRequest.NetworkRequest} request\n   * @param {number} borderOffset\n   * @return {!{start: number, mid: number, end: number}}\n   */\n  _getSimplifiedBarRange(request, borderOffset) {\n    const drawWidth = this._offsetWidth - this._leftPadding;\n    const percentages = this._calculator.computeBarGraphPercentages(request);\n    return {\n      start: this._leftPadding + Math.floor((percentages.start / 100) * drawWidth) + borderOffset,\n      mid: this._leftPadding + Math.floor((percentages.middle / 100) * drawWidth) + borderOffset,\n      end: this._leftPadding + Math.floor((percentages.end / 100) * drawWidth) + borderOffset\n    };\n  }\n\n  /**\n   * @param {!CanvasRenderingContext2D} context\n   * @param {!NetworkNode} node\n   * @param {number} y\n   */\n  _buildSimplifiedBarLayers(context, node, y) {\n    const request = node.request();\n    if (!request) {\n      return;\n    }\n    const borderWidth = 1;\n    const borderOffset = borderWidth % 2 === 0 ? 0 : 0.5;\n\n    const ranges = this._getSimplifiedBarRange(request, borderOffset);\n    const height = this._getBarHeight();\n    y += Math.floor(this._rowHeight / 2 - height / 2 + borderWidth) - borderWidth / 2;\n\n    const waitingStyle = /** @type {!_LayerStyle} */ (this._styleForWaitingResourceType.get(request.resourceType()));\n    const waitingPath = /** @type {!Path2D} */ (this._pathForStyle.get(waitingStyle));\n    waitingPath.rect(ranges.start, y, ranges.mid - ranges.start, height - borderWidth);\n\n    const barWidth = Math.max(2, ranges.end - ranges.mid);\n    const downloadingStyle =\n        /** @type {!_LayerStyle} */ (this._styleForDownloadingResourceType.get(request.resourceType()));\n    const downloadingPath = /** @type {!Path2D} */ (this._pathForStyle.get(downloadingStyle));\n    downloadingPath.rect(ranges.mid, y, barWidth, height - borderWidth);\n\n    /** @type {?{left: string, right: string, tooltip: (string|undefined)}} */\n    let labels = null;\n    if (node.hovered()) {\n      labels = this._calculator.computeBarGraphLabels(request);\n      const barDotLineLength = 10;\n      const leftLabelWidth = context.measureText(labels.left).width;\n      const rightLabelWidth = context.measureText(labels.right).width;\n      const hoverLinePath = /** @type {!Path2D} */ (this._pathForStyle.get(this._hoverDetailsStyle));\n\n      if (leftLabelWidth < ranges.mid - ranges.start) {\n        const midBarX = ranges.start + (ranges.mid - ranges.start - leftLabelWidth) / 2;\n        this._textLayers.push({text: labels.left, x: midBarX, y: y + this._fontSize});\n      } else if (barDotLineLength + leftLabelWidth + this._leftPadding < ranges.start) {\n        this._textLayers.push(\n            {text: labels.left, x: ranges.start - leftLabelWidth - barDotLineLength - 1, y: y + this._fontSize});\n        hoverLinePath.moveTo(ranges.start - barDotLineLength, y + Math.floor(height / 2));\n        hoverLinePath.arc(ranges.start, y + Math.floor(height / 2), 2, 0, 2 * Math.PI);\n        hoverLinePath.moveTo(ranges.start - barDotLineLength, y + Math.floor(height / 2));\n        hoverLinePath.lineTo(ranges.start, y + Math.floor(height / 2));\n      }\n\n      const endX = ranges.mid + barWidth + borderOffset;\n      if (rightLabelWidth < endX - ranges.mid) {\n        const midBarX = ranges.mid + (endX - ranges.mid - rightLabelWidth) / 2;\n        this._textLayers.push({text: labels.right, x: midBarX, y: y + this._fontSize});\n      } else if (endX + barDotLineLength + rightLabelWidth < this._offsetWidth - this._leftPadding) {\n        this._textLayers.push({text: labels.right, x: endX + barDotLineLength + 1, y: y + this._fontSize});\n        hoverLinePath.moveTo(endX, y + Math.floor(height / 2));\n        hoverLinePath.arc(endX, y + Math.floor(height / 2), 2, 0, 2 * Math.PI);\n        hoverLinePath.moveTo(endX, y + Math.floor(height / 2));\n        hoverLinePath.lineTo(endX + barDotLineLength, y + Math.floor(height / 2));\n      }\n    }\n\n    if (!this._calculator.startAtZero) {\n      const queueingRange =\n          /** @type {!RequestTimeRange} */ (RequestTimingView.calculateRequestTimeRanges(request, 0)\n                                                .find(data => data.name === RequestTimeRangeNames.Total));\n      const leftLabelWidth = labels ? context.measureText(labels.left).width : 0;\n      const leftTextPlacedInBar = leftLabelWidth < ranges.mid - ranges.start;\n      const wiskerTextPadding = 13;\n      const textOffset = (labels && !leftTextPlacedInBar) ? leftLabelWidth + wiskerTextPadding : 0;\n      const queueingStart = this._timeToPosition(queueingRange.start);\n      if (ranges.start - textOffset > queueingStart) {\n        const wiskerPath = /** @type {!Path2D} */ (this._pathForStyle.get(this._wiskerStyle));\n        wiskerPath.moveTo(queueingStart, y + Math.floor(height / 2));\n        wiskerPath.lineTo(ranges.start - textOffset, y + Math.floor(height / 2));\n\n        // TODO(allada) This needs to be floored.\n        const wiskerHeight = height / 2;\n        wiskerPath.moveTo(queueingStart + borderOffset, y + wiskerHeight / 2);\n        wiskerPath.lineTo(queueingStart + borderOffset, y + height - wiskerHeight / 2 - 1);\n      }\n    }\n  }\n\n  /**\n   * @param {!NetworkNode} node\n   * @param {number} y\n   */\n  _buildTimingBarLayers(node, y) {\n    const request = node.request();\n    if (!request) {\n      return;\n    }\n    const ranges = RequestTimingView.calculateRequestTimeRanges(request, 0);\n    for (const range of ranges) {\n      if (range.name === RequestTimeRangeNames.Total || range.name === RequestTimeRangeNames.Sending ||\n          range.end - range.start === 0) {\n        continue;\n      }\n\n      const style = /** @type {!_LayerStyle} */ (this._styleForTimeRangeName.get(range.name));\n      const path = /** @type {!Path2D} */ (this._pathForStyle.get(style));\n      const lineWidth = style.lineWidth || 0;\n      const height = this._getBarHeight(range.name);\n      const middleBarY = y + Math.floor(this._rowHeight / 2 - height / 2) + lineWidth / 2;\n      const start = this._timeToPosition(range.start);\n      const end = this._timeToPosition(range.end);\n      path.rect(start, middleBarY, end - start, height - lineWidth);\n    }\n  }\n\n  /**\n   * @param {!CanvasRenderingContext2D} context\n   * @param {!NetworkNode} node\n   * @param {number} y\n   */\n  _decorateRow(context, node, y) {\n    const nodeBgColorId = node.backgroundColor();\n    context.save();\n    context.beginPath();\n    context.fillStyle = ThemeSupport.ThemeSupport.instance().getComputedValue(nodeBgColorId);\n    context.rect(0, y, this._offsetWidth, this._rowHeight);\n    context.fill();\n    context.restore();\n  }\n}\n\n/** @typedef {!{x: number, y: number, text: string}} */\n// @ts-ignore typedef\nexport let _TextLayer;\n\n/** @typedef {!{fillStyle: (string|undefined), lineWidth: (number|undefined), borderColor: (string|undefined)}} */\n// @ts-ignore typedef\nexport let _LayerStyle;\n"]}
{"version":3,"file":"ShortcutRegistry.js","sourceRoot":"","sources":["../../../../../front_end/ui/ShortcutRegistry.js"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2014 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';\nimport * as Host from '../host/host.js';\nimport * as Platform from '../platform/platform.js';\nimport * as Root from '../root/root.js';\n\nimport {Action, Binding, getRegisteredActionExtensions, KeybindSet} from './ActionRegistration.js';  // eslint-disable-line no-unused-vars\nimport {ActionRegistry} from './ActionRegistry.js';  // eslint-disable-line no-unused-vars\nimport {Context} from './Context.js';\nimport {Dialog} from './Dialog.js';\nimport {Descriptor, KeyboardShortcut, Modifiers, Type} from './KeyboardShortcut.js';  // eslint-disable-line no-unused-vars\nimport {isEditing} from './UIUtils.js';\n\n/** @type {!ShortcutRegistry|undefined} */\nlet shortcutRegistryInstance;\n\nexport class ShortcutRegistry {\n  /**\n   * @param {!ActionRegistry} actionRegistry\n   */\n  constructor(actionRegistry) {\n    this._actionRegistry = actionRegistry;\n    /** @type {!Platform.MapUtilities.Multimap.<string, !KeyboardShortcut>} */\n    this._actionToShortcut = new Platform.MapUtilities.Multimap();\n    this._keyMap = new ShortcutTreeNode(0, 0);\n    /** @type {?ShortcutTreeNode} */\n    this._activePrefixKey = null;\n    /** @type {?number} */\n    this._activePrefixTimeout = null;\n    /** @type {?function():Promise<void>} */\n    this._consumePrefix = null;\n    /** @type {!Set.<string>} */\n    this._devToolsDefaultShortcutActions = new Set();\n    /** @type {!Platform.MapUtilities.Multimap.<string, !KeyboardShortcut>} */\n    this._disabledDefaultShortcutsForAction = new Platform.MapUtilities.Multimap();\n    this._keybindSetSetting = Common.Settings.Settings.instance().moduleSetting('activeKeybindSet');\n    this._keybindSetSetting.addChangeListener(event => {\n      Host.userMetrics.keybindSetSettingChanged(event.data);\n      this._registerBindings();\n    });\n    this._userShortcutsSetting = Common.Settings.Settings.instance().moduleSetting('userShortcuts');\n    this._userShortcutsSetting.addChangeListener(this._registerBindings, this);\n\n    this._registerBindings();\n  }\n\n  /**\n   * @param {{forceNew: ?boolean, actionRegistry: ?ActionRegistry}} opts\n   */\n  static instance(opts = {forceNew: null, actionRegistry: null}) {\n    const {forceNew, actionRegistry} = opts;\n    if (!shortcutRegistryInstance || forceNew) {\n      if (!actionRegistry) {\n        throw new Error('Missing actionRegistry for shortcutRegistry');\n      }\n      shortcutRegistryInstance = new ShortcutRegistry(actionRegistry);\n    }\n\n    return shortcutRegistryInstance;\n  }\n\n  static removeInstance() {\n    shortcutRegistryInstance = undefined;\n  }\n  /**\n   * @param {number} key\n   * @param {!Object.<string, function():Promise.<boolean>>=} handlers\n   * @return {!Array.<!Action>}\n   */\n  _applicableActions(key, handlers = {}) {\n    /** @type {!Array<string>} */\n    let actions = [];\n    const keyMap = this._activePrefixKey || this._keyMap;\n    const keyNode = keyMap.getNode(key);\n    if (keyNode) {\n      actions = keyNode.actions();\n    }\n    const applicableActions = this._actionRegistry.applicableActions(actions, Context.instance());\n    if (keyNode) {\n      for (const actionId of Object.keys(handlers)) {\n        if (keyNode.actions().indexOf(actionId) >= 0) {\n          const action = this._actionRegistry.action(actionId);\n          if (action) {\n            applicableActions.push(action);\n          }\n        }\n      }\n    }\n    return applicableActions;\n  }\n\n  /**\n   * @param {string} action\n   * @return {!Array.<!KeyboardShortcut>}\n   */\n  shortcutsForAction(action) {\n    return [...this._actionToShortcut.get(action)];\n  }\n\n  /**\n   * @param {!Array.<!Descriptor>} descriptors\n   */\n  actionsForDescriptors(descriptors) {\n    /** @type {?ShortcutTreeNode} */\n    let keyMapNode = this._keyMap;\n    for (const {key} of descriptors) {\n      if (!keyMapNode) {\n        return [];\n      }\n      keyMapNode = keyMapNode.getNode(key);\n    }\n    return keyMapNode ? keyMapNode.actions() : [];\n  }\n\n  /**\n   * @return {!Array<number>}\n   */\n  globalShortcutKeys() {\n    const keys = [];\n    for (const node of this._keyMap.chords().values()) {\n      const actions = node.actions();\n      const applicableActions = this._actionRegistry.applicableActions(actions, Context.instance());\n      if (applicableActions.length || node.hasChords()) {\n        keys.push(node.key());\n      }\n    }\n    return keys;\n  }\n\n  /**\n   * @param {!Array.<string>} actionIds\n   * @return {!Array.<number>}\n   */\n  keysForActions(actionIds) {\n    const keys = actionIds.flatMap(\n        action => [...this._actionToShortcut.get(action)].flatMap(\n            shortcut => shortcut.descriptors.map(descriptor => descriptor.key)));\n    return [...(new Set(keys))];\n  }\n\n  /**\n   * @param {string} actionId\n   * @return {string|undefined}\n   */\n  shortcutTitleForAction(actionId) {\n    for (const shortcut of this._actionToShortcut.get(actionId)) {\n      return shortcut.title();\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {!KeyboardEvent} event\n   * @param {!Object.<string, function():Promise.<boolean>>=} handlers\n   */\n  handleShortcut(event, handlers) {\n    this.handleKey(KeyboardShortcut.makeKeyFromEvent(event), event.key, event, handlers);\n  }\n\n  /**\n   * @param {string} actionId\n   * return {boolean}\n   */\n  actionHasDefaultShortcut(actionId) {\n    return this._devToolsDefaultShortcutActions.has(actionId);\n  }\n\n  /**\n   * @param {!Element} element\n   * @param {!Object.<string, function():Promise.<boolean>>} handlers\n   * @return {function(!Event): void}\n   */\n  addShortcutListener(element, handlers) {\n    // We only want keys for these specific actions to get handled this\n    // way; all others should be allowed to bubble up.\n    const allowlistKeyMap = new ShortcutTreeNode(0, 0);\n    const shortcuts = Object.keys(handlers).flatMap(action => [...this._actionToShortcut.get(action)]);\n    shortcuts.forEach(shortcut => {\n      allowlistKeyMap.addKeyMapping(shortcut.descriptors.map(descriptor => descriptor.key), shortcut.action);\n    });\n\n    /**\n     * @param {!Event} event\n     */\n    const listener = event => {\n      const key = KeyboardShortcut.makeKeyFromEvent(/** @type {!KeyboardEvent} */ (event));\n      const keyMap = this._activePrefixKey ? allowlistKeyMap.getNode(this._activePrefixKey.key()) : allowlistKeyMap;\n      if (!keyMap) {\n        return;\n      }\n      if (keyMap.getNode(key)) {\n        this.handleShortcut(/** @type {!KeyboardEvent} */ (event), handlers);\n      }\n    };\n    element.addEventListener('keydown', listener);\n    return listener;\n  }\n\n  /**\n   * @param {number} key\n   * @param {string} domKey\n   * @param {!KeyboardEvent=} event\n   * @param {!Object.<string, function():Promise.<boolean>>=} handlers\n   */\n  async handleKey(key, domKey, event, handlers) {\n    const keyModifiers = key >> 8;\n    const hasHandlersOrPrefixKey = Boolean(handlers) || Boolean(this._activePrefixKey);\n    const keyMapNode = this._keyMap.getNode(key);\n    const maybeHasActions =\n        (this._applicableActions(key, handlers)).length > 0 || (keyMapNode && keyMapNode.hasChords());\n    if ((!hasHandlersOrPrefixKey && isPossiblyInputKey()) || !maybeHasActions ||\n        KeyboardShortcut.isModifier(KeyboardShortcut.keyCodeAndModifiersFromKey(key).keyCode)) {\n      return;\n    }\n    if (event) {\n      event.consume(true);\n    }\n    if (!hasHandlersOrPrefixKey && Dialog.hasInstance()) {\n      return;\n    }\n\n    if (this._activePrefixTimeout) {\n      clearTimeout(this._activePrefixTimeout);\n      const handled = maybeExecuteActionForKey.call(this);\n      this._activePrefixKey = null;\n      this._activePrefixTimeout = null;\n      if (handled) {\n        return;\n      }\n      if (this._consumePrefix) {\n        await this._consumePrefix();\n      }\n    }\n    if (keyMapNode && keyMapNode.hasChords()) {\n      this._activePrefixKey = keyMapNode;\n      this._consumePrefix = async () => {\n        this._activePrefixKey = null;\n        this._activePrefixTimeout = null;\n        await maybeExecuteActionForKey.call(this);\n      };\n      this._activePrefixTimeout = window.setTimeout(this._consumePrefix, KeyTimeout);\n    } else {\n      await maybeExecuteActionForKey.call(this);\n    }\n\n    /**\n     * @return {boolean}\n     */\n    function isPossiblyInputKey() {\n      if (!event || !isEditing() || /^F\\d+|Control|Shift|Alt|Meta|Escape|Win|U\\+001B$/.test(domKey)) {\n        return false;\n      }\n\n      if (!keyModifiers) {\n        return true;\n      }\n\n      const modifiers = Modifiers;\n      // Undo/Redo will also cause input, so textual undo should take precedence over DevTools undo when editing.\n      if (Host.Platform.isMac()) {\n        if (KeyboardShortcut.makeKey('z', modifiers.Meta) === key) {\n          return true;\n        }\n        if (KeyboardShortcut.makeKey('z', modifiers.Meta | modifiers.Shift) === key) {\n          return true;\n        }\n      } else {\n        if (KeyboardShortcut.makeKey('z', modifiers.Ctrl) === key) {\n          return true;\n        }\n        if (KeyboardShortcut.makeKey('y', modifiers.Ctrl) === key) {\n          return true;\n        }\n        if (!Host.Platform.isWin() && KeyboardShortcut.makeKey('z', modifiers.Ctrl | modifiers.Shift) === key) {\n          return true;\n        }\n      }\n\n      if ((keyModifiers & (modifiers.Ctrl | modifiers.Alt)) === (modifiers.Ctrl | modifiers.Alt)) {\n        return Host.Platform.isWin();\n      }\n\n      return !hasModifier(modifiers.Ctrl) && !hasModifier(modifiers.Alt) && !hasModifier(modifiers.Meta);\n    }\n\n    /**\n     * @param {number} mod\n     * @return {boolean}\n     */\n    function hasModifier(mod) {\n      return Boolean(keyModifiers & mod);\n    }\n\n    /**\n   * @return {!Promise.<boolean>};\n   * @this {!ShortcutRegistry}\n   */\n    async function maybeExecuteActionForKey() {\n      const actions = this._applicableActions(key, handlers);\n      if (!actions.length) {\n        return false;\n      }\n      for (const action of actions) {\n        let handled;\n        if (handlers && handlers[action.id()]) {\n          handled = await handlers[action.id()]();\n        }\n        if (!handlers) {\n          handled = await action.execute();\n        }\n        if (handled) {\n          Host.userMetrics.keyboardShortcutFired(action.id());\n          return true;\n        }\n      }\n      return false;\n    }\n  }\n\n  /**\n   * @param {!KeyboardShortcut} shortcut\n   */\n  registerUserShortcut(shortcut) {\n    for (const otherShortcut of this._disabledDefaultShortcutsForAction.get(shortcut.action)) {\n      if (otherShortcut.descriptorsMatch(shortcut.descriptors) &&\n          otherShortcut.hasKeybindSet(this._keybindSetSetting.get())) {\n        // this user shortcut is the same as a disabled default shortcut,\n        // so we should just enable the default\n        this.removeShortcut(otherShortcut);\n        return;\n      }\n    }\n    for (const otherShortcut of this._actionToShortcut.get(shortcut.action)) {\n      if (otherShortcut.descriptorsMatch(shortcut.descriptors) &&\n          otherShortcut.hasKeybindSet(this._keybindSetSetting.get())) {\n        // don't allow duplicate shortcuts\n        return;\n      }\n    }\n    this._addShortcutToSetting(shortcut);\n  }\n\n  /**\n    * @param {!KeyboardShortcut} shortcut\n    */\n  removeShortcut(shortcut) {\n    if (shortcut.type === Type.DefaultShortcut || shortcut.type === Type.KeybindSetShortcut) {\n      this._addShortcutToSetting(shortcut.changeType(Type.DisabledDefault));\n    } else {\n      this._removeShortcutFromSetting(shortcut);\n    }\n  }\n\n  /**\n   * @param {string} actionId\n   * @return {!Set.<!KeyboardShortcut>}\n   */\n  disabledDefaultsForAction(actionId) {\n    return this._disabledDefaultShortcutsForAction.get(actionId);\n  }\n\n  /**\n   * @param {!KeyboardShortcut} shortcut\n   */\n  _addShortcutToSetting(shortcut) {\n    const userShortcuts = this._userShortcutsSetting.get();\n    userShortcuts.push(shortcut);\n    this._userShortcutsSetting.set(userShortcuts);\n  }\n\n  /**\n   * @param {!KeyboardShortcut} shortcut\n   */\n  _removeShortcutFromSetting(shortcut) {\n    const userShortcuts = this._userShortcutsSetting.get();\n    const index = userShortcuts.findIndex(shortcut.equals, shortcut);\n    if (index !== -1) {\n      userShortcuts.splice(index, 1);\n      this._userShortcutsSetting.set(userShortcuts);\n    }\n  }\n\n  /**\n   * @param {!KeyboardShortcut} shortcut\n   */\n  _registerShortcut(shortcut) {\n    this._actionToShortcut.set(shortcut.action, shortcut);\n    this._keyMap.addKeyMapping(shortcut.descriptors.map(descriptor => descriptor.key), shortcut.action);\n  }\n\n  _registerBindings() {\n    this._actionToShortcut.clear();\n    this._keyMap.clear();\n    const keybindSet = this._keybindSetSetting.get();\n    // This call is done for the legacy Actions in module.json\n    // TODO(crbug.com/1134103): Remove this call when all actions are migrated\n    const extensions = Root.Runtime.Runtime.instance().extensions('action');\n    this._disabledDefaultShortcutsForAction.clear();\n    this._devToolsDefaultShortcutActions.clear();\n    /** @type {!Array<!{keyCode: number, modifiers: number}>} */\n    const forwardedKeys = [];\n    if (Root.Runtime.experiments.isEnabled('keyboardShortcutEditor')) {\n      /** @type {!Array<!{action: string, descriptors: !Array.<!Descriptor>, type: !Type}>} */\n      const userShortcuts = this._userShortcutsSetting.get();\n      for (const userShortcut of userShortcuts) {\n        const shortcut = KeyboardShortcut.createShortcutFromSettingObject(userShortcut);\n        if (shortcut.type === Type.DisabledDefault) {\n          this._disabledDefaultShortcutsForAction.set(shortcut.action, shortcut);\n        } else {\n          if (ForwardedActions.has(shortcut.action)) {\n            forwardedKeys.push(\n                ...shortcut.descriptors.map(descriptor => KeyboardShortcut.keyCodeAndModifiersFromKey(descriptor.key)));\n          }\n          this._registerShortcut(shortcut);\n        }\n      }\n    }\n    const unionOfActionExtension = [\n      ...extensions.map(extension => {\n        return {\n          actionId: extension.descriptor().actionId,\n          bindings: extension.descriptor().bindings,\n        };\n      }),\n      ...getRegisteredActionExtensions().map(registeredAction => {\n        return {actionId: registeredAction.id(), bindings: registeredAction.bindings()};\n      })\n    ];\n    unionOfActionExtension.forEach(registerActionExtension, this);\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.setWhitelistedShortcuts(JSON.stringify(forwardedKeys));\n\n    /**\n     * @param {!{actionId:?string, bindings: (!Array<!{shortcut: string, platform?: string, keybindSets?: string[] }>|undefined)}} actionExtension\n     * @this {ShortcutRegistry}\n     */\n    function registerActionExtension(actionExtension) {\n      const bindings = actionExtension.bindings;\n      for (let i = 0; bindings && i < bindings.length; ++i) {\n        const keybindSets = bindings[i].keybindSets;\n        if (!platformMatches(bindings[i].platform) || !keybindSetsMatch(keybindSets)) {\n          continue;\n        }\n        const keys = bindings[i].shortcut.split(/\\s+/);\n        const shortcutDescriptors = keys.map(KeyboardShortcut.makeDescriptorFromBindingShortcut);\n        if (shortcutDescriptors.length > 0) {\n          const actionId = /** @type {string} */ (actionExtension.actionId);\n\n          if (this._isDisabledDefault(shortcutDescriptors, actionId)) {\n            this._devToolsDefaultShortcutActions.add(actionId);\n            continue;\n          }\n\n          if (ForwardedActions.has(actionId)) {\n            forwardedKeys.push(\n                ...shortcutDescriptors.map(shortcut => KeyboardShortcut.keyCodeAndModifiersFromKey(shortcut.key)));\n          }\n          if (!keybindSets) {\n            this._devToolsDefaultShortcutActions.add(actionId);\n            this._registerShortcut(new KeyboardShortcut(shortcutDescriptors, actionId, Type.DefaultShortcut));\n          } else {\n            if (keybindSets.includes(KeybindSet.DEVTOOLS_DEFAULT)) {\n              this._devToolsDefaultShortcutActions.add(actionId);\n            }\n            this._registerShortcut(\n                new KeyboardShortcut(shortcutDescriptors, actionId, Type.KeybindSetShortcut, new Set(keybindSets)));\n          }\n        }\n      }\n    }\n\n    /**\n     * @param {string=} platformsString\n     * @return {boolean}\n     */\n    function platformMatches(platformsString) {\n      if (!platformsString) {\n        return true;\n      }\n      const platforms = platformsString.split(',');\n      let isMatch = false;\n      const currentPlatform = Host.Platform.platform();\n      for (let i = 0; !isMatch && i < platforms.length; ++i) {\n        isMatch = platforms[i] === currentPlatform;\n      }\n      return isMatch;\n    }\n\n    /**\n     * @param {!Array<string>=} keybindSets\n     */\n    function keybindSetsMatch(keybindSets) {\n      if (!keybindSets) {\n        return true;\n      }\n      return keybindSets.includes(keybindSet);\n    }\n  }\n\n  /**\n   * @param {!Array<!{key: number, name: string}>} shortcutDescriptors\n   * @param {string} action\n   */\n  _isDisabledDefault(shortcutDescriptors, action) {\n    const disabledDefaults = this._disabledDefaultShortcutsForAction.get(action);\n    for (const disabledDefault of disabledDefaults) {\n      if (disabledDefault.descriptorsMatch(shortcutDescriptors)) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nexport class ShortcutTreeNode {\n  /**\n   * @param {number} key\n   * @param {number=} depth\n   */\n  constructor(key, depth = 0) {\n    this._key = key;\n    /** @type {!Array.<string>} */\n    this._actions = [];\n    this._chords = new Map();\n    this._depth = depth;\n  }\n\n  /**\n   * @param {string} action\n   */\n  addAction(action) {\n    this._actions.push(action);\n  }\n\n  /**\n   * @return {number}\n   */\n  key() {\n    return this._key;\n  }\n\n  /**\n   * @return {!Map.<number, !ShortcutTreeNode>}\n   */\n  chords() {\n    return this._chords;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasChords() {\n    return this._chords.size > 0;\n  }\n\n  /**\n   * @param {!Array.<number>} keys\n   * @param {string} action\n   */\n  addKeyMapping(keys, action) {\n    if (keys.length < this._depth) {\n      return;\n    }\n\n    if (keys.length === this._depth) {\n      this.addAction(action);\n    } else {\n      const key = keys[this._depth];\n      if (!this._chords.has(key)) {\n        this._chords.set(key, new ShortcutTreeNode(key, this._depth + 1));\n      }\n      this._chords.get(key).addKeyMapping(keys, action);\n    }\n  }\n\n  /**\n   * @param {number} key\n   * @return {?ShortcutTreeNode}\n   */\n  getNode(key) {\n    return this._chords.get(key) || null;\n  }\n\n  /**\n   * @return {!Array.<string>}\n   */\n  actions() {\n    return this._actions;\n  }\n\n  clear() {\n    this._actions = [];\n    this._chords = new Map();\n  }\n}\n\n\nexport class ForwardedShortcut {}\n\nForwardedShortcut.instance = new ForwardedShortcut();\n\nexport const ForwardedActions = new Set([\n  'main.toggle-dock', 'debugger.toggle-breakpoints-active', 'debugger.toggle-pause', 'commandMenu.show', 'console.show'\n]);\nexport const KeyTimeout = 1000;\nexport const DefaultShortcutSetting = 'devToolsDefault';\n"]}
{"version":3,"file":"SoftDropDown.js","sourceRoot":"","sources":["../../../../../front_end/ui/SoftDropDown.js"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2017 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';        // eslint-disable-line no-unused-vars\nimport * as Platform from '../platform/platform.js';  // eslint-disable-line no-unused-vars\nimport {ls} from '../platform/platform.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {Size} from './Geometry.js';\nimport {AnchorBehavior, GlassPane, MarginBehavior, PointerEventsBehavior} from './GlassPane.js';\nimport {Icon} from './Icon.js';\nimport {ListControl, ListDelegate, ListMode} from './ListControl.js';  // eslint-disable-line no-unused-vars\nimport {Events as ListModelEvents, ListModel} from './ListModel.js';   // eslint-disable-line no-unused-vars\nimport {appendStyle} from './utils/append-style.js';\nimport {createShadowRootWithCoreStyles} from './utils/create-shadow-root-with-core-styles.js';\n\n/**\n * @template T\n * @implements {ListDelegate<T>}\n */\nexport class SoftDropDown {\n  /**\n   * @param {!ListModel<T>} model\n   * @param {!Delegate<T>} delegate\n   */\n  constructor(model, delegate) {\n    this._delegate = delegate;\n    this._selectedItem = null;\n    this._model = model;\n\n    this._placeholderText = ls`(no item selected)`;\n\n    this.element = document.createElement('button');\n    this.element.classList.add('soft-dropdown');\n    appendStyle(this.element, 'ui/softDropDownButton.css', {enableLegacyPatching: true});\n    this._titleElement = this.element.createChild('span', 'title');\n    const dropdownArrowIcon = Icon.create('smallicon-triangle-down');\n    this.element.appendChild(dropdownArrowIcon);\n    ARIAUtils.setExpanded(this.element, false);\n\n    this._glassPane = new GlassPane();\n    this._glassPane.setMarginBehavior(MarginBehavior.NoMargin);\n    this._glassPane.setAnchorBehavior(AnchorBehavior.PreferBottom);\n    this._glassPane.setOutsideClickCallback(this._hide.bind(this));\n    this._glassPane.setPointerEventsBehavior(PointerEventsBehavior.BlockedByGlassPane);\n    this._list = new ListControl(model, this, ListMode.EqualHeightItems);\n    this._list.element.classList.add('item-list');\n    this._rowHeight = 36;\n    this._width = 315;\n    createShadowRootWithCoreStyles(this._glassPane.contentElement, {\n      cssFile: 'ui/softDropDown.css',\n      enableLegacyPatching: true,\n      delegatesFocus: undefined\n    }).appendChild(this._list.element);\n    ARIAUtils.markAsMenu(this._list.element);\n\n    this._listWasShowing200msAgo = false;\n    this.element.addEventListener('mousedown', event => {\n      if (this._listWasShowing200msAgo) {\n        this._hide(event);\n      } else if (!this.element.disabled) {\n        this._show(event);\n      }\n    }, false);\n    this.element.addEventListener('keydown', this._onKeyDownButton.bind(this), false);\n    this._list.element.addEventListener('keydown', this._onKeyDownList.bind(this), false);\n    this._list.element.addEventListener('focusout', this._hide.bind(this), false);\n    this._list.element.addEventListener('mousedown', event => event.consume(true), false);\n    this._list.element.addEventListener('mouseup', event => {\n      if (event.target === this._list.element) {\n        return;\n      }\n\n      if (!this._listWasShowing200msAgo) {\n        return;\n      }\n      this._selectHighlightedItem();\n      this._hide(event);\n    }, false);\n    model.addEventListener(ListModelEvents.ItemsReplaced, this._itemsReplaced, this);\n  }\n\n  /**\n   * @param {!Event} event\n   */\n  _show(event) {\n    if (this._glassPane.isShowing()) {\n      return;\n    }\n    this._glassPane.setContentAnchorBox(this.element.boxInWindow());\n    this._glassPane.show(/** @type {!Document} **/ (this.element.ownerDocument));\n    this._list.element.focus();\n    ARIAUtils.setExpanded(this.element, true);\n    this._updateGlasspaneSize();\n    if (this._selectedItem) {\n      this._list.selectItem(this._selectedItem);\n    }\n    event.consume(true);\n    setTimeout(() => {\n      this._listWasShowing200msAgo = true;\n    }, 200);\n  }\n\n  _updateGlasspaneSize() {\n    const maxHeight = this._rowHeight * (Math.min(this._model.length, 9));\n    this._glassPane.setMaxContentSize(new Size(this._width, maxHeight));\n    this._list.viewportResized();\n  }\n\n  /**\n   * @param {!Event} event\n   */\n  _hide(event) {\n    setTimeout(() => {\n      this._listWasShowing200msAgo = false;\n    }, 200);\n    this._glassPane.hide();\n    this._list.selectItem(null);\n    ARIAUtils.setExpanded(this.element, false);\n    this.element.focus();\n    event.consume(true);\n  }\n\n  /**\n   * @param {!Event} ev\n   */\n  _onKeyDownButton(ev) {\n    const event = /** @type {!KeyboardEvent} */ (ev);\n    let handled = false;\n    switch (event.key) {\n      case 'ArrowUp':\n        this._show(event);\n        this._list.selectItemNextPage();\n        handled = true;\n        break;\n      case 'ArrowDown':\n        this._show(event);\n        this._list.selectItemPreviousPage();\n        handled = true;\n        break;\n      case 'Enter':\n      case ' ':\n        this._show(event);\n        handled = true;\n        break;\n      default:\n        break;\n    }\n\n    if (handled) {\n      event.consume(true);\n    }\n  }\n\n  /**\n   * @param {!Event} ev\n   */\n  _onKeyDownList(ev) {\n    const event = /** @type {!KeyboardEvent} */ (ev);\n    let handled = false;\n    switch (event.key) {\n      case 'ArrowLeft':\n        handled = this._list.selectPreviousItem(false, false);\n        break;\n      case 'ArrowRight':\n        handled = this._list.selectNextItem(false, false);\n        break;\n      case 'Home':\n        for (let i = 0; i < this._model.length; i++) {\n          if (this.isItemSelectable(this._model.at(i))) {\n            this._list.selectItem(this._model.at(i));\n            handled = true;\n            break;\n          }\n        }\n        break;\n      case 'End':\n        for (let i = this._model.length - 1; i >= 0; i--) {\n          if (this.isItemSelectable(this._model.at(i))) {\n            this._list.selectItem(this._model.at(i));\n            handled = true;\n            break;\n          }\n        }\n        break;\n      case 'Escape':\n        this._hide(event);\n        handled = true;\n        break;\n      case 'Tab':\n      case 'Enter':\n      case ' ':\n        this._selectHighlightedItem();\n        this._hide(event);\n        handled = true;\n        break;\n      default:\n        if (event.key.length === 1) {\n          const selectedIndex = this._list.selectedIndex();\n          const letter = event.key.toUpperCase();\n          for (let i = 0; i < this._model.length; i++) {\n            const item = this._model.at((selectedIndex + i + 1) % this._model.length);\n            if (this._delegate.titleFor(item).toUpperCase().startsWith(letter)) {\n              this._list.selectItem(item);\n              break;\n            }\n          }\n          handled = true;\n        }\n        break;\n    }\n\n    if (handled) {\n      event.consume(true);\n    }\n  }\n\n  /**\n   * @param {number} width\n   */\n  setWidth(width) {\n    this._width = width;\n    this._updateGlasspaneSize();\n  }\n\n  /**\n   * @param {number} rowHeight\n   */\n  setRowHeight(rowHeight) {\n    this._rowHeight = rowHeight;\n  }\n\n  /**\n   * @param {Platform.UIString.LocalizedString} text\n   */\n  setPlaceholderText(text) {\n    this._placeholderText = text;\n    if (!this._selectedItem) {\n      this._titleElement.textContent = this._placeholderText;\n    }\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   */\n  _itemsReplaced(event) {\n    const removed = /** @type {!Array<T>} */ (event.data.removed);\n    if (this._selectedItem && removed.indexOf(this._selectedItem) !== -1) {\n      this._selectedItem = null;\n      this._selectHighlightedItem();\n    }\n    this._updateGlasspaneSize();\n  }\n\n  /**\n   * @param {?T} item\n   */\n  selectItem(item) {\n    this._selectedItem = item;\n    if (this._selectedItem) {\n      this._titleElement.textContent = this._delegate.titleFor(this._selectedItem);\n    } else {\n      this._titleElement.textContent = this._placeholderText;\n    }\n    this._delegate.itemSelected(this._selectedItem);\n  }\n\n  /**\n   * @override\n   * @param {T} item\n   * @return {!Element}\n   */\n  createElementForItem(item) {\n    const element = document.createElement('div');\n    element.classList.add('item');\n    element.addEventListener('mousemove', e => {\n      if ((e.movementX || e.movementY) && this._delegate.isItemSelectable(item)) {\n        this._list.selectItem(item, false, /* Don't scroll */ true);\n      }\n    });\n    element.classList.toggle('disabled', !this._delegate.isItemSelectable(item));\n    element.classList.toggle('highlighted', this._list.selectedItem() === item);\n\n    ARIAUtils.markAsMenuItem(element);\n    element.appendChild(this._delegate.createElementForItem(item));\n\n    return element;\n  }\n\n  /**\n   * @override\n   * @param {T} item\n   * @return {number}\n   */\n  heightForItem(item) {\n    return this._rowHeight;\n  }\n\n  /**\n   * @override\n   * @param {T} item\n   * @return {boolean}\n   */\n  isItemSelectable(item) {\n    return this._delegate.isItemSelectable(item);\n  }\n\n  /**\n   * @override\n   * @param {?T} from\n   * @param {?T} to\n   * @param {?Element} fromElement\n   * @param {?Element} toElement\n   */\n  selectedItemChanged(from, to, fromElement, toElement) {\n    if (fromElement) {\n      fromElement.classList.remove('highlighted');\n    }\n    if (toElement) {\n      toElement.classList.add('highlighted');\n    }\n\n    ARIAUtils.setActiveDescendant(this._list.element, toElement);\n    this._delegate.highlightedItemChanged(\n        from, to, fromElement && fromElement.firstElementChild, toElement && toElement.firstElementChild);\n  }\n\n  /**\n   * @override\n   * @param {?Element} fromElement\n   * @param {?Element} toElement\n   * @return {boolean}\n   */\n  updateSelectedItemARIA(fromElement, toElement) {\n    return false;\n  }\n\n  _selectHighlightedItem() {\n    this.selectItem(this._list.selectedItem());\n  }\n\n  /**\n   * @param {T} item\n   */\n  refreshItem(item) {\n    this._list.refreshItem(item);\n  }\n}\n\n/**\n * @interface\n * @template T\n */\nexport class Delegate {\n  /**\n   * @param {T} item\n   * @return {string}\n   */\n  titleFor(item) {\n    throw new Error('not implemented yet');\n  }\n\n  /**\n   * @param {T} item\n   * @return {!Element}\n   */\n  createElementForItem(item) {\n    throw new Error('not implemented yet');\n  }\n\n  /**\n   * @param {T} item\n   * @return {boolean}\n   */\n  isItemSelectable(item) {\n    throw new Error('not implemented yet');\n  }\n\n  /**\n   * @param {?T} item\n   */\n  itemSelected(item) {\n  }\n\n  /**\n   * @param {?T} from\n   * @param {?T} to\n   * @param {?Element} fromElement\n   * @param {?Element} toElement\n   */\n  highlightedItemChanged(from, to, fromElement, toElement) {\n  }\n}\n"]}
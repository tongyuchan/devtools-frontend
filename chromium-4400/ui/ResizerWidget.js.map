{"version":3,"file":"ResizerWidget.js","sourceRoot":"","sources":["../../../../../front_end/ui/ResizerWidget.js"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2014 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';\nimport {elementDragStart} from './UIUtils.js';\n\nexport class ResizerWidget extends Common.ObjectWrapper.ObjectWrapper {\n  constructor() {\n    super();\n\n    this._isEnabled = true;\n    /** @type {!Set<!HTMLElement>} */\n    this._elements = new Set();\n    this._installDragOnMouseDownBound = this._installDragOnMouseDown.bind(this);\n    this._cursor = 'nwse-resize';\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isEnabled() {\n    return this._isEnabled;\n  }\n\n  /**\n   * @param {boolean} enabled\n   */\n  setEnabled(enabled) {\n    this._isEnabled = enabled;\n    this.updateElementCursors();\n  }\n\n  /**\n   * @return {!Array.<!Element>}\n   */\n  elements() {\n    return [...this._elements];\n  }\n\n  /**\n   * @param {!HTMLElement} element\n   */\n  addElement(element) {\n    if (!this._elements.has(element)) {\n      this._elements.add(element);\n      element.addEventListener('mousedown', this._installDragOnMouseDownBound, false);\n      this._updateElementCursor(element);\n    }\n  }\n\n  /**\n   * @param {!HTMLElement} element\n   */\n  removeElement(element) {\n    if (this._elements.has(element)) {\n      this._elements.delete(element);\n      element.removeEventListener('mousedown', this._installDragOnMouseDownBound, false);\n      element.style.removeProperty('cursor');\n    }\n  }\n\n  updateElementCursors() {\n    this._elements.forEach(this._updateElementCursor.bind(this));\n  }\n\n  /**\n   * @param {!HTMLElement} element\n   */\n  _updateElementCursor(element) {\n    if (this._isEnabled) {\n      element.style.setProperty('cursor', this.cursor());\n    } else {\n      element.style.removeProperty('cursor');\n    }\n  }\n\n  /**\n   * @return {string}\n   */\n  cursor() {\n    return this._cursor;\n  }\n\n  /**\n   * @param {string} cursor\n   */\n  setCursor(cursor) {\n    this._cursor = cursor;\n    this.updateElementCursors();\n  }\n\n  /**\n   * @param {!Event} event\n   */\n  _installDragOnMouseDown(event) {\n    const element = /** @type {!HTMLElement} */ (event.target);\n    // Only handle drags of the nodes specified.\n    if (!this._elements.has(element)) {\n      return false;\n    }\n    elementDragStart(element, this._dragStart.bind(this), event => {\n      this._drag(event);\n    }, this._dragEnd.bind(this), this.cursor(), event);\n    return undefined;\n  }\n\n  /**\n   * @param {!MouseEvent} event\n   * @return {boolean}\n   */\n  _dragStart(event) {\n    if (!this._isEnabled) {\n      return false;\n    }\n    this._startX = event.pageX;\n    this._startY = event.pageY;\n    this.sendDragStart(this._startX, this._startY);\n    return true;\n  }\n\n  /**\n   * @param {number} x\n   * @param {number} y\n   */\n  sendDragStart(x, y) {\n    this.dispatchEventToListeners(Events.ResizeStart, {startX: x, currentX: x, startY: y, currentY: y});\n  }\n\n  /**\n   * @param {!MouseEvent} event\n   * @return {boolean}\n   */\n  _drag(event) {\n    if (!this._isEnabled) {\n      this._dragEnd(event);\n      return true;  // Cancel drag.\n    }\n\n    this.sendDragMove(\n        /** @type {number} */ (this._startX), event.pageX, /** @type {number} */ (this._startY), event.pageY,\n        event.shiftKey);\n    event.preventDefault();\n    return false;  // Continue drag.\n  }\n\n  /**\n   * @param {number} startX\n   * @param {number} currentX\n   * @param {number} startY\n   * @param {number} currentY\n   * @param {boolean} shiftKey\n   */\n  sendDragMove(startX, currentX, startY, currentY, shiftKey) {\n    this.dispatchEventToListeners(\n        Events.ResizeUpdate,\n        {startX: startX, currentX: currentX, startY: startY, currentY: currentY, shiftKey: shiftKey});\n  }\n\n  /**\n   * @param {!MouseEvent} event\n   */\n  _dragEnd(event) {\n    this.dispatchEventToListeners(Events.ResizeEnd);\n    delete this._startX;\n    delete this._startY;\n  }\n}\n\n/** @enum {symbol} */\nexport const Events = {\n  ResizeStart: Symbol('ResizeStart'),\n  ResizeUpdate: Symbol('ResizeUpdate'),\n  ResizeEnd: Symbol('ResizeEnd')\n};\n\n\nexport class SimpleResizerWidget extends ResizerWidget {\n  constructor() {\n    super();\n    this._isVertical = true;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isVertical() {\n    return this._isVertical;\n  }\n\n  /**\n   * Vertical widget resizes height (along y-axis).\n   * @param {boolean} vertical\n   */\n  setVertical(vertical) {\n    this._isVertical = vertical;\n    this.updateElementCursors();\n  }\n\n  /**\n   * @override\n   * @return {string}\n   */\n  cursor() {\n    return this._isVertical ? 'ns-resize' : 'ew-resize';\n  }\n\n  /**\n   * @override\n   * @param {number} x\n   * @param {number} y\n   */\n  sendDragStart(x, y) {\n    const position = this._isVertical ? y : x;\n    this.dispatchEventToListeners(Events.ResizeStart, {startPosition: position, currentPosition: position});\n  }\n\n  /**\n   * @override\n   * @param {number} startX\n   * @param {number} currentX\n   * @param {number} startY\n   * @param {number} currentY\n   * @param {boolean} shiftKey\n   */\n  sendDragMove(startX, currentX, startY, currentY, shiftKey) {\n    if (this._isVertical) {\n      this.dispatchEventToListeners(\n          Events.ResizeUpdate, {startPosition: startY, currentPosition: currentY, shiftKey: shiftKey});\n    } else {\n      this.dispatchEventToListeners(\n          Events.ResizeUpdate, {startPosition: startX, currentPosition: currentX, shiftKey: shiftKey});\n    }\n  }\n}\n"]}
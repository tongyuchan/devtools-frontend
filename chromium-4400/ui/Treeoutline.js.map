{"version":3,"file":"Treeoutline.js","sourceRoot":"","sources":["../../../../../front_end/ui/Treeoutline.js"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2007 Apple Inc.  All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../common/common.js';\nimport * as Platform from '../platform/platform.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {Icon} from './Icon.js';                            // eslint-disable-line no-unused-vars\nimport {Config, InplaceEditor} from './InplaceEditor.js';  // eslint-disable-line no-unused-vars\nimport {Keys} from './KeyboardShortcut.js';\nimport {Tooltip} from './Tooltip.js';\nimport {deepElementFromPoint, enclosingNodeOrSelfWithNodeNameInArray, isEditing} from './UIUtils.js';\nimport {appendStyle} from './utils/append-style.js';\nimport {createShadowRootWithCoreStyles} from './utils/create-shadow-root-with-core-styles.js';\n\n/** @type {!WeakMap<!Node, !TreeElement>} */\nconst nodeToParentTreeElementMap = new WeakMap();\n\nexport class TreeOutline extends Common.ObjectWrapper.ObjectWrapper {\n  constructor() {\n    super();\n    this._rootElement = this._createRootElement();\n    this._renderSelection = false;\n\n    /** @type {?TreeElement} */\n    this.selectedTreeElement = null;\n    this.expandTreeElementsWhenArrowing = false;\n    /** @type {?function(!TreeElement, !TreeElement):number} */\n    this._comparator = null;\n\n    this.contentElement = this._rootElement._childrenListNode;\n    this.contentElement.addEventListener('keydown', this._treeKeyDown.bind(this), false);\n\n    this._preventTabOrder = false;\n    this._showSelectionOnKeyboardFocus = false;\n    this._focusable = true;\n    this.setFocusable(true);\n    /** @type {!HTMLElement} */\n    this.element = this.contentElement;\n    ARIAUtils.markAsTree(this.element);\n    this._useLightSelectionColor = false;\n    /** @type {?TreeElement} */\n    this._treeElementToScrollIntoView = null;\n    this._centerUponScrollIntoView = false;\n  }\n\n  /**\n   * @param {boolean} show\n   * @param {boolean=} preventTabOrder\n   */\n  setShowSelectionOnKeyboardFocus(show, preventTabOrder) {\n    this.contentElement.classList.toggle('hide-selection-when-blurred', show);\n    this._preventTabOrder = Boolean(preventTabOrder);\n    if (this._focusable) {\n      this.contentElement.tabIndex = Boolean(preventTabOrder) ? -1 : 0;\n    }\n    this._showSelectionOnKeyboardFocus = show;\n  }\n\n  /**\n   * @return {!TreeElement}\n   */\n  _createRootElement() {\n    const rootElement = new TreeElement();\n    rootElement.treeOutline = this;\n    rootElement.root = true;\n    rootElement.selectable = false;\n    rootElement.expanded = true;\n    rootElement._childrenListNode.classList.remove('children');\n    return rootElement;\n  }\n\n  /**\n   * @return {!TreeElement}\n   */\n  rootElement() {\n    return this._rootElement;\n  }\n\n  /**\n   * @return {?TreeElement}\n   */\n  firstChild() {\n    return this._rootElement.firstChild();\n  }\n\n  /**\n   * @return {?TreeElement}\n   */\n  _lastDescendent() {\n    let last = this._rootElement.lastChild();\n    while (last && last.expanded && last.childCount()) {\n      last = last.lastChild();\n    }\n    return last;\n  }\n\n  /**\n   * @param {!TreeElement} child\n   * @param {(function(!TreeElement, !TreeElement):number)=} comparator\n   */\n  appendChild(child, comparator) {\n    this._rootElement.appendChild(child, comparator);\n  }\n\n  /**\n   * @param {!TreeElement} child\n   * @param {number} index\n   */\n  insertChild(child, index) {\n    this._rootElement.insertChild(child, index);\n  }\n\n  /**\n   * @param {!TreeElement} child\n   */\n  removeChild(child) {\n    this._rootElement.removeChild(child);\n  }\n\n  removeChildren() {\n    this._rootElement.removeChildren();\n  }\n\n  /**\n   * @param {number} x\n   * @param {number} y\n   * @return {?TreeElement}\n   */\n  treeElementFromPoint(x, y) {\n    const node = deepElementFromPoint(this.contentElement.ownerDocument, x, y);\n    if (!node) {\n      return null;\n    }\n\n    const listNode = enclosingNodeOrSelfWithNodeNameInArray(node, ['ol', 'li']);\n    if (listNode) {\n      return nodeToParentTreeElementMap.get(listNode) || treeElementBylistItemNode.get(listNode) || null;\n    }\n    return null;\n  }\n\n  /**\n   * @param {?MouseEvent} event\n   * @return {?TreeElement}\n   */\n  treeElementFromEvent(event) {\n    return event ? this.treeElementFromPoint(event.pageX, event.pageY) : null;\n  }\n\n  /**\n   * @param {?function(!TreeElement, !TreeElement):number} comparator\n   */\n  setComparator(comparator) {\n    this._comparator = comparator;\n  }\n\n  /**\n   * @param {boolean} focusable\n   */\n  setFocusable(focusable) {\n    this._focusable = focusable;\n    this.updateFocusable();\n  }\n\n  updateFocusable() {\n    if (this._focusable) {\n      this.contentElement.tabIndex = (this._preventTabOrder || Boolean(this.selectedTreeElement)) ? -1 : 0;\n      if (this.selectedTreeElement) {\n        this.selectedTreeElement._setFocusable(true);\n      }\n    } else {\n      this.contentElement.removeAttribute('tabIndex');\n      if (this.selectedTreeElement) {\n        this.selectedTreeElement._setFocusable(false);\n      }\n    }\n  }\n\n  focus() {\n    if (this.selectedTreeElement) {\n      this.selectedTreeElement.listItemElement.focus();\n    } else {\n      this.contentElement.focus();\n    }\n  }\n\n  useLightSelectionColor() {\n    this._useLightSelectionColor = true;\n  }\n\n  /**\n   * @param {!TreeElement} element\n   */\n  _bindTreeElement(element) {\n    if (element.treeOutline) {\n      console.error('Binding element for the second time: ' + new Error().stack);\n    }\n    element.treeOutline = this;\n    element.onbind();\n  }\n\n  /**\n   * @param {!TreeElement} element\n   */\n  _unbindTreeElement(element) {\n    if (!element.treeOutline) {\n      console.error('Unbinding element that was not bound: ' + new Error().stack);\n    }\n\n    element.deselect();\n    element.onunbind();\n    element.treeOutline = null;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  selectPrevious() {\n    let nextSelectedElement = this.selectedTreeElement && this.selectedTreeElement.traversePreviousTreeElement(true);\n    while (nextSelectedElement && !nextSelectedElement.selectable) {\n      nextSelectedElement = nextSelectedElement.traversePreviousTreeElement(!this.expandTreeElementsWhenArrowing);\n    }\n    if (!nextSelectedElement) {\n      return false;\n    }\n    nextSelectedElement.select(false, true);\n    return true;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  selectNext() {\n    let nextSelectedElement = this.selectedTreeElement && this.selectedTreeElement.traverseNextTreeElement(true);\n    while (nextSelectedElement && !nextSelectedElement.selectable) {\n      nextSelectedElement = nextSelectedElement.traverseNextTreeElement(!this.expandTreeElementsWhenArrowing);\n    }\n    if (!nextSelectedElement) {\n      return false;\n    }\n    nextSelectedElement.select(false, true);\n    return true;\n  }\n\n  /**\n   * @param {boolean=} omitFocus\n   * @param {boolean=} selectedByUser\n   */\n  forceSelect(omitFocus = false, selectedByUser = true) {\n    if (this.selectedTreeElement) {\n      this.selectedTreeElement.deselect();\n    }\n    this._selectFirst(omitFocus, selectedByUser);\n  }\n\n  /**\n   * @param {boolean=} omitFocus\n   * @param {boolean=} selectedByUser\n   * @return {boolean}\n   */\n  _selectFirst(omitFocus = false, selectedByUser = true) {\n    let first = this.firstChild();\n    while (first && !first.selectable) {\n      first = first.traverseNextTreeElement(true);\n    }\n    if (!first) {\n      return false;\n    }\n    first.select(omitFocus, selectedByUser);\n    return true;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  _selectLast() {\n    let last = this._lastDescendent();\n    while (last && !last.selectable) {\n      last = last.traversePreviousTreeElement(true);\n    }\n    if (!last) {\n      return false;\n    }\n    last.select(false, true);\n    return true;\n  }\n\n  /**\n   * @param {!KeyboardEvent} event\n   */\n  _treeKeyDown(event) {\n    if (event.shiftKey || event.metaKey || event.ctrlKey || isEditing()) {\n      return;\n    }\n\n    let handled = false;\n    if (!this.selectedTreeElement) {\n      if (event.key === 'ArrowUp' && !event.altKey) {\n        handled = this._selectLast();\n      } else if (event.key === 'ArrowDown' && !event.altKey) {\n        handled = this._selectFirst();\n      }\n    } else if (event.key === 'ArrowUp' && !event.altKey) {\n      handled = this.selectPrevious();\n    } else if (event.key === 'ArrowDown' && !event.altKey) {\n      handled = this.selectNext();\n    } else if (event.key === 'ArrowLeft') {\n      handled = this.selectedTreeElement.collapseOrAscend(event.altKey);\n    } else if (event.key === 'ArrowRight') {\n      if (!this.selectedTreeElement.revealed()) {\n        this.selectedTreeElement.reveal();\n        handled = true;\n      } else {\n        handled = this.selectedTreeElement.descendOrExpand(event.altKey);\n      }\n    } else if (event.keyCode === 8 /* Backspace */ || event.keyCode === 46 /* Delete */) {\n      handled = this.selectedTreeElement.ondelete();\n    } else if (event.key === 'Enter') {\n      handled = this.selectedTreeElement.onenter();\n    } else if (event.keyCode === Keys.Space.code) {\n      handled = this.selectedTreeElement.onspace();\n    } else if (event.key === 'Home') {\n      handled = this._selectFirst();\n    } else if (event.key === 'End') {\n      handled = this._selectLast();\n    }\n\n    if (handled) {\n      event.consume(true);\n    }\n  }\n\n  /**\n   * @param {!TreeElement} treeElement\n   * @param {boolean} center\n   */\n  _deferredScrollIntoView(treeElement, center) {\n    const deferredScrollIntoView = () => {\n      if (!this._treeElementToScrollIntoView) {\n        return;\n      }\n      // This function no longer uses scrollIntoViewIfNeeded because users were bothered\n      // by the fact that it always scrolls in both direction even if only one is necessary\n      // to bring the item into view.\n\n      const itemRect = this._treeElementToScrollIntoView.listItemElement.getBoundingClientRect();\n      const treeRect = this.contentElement.getBoundingClientRect();\n      const viewRect = this.element.getBoundingClientRect();\n\n      const currentScrollX = viewRect.left - treeRect.left;\n      const currentScrollY = viewRect.top - treeRect.top;\n\n      // Only scroll into view on each axis if the item is not visible at all\n      // but if we do scroll and _centerUponScrollIntoView is true\n      // then we center the top left corner of the item in view.\n      let deltaLeft = itemRect.left - treeRect.left;\n      if (deltaLeft > currentScrollX && deltaLeft < currentScrollX + viewRect.width) {\n        deltaLeft = currentScrollX;\n      } else if (this._centerUponScrollIntoView) {\n        deltaLeft = deltaLeft - viewRect.width / 2;\n      }\n      let deltaTop = itemRect.top - treeRect.top;\n      if (deltaTop > currentScrollY && deltaTop < currentScrollY + viewRect.height) {\n        deltaTop = currentScrollY;\n      } else if (this._centerUponScrollIntoView) {\n        deltaTop = deltaTop - viewRect.height / 2;\n      }\n      this.element.scrollTo(deltaLeft, deltaTop);\n      this._treeElementToScrollIntoView = null;\n    };\n\n    if (!this._treeElementToScrollIntoView) {\n      this.element.window().requestAnimationFrame(deferredScrollIntoView);\n    }\n    this._treeElementToScrollIntoView = treeElement;\n    this._centerUponScrollIntoView = center;\n  }\n\n  /**\n   * @param {!TreeElement} treeElement\n   */\n  onStartedEditingTitle(treeElement) {\n  }\n}\n\n/** @enum {symbol} */\nexport const Events = {\n  ElementAttached: Symbol('ElementAttached'),\n  ElementsDetached: Symbol('ElementsDetached'),\n  ElementExpanded: Symbol('ElementExpanded'),\n  ElementCollapsed: Symbol('ElementCollapsed'),\n  ElementSelected: Symbol('ElementSelected')\n};\n\nexport class TreeOutlineInShadow extends TreeOutline {\n  constructor() {\n    super();\n    this.contentElement.classList.add('tree-outline');\n\n    // Redefine element to the external one.\n    this.element = /** @type {!HTMLElement} */ (document.createElement('div'));\n    this._shadowRoot = createShadowRootWithCoreStyles(\n        this.element, {cssFile: 'ui/treeoutline.css', enableLegacyPatching: true, delegatesFocus: undefined});\n    this._disclosureElement = this._shadowRoot.createChild('div', 'tree-outline-disclosure');\n    this._disclosureElement.appendChild(this.contentElement);\n    this._renderSelection = true;\n  }\n\n  /**\n   * @param {string} cssFile\n   * @param {!{enableLegacyPatching:boolean}} options\n   */\n  registerRequiredCSS(cssFile, options) {\n    appendStyle(this._shadowRoot, cssFile, options);\n  }\n\n  hideOverflow() {\n    this._disclosureElement.classList.add('tree-outline-disclosure-hide-overflow');\n  }\n\n  makeDense() {\n    this.contentElement.classList.add('tree-outline-dense');\n  }\n\n  /**\n   * @param {!TreeElement} treeElement\n   * @override\n   */\n  onStartedEditingTitle(treeElement) {\n    const selection = this._shadowRoot.getSelection();\n    if (selection) {\n      selection.selectAllChildren(treeElement.titleElement);\n    }\n  }\n}\n\n/** @type {!WeakMap<!Node, !TreeElement>} */\nexport const treeElementBylistItemNode = new WeakMap();\nexport class TreeElement {\n  /**\n   * @param {(string|!Node)=} title\n   * @param {boolean=} expandable\n   */\n  constructor(title, expandable) {\n    /** @type {?TreeOutline} */\n    this.treeOutline = null;\n    /** @type {?TreeElement} */\n    this.parent = null;\n    /** @type {?TreeElement} */\n    this.previousSibling = null;\n    /** @type {?TreeElement} */\n    this.nextSibling = null;\n    this._boundOnFocus = this._onFocus.bind(this);\n    this._boundOnBlur = this._onBlur.bind(this);\n\n    this._listItemNode = /** @type {!HTMLLIElement} */ (document.createElement('li'));\n\n    /** @type {!Node} */\n    this.titleElement = this._listItemNode.createChild('span', 'tree-element-title');\n    treeElementBylistItemNode.set(this._listItemNode, this);\n    /** @type {string|!Node} */\n    this._title = '';\n    if (title) {\n      this.title = title;\n    }\n    this._listItemNode.addEventListener(\n        'mousedown', /** @type {!EventListener} */ (this._handleMouseDown.bind(this)), false);\n    this._listItemNode.addEventListener(\n        'click', /** @type {!EventListener} */ (this._treeElementToggled.bind(this)), false);\n    this._listItemNode.addEventListener('dblclick', this._handleDoubleClick.bind(this), false);\n    ARIAUtils.markAsTreeitem(this._listItemNode);\n\n    /** @type {?Array<!TreeElement>} */\n    this._children = null;\n    this._childrenListNode = document.createElement('ol');\n    nodeToParentTreeElementMap.set(this._childrenListNode, this);\n    this._childrenListNode.classList.add('children');\n    ARIAUtils.markAsGroup(this._childrenListNode);\n\n    this._hidden = false;\n    this._selectable = true;\n    this.expanded = false;\n    this.selected = false;\n    /** @type {boolean} */\n    this._expandable;\n    this.setExpandable(expandable || false);\n    this._collapsible = true;\n    this.toggleOnClick = false;\n    /** @type {?HTMLButtonElement} */\n    this.button = null;\n    this.root = false;\n    /** @type {string} */\n    this._tooltip = '';\n    /** @type {?HTMLElement} */\n    this._leadingIconsElement = null;\n    /** @type {?HTMLElement} */\n    this._trailingIconsElement = null;\n    /** @type {?HTMLElement} */\n    this._selectionElement = null;\n  }\n\n  /**\n   * @param {!Node} node\n   * @return {!TreeElement|undefined}\n   */\n  static getTreeElementBylistItemNode(node) {\n    return treeElementBylistItemNode.get(node);\n  }\n\n  /**\n   * @param {?TreeElement} ancestor\n   * @return {boolean}\n   */\n  hasAncestor(ancestor) {\n    if (!ancestor) {\n      return false;\n    }\n\n    let currentNode = this.parent;\n    while (currentNode) {\n      if (ancestor === currentNode) {\n        return true;\n      }\n      currentNode = currentNode.parent;\n    }\n\n    return false;\n  }\n\n  /**\n   * @param {?TreeElement} ancestor\n   * @return {boolean}\n   */\n  hasAncestorOrSelf(ancestor) {\n    return this === ancestor || this.hasAncestor(ancestor);\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isHidden() {\n    if (this.hidden) {\n      return true;\n    }\n\n    let currentNode = this.parent;\n    while (currentNode) {\n      if (currentNode.hidden) {\n        return true;\n      }\n      currentNode = currentNode.parent;\n    }\n\n    return false;\n  }\n\n  /**\n   * @return {!Array.<!TreeElement>}\n   */\n  children() {\n    return this._children || [];\n  }\n\n  /**\n   * @return {number}\n   */\n  childCount() {\n    return this._children ? this._children.length : 0;\n  }\n\n  /**\n   * @return {?TreeElement}\n   */\n  firstChild() {\n    return this._children ? this._children[0] : null;\n  }\n\n  /**\n   * @return {?TreeElement}\n   */\n  lastChild() {\n    return this._children ? this._children[this._children.length - 1] : null;\n  }\n\n  /**\n   * @param {number} index\n   * @return {?TreeElement}\n   */\n  childAt(index) {\n    return this._children ? this._children[index] : null;\n  }\n\n  /**\n   * @param {!TreeElement} child\n   * @return {number}\n   */\n  indexOfChild(child) {\n    return this._children ? this._children.indexOf(child) : -1;\n  }\n\n  /**\n   * @param {!TreeElement} child\n   * @param {(function(!TreeElement, !TreeElement):number)=} comparator\n   */\n  appendChild(child, comparator) {\n    if (!this._children) {\n      this._children = [];\n    }\n\n    let insertionIndex;\n    if (comparator) {\n      insertionIndex = Platform.ArrayUtilities.lowerBound(this._children, child, comparator);\n    } else if (this.treeOutline && this.treeOutline._comparator) {\n      insertionIndex = Platform.ArrayUtilities.lowerBound(this._children, child, this.treeOutline._comparator);\n    } else {\n      insertionIndex = this._children.length;\n    }\n    this.insertChild(child, insertionIndex);\n  }\n\n  /**\n   * @param {!TreeElement} child\n   * @param {number} index\n   */\n  insertChild(child, index) {\n    if (!this._children) {\n      this._children = [];\n    }\n\n    if (!child) {\n      throw 'child can\\'t be undefined or null';\n    }\n\n    console.assert(\n        !child.parent, 'Attempting to insert a child that is already in the tree, reparenting is not supported.');\n\n    const previousChild = (index > 0 ? this._children[index - 1] : null);\n    if (previousChild) {\n      previousChild.nextSibling = child;\n      child.previousSibling = previousChild;\n    } else {\n      child.previousSibling = null;\n    }\n\n    const nextChild = this._children[index];\n    if (nextChild) {\n      nextChild.previousSibling = child;\n      child.nextSibling = nextChild;\n    } else {\n      child.nextSibling = null;\n    }\n\n    this._children.splice(index, 0, child);\n\n    this.setExpandable(true);\n    child.parent = this;\n\n    if (this.treeOutline) {\n      this.treeOutline._bindTreeElement(child);\n    }\n    for (let current = child.firstChild(); this.treeOutline && current;\n         current = current.traverseNextTreeElement(false, child, true)) {\n      this.treeOutline._bindTreeElement(current);\n    }\n    child.onattach();\n    child._ensureSelection();\n    if (this.treeOutline) {\n      this.treeOutline.dispatchEventToListeners(Events.ElementAttached, child);\n    }\n    const nextSibling = child.nextSibling ? child.nextSibling._listItemNode : null;\n    this._childrenListNode.insertBefore(child._listItemNode, nextSibling);\n    this._childrenListNode.insertBefore(child._childrenListNode, nextSibling);\n    if (child.selected) {\n      child.select();\n    }\n    if (child.expanded) {\n      child.expand();\n    }\n  }\n\n  /**\n   * @param {number} childIndex\n   */\n  removeChildAtIndex(childIndex) {\n    if (!this._children || childIndex < 0 || childIndex >= this._children.length) {\n      throw 'childIndex out of range';\n    }\n\n    const child = this._children[childIndex];\n    this._children.splice(childIndex, 1);\n\n    const parent = child.parent;\n    if (this.treeOutline && this.treeOutline.selectedTreeElement &&\n        this.treeOutline.selectedTreeElement.hasAncestorOrSelf(child)) {\n      if (child.nextSibling) {\n        child.nextSibling.select(true);\n      } else if (child.previousSibling) {\n        child.previousSibling.select(true);\n      } else if (parent) {\n        parent.select(true);\n      }\n    }\n\n    if (child.previousSibling) {\n      child.previousSibling.nextSibling = child.nextSibling;\n    }\n    if (child.nextSibling) {\n      child.nextSibling.previousSibling = child.previousSibling;\n    }\n    child.parent = null;\n\n    if (this.treeOutline) {\n      this.treeOutline._unbindTreeElement(child);\n    }\n    for (let current = child.firstChild(); this.treeOutline && current;\n         current = current.traverseNextTreeElement(false, child, true)) {\n      this.treeOutline._unbindTreeElement(current);\n    }\n\n    child._detach();\n    if (this.treeOutline) {\n      this.treeOutline.dispatchEventToListeners(Events.ElementsDetached);\n    }\n  }\n\n  /**\n   * @param {!TreeElement} child\n   */\n  removeChild(child) {\n    if (!child) {\n      throw 'child can\\'t be undefined or null';\n    }\n    if (child.parent !== this) {\n      return;\n    }\n\n    const childIndex = this._children ? this._children.indexOf(child) : -1;\n    if (childIndex === -1) {\n      throw 'child not found in this node\\'s children';\n    }\n\n    this.removeChildAtIndex(childIndex);\n  }\n\n  removeChildren() {\n    if (!this.root && this.treeOutline && this.treeOutline.selectedTreeElement &&\n        this.treeOutline.selectedTreeElement.hasAncestorOrSelf(this)) {\n      this.select(true);\n    }\n\n    if (this._children) {\n      for (const child of this._children) {\n        child.previousSibling = null;\n        child.nextSibling = null;\n        child.parent = null;\n\n        if (this.treeOutline) {\n          this.treeOutline._unbindTreeElement(child);\n        }\n        for (let current = child.firstChild(); this.treeOutline && current;\n             current = current.traverseNextTreeElement(false, child, true)) {\n          this.treeOutline._unbindTreeElement(current);\n        }\n        child._detach();\n      }\n    }\n    this._children = [];\n    if (this.treeOutline) {\n      this.treeOutline.dispatchEventToListeners(Events.ElementsDetached);\n    }\n  }\n\n  get selectable() {\n    if (this.isHidden()) {\n      return false;\n    }\n    return this._selectable;\n  }\n\n  set selectable(x) {\n    this._selectable = x;\n  }\n\n  get listItemElement() {\n    return this._listItemNode;\n  }\n\n  get childrenListElement() {\n    return this._childrenListNode;\n  }\n\n  /**\n   * @return {string|!Node}\n   */\n  get title() {\n    return this._title;\n  }\n\n  /**\n   * @param {string|!Node} x\n   */\n  set title(x) {\n    if (this._title === x) {\n      return;\n    }\n    this._title = x;\n\n    if (typeof x === 'string') {\n      this.titleElement.textContent = x;\n      this.tooltip = x;\n    } else {\n      this.titleElement = x;\n      this.tooltip = '';\n    }\n\n    this._listItemNode.removeChildren();\n    if (this._leadingIconsElement) {\n      this._listItemNode.appendChild(this._leadingIconsElement);\n    }\n    this._listItemNode.appendChild(this.titleElement);\n    if (this._trailingIconsElement) {\n      this._listItemNode.appendChild(this._trailingIconsElement);\n    }\n    this._ensureSelection();\n  }\n\n  /**\n   * @return {string}\n   */\n  titleAsText() {\n    if (!this._title) {\n      return '';\n    }\n    if (typeof this._title === 'string') {\n      return this._title;\n    }\n    return this._title.textContent || '';\n  }\n\n  /**\n   * @param {!Config<*>} editingConfig\n   */\n  startEditingTitle(editingConfig) {\n    InplaceEditor.startEditing(/** @type {!Element} */ (this.titleElement), editingConfig);\n    if (this.treeOutline) {\n      this.treeOutline.onStartedEditingTitle(this);\n    }\n  }\n\n  /**\n   * @param {!Array<!Icon>} icons\n   */\n  setLeadingIcons(icons) {\n    if (!this._leadingIconsElement && !icons.length) {\n      return;\n    }\n    if (!this._leadingIconsElement) {\n      this._leadingIconsElement = /** @type {!HTMLElement} */ (document.createElement('div'));\n      this._leadingIconsElement.classList.add('leading-icons');\n      this._leadingIconsElement.classList.add('icons-container');\n      this._listItemNode.insertBefore(this._leadingIconsElement, this.titleElement);\n      this._ensureSelection();\n    }\n    this._leadingIconsElement.removeChildren();\n    for (const icon of icons) {\n      this._leadingIconsElement.appendChild(icon);\n    }\n  }\n\n  /**\n   * @param {!Array<!Icon>} icons\n   */\n  setTrailingIcons(icons) {\n    if (!this._trailingIconsElement && !icons.length) {\n      return;\n    }\n    if (!this._trailingIconsElement) {\n      this._trailingIconsElement = /** @type {!HTMLElement} */ (document.createElement('div'));\n      this._trailingIconsElement.classList.add('trailing-icons');\n      this._trailingIconsElement.classList.add('icons-container');\n      this._listItemNode.appendChild(this._trailingIconsElement);\n      this._ensureSelection();\n    }\n    this._trailingIconsElement.removeChildren();\n    for (const icon of icons) {\n      this._trailingIconsElement.appendChild(icon);\n    }\n  }\n\n\n  /**\n   * @return {string}\n   */\n  get tooltip() {\n    return this._tooltip;\n  }\n\n  /**\n   * @param {string} x\n   */\n  set tooltip(x) {\n    if (this._tooltip === x) {\n      return;\n    }\n    this._tooltip = x;\n    Tooltip.install(this._listItemNode, x);\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isExpandable() {\n    return this._expandable;\n  }\n\n  /**\n   * @param {boolean} expandable\n   */\n  setExpandable(expandable) {\n    if (this._expandable === expandable) {\n      return;\n    }\n\n    this._expandable = expandable;\n\n    this._listItemNode.classList.toggle('parent', expandable);\n    if (!expandable) {\n      this.collapse();\n      ARIAUtils.unsetExpandable(this._listItemNode);\n    } else {\n      ARIAUtils.setExpanded(this._listItemNode, false);\n    }\n  }\n\n  /**\n   * @param {boolean} collapsible\n   */\n  setCollapsible(collapsible) {\n    if (this._collapsible === collapsible) {\n      return;\n    }\n\n    this._collapsible = collapsible;\n\n    this._listItemNode.classList.toggle('always-parent', !collapsible);\n    if (!collapsible) {\n      this.expand();\n    }\n  }\n\n  get hidden() {\n    return this._hidden;\n  }\n\n  set hidden(x) {\n    if (this._hidden === x) {\n      return;\n    }\n\n    this._hidden = x;\n\n    this._listItemNode.classList.toggle('hidden', x);\n    this._childrenListNode.classList.toggle('hidden', x);\n\n    if (x && this.treeOutline && this.treeOutline.selectedTreeElement &&\n        this.treeOutline.selectedTreeElement.hasAncestorOrSelf(this)) {\n      const hadFocus = this.treeOutline.selectedTreeElement.listItemElement.hasFocus();\n      this.treeOutline.forceSelect(!hadFocus, /* selectedByUser */ false);\n    }\n  }\n\n  invalidateChildren() {\n    if (this._children) {\n      this.removeChildren();\n      this._children = null;\n    }\n  }\n\n\n  _ensureSelection() {\n    if (!this.treeOutline || !this.treeOutline._renderSelection) {\n      return;\n    }\n    if (!this._selectionElement) {\n      this._selectionElement = /** @type {!HTMLElement} */ (document.createElement('div'));\n      this._selectionElement.classList.add('selection');\n      this._selectionElement.classList.add('fill');\n    }\n    this._listItemNode.insertBefore(this._selectionElement, this.listItemElement.firstChild);\n  }\n\n  /**\n   * @param {!MouseEvent} event\n   */\n  _treeElementToggled(event) {\n    const element = /** @type {?Node} */ (event.currentTarget);\n    if (!element || treeElementBylistItemNode.get(element) !== this || element.hasSelection()) {\n      return;\n    }\n\n    console.assert(Boolean(this.treeOutline));\n    const showSelectionOnKeyboardFocus = this.treeOutline ? this.treeOutline._showSelectionOnKeyboardFocus : false;\n    const toggleOnClick = this.toggleOnClick && (showSelectionOnKeyboardFocus || !this.selectable);\n    const isInTriangle = this.isEventWithinDisclosureTriangle(event);\n    if (!toggleOnClick && !isInTriangle) {\n      return;\n    }\n\n    if (this.expanded) {\n      if (event.altKey) {\n        this.collapseRecursively();\n      } else {\n        this.collapse();\n      }\n    } else {\n      if (event.altKey) {\n        this.expandRecursively();\n      } else {\n        this.expand();\n      }\n    }\n    event.consume();\n  }\n\n  /**\n   * @param {!MouseEvent} event\n   */\n  _handleMouseDown(event) {\n    const element = /** @type {?Node}*/ (event.currentTarget);\n    if (!element) {\n      return;\n    }\n    if (!this.selectable) {\n      return;\n    }\n    if (treeElementBylistItemNode.get(element) !== this) {\n      return;\n    }\n\n    if (this.isEventWithinDisclosureTriangle(event)) {\n      return;\n    }\n\n    this.selectOnMouseDown(event);\n  }\n\n  /**\n   * @param {!Event} event\n   */\n  _handleDoubleClick(event) {\n    const element = /** @type {?Node} */ (event.currentTarget);\n    if (!element || treeElementBylistItemNode.get(element) !== this) {\n      return;\n    }\n\n    const handled = this.ondblclick(event);\n    if (handled) {\n      return;\n    }\n    if (this._expandable && !this.expanded) {\n      this.expand();\n    }\n  }\n\n  _detach() {\n    this._listItemNode.remove();\n    this._childrenListNode.remove();\n  }\n\n  collapse() {\n    if (!this.expanded || !this._collapsible) {\n      return;\n    }\n    this._listItemNode.classList.remove('expanded');\n    this._childrenListNode.classList.remove('expanded');\n    ARIAUtils.setExpanded(this._listItemNode, false);\n    this.expanded = false;\n    this.oncollapse();\n    if (this.treeOutline) {\n      this.treeOutline.dispatchEventToListeners(Events.ElementCollapsed, this);\n    }\n\n    const selectedTreeElement = this.treeOutline && this.treeOutline.selectedTreeElement;\n    if (selectedTreeElement && selectedTreeElement.hasAncestor(this)) {\n      this.select(/* omitFocus */ true, /* selectedByUser */ true);\n    }\n  }\n\n  collapseRecursively() {\n    /** @type {?TreeElement} */\n    let item = this;\n    while (item) {\n      if (item.expanded) {\n        item.collapse();\n      }\n      item = item.traverseNextTreeElement(false, this, true);\n    }\n  }\n\n  collapseChildren() {\n    if (!this._children) {\n      return;\n    }\n    for (const child of this._children) {\n      child.collapseRecursively();\n    }\n  }\n\n  expand() {\n    if (!this._expandable || (this.expanded && this._children)) {\n      return;\n    }\n\n    // Set this before onpopulate. Since onpopulate can add elements, this makes\n    // sure the expanded flag is true before calling those functions. This prevents the possibility\n    // of an infinite loop if onpopulate were to call expand.\n\n    this.expanded = true;\n\n    this._populateIfNeeded();\n    this._listItemNode.classList.add('expanded');\n    this._childrenListNode.classList.add('expanded');\n    ARIAUtils.setExpanded(this._listItemNode, true);\n\n    if (this.treeOutline) {\n      this.onexpand();\n      this.treeOutline.dispatchEventToListeners(Events.ElementExpanded, this);\n    }\n  }\n\n  /**\n   * @param {number=} maxDepth\n   * @returns {!Promise<void>}\n   */\n  async expandRecursively(maxDepth) {\n    /** @type {?TreeElement} */\n    let item = this;\n    const info = {depthChange: 0};\n    let depth = 0;\n\n    // The Inspector uses TreeOutlines to represents object properties, so recursive expansion\n    // in some case can be infinite, since JavaScript objects can hold circular references.\n    // So default to a recursion cap of 3 levels, since that gives fairly good results.\n    if (maxDepth === undefined || isNaN(maxDepth)) {\n      maxDepth = 3;\n    }\n\n    while (item) {\n      await item._populateIfNeeded();\n\n      if (depth < maxDepth) {\n        item.expand();\n      }\n\n      item = item.traverseNextTreeElement(false, this, (depth >= maxDepth), info);\n      depth += info.depthChange;\n    }\n  }\n\n  /**\n   * @param {boolean} altKey\n   * @return {boolean}\n   */\n  collapseOrAscend(altKey) {\n    if (this.expanded && this._collapsible) {\n      if (altKey) {\n        this.collapseRecursively();\n      } else {\n        this.collapse();\n      }\n      return true;\n    }\n\n    if (!this.parent || this.parent.root) {\n      return false;\n    }\n\n    if (!this.parent.selectable) {\n      this.parent.collapse();\n      return true;\n    }\n\n    /** @type {?TreeElement} */\n    let nextSelectedElement = this.parent;\n    while (nextSelectedElement && !nextSelectedElement.selectable) {\n      nextSelectedElement = nextSelectedElement.parent;\n    }\n\n    if (!nextSelectedElement) {\n      return false;\n    }\n    nextSelectedElement.select(false, true);\n    return true;\n  }\n\n  /**\n   * @param {boolean} altKey\n   * @return {boolean}\n   */\n  descendOrExpand(altKey) {\n    if (!this._expandable) {\n      return false;\n    }\n\n    if (!this.expanded) {\n      if (altKey) {\n        this.expandRecursively();\n      } else {\n        this.expand();\n      }\n      return true;\n    }\n\n    let nextSelectedElement = this.firstChild();\n    while (nextSelectedElement && !nextSelectedElement.selectable) {\n      nextSelectedElement = nextSelectedElement.nextSibling;\n    }\n\n    if (!nextSelectedElement) {\n      return false;\n    }\n    nextSelectedElement.select(false, true);\n    return true;\n  }\n\n  /**\n   * @param {boolean=} center\n   */\n  reveal(center) {\n    let currentAncestor = this.parent;\n    while (currentAncestor && !currentAncestor.root) {\n      if (!currentAncestor.expanded) {\n        currentAncestor.expand();\n      }\n      currentAncestor = currentAncestor.parent;\n    }\n\n    if (this.treeOutline) {\n      this.treeOutline._deferredScrollIntoView(this, Boolean(center));\n    }\n  }\n\n  /**\n   * @return {boolean}\n   */\n  revealed() {\n    let currentAncestor = this.parent;\n    while (currentAncestor && !currentAncestor.root) {\n      if (!currentAncestor.expanded) {\n        return false;\n      }\n      currentAncestor = currentAncestor.parent;\n    }\n\n    return true;\n  }\n\n  /**\n   * @param {!MouseEvent} event\n   */\n  selectOnMouseDown(event) {\n    if (this.select(false, true)) {\n      event.consume(true);\n    }\n\n    if (this._listItemNode.draggable && this._selectionElement && this.treeOutline) {\n      const marginLeft =\n          this.treeOutline.element.getBoundingClientRect().left - this._listItemNode.getBoundingClientRect().left;\n      // By default the left margin extends far off screen. This is not a problem except when dragging an element.\n      // Setting the margin once here should be fine, because we believe the left margin should never change.\n      this._selectionElement.style.setProperty('margin-left', marginLeft + 'px');\n    }\n  }\n\n  /**\n   * @param {boolean=} omitFocus\n   * @param {boolean=} selectedByUser\n   * @return {boolean}\n   */\n  select(omitFocus, selectedByUser) {\n    if (!this.treeOutline || !this.selectable || this.selected) {\n      if (!omitFocus) {\n        this.listItemElement.focus();\n      }\n      return false;\n    }\n    // Wait to deselect this element so that focus only changes once\n    const lastSelected = this.treeOutline.selectedTreeElement;\n    this.treeOutline.selectedTreeElement = null;\n\n    if (this.treeOutline._rootElement === this) {\n      if (lastSelected) {\n        lastSelected.deselect();\n      }\n      if (!omitFocus) {\n        this.listItemElement.focus();\n      }\n      return false;\n    }\n\n    this.selected = true;\n\n    this.treeOutline.selectedTreeElement = this;\n    this.treeOutline.updateFocusable();\n    if (!omitFocus || this.treeOutline.contentElement.hasFocus()) {\n      this.listItemElement.focus();\n    }\n\n    this._listItemNode.classList.add('selected');\n    ARIAUtils.setSelected(this._listItemNode, true);\n    this.treeOutline.dispatchEventToListeners(Events.ElementSelected, this);\n    if (lastSelected) {\n      lastSelected.deselect();\n    }\n    return this.onselect(selectedByUser);\n  }\n\n  /**\n   * @param {boolean} focusable\n   */\n  _setFocusable(focusable) {\n    if (focusable) {\n      this._listItemNode.setAttribute('tabIndex', (this.treeOutline && this.treeOutline._preventTabOrder) ? '-1' : '0');\n      this._listItemNode.addEventListener('focus', this._boundOnFocus, false);\n      this._listItemNode.addEventListener('blur', this._boundOnBlur, false);\n    } else {\n      this._listItemNode.removeAttribute('tabIndex');\n      this._listItemNode.removeEventListener('focus', this._boundOnFocus, false);\n      this._listItemNode.removeEventListener('blur', this._boundOnBlur, false);\n    }\n  }\n\n  _onFocus() {\n    if (!this.treeOutline || this.treeOutline._useLightSelectionColor) {\n      return;\n    }\n    if (!this.treeOutline.contentElement.classList.contains('hide-selection-when-blurred')) {\n      this._listItemNode.classList.add('force-white-icons');\n    }\n  }\n\n  _onBlur() {\n    if (!this.treeOutline || this.treeOutline._useLightSelectionColor) {\n      return;\n    }\n    if (!this.treeOutline.contentElement.classList.contains('hide-selection-when-blurred')) {\n      this._listItemNode.classList.remove('force-white-icons');\n    }\n  }\n\n  /**\n   * @param {boolean=} omitFocus\n   */\n  revealAndSelect(omitFocus) {\n    this.reveal(true);\n    this.select(omitFocus);\n  }\n\n  deselect() {\n    const hadFocus = this._listItemNode.hasFocus();\n    this.selected = false;\n    this._listItemNode.classList.remove('selected');\n    ARIAUtils.clearSelected(this._listItemNode);\n    this._setFocusable(false);\n\n    if (this.treeOutline && this.treeOutline.selectedTreeElement === this) {\n      this.treeOutline.selectedTreeElement = null;\n      this.treeOutline.updateFocusable();\n      if (hadFocus) {\n        this.treeOutline.focus();\n      }\n    }\n  }\n\n  /**\n   * @returns {!Promise<void>}\n   */\n  async _populateIfNeeded() {\n    if (this.treeOutline && this._expandable && !this._children) {\n      this._children = [];\n      await this.onpopulate();\n    }\n  }\n\n  /**\n   * @return {!Promise<void>}\n   */\n  async onpopulate() {\n    // Overridden by subclasses.\n  }\n\n  /**\n   * @return {boolean}\n   */\n  onenter() {\n    return false;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  ondelete() {\n    return false;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  onspace() {\n    return false;\n  }\n\n  onbind() {\n  }\n\n  onunbind() {\n  }\n\n  onattach() {\n  }\n\n  onexpand() {\n  }\n\n  oncollapse() {\n  }\n\n  /**\n   * @param {!Event} e\n   * @return {boolean}\n   */\n  ondblclick(e) {\n    return false;\n  }\n\n  /**\n   * @param {boolean=} selectedByUser\n   * @return {boolean}\n   */\n  onselect(selectedByUser) {\n    return false;\n  }\n\n  /**\n   * @param {boolean} skipUnrevealed\n   * @param {?TreeElement=} stayWithin\n   * @param {boolean=} dontPopulate\n   * @param {!{depthChange:number}=} info\n   * @return {?TreeElement}\n   */\n  traverseNextTreeElement(skipUnrevealed, stayWithin, dontPopulate, info) {\n    if (!dontPopulate) {\n      this._populateIfNeeded();\n    }\n\n    if (info) {\n      info.depthChange = 0;\n    }\n\n    let element = skipUnrevealed ? (this.revealed() ? this.firstChild() : null) : this.firstChild();\n    if (element && (!skipUnrevealed || (skipUnrevealed && this.expanded))) {\n      if (info) {\n        info.depthChange = 1;\n      }\n      return element;\n    }\n\n    if (this === stayWithin) {\n      return null;\n    }\n\n    element = skipUnrevealed ? (this.revealed() ? this.nextSibling : null) : this.nextSibling;\n    if (element) {\n      return element;\n    }\n\n    element = this;\n    while (element && !element.root &&\n           !(skipUnrevealed ? (element.revealed() ? element.nextSibling : null) : element.nextSibling) &&\n           element.parent !== stayWithin) {\n      if (info) {\n        info.depthChange -= 1;\n      }\n      element = element.parent;\n    }\n\n    if (!element || element.root) {\n      return null;\n    }\n\n    return (skipUnrevealed ? (element.revealed() ? element.nextSibling : null) : element.nextSibling);\n  }\n\n  /**\n   * @param {boolean} skipUnrevealed\n   * @param {boolean=} dontPopulate\n   * @return {?TreeElement}\n   */\n  traversePreviousTreeElement(skipUnrevealed, dontPopulate) {\n    let element = skipUnrevealed ? (this.revealed() ? this.previousSibling : null) : this.previousSibling;\n    if (!dontPopulate && element) {\n      element._populateIfNeeded();\n    }\n\n    while (element &&\n           (skipUnrevealed ? (element.revealed() && element.expanded ? element.lastChild() : null) :\n                             element.lastChild())) {\n      if (!dontPopulate) {\n        element._populateIfNeeded();\n      }\n      element =\n          (skipUnrevealed ? (element.revealed() && element.expanded ? element.lastChild() : null) :\n                            element.lastChild());\n    }\n\n    if (element) {\n      return element;\n    }\n\n    if (!this.parent || this.parent.root) {\n      return null;\n    }\n\n    return this.parent;\n  }\n\n  /**\n   * @param {!MouseEvent} event\n   * @return {boolean}\n   */\n  isEventWithinDisclosureTriangle(event) {\n    const arrowToggleWidth = 10;\n    // FIXME: We should not use getComputedStyle(). For that we need to get rid of using ::before for disclosure triangle. (http://webk.it/74446)\n    const paddingLeftValue = window.getComputedStyle(this._listItemNode).paddingLeft;\n    console.assert(paddingLeftValue.endsWith('px'));\n    const computedLeftPadding = parseFloat(paddingLeftValue);\n    const left = this._listItemNode.totalOffsetLeft() + computedLeftPadding;\n    return event.pageX >= left && event.pageX <= left + arrowToggleWidth && this._expandable;\n  }\n}\n"]}
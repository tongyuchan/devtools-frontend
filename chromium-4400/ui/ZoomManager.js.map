{"version":3,"file":"ZoomManager.js","sourceRoot":"","sources":["../../../../../front_end/ui/ZoomManager.js"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,MAAM,MAAM,qBAAqB,CAAC;AAG9C;;GAEG;AACH,IAAI,mBAAmB,CAAC;AAExB,MAAM,OAAO,WAAY,SAAQ,MAAM,CAAC,aAAa,CAAC,aAAa;IACjE;;;;OAIG;IACH,YAAY,MAAM,EAAE,YAAY;QAC9B,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,aAAa,GAAG,YAAY,CAAC;QAClC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,CAAC;QACnD,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;IAC3E,CAAC;IAED;;OAEG;IACH,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,EAAC,QAAQ,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI,EAAC;QACpE,MAAM,EAAC,QAAQ,EAAE,GAAG,EAAE,YAAY,EAAC,GAAG,IAAI,CAAC;QAC3C,IAAI,CAAC,mBAAmB,IAAI,QAAQ,EAAE;YACpC,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,EAAE;gBACzB,MAAM,IAAI,KAAK,CACX,4EAA4E,IAAI,KAAK,EAAE,CAAC,KAAK,EAAE,CAAC,CAAC;aACtG;YAED,mBAAmB,GAAG,IAAI,WAAW,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC;SAC1D;QAED,OAAO,mBAAmB,CAAC;IAC7B,CAAC;IAED,MAAM,CAAC,cAAc;QACnB,mBAAmB,GAAG,SAAS,CAAC;IAClC,CAAC;IAED;;OAEG;IACH,UAAU;QACR,OAAO,IAAI,CAAC,WAAW,CAAC;IAC1B,CAAC;IAED;;;OAGG;IACH,QAAQ,CAAC,KAAK;QACZ,OAAO,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC;IAClC,CAAC;IAED;;;OAGG;IACH,QAAQ,CAAC,QAAQ;QACf,OAAO,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC;IACrC,CAAC;IAED,eAAe;QACb,MAAM,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC;QACvC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,CAAC;QACnD,IAAI,aAAa,KAAK,IAAI,CAAC,WAAW,EAAE;YACtC,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,WAAW,EAAE,EAAC,IAAI,EAAE,aAAa,EAAE,EAAE,EAAE,IAAI,CAAC,WAAW,EAAC,CAAC,CAAC;SAChG;IACH,CAAC;CACF;AAED,qBAAqB;AACrB,MAAM,CAAC,MAAM,MAAM,GAAG;IACpB,WAAW,EAAE,MAAM,CAAC,aAAa,CAAC;CACnC,CAAC","sourcesContent":["// Copyright 2014 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';\nimport * as Host from '../host/host.js';  // eslint-disable-line no-unused-vars\n\n/**\n * @type {!ZoomManager|undefined}\n */\nlet zoomManagerInstance;\n\nexport class ZoomManager extends Common.ObjectWrapper.ObjectWrapper {\n  /**\n   * @private\n   * @param {!Window} window\n   * @param {!Host.InspectorFrontendHostAPI.InspectorFrontendHostAPI} frontendHost\n   */\n  constructor(window, frontendHost) {\n    super();\n    this._frontendHost = frontendHost;\n    this._zoomFactor = this._frontendHost.zoomFactor();\n    window.addEventListener('resize', this._onWindowResize.bind(this), true);\n  }\n\n  /**\n   * @param {{forceNew: ?boolean, win: ?Window, frontendHost: ?Host.InspectorFrontendHostAPI.InspectorFrontendHostAPI}} opts\n   */\n  static instance(opts = {forceNew: null, win: null, frontendHost: null}) {\n    const {forceNew, win, frontendHost} = opts;\n    if (!zoomManagerInstance || forceNew) {\n      if (!win || !frontendHost) {\n        throw new Error(\n            `Unable to create zoom manager: window and frontendHost must be provided: ${new Error().stack}`);\n      }\n\n      zoomManagerInstance = new ZoomManager(win, frontendHost);\n    }\n\n    return zoomManagerInstance;\n  }\n\n  static removeInstance() {\n    zoomManagerInstance = undefined;\n  }\n\n  /**\n   * @return {number}\n   */\n  zoomFactor() {\n    return this._zoomFactor;\n  }\n\n  /**\n   * @param {number} value\n   * @return {number}\n   */\n  cssToDIP(value) {\n    return value * this._zoomFactor;\n  }\n\n  /**\n   * @param {number} valueDIP\n   * @return {number}\n   */\n  dipToCSS(valueDIP) {\n    return valueDIP / this._zoomFactor;\n  }\n\n  _onWindowResize() {\n    const oldZoomFactor = this._zoomFactor;\n    this._zoomFactor = this._frontendHost.zoomFactor();\n    if (oldZoomFactor !== this._zoomFactor) {\n      this.dispatchEventToListeners(Events.ZoomChanged, {from: oldZoomFactor, to: this._zoomFactor});\n    }\n  }\n}\n\n/** @enum {symbol} */\nexport const Events = {\n  ZoomChanged: Symbol('ZoomChanged')\n};\n"]}
{"version":3,"file":"Lazy.js","sourceRoot":"","sources":["../../../../../front_end/common/Lazy.js"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,MAAM,aAAa,GAAG,MAAM,CAAC,eAAe,CAAC,CAAC;AAC9C,MAAM,WAAW,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC;AAEpC;;;;GAIG;AACH,MAAM,UAAU,IAAI,CAAC,QAAQ;IAC3B,uBAAuB;IACvB,IAAI,KAAK,GAAG,aAAa,CAAC;IAC1B,qBAAqB;IACrB,IAAI,KAAK,GAAG,IAAI,CAAC;IAEjB,OAAO,GAAG,EAAE;QACV,IAAI,KAAK,KAAK,WAAW,EAAE;YACzB,MAAM,KAAK,CAAC;SACb;aAAM,IAAI,KAAK,KAAK,aAAa,EAAE;YAClC,OAAO,KAAK,CAAC;SACd;QAED,IAAI;YACF,KAAK,GAAG,QAAQ,EAAE,CAAC;YACnB,OAAO,KAAK,CAAC;SACd;QAAC,OAAO,GAAG,EAAE;YACZ,KAAK,GAAG,GAAG,CAAC;YACZ,KAAK,GAAG,WAAW,CAAC;YACpB,MAAM,KAAK,CAAC;SACb;IACH,CAAC,CAAC;AACJ,CAAC","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nconst UNINITIALIZED = Symbol('uninitialized');\nconst ERROR_STATE = Symbol('error');\n\n/**\n * @template T\n * @param {function():T} producer\n * @return {function():symbol|T}\n */\nexport function lazy(producer) {\n  /** @type {symbol|T} */\n  let value = UNINITIALIZED;\n  /** @type {?Error} */\n  let error = null;\n\n  return () => {\n    if (value === ERROR_STATE) {\n      throw error;\n    } else if (value !== UNINITIALIZED) {\n      return value;\n    }\n\n    try {\n      value = producer();\n      return value;\n    } catch (err) {\n      error = err;\n      value = ERROR_STATE;\n      throw error;\n    }\n  };\n}\n"]}
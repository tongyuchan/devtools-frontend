{"version":3,"file":"DataGrid.js","sourceRoot":"","sources":["../../../../../front_end/data_grid/DataGrid.js"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2008 Apple Inc. All Rights Reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *        notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *        notice, this list of conditions and the following disclaimer in the\n *        documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.         IN NO EVENT SHALL APPLE INC. OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../common/common.js';\nimport * as Platform from '../platform/platform.js';\nimport {ls} from '../platform/platform.js';\nimport * as UI from '../ui/ui.js';\n\n\n/** @type {!WeakMap<!Element, string>} */\nconst elementToLongTextMap = new WeakMap();\n\n/** @type {!WeakMap<!Node, string>} */\nconst nodeToColumnIdMap = new WeakMap();\n\n/** @type {!WeakMap<!Element, !UI.Icon.Icon>} */\nconst elementToSortIconMap = new WeakMap();\n\n/** @type {!WeakMap<!Element, number>} */\nconst elementToPreferedWidthMap = new WeakMap();\n\n/** @type {!WeakMap<!Element, number>} */\nconst elementToPositionMap = new WeakMap();\n\n/** @type {!WeakMap<!Element, number>} */\nconst elementToIndexMap = new WeakMap();\n\n\n/**\n * @template NODE_TYPE\n */\nexport class DataGridImpl extends Common.ObjectWrapper.ObjectWrapper {\n  /**\n   * @param {!Parameters} dataGridParameters\n   */\n  constructor(dataGridParameters) {\n    super();\n    const {displayName, columns: columnsArray, editCallback, deleteCallback, refreshCallback} = dataGridParameters;\n    this.element = document.createElement('div');\n    this.element.classList.add('data-grid');\n    UI.Utils.appendStyle(this.element, 'data_grid/dataGrid.css', {enableLegacyPatching: true});\n    this.element.tabIndex = 0;\n    this.element.addEventListener('keydown', this._keyDown.bind(this), false);\n    this.element.addEventListener('contextmenu', this._contextMenu.bind(this), true);\n    this.element.addEventListener('focusin', event => {\n      this.updateGridAccessibleNameOnFocus();\n      event.consume(true);\n    });\n    this.element.addEventListener('focusout', event => {\n      this.updateGridAccessibleName(/* text */ '');\n      event.consume(true);\n    });\n\n    UI.ARIAUtils.markAsApplication(this.element);\n    this._displayName = displayName;\n\n    this._editCallback = editCallback;\n    this._deleteCallback = deleteCallback;\n    this._refreshCallback = refreshCallback;\n\n    const headerContainer = this.element.createChild('div', 'header-container');\n    /** @type {!Element} */\n    this._headerTable = headerContainer.createChild('table', 'header');\n    // Hide the header table from screen readers since titles are also added to data table.\n    UI.ARIAUtils.markAsHidden(this._headerTable);\n    /** @type {!Object.<string, !Element>} */\n    this._headerTableHeaders = {};\n    /** @type {!Element} */\n    this._scrollContainer = this.element.createChild('div', 'data-container');\n    /** @type {!Element} */\n    this._dataTable = this._scrollContainer.createChild('table', 'data');\n\n    // FIXME: Add a createCallback which is different from editCallback and has different\n    // behavior when creating a new node.\n    if (editCallback) {\n      this._dataTable.addEventListener('dblclick', this._ondblclick.bind(this), false);\n    }\n    this._dataTable.addEventListener('mousedown', this._mouseDownInDataTable.bind(this));\n    this._dataTable.addEventListener('click', this._clickInDataTable.bind(this), true);\n\n    /** @type {boolean} */\n    this._inline = false;\n\n    /** @type {!Array.<!ColumnDescriptor>} */\n    this._columnsArray = [];\n    /** @type {!Object.<string, !ColumnDescriptor>} */\n    this._columns = {};\n    /** @type {!Array.<!ColumnDescriptor>} */\n    this.visibleColumnsArray = columnsArray;\n\n    columnsArray.forEach(column => this._innerAddColumn(column));\n\n    /** @type {?string} */\n    this._cellClass = null;\n\n    /** @type {!Element} */\n    this._headerTableColumnGroup = this._headerTable.createChild('colgroup');\n    /** @type {!HTMLTableSectionElement} */\n    this._headerTableBody = /** @type {!HTMLTableSectionElement} */ (this._headerTable.createChild('tbody'));\n    /** @type {!Element} */\n    this._headerRow = this._headerTableBody.createChild('tr');\n\n    /** @type {!Element} */\n    this._dataTableColumnGroup = this._dataTable.createChild('colgroup');\n    /**\n     * @type {!Element}\n     */\n    this.dataTableBody = this._dataTable.createChild('tbody');\n    /** @type {!HTMLElement} */\n    this._topFillerRow =\n        /** @type {!HTMLElement} */ (this.dataTableBody.createChild('tr', 'data-grid-filler-row revealed'));\n    /** @type {!HTMLElement} */\n    this._bottomFillerRow =\n        /** @type {!HTMLElement} */ (this.dataTableBody.createChild('tr', 'data-grid-filler-row revealed'));\n\n    this.setVerticalPadding(0, 0);\n    this._refreshHeader();\n\n    /** @type {boolean} */\n    this._editing = false;\n    /** @type {?DataGridNode<!NODE_TYPE>} */\n    this.selectedNode = null;\n    /** @type {boolean} */\n    this.expandNodesWhenArrowing = false;\n    this.setRootNode(/** @type {!DataGridNode<!NODE_TYPE>} */ (new DataGridNode()));\n\n    this.setHasSelection(false);\n\n    /** @type {number} */\n    this.indentWidth = 15;\n    /** @type {!Array.<!HTMLElement>} */\n    this._resizers = [];\n    /** @type {boolean} */\n    this._columnWidthsInitialized = false;\n    /** @type {number} */\n    this._cornerWidth = CornerWidth;\n    /** @type {!ResizeMethod} */\n    this._resizeMethod = ResizeMethod.Nearest;\n\n    /** @type {?function(!UI.ContextMenu.SubMenu):void} */\n    this._headerContextMenuCallback = null;\n    /** @type {?function(!UI.ContextMenu.ContextMenu, !DataGridNode<!NODE_TYPE>):void} */\n    this._rowContextMenuCallback = null;\n\n    /**\n     * @type {!WeakMap<!Node, !DataGridNode<!NODE_TYPE>>}\n     */\n    this.elementToDataGridNode = new WeakMap();\n  }\n\n  /**\n   * @return {?DataGridNode<!NODE_TYPE>|undefined}\n   */\n  _firstSelectableNode() {\n    let firstSelectableNode = this._rootNode;\n    while (firstSelectableNode && !firstSelectableNode.selectable) {\n      firstSelectableNode = firstSelectableNode.traverseNextNode(true) || undefined;\n    }\n    return firstSelectableNode;\n  }\n\n  /**\n   * @return {!DataGridNode<!NODE_TYPE>|undefined}\n   */\n  _lastSelectableNode() {\n    let lastSelectableNode = this._rootNode;\n    let iterator = this._rootNode;\n    while (iterator) {\n      if (iterator.selectable) {\n        lastSelectableNode = iterator;\n      }\n      iterator = iterator.traverseNextNode(true) || undefined;\n    }\n    return lastSelectableNode;\n  }\n\n  /**\n   * @param {!Element} element\n   * @param {*} value\n   */\n  setElementContent(element, value) {\n    const columnId = this.columnIdFromNode(element);\n    if (!columnId) {\n      return;\n    }\n    const column = this._columns[columnId];\n    if (column.dataType === DataType.Boolean) {\n      DataGridImpl.setElementBoolean(element, /** @type {boolean} */ (Boolean(value)));\n    } else if (value !== null) {\n      DataGridImpl.setElementText(element, /** @type {string} */ (value), Boolean(column.longText));\n    }\n  }\n\n  /**\n   * @param {!Element} element\n   * @param {string} newText\n   * @param {boolean} longText\n   */\n  static setElementText(element, newText, longText) {\n    if (longText && newText.length > 1000) {\n      element.textContent = Platform.StringUtilities.trimEndWithMaxLength(newText, 1000);\n      UI.Tooltip.Tooltip.install(element, newText);\n      elementToLongTextMap.set(element, newText);\n    } else {\n      element.textContent = newText;\n      UI.Tooltip.Tooltip.install(element, '');\n      elementToLongTextMap.delete(element);\n    }\n  }\n\n  /**\n   * @param {!Element} element\n   * @param {boolean} value\n   */\n  static setElementBoolean(element, value) {\n    element.textContent = value ? '\\u2713' : '';\n    UI.Tooltip.Tooltip.install(element, '');\n  }\n\n  /**\n   * @param {boolean} isStriped\n   */\n  setStriped(isStriped) {\n    this.element.classList.toggle('striped-data-grid', isStriped);\n  }\n\n  /**\n   * @param {boolean} focusable\n   */\n  setFocusable(focusable) {\n    this.element.tabIndex = focusable ? 0 : -1;\n    if (focusable === false) {\n      UI.ARIAUtils.removeRole(this.element);\n    }\n  }\n\n  /**\n   * @param {boolean} hasSelected\n   */\n  setHasSelection(hasSelected) {\n    // 'no-selection' class causes datagrid to have a focus-indicator border\n    this.element.classList.toggle('no-selection', !hasSelected);\n  }\n\n  /**\n   * @param {string=} text\n   */\n  updateGridAccessibleName(text) {\n    // Update the label with the provided text or the current selected node\n    const accessibleText = (this.selectedNode && this.selectedNode.existingElement()) ? this.selectedNode.nodeAccessibleText : '';\n    if (this.element === this.element.ownerDocument.deepActiveElement()) {\n      // Only alert if the datagrid has focus\n      UI.ARIAUtils.alert(text ? text : accessibleText, this.element);\n    }\n  }\n\n  updateGridAccessibleNameOnFocus() {\n    // When a grid gets focus\n    // 1) If an item is selected - Read the content of the row\n    let accessibleText;\n    if (this.selectedNode && this.selectedNode.existingElement()) {\n      let expandText = '';\n      if (this.selectedNode.hasChildren()) {\n        expandText = this.selectedNode.expanded ? ls`expanded` : ls`collapsed`;\n      }\n      const rowHeader = ls`${this._displayName} Row ${expandText}`;\n      accessibleText = `${rowHeader} ${this.selectedNode.nodeAccessibleText}`;\n    } else {\n      // 2) If there is no selected item - Read the name of the grid and give instructions\n      if (!this._rootNode) {\n        return;\n      }\n      const children = this._enumerateChildren(this._rootNode, [], 1);\n      const items = ls`Rows: ${children.length}`;\n      accessibleText = ls`${\n          this._displayName} ${items}, use the up and down arrow keys to navigate and interact with the rows of the table; Use browse mode to read cell by cell.`;\n    }\n    UI.ARIAUtils.alert(accessibleText, this.element);\n  }\n\n  /**\n   * @return {!Element}\n   */\n  headerTableBody() {\n    return this._headerTableBody;\n  }\n\n  /**\n   * @param {!ColumnDescriptor} column\n   * @param {number=} position\n   */\n  _innerAddColumn(column, position) {\n    column.defaultWeight = column.weight;\n\n    const columnId = column.id;\n    if (columnId in this._columns) {\n      this._innerRemoveColumn(columnId);\n    }\n\n    if (position === undefined) {\n      position = this._columnsArray.length;\n    }\n\n    this._columnsArray.splice(position, 0, column);\n    this._columns[columnId] = column;\n    if (column.disclosure) {\n      this.disclosureColumnId = columnId;\n    }\n\n    const cell = document.createElement('th');\n    cell.className = columnId + '-column';\n    nodeToColumnIdMap.set(cell, columnId);\n    this._headerTableHeaders[columnId] = cell;\n\n    const div = document.createElement('div');\n    if (column.titleDOMFragment) {\n      div.appendChild(column.titleDOMFragment);\n    } else {\n      div.textContent = column.title || null;\n    }\n    cell.appendChild(div);\n\n    if (column.sort) {\n      cell.classList.add(column.sort);\n      /** @type {!Element} */\n      this._sortColumnCell = cell;\n    }\n\n    if (column.sortable) {\n      cell.addEventListener('click', this._clickInHeaderCell.bind(this), false);\n      cell.classList.add('sortable');\n      const icon = UI.Icon.Icon.create('', 'sort-order-icon');\n      cell.createChild('div', 'sort-order-icon-container').appendChild(icon);\n      elementToSortIconMap.set(cell, icon);\n    }\n  }\n\n  /**\n   * @param {!ColumnDescriptor} column\n   * @param {number=} position\n   */\n  addColumn(column, position) {\n    this._innerAddColumn(column, position);\n  }\n\n  /**\n   * @param {string} columnId\n   */\n  _innerRemoveColumn(columnId) {\n    const column = this._columns[columnId];\n    if (!column) {\n      return;\n    }\n    delete this._columns[columnId];\n    const index = this._columnsArray.findIndex(columnConfig => columnConfig.id === columnId);\n    this._columnsArray.splice(index, 1);\n    const cell = this._headerTableHeaders[columnId];\n    if (cell.parentElement) {\n      cell.parentElement.removeChild(cell);\n    }\n    delete this._headerTableHeaders[columnId];\n  }\n\n  /**\n   * @param {string} columnId\n   */\n  removeColumn(columnId) {\n    this._innerRemoveColumn(columnId);\n  }\n\n  /**\n   * @param {string} cellClass\n   */\n  setCellClass(cellClass) {\n    this._cellClass = cellClass;\n  }\n\n  _refreshHeader() {\n    this._headerTableColumnGroup.removeChildren();\n    this._dataTableColumnGroup.removeChildren();\n    this._headerRow.removeChildren();\n    this._topFillerRow.removeChildren();\n    this._bottomFillerRow.removeChildren();\n\n    for (let i = 0; i < this.visibleColumnsArray.length; ++i) {\n      const column = this.visibleColumnsArray[i];\n      const columnId = column.id;\n      const headerColumn = /** @type {!HTMLElement} */ (this._headerTableColumnGroup.createChild('col'));\n      const dataColumn = /** @type {!HTMLElement} */ (this._dataTableColumnGroup.createChild('col'));\n      if (column.width) {\n        headerColumn.style.width = column.width;\n        dataColumn.style.width = column.width;\n      }\n      this._headerRow.appendChild(this._headerTableHeaders[columnId]);\n      const topFillerRowCell =\n          /** @type {!HTMLTableCellElement} */ (this._topFillerRow.createChild('th', 'top-filler-td'));\n      topFillerRowCell.textContent = column.title || null;\n      topFillerRowCell.scope = 'col';\n      const bottomFillerRowChild = this._bottomFillerRow.createChild('td', 'bottom-filler-td');\n      nodeToColumnIdMap.set(bottomFillerRowChild, columnId);\n    }\n\n    this._headerRow.createChild('th', 'corner');\n    const topFillerRowCornerCell =\n        /** @type {!HTMLTableCellElement} */ (this._topFillerRow.createChild('th', 'corner'));\n    topFillerRowCornerCell.classList.add('top-filler-td');\n    topFillerRowCornerCell.scope = 'col';\n    this._bottomFillerRow.createChild('td', 'corner').classList.add('bottom-filler-td');\n    this._headerTableColumnGroup.createChild('col', 'corner');\n    this._dataTableColumnGroup.createChild('col', 'corner');\n  }\n\n  /**\n   * @param {number} top\n   * @param {number} bottom\n   * @protected\n   */\n  setVerticalPadding(top, bottom) {\n    const topPx = top + 'px';\n    const bottomPx = (top || bottom) ? bottom + 'px' : 'auto';\n    if (this._topFillerRow.style.height === topPx && this._bottomFillerRow.style.height === bottomPx) {\n      return;\n    }\n    this._topFillerRow.style.height = topPx;\n    this._bottomFillerRow.style.height = bottomPx;\n    this.dispatchEventToListeners(Events.PaddingChanged);\n  }\n\n  /**\n   * @param {!DataGridNode<!NODE_TYPE>} rootNode\n   * @protected\n   */\n  setRootNode(rootNode) {\n    if (this._rootNode) {\n      this._rootNode.removeChildren();\n      this._rootNode.dataGrid = null;\n      this._rootNode._isRoot = false;\n    }\n    /** @type {!DataGridNode<!NODE_TYPE>} */\n    this._rootNode = rootNode;\n    rootNode._isRoot = true;\n    rootNode.setHasChildren(false);\n    rootNode._expanded = true;\n    rootNode._revealed = true;\n    rootNode.selectable = false;\n    rootNode.dataGrid = this;\n  }\n\n  /**\n   * @return {!DataGridNode<!NODE_TYPE>}\n   */\n  rootNode() {\n    let rootNode = this._rootNode;\n    if (!rootNode) {\n      rootNode = new DataGridNode();\n      this.setRootNode(rootNode);\n    }\n    return rootNode;\n  }\n\n  /**\n   * @param {!Event} event\n   */\n  _ondblclick(event) {\n    if (this._editing || this._editingNode) {\n      return;\n    }\n\n    const columnId = this.columnIdFromNode(/** @type {!Node} */ (event.target));\n    if (!columnId || !this._columns[columnId].editable) {\n      return;\n    }\n    this._startEditing(/** @type {!Node} */ (event.target));\n  }\n\n  /**\n   * @param {!DataGridNode<!NODE_TYPE>} node\n   * @param {number} cellIndex\n   */\n  _startEditingColumnOfDataGridNode(node, cellIndex) {\n    this._editing = true;\n    /** @type {?DataGridNode<!NODE_TYPE>} */\n    this._editingNode = node;\n    this._editingNode.select();\n\n    const editingNodeElement = this._editingNode._element;\n    if (!editingNodeElement) {\n      return;\n    }\n    const element = editingNodeElement.children[cellIndex];\n    const elementLongText = elementToLongTextMap.get(element);\n    if (elementLongText) {\n      element.textContent = elementLongText;\n    }\n    const column = this.visibleColumnsArray[cellIndex];\n    if (column.dataType === DataType.Boolean) {\n      const checkboxLabel = UI.UIUtils.CheckboxLabel.create(undefined, /** @type {boolean} */ (node.data[column.id]));\n      UI.ARIAUtils.setAccessibleName(checkboxLabel, column.title || '');\n\n      let hasChanged = false;\n      checkboxLabel.style.height = '100%';\n      const checkboxElement = checkboxLabel.checkboxElement;\n      checkboxElement.classList.add('inside-datagrid');\n      const initialValue = checkboxElement.checked;\n\n      checkboxElement.addEventListener('change', () => {\n        hasChanged = true;\n        this._editingCommitted(element, checkboxElement.checked, initialValue, undefined, 'forward');\n      }, false);\n\n      checkboxElement.addEventListener('keydown', event => {\n        if (event.key === 'Tab') {\n          event.consume(true);\n          hasChanged = true;\n          return this._editingCommitted(\n              element, checkboxElement.checked, initialValue, undefined, event.shiftKey ? 'backward' : 'forward');\n        }\n        if (event.key === ' ') {\n          event.consume(true);\n          checkboxElement.checked = !checkboxElement.checked;\n        } else if (event.key === 'Enter') {\n          event.consume(true);\n          hasChanged = true;\n          this._editingCommitted(element, checkboxElement.checked, initialValue, undefined, 'forward');\n        }\n      }, false);\n\n      checkboxElement.addEventListener('blur', () => {\n        if (hasChanged) {\n          return;\n        }\n        this._editingCommitted(element, checkboxElement.checked, checkboxElement.checked, undefined, 'next');\n      }, false);\n\n      element.innerHTML = '';\n      element.appendChild(checkboxLabel);\n      checkboxElement.focus();\n    } else {\n      UI.InplaceEditor.InplaceEditor.startEditing(element, this._startEditingConfig(element));\n      const componentSelection = element.getComponentSelection();\n      if (componentSelection) {\n        componentSelection.selectAllChildren(element);\n      }\n    }\n  }\n\n  /**\n   * @param {!DataGridNode<!NODE_TYPE>} node\n   * @param {string} columnIdentifier\n   */\n  startEditingNextEditableColumnOfDataGridNode(node, columnIdentifier) {\n    const column = this._columns[columnIdentifier];\n    const cellIndex = this.visibleColumnsArray.indexOf(column);\n    const nextEditableColumn = this._nextEditableColumn(cellIndex);\n    if (nextEditableColumn !== -1) {\n      this._startEditingColumnOfDataGridNode(node, nextEditableColumn);\n    }\n  }\n\n  /**\n   * @param {!Node} target\n   */\n  _startEditing(target) {\n    const element = /** @type {?Element} */ (UI.UIUtils.enclosingNodeOrSelfWithNodeName(target, 'td'));\n    if (!element) {\n      return;\n    }\n\n    this._editingNode = this.dataGridNodeFromNode(target);\n    if (!this._editingNode) {\n      if (!this.creationNode) {\n        return;\n      }\n      this._editingNode = this.creationNode;\n    }\n\n    // Force editing the 1st column when editing the creation node\n    if (this._editingNode instanceof CreationDataGridNode && this._editingNode.isCreationNode) {\n      this._startEditingColumnOfDataGridNode(this._editingNode, this._nextEditableColumn(-1));\n      return;\n    }\n\n    const columnId = this.columnIdFromNode(target);\n    if (!columnId) {\n      return;\n    }\n    const column = this._columns[columnId];\n    const cellIndex = this.visibleColumnsArray.indexOf(column);\n    if (this._editingNode) {\n      this._startEditingColumnOfDataGridNode(this._editingNode, cellIndex);\n    }\n  }\n\n  renderInline() {\n    this.element.classList.add('inline');\n    this._cornerWidth = 0;\n    this._inline = true;\n    this.updateWidths();\n  }\n\n  /**\n   * @param {!Element} element\n   * @return {!UI.InplaceEditor.Config<?>}\n   */\n  _startEditingConfig(element) {\n    return new UI.InplaceEditor.Config(this._editingCommitted.bind(this), this._editingCancelled.bind(this));\n  }\n\n  /**\n   * @param {!Element} element\n   * @param {*} newText\n   * @param {*} oldText\n   * @param {string|undefined} context\n   * @param {string} moveDirection\n   */\n  _editingCommitted(element, newText, oldText, context, moveDirection) {\n    const columnId = this.columnIdFromNode(element);\n    if (!columnId) {\n      this._editingCancelled(element);\n      return;\n    }\n    const column = this._columns[columnId];\n    const cellIndex = this.visibleColumnsArray.indexOf(column);\n    if (!this._editingNode) {\n      return;\n    }\n    const valueBeforeEditing = /** @type {string|boolean} */ (\n        this._editingNode.data[columnId] === null ? '' : this._editingNode.data[columnId]);\n    const currentEditingNode = this._editingNode;\n\n    /**\n     * @param {boolean} wasChange\n     * @this {DataGridImpl<!NODE_TYPE>}\n     */\n    function moveToNextIfNeeded(wasChange) {\n      if (!moveDirection) {\n        return;\n      }\n\n      if (moveDirection === 'forward') {\n        const firstEditableColumn = this._nextEditableColumn(-1);\n        const isCreationNode = currentEditingNode instanceof CreationDataGridNode && currentEditingNode.isCreationNode;\n        if (isCreationNode && cellIndex === firstEditableColumn && !wasChange) {\n          return;\n        }\n\n        const nextEditableColumn = this._nextEditableColumn(cellIndex);\n        if (nextEditableColumn !== -1) {\n          this._startEditingColumnOfDataGridNode(currentEditingNode, nextEditableColumn);\n          return;\n        }\n\n        const nextDataGridNode = currentEditingNode.traverseNextNode(true, null, true);\n        if (nextDataGridNode) {\n          this._startEditingColumnOfDataGridNode(nextDataGridNode, firstEditableColumn);\n          return;\n        }\n        if (isCreationNode && wasChange && this.creationNode) {\n          this.addCreationNode(false);\n          this._startEditingColumnOfDataGridNode(this.creationNode, firstEditableColumn);\n          return;\n        }\n        return;\n      }\n\n      if (moveDirection === 'backward') {\n        const prevEditableColumn = this._nextEditableColumn(cellIndex, true);\n        if (prevEditableColumn !== -1) {\n          this._startEditingColumnOfDataGridNode(currentEditingNode, prevEditableColumn);\n          return;\n        }\n\n        const lastEditableColumn = this._nextEditableColumn(this.visibleColumnsArray.length, true);\n        const nextDataGridNode = currentEditingNode.traversePreviousNode(true, true);\n        if (nextDataGridNode) {\n          this._startEditingColumnOfDataGridNode(nextDataGridNode, lastEditableColumn);\n        }\n        return;\n      }\n    }\n\n    // Show trimmed text after editing.\n    this.setElementContent(element, newText);\n\n    if (valueBeforeEditing === newText) {\n      this._editingCancelled(element);\n      moveToNextIfNeeded.call(this, false);\n      return;\n    }\n\n    // Update the text in the datagrid that we typed\n    this._editingNode.data[columnId] = newText;\n    if (!this._editCallback) {\n      return;\n    }\n    // Make the callback - expects an editing node (table row), the column number that is being edited,\n    // the text that used to be there, and the new text.\n    this._editCallback(this._editingNode, columnId, valueBeforeEditing, newText);\n\n    if (this._editingNode instanceof CreationDataGridNode && this._editingNode.isCreationNode) {\n      this.addCreationNode(false);\n    }\n\n    this._editingCancelled(element);\n    moveToNextIfNeeded.call(this, true);\n  }\n\n  /**\n   * @param {!Element} element\n   */\n  _editingCancelled(element) {\n    this._editing = false;\n    this._editingNode = null;\n  }\n\n  /**\n   * @param {number} cellIndex\n   * @param {boolean=} moveBackward\n   * @return {number}\n   */\n  _nextEditableColumn(cellIndex, moveBackward) {\n    const increment = moveBackward ? -1 : 1;\n    const columns = this.visibleColumnsArray;\n    for (let i = cellIndex + increment; (i >= 0) && (i < columns.length); i += increment) {\n      if (columns[i].editable) {\n        return i;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * @return {?string}\n   */\n  sortColumnId() {\n    if (!this._sortColumnCell) {\n      return null;\n    }\n    return nodeToColumnIdMap.get(this._sortColumnCell) || null;\n  }\n\n  /**\n   * @return {?string}\n   */\n  sortOrder() {\n    if (!this._sortColumnCell || this._sortColumnCell.classList.contains(Order.Ascending)) {\n      return Order.Ascending;\n    }\n    if (this._sortColumnCell.classList.contains(Order.Descending)) {\n      return Order.Descending;\n    }\n    return null;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isSortOrderAscending() {\n    return !this._sortColumnCell || this._sortColumnCell.classList.contains(Order.Ascending);\n  }\n\n  /**\n   * @param {!Array.<number>} widths\n   * @param {number} minPercent\n   * @param {number=} maxPercent\n   * @return {!Array.<number>}\n   */\n  _autoSizeWidths(widths, minPercent, maxPercent) {\n    if (minPercent) {\n      minPercent = Math.min(minPercent, Math.floor(100 / widths.length));\n    }\n    let totalWidth = 0;\n    for (let i = 0; i < widths.length; ++i) {\n      totalWidth += widths[i];\n    }\n    let totalPercentWidth = 0;\n    for (let i = 0; i < widths.length; ++i) {\n      let width = Math.round(100 * widths[i] / totalWidth);\n      if (minPercent && width < minPercent) {\n        width = minPercent;\n      } else if (maxPercent && width > maxPercent) {\n        width = maxPercent;\n      }\n      totalPercentWidth += width;\n      widths[i] = width;\n    }\n    let recoupPercent = totalPercentWidth - 100;\n\n    while (minPercent && recoupPercent > 0) {\n      for (let i = 0; i < widths.length; ++i) {\n        if (widths[i] > minPercent) {\n          --widths[i];\n          --recoupPercent;\n          if (!recoupPercent) {\n            break;\n          }\n        }\n      }\n    }\n\n    while (maxPercent && recoupPercent < 0) {\n      for (let i = 0; i < widths.length; ++i) {\n        if (widths[i] < maxPercent) {\n          ++widths[i];\n          ++recoupPercent;\n          if (!recoupPercent) {\n            break;\n          }\n        }\n      }\n    }\n\n    return widths;\n  }\n\n  /**\n   * The range of |minPercent| and |maxPercent| is [0, 100].\n   * @param {number} minPercent\n   * @param {number=} maxPercent\n   * @param {number=} maxDescentLevel\n   */\n  autoSizeColumns(minPercent, maxPercent, maxDescentLevel) {\n    let widths = [];\n    for (let i = 0; i < this._columnsArray.length; ++i) {\n      widths.push((this._columnsArray[i].title || '').length);\n    }\n\n    maxDescentLevel = maxDescentLevel || 0;\n    if (!this._rootNode) {\n      return;\n    }\n    const children = this._enumerateChildren(this._rootNode, [], maxDescentLevel + 1);\n    for (let i = 0; i < children.length; ++i) {\n      const node = children[i];\n      for (let j = 0; j < this._columnsArray.length; ++j) {\n        const text = String(node.data[this._columnsArray[j].id]);\n        if (text.length > widths[j]) {\n          widths[j] = text.length;\n        }\n      }\n    }\n\n    widths = this._autoSizeWidths(widths, minPercent, maxPercent);\n\n    for (let i = 0; i < this._columnsArray.length; ++i) {\n      this._columnsArray[i].weight = widths[i];\n    }\n    this._columnWidthsInitialized = false;\n    this.updateWidths();\n  }\n\n  /**\n   * @param {!DataGridNode<!NODE_TYPE>} rootNode\n   * @param {!Array<!DataGridNode<!NODE_TYPE>>} result\n   * @param {number} maxLevel\n   * @return {!Array<!DataGridNode<!NODE_TYPE>>}\n   */\n  _enumerateChildren(rootNode, result, maxLevel) {\n    if (!rootNode._isRoot) {\n      result.push(rootNode);\n    }\n    if (!maxLevel) {\n      return [];\n    }\n    for (let i = 0; i < rootNode.children.length; ++i) {\n      this._enumerateChildren(rootNode.children[i], result, maxLevel - 1);\n    }\n    return result;\n  }\n\n  onResize() {\n    this.updateWidths();\n  }\n\n  // Updates the widths of the table, including the positions of the column\n  // resizers.\n  //\n  // IMPORTANT: This function MUST be called once after the element of the\n  // DataGrid is attached to its parent element and every subsequent time the\n  // width of the parent element is changed in order to make it possible to\n  // resize the columns.\n  //\n  // If this function is not called after the DataGrid is attached to its\n  // parent element, then the DataGrid's columns will not be resizable.\n  updateWidths() {\n    // Do not attempt to use offsetes if we're not attached to the document tree yet.\n    if (!this._columnWidthsInitialized && this.element.offsetWidth) {\n      // Give all the columns initial widths now so that during a resize,\n      // when the two columns that get resized get a percent value for\n      // their widths, all the other columns already have percent values\n      // for their widths.\n\n      // Use container size to avoid changes of table width caused by change of column widths.\n      const tableWidth = this.element.offsetWidth - this._cornerWidth;\n      const cells = this._headerTableBody.rows[0].cells;\n      const numColumns = cells.length - 1;  // Do not process corner column.\n      for (let i = 0; i < numColumns; i++) {\n        const column = this.visibleColumnsArray[i];\n        if (!column.weight) {\n          column.weight = 100 * cells[i].offsetWidth / tableWidth || 10;\n        }\n      }\n      this._columnWidthsInitialized = true;\n    }\n    this._applyColumnWeights();\n  }\n\n  /**\n   * @param {string} columnId\n   * @returns {number}\n   */\n  indexOfVisibleColumn(columnId) {\n    return this.visibleColumnsArray.findIndex(column => column.id === columnId);\n  }\n\n  /**\n   * @param {string} name\n   */\n  setName(name) {\n    this._columnWeightsSetting =\n        Common.Settings.Settings.instance().createSetting('dataGrid-' + name + '-columnWeights', {});\n    this._loadColumnWeights();\n  }\n\n  _resetColumnWeights() {\n    for (const column of this._columnsArray) {\n      if (!column.defaultWeight) {\n        continue;\n      }\n      column.weight = column.defaultWeight;\n    }\n    this._applyColumnWeights();\n    this._saveColumnWeights();\n  }\n\n  _loadColumnWeights() {\n    if (!this._columnWeightsSetting) {\n      return;\n    }\n    const weights = this._columnWeightsSetting.get();\n    for (let i = 0; i < this._columnsArray.length; ++i) {\n      const column = this._columnsArray[i];\n      const weight = weights[column.id];\n      if (weight) {\n        column.weight = weight;\n      }\n    }\n    this._applyColumnWeights();\n  }\n\n  _saveColumnWeights() {\n    if (!this._columnWeightsSetting) {\n      return;\n    }\n    /** @type {!Object<string,*>} */\n    const weights = {};\n    for (let i = 0; i < this._columnsArray.length; ++i) {\n      const column = this._columnsArray[i];\n      weights[column.id] = column.weight;\n    }\n    this._columnWeightsSetting.set(weights);\n  }\n\n  wasShown() {\n    this._loadColumnWeights();\n  }\n\n  willHide() {\n  }\n\n  _applyColumnWeights() {\n    let tableWidth = this.element.offsetWidth - this._cornerWidth;\n    if (tableWidth <= 0) {\n      return;\n    }\n\n    let sumOfWeights = 0.0;\n    const fixedColumnWidths = [];\n    for (let i = 0; i < this.visibleColumnsArray.length; ++i) {\n      const column = this.visibleColumnsArray[i];\n      if (column.fixedWidth) {\n        const currentChild = this._headerTableColumnGroup.children[i];\n        const width = elementToPreferedWidthMap.get(currentChild) || this._headerTableBody.rows[0].cells[i].offsetWidth;\n        fixedColumnWidths[i] = width;\n        tableWidth -= width;\n      } else {\n        sumOfWeights += (this.visibleColumnsArray[i].weight || 0);\n      }\n    }\n    let sum = 0;\n    let lastOffset = 0;\n    const minColumnWidth = 14;  // px\n\n    for (let i = 0; i < this.visibleColumnsArray.length; ++i) {\n      const column = this.visibleColumnsArray[i];\n      let width;\n      if (column.fixedWidth) {\n        width = fixedColumnWidths[i];\n      } else {\n        sum += (column.weight || 0);\n        const offset = (sum * tableWidth / sumOfWeights) | 0;\n        width = Math.max(offset - lastOffset, minColumnWidth);\n        lastOffset = offset;\n      }\n      this._setPreferredWidth(i, width);\n    }\n\n    this._positionResizers();\n  }\n\n  /**\n   * @param {!Set<string>} columnsVisibility\n   */\n  setColumnsVisiblity(columnsVisibility) {\n    this.visibleColumnsArray = [];\n    for (const column of this._columnsArray) {\n      if (columnsVisibility.has(column.id)) {\n        this.visibleColumnsArray.push(column);\n      }\n    }\n    this._refreshHeader();\n    this._applyColumnWeights();\n    const nodes = this._enumerateChildren(this.rootNode(), [], -1);\n    for (const node of nodes) {\n      node.refresh();\n    }\n  }\n\n  get scrollContainer() {\n    return /** @type {!HTMLElement} */ (this._scrollContainer);\n  }\n\n  _positionResizers() {\n    const headerTableColumns = this._headerTableColumnGroup.children;\n    const numColumns = headerTableColumns.length - 1;  // Do not process corner column.\n    /** @type {!Array<number>} */\n    const left = [];\n    const resizers = this._resizers;\n\n    while (resizers.length > numColumns - 1) {\n      const resizer = resizers.pop();\n      if (resizer) {\n        resizer.remove();\n      }\n    }\n\n    for (let i = 0; i < numColumns - 1; i++) {\n      // Get the width of the cell in the first (and only) row of the\n      // header table in order to determine the width of the column, since\n      // it is not possible to query a column for its width.\n      left[i] = (left[i - 1] || 0) + this._headerTableBody.rows[0].cells[i].offsetWidth;\n    }\n\n    // Make n - 1 resizers for n columns.\n    for (let i = 0; i < numColumns - 1; i++) {\n      let resizer = resizers[i];\n      if (!resizer) {\n        // This is the first call to updateWidth, so the resizers need\n        // to be created.\n        resizer = document.createElement('div');\n        elementToIndexMap.set(resizer, i);\n        resizer.classList.add('data-grid-resizer');\n        // This resizer is associated with the column to its right.\n        UI.UIUtils.installDragHandle(\n            resizer, this._startResizerDragging.bind(this), this._resizerDragging.bind(this),\n            this._endResizerDragging.bind(this), 'col-resize');\n        this.element.appendChild(resizer);\n        resizers.push(/** @type {!HTMLElement} */ (resizer));\n      }\n      if (elementToPositionMap.get(resizer) !== left[i]) {\n        elementToPositionMap.set(resizer, left[i]);\n        resizer.style.left = left[i] + 'px';\n      }\n    }\n  }\n\n  /**\n   * @param {boolean=} hasChildren\n   */\n  addCreationNode(hasChildren) {\n    if (this.creationNode) {\n      this.creationNode.makeNormal();\n    }\n    /** @type {!Object<string,*>} */\n    const emptyData = {};\n    for (const column in this._columns) {\n      emptyData[column] = null;\n    }\n    this.creationNode = new CreationDataGridNode(emptyData, hasChildren);\n    this.rootNode().appendChild(this.creationNode);\n  }\n\n  /**\n   * @param {!Event} event\n   */\n  _keyDown(event) {\n    if (!(event instanceof KeyboardEvent)) {\n      return;\n    }\n    if (event.shiftKey || event.metaKey || event.ctrlKey || this._editing || UI.UIUtils.isEditing()) {\n      return;\n    }\n\n    let handled = false;\n    let nextSelectedNode;\n    if (!this.selectedNode) {\n      // Select the first or last node based on the arrow key direction\n      if (event.key === 'ArrowUp' && !event.altKey) {\n        nextSelectedNode = this._lastSelectableNode();\n      } else if (event.key === 'ArrowDown' && !event.altKey) {\n        nextSelectedNode = this._firstSelectableNode();\n      }\n      handled = nextSelectedNode ? true : false;\n    } else if (event.key === 'ArrowUp' && !event.altKey) {\n      nextSelectedNode = this.selectedNode.traversePreviousNode(true);\n      while (nextSelectedNode && !nextSelectedNode.selectable) {\n        nextSelectedNode = nextSelectedNode.traversePreviousNode(true);\n      }\n      handled = nextSelectedNode ? true : false;\n    } else if (event.key === 'ArrowDown' && !event.altKey) {\n      nextSelectedNode = this.selectedNode.traverseNextNode(true);\n      while (nextSelectedNode && !nextSelectedNode.selectable) {\n        nextSelectedNode = nextSelectedNode.traverseNextNode(true);\n      }\n      handled = nextSelectedNode ? true : false;\n    } else if (event.key === 'ArrowLeft') {\n      if (this.selectedNode.expanded) {\n        if (event.altKey) {\n          this.selectedNode.collapseRecursively();\n        } else {\n          this.selectedNode.collapse();\n        }\n        handled = true;\n      } else if (this.selectedNode.parent && !this.selectedNode.parent._isRoot) {\n        handled = true;\n        if (this.selectedNode.parent.selectable) {\n          nextSelectedNode = this.selectedNode.parent;\n          handled = nextSelectedNode ? true : false;\n        } else if (this.selectedNode.parent) {\n          this.selectedNode.parent.collapse();\n        }\n      }\n    } else if (event.key === 'ArrowRight') {\n      if (!this.selectedNode.revealed) {\n        this.selectedNode.reveal();\n        handled = true;\n      } else if (this.selectedNode.hasChildren()) {\n        handled = true;\n        if (this.selectedNode.expanded) {\n          nextSelectedNode = this.selectedNode.children[0];\n          handled = nextSelectedNode ? true : false;\n        } else {\n          if (event.altKey) {\n            this.selectedNode.expandRecursively();\n          } else {\n            this.selectedNode.expand();\n          }\n        }\n      }\n    } else if (event.keyCode === 8 || event.keyCode === 46) {\n      if (this._deleteCallback) {\n        handled = true;\n        this._deleteCallback(this.selectedNode);\n      }\n    } else if (event.key === 'Enter') {\n      if (this._editCallback) {\n        handled = true;\n        const selectedNodeElement = this.selectedNode._element;\n        if (!selectedNodeElement) {\n          return;\n        }\n        this._startEditing(selectedNodeElement.children[this._nextEditableColumn(-1)]);\n      } else {\n        this.dispatchEventToListeners(Events.OpenedNode, this.selectedNode);\n      }\n    }\n\n    if (nextSelectedNode) {\n      nextSelectedNode.reveal();\n      nextSelectedNode.select();\n    }\n\n    if ((event.key === 'ArrowUp' || event.key === 'ArrowDown' || event.key === 'ArrowLeft' ||\n         event.key === 'ArrowRight') &&\n        document.activeElement !== this.element) {\n      // crbug.com/1005449\n      // navigational keys pressed but current DataGrid panel has lost focus;\n      // re-focus to ensure subsequent keydowns can be registered within this DataGrid\n      this.element.focus();\n    }\n\n    if (handled) {\n      event.consume(true);\n    }\n  }\n\n  /**\n   * @param {?DataGridNode<!NODE_TYPE>} root\n   * @param {boolean} onlyAffectsSubtree\n   */\n  updateSelectionBeforeRemoval(root, onlyAffectsSubtree) {\n    let ancestor = this.selectedNode;\n    while (ancestor && ancestor !== root) {\n      ancestor = ancestor.parent;\n    }\n    // Selection is not in the subtree being deleted.\n    if (!ancestor) {\n      return;\n    }\n\n    let nextSelectedNode;\n    // Skip subtree being deleted when looking for the next selectable node.\n    for (ancestor = root; ancestor && !ancestor.nextSibling; ancestor = ancestor.parent) {\n    }\n    if (ancestor) {\n      nextSelectedNode = ancestor.nextSibling;\n    }\n    while (nextSelectedNode && !nextSelectedNode.selectable) {\n      nextSelectedNode = nextSelectedNode.traverseNextNode(true);\n    }\n    const isCreationNode = nextSelectedNode instanceof CreationDataGridNode && nextSelectedNode.isCreationNode;\n    if (!nextSelectedNode || isCreationNode) {\n      if (!root) {\n        return;\n      }\n      nextSelectedNode = root.traversePreviousNode(true);\n      while (nextSelectedNode && !nextSelectedNode.selectable) {\n        nextSelectedNode = nextSelectedNode.traversePreviousNode(true);\n      }\n    }\n    if (nextSelectedNode) {\n      nextSelectedNode.reveal();\n      nextSelectedNode.select();\n    } else if (this.selectedNode) {\n      this.selectedNode.deselect();\n    }\n  }\n\n  /**\n   * @param {!Node} target\n   * @return {?DataGridNode<!NODE_TYPE>}\n   */\n  dataGridNodeFromNode(target) {\n    const rowElement = UI.UIUtils.enclosingNodeOrSelfWithNodeName(target, 'tr');\n    return (rowElement && this.elementToDataGridNode.get(rowElement)) || null;\n  }\n\n  /**\n   * @param {!Node} target\n   * @return {?string}\n   */\n  columnIdFromNode(target) {\n    const cellElement = UI.UIUtils.enclosingNodeOrSelfWithNodeName(target, 'td');\n    return (cellElement && nodeToColumnIdMap.get(cellElement)) || null;\n  }\n\n  /**\n   * @param {!Event} event\n   */\n  _clickInHeaderCell(event) {\n    const cell = UI.UIUtils.enclosingNodeOrSelfWithNodeName(/** @type {!Node} */ (event.target), 'th');\n    if (!cell) {\n      return;\n    }\n    this._sortByColumnHeaderCell(/** @type {!HTMLElement} */ (cell));\n  }\n\n  /**\n   * @param {!Element} cell\n   */\n  _sortByColumnHeaderCell(cell) {\n    if (!nodeToColumnIdMap.has(cell) || !cell.classList.contains('sortable')) {\n      return;\n    }\n\n    let sortOrder = Order.Ascending;\n    if ((cell === this._sortColumnCell) && this.isSortOrderAscending()) {\n      sortOrder = Order.Descending;\n    }\n\n    if (this._sortColumnCell) {\n      this._sortColumnCell.classList.remove(Order.Ascending, Order.Descending);\n    }\n    this._sortColumnCell = cell;\n\n    cell.classList.add(sortOrder);\n    const icon = elementToSortIconMap.get(cell);\n    if (!icon) {\n      return;\n    }\n    icon.setIconType(sortOrder === Order.Ascending ? 'smallicon-triangle-up' : 'smallicon-triangle-down');\n\n    this.dispatchEventToListeners(Events.SortingChanged);\n  }\n\n  /**\n   * @param {string} columnId\n   * @param {!Order} sortOrder\n   */\n  markColumnAsSortedBy(columnId, sortOrder) {\n    if (this._sortColumnCell) {\n      this._sortColumnCell.classList.remove(Order.Ascending, Order.Descending);\n    }\n    this._sortColumnCell = this._headerTableHeaders[columnId];\n    this._sortColumnCell.classList.add(sortOrder);\n  }\n\n  /**\n   * @param {string} columnId\n   * @return {!Element}\n   */\n  headerTableHeader(columnId) {\n    return this._headerTableHeaders[columnId];\n  }\n\n  /**\n   * @param {!Event} event\n   */\n  _mouseDownInDataTable(event) {\n    const target = /** @type {!Node} */ (event.target);\n    const gridNode = this.dataGridNodeFromNode(target);\n    if (!gridNode || !gridNode.selectable ||\n        gridNode.isEventWithinDisclosureTriangle(/** @type {!MouseEvent} */ (event))) {\n      return;\n    }\n\n    const columnId = this.columnIdFromNode(target);\n    if (columnId && this._columns[columnId].nonSelectable) {\n      return;\n    }\n\n    if (/** @type {!MouseEvent} */ (event).metaKey) {\n      if (gridNode.selected) {\n        gridNode.deselect();\n      } else {\n        gridNode.select();\n      }\n    } else {\n      gridNode.select();\n      this.dispatchEventToListeners(Events.OpenedNode, gridNode);\n    }\n  }\n\n  /**\n   * @param {?function(!UI.ContextMenu.SubMenu):void} callback\n   */\n  setHeaderContextMenuCallback(callback) {\n    this._headerContextMenuCallback = callback;\n  }\n\n  /**\n   * @param {?function(!UI.ContextMenu.ContextMenu, !DataGridNode<!NODE_TYPE>):void} callback\n   */\n  setRowContextMenuCallback(callback) {\n    this._rowContextMenuCallback = callback;\n  }\n\n  /**\n   * @param {!Event} event\n   */\n  _contextMenu(event) {\n    if (!(event instanceof MouseEvent)) {\n      return;\n    }\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    const target = /** @type {!Node} */ (event.target);\n\n    const sortableVisibleColumns = this.visibleColumnsArray.filter(column => {\n      return (column.sortable && column.title);\n    });\n\n    const sortableHiddenColumns = this._columnsArray.filter(\n        column => sortableVisibleColumns.indexOf(column) === -1 && column.allowInSortByEvenWhenHidden);\n\n    const sortableColumns = [...sortableVisibleColumns, ...sortableHiddenColumns];\n    if (sortableColumns.length > 0) {\n      const sortMenu = contextMenu.defaultSection().appendSubMenuItem(ls`Sort By`);\n      for (const column of sortableColumns) {\n        const headerCell = this._headerTableHeaders[column.id];\n        sortMenu.defaultSection().appendItem(\n            /** @type {string} */ (column.title), this._sortByColumnHeaderCell.bind(this, headerCell));\n      }\n    }\n\n    if (target.isSelfOrDescendant(this._headerTableBody)) {\n      if (this._headerContextMenuCallback) {\n        this._headerContextMenuCallback(contextMenu);\n      }\n      contextMenu.defaultSection().appendItem(\n          Common.UIString.UIString('Reset Columns'), this._resetColumnWeights.bind(this));\n      contextMenu.show();\n      return;\n    }\n\n    // Add header context menu to a subsection available from the body\n    const headerSubMenu = contextMenu.defaultSection().appendSubMenuItem(ls`Header Options`);\n    if (this._headerContextMenuCallback) {\n      this._headerContextMenuCallback(headerSubMenu);\n    }\n    headerSubMenu.defaultSection().appendItem(\n        Common.UIString.UIString('Reset Columns'), this._resetColumnWeights.bind(this));\n\n    const isContextMenuKey = (event.button === 0);\n    const gridNode = isContextMenuKey ? this.selectedNode : this.dataGridNodeFromNode(target);\n    const selectedNodeElement = this.selectedNode && this.selectedNode.existingElement();\n    if (isContextMenuKey && selectedNodeElement) {\n      const boundingRowRect = selectedNodeElement.getBoundingClientRect();\n      if (boundingRowRect) {\n        const x = (boundingRowRect.right + boundingRowRect.left) / 2;\n        const y = (boundingRowRect.bottom + boundingRowRect.top) / 2;\n        contextMenu.setX(x);\n        contextMenu.setY(y);\n      }\n    }\n    if (this._refreshCallback && (!gridNode || gridNode !== this.creationNode)) {\n      contextMenu.defaultSection().appendItem(Common.UIString.UIString('Refresh'), this._refreshCallback.bind(this));\n    }\n\n    if (gridNode && gridNode.selectable && !gridNode.isEventWithinDisclosureTriangle(event)) {\n      if (this._editCallback) {\n        if (gridNode === this.creationNode) {\n          const firstEditColumnIndex = this._nextEditableColumn(-1);\n          const tableCellElement = gridNode.element().children[firstEditColumnIndex];\n          contextMenu.defaultSection().appendItem(\n              Common.UIString.UIString('Add new'), this._startEditing.bind(this, tableCellElement));\n        } else if (isContextMenuKey) {\n          const firstEditColumnIndex = this._nextEditableColumn(-1);\n          if (firstEditColumnIndex > -1) {\n            const firstColumn = this.visibleColumnsArray[firstEditColumnIndex];\n            if (firstColumn && firstColumn.editable) {\n              contextMenu.defaultSection().appendItem(\n                  ls`Edit \"${firstColumn.title}\"`,\n                  this._startEditingColumnOfDataGridNode.bind(this, gridNode, firstEditColumnIndex));\n            }\n          }\n        } else {\n          const columnId = this.columnIdFromNode(target);\n          if (columnId && this._columns[columnId].editable) {\n            contextMenu.defaultSection().appendItem(\n                Common.UIString.UIString('Edit \"%s\"', this._columns[columnId].title),\n                this._startEditing.bind(this, target));\n          }\n        }\n      }\n      if (this._deleteCallback && gridNode !== this.creationNode) {\n        contextMenu.defaultSection().appendItem(\n            Common.UIString.UIString('Delete'), this._deleteCallback.bind(this, gridNode));\n      }\n      if (this._rowContextMenuCallback) {\n        this._rowContextMenuCallback(contextMenu, gridNode);\n      }\n    }\n\n    contextMenu.show();\n  }\n\n  /**\n   * @param {!Event} event\n   */\n  _clickInDataTable(event) {\n    const gridNode = this.dataGridNodeFromNode(/** @type {!Node} */ (event.target));\n    if (!gridNode || !gridNode.hasChildren() ||\n        !gridNode.isEventWithinDisclosureTriangle(/** @type {!MouseEvent}*/ (event))) {\n      return;\n    }\n\n    if (gridNode.expanded) {\n      if (/** @type {!MouseEvent}*/ (event).altKey) {\n        gridNode.collapseRecursively();\n      } else {\n        gridNode.collapse();\n      }\n    } else {\n      if (/** @type {!MouseEvent}*/ (event).altKey) {\n        gridNode.expandRecursively();\n      } else {\n        gridNode.expand();\n      }\n    }\n  }\n\n  /**\n   * @param {!ResizeMethod} method\n   */\n  setResizeMethod(method) {\n    this._resizeMethod = method;\n  }\n\n  /**\n   * @param {!Event} event\n   * @return {boolean}\n   */\n  _startResizerDragging(event) {\n    this._currentResizer = event.target;\n    return true;\n  }\n\n  _endResizerDragging() {\n    this._currentResizer = null;\n    this._saveColumnWeights();\n  }\n\n  /**\n   * @param {!MouseEvent} event\n   */\n  _resizerDragging(event) {\n    const resizer = /** @type{!HTMLElement}*/ (this._currentResizer);\n    if (!resizer) {\n      return;\n    }\n\n    // Constrain the dragpoint to be within the containing div of the\n    // datagrid.\n    let dragPoint = event.clientX - this.element.totalOffsetLeft();\n    const firstRowCells = this._headerTableBody.rows[0].cells;\n    let leftEdgeOfPreviousColumn = 0;\n    // Constrain the dragpoint to be within the space made up by the\n    // column directly to the left and the column directly to the right.\n    let leftCellIndex = elementToIndexMap.get(resizer);\n    if (leftCellIndex === undefined) {\n      return;\n    }\n    let rightCellIndex = leftCellIndex + 1;\n    for (let i = 0; i < leftCellIndex; i++) {\n      leftEdgeOfPreviousColumn += firstRowCells[i].offsetWidth;\n    }\n\n    // Differences for other resize methods\n    if (this._resizeMethod === ResizeMethod.Last) {\n      rightCellIndex = this._resizers.length;\n    } else if (this._resizeMethod === ResizeMethod.First) {\n      leftEdgeOfPreviousColumn += firstRowCells[leftCellIndex].offsetWidth - firstRowCells[0].offsetWidth;\n      leftCellIndex = 0;\n    }\n\n    const rightEdgeOfNextColumn =\n        leftEdgeOfPreviousColumn + firstRowCells[leftCellIndex].offsetWidth + firstRowCells[rightCellIndex].offsetWidth;\n\n    // Give each column some padding so that they don't disappear.\n    const leftMinimum = leftEdgeOfPreviousColumn + ColumnResizePadding;\n    const rightMaximum = rightEdgeOfNextColumn - ColumnResizePadding;\n    if (leftMinimum > rightMaximum) {\n      return;\n    }\n\n    dragPoint = Platform.NumberUtilities.clamp(dragPoint, leftMinimum, rightMaximum);\n\n    const position = (dragPoint - CenterResizerOverBorderAdjustment);\n    elementToPositionMap.set(resizer, position);\n    resizer.style.left = position + 'px';\n\n    this._setPreferredWidth(leftCellIndex, dragPoint - leftEdgeOfPreviousColumn);\n    this._setPreferredWidth(rightCellIndex, rightEdgeOfNextColumn - dragPoint);\n\n    const leftColumn = this.visibleColumnsArray[leftCellIndex];\n    const rightColumn = this.visibleColumnsArray[rightCellIndex];\n    if (leftColumn.weight && rightColumn.weight) {\n      const sumOfWeights = leftColumn.weight + rightColumn.weight;\n      const delta = rightEdgeOfNextColumn - leftEdgeOfPreviousColumn;\n      leftColumn.weight = (dragPoint - leftEdgeOfPreviousColumn) * sumOfWeights / delta;\n      rightColumn.weight = (rightEdgeOfNextColumn - dragPoint) * sumOfWeights / delta;\n    }\n\n    this._positionResizers();\n    event.preventDefault();\n  }\n\n  /**\n   * @param {number} columnIndex\n   * @param {number} width\n   */\n  _setPreferredWidth(columnIndex, width) {\n    const pxWidth = width + 'px';\n    const headerTableChildElement = /** @type{!HTMLElement}*/ (this._headerTableColumnGroup.children[columnIndex]);\n    elementToPreferedWidthMap.set(headerTableChildElement, width);\n    headerTableChildElement.style.width = pxWidth;\n\n    const dataTableChildElement = /** @type{!HTMLElement}*/ (this._dataTableColumnGroup.children[columnIndex]);\n    dataTableChildElement.style.width = pxWidth;\n  }\n\n  /**\n   * @param {string} columnId\n   * @return {number}\n   */\n  columnOffset(columnId) {\n    if (!this.element.offsetWidth) {\n      return 0;\n    }\n    for (let i = 1; i < this.visibleColumnsArray.length; ++i) {\n      if (columnId === this.visibleColumnsArray[i].id) {\n        if (this._resizers[i - 1]) {\n          return elementToPositionMap.get(this._resizers[i - 1]) || 0;\n        }\n      }\n    }\n    return 0;\n  }\n\n  /**\n   * @return {!DataGridWidget<!NODE_TYPE>}\n   */\n  asWidget() {\n    if (!this._dataGridWidget) {\n      this._dataGridWidget = new DataGridWidget(this);\n    }\n    return this._dataGridWidget;\n  }\n\n  topFillerRowElement() {\n    return this._topFillerRow;\n  }\n}\n\n// Keep in sync with .data-grid col.corner style rule.\nexport const CornerWidth = 14;\n\n\n/** @enum {symbol} */\nexport const Events = {\n  SelectedNode: Symbol('SelectedNode'),\n  DeselectedNode: Symbol('DeselectedNode'),\n  OpenedNode: Symbol('OpenedNode'),\n  SortingChanged: Symbol('SortingChanged'),\n  PaddingChanged: Symbol('PaddingChanged'),\n};\n\n/** @enum {string} */\nexport const Order = {\n  Ascending: 'sort-ascending',\n  Descending: 'sort-descending'\n};\n\n/** @enum {string} */\nexport const Align = {\n  Center: 'center',\n  Right: 'right'\n};\n\n/** @enum {symbol} */\nexport const DataType = {\n  String: Symbol('String'),\n  Boolean: Symbol('Boolean'),\n};\n\nexport const ColumnResizePadding = 24;\nexport const CenterResizerOverBorderAdjustment = 3;\n\n/** @enum {string} */\nexport const ResizeMethod = {\n  Nearest: 'nearest',\n  First: 'first',\n  Last: 'last'\n};\n\n/**\n * @template NODE_TYPE\n */\nexport class DataGridNode extends Common.ObjectWrapper.ObjectWrapper {\n  /**\n   * @param {?Object.<string, *>=} data\n   * @param {boolean=} hasChildren\n   */\n  constructor(data, hasChildren) {\n    super();\n    /** @type {?Element} */\n    this._element = null;\n    /** @type {boolean} */\n    this._expanded = false;\n    /** @type {boolean} */\n    this._selected = false;\n    /** @type {boolean} */\n    this._dirty = false;\n    /** @type {boolean} */\n    this._inactive = false;\n    /** @type {string} */\n    this.key;\n    /** @type {number|undefined} */\n    this._depth;\n    /** @type {boolean|undefined} */\n    this._revealed;\n    /** @type {boolean} */\n    this._attached = false;\n    /** @type {?{parent: !DataGridNode<!NODE_TYPE>, index: number}} */\n    this._savedPosition = null;\n    /** @type {boolean} */\n    this._shouldRefreshChildren = true;\n    /** @type {!Object.<string, *>} */\n    this._data = data || {};\n    /** @type {boolean} */\n    this._hasChildren = hasChildren || false;\n    /** @type {!Array.<!DataGridNode<!NODE_TYPE>>} */\n    this.children = [];\n    /** @type {?DataGridImpl<!NODE_TYPE>} */\n    this.dataGrid = null;\n    /** @type {?DataGridNode<!NODE_TYPE>} */\n    this.parent = null;\n    /** @type {?DataGridNode<!NODE_TYPE>} */\n    this.previousSibling = null;\n    /** @type {?DataGridNode<!NODE_TYPE>} */\n    this.nextSibling = null;\n    /** @type {number} */\n    this.disclosureToggleWidth = 10;\n\n    /** @type {boolean} */\n    this.selectable = true;\n\n    /** @type {boolean} */\n    this._isRoot = false;\n\n    /** @type {string} */\n    this.nodeAccessibleText = '';\n    /** @type {!Map<string, string>}} */\n    this.cellAccessibleTextMap = new Map();\n    /** @type {boolean} */\n    this.isCreationNode = false;\n  }\n\n  /**\n   * @return {!Element}\n   */\n  element() {\n    if (!this._element) {\n      const element = this.createElement();\n      this.createCells(element);\n    }\n    return /** @type {!Element} */ (this._element);\n  }\n\n  /**\n   * @protected\n   * @return {!Element}\n   */\n  createElement() {\n    this._element = document.createElement('tr');\n    this._element.classList.add('data-grid-data-grid-node');\n    if (this.dataGrid) {\n      this.dataGrid.elementToDataGridNode.set(this._element, this);\n    }\n\n    if (this._hasChildren) {\n      this._element.classList.add('parent');\n    }\n    if (this.expanded) {\n      this._element.classList.add('expanded');\n    }\n    if (this.selected) {\n      this._element.classList.add('selected');\n    }\n    if (this.revealed) {\n      this._element.classList.add('revealed');\n    }\n    if (this._dirty) {\n      this._element.classList.add('dirty');\n    }\n    if (this._inactive) {\n      this._element.classList.add('inactive');\n    }\n    if (this.isCreationNode) {\n      this._element.classList.add('creation-node');\n    }\n    return this._element;\n  }\n\n  /**\n   * @return {?Element}\n   */\n  existingElement() {\n    return this._element || null;\n  }\n\n  /**\n   * @protected\n   */\n  resetElement() {\n    this._element = null;\n  }\n\n  /**\n   * @param {!Element} element\n   * @protected\n   */\n  createCells(element) {\n    element.removeChildren();\n    if (!this.dataGrid || !this.parent) {\n      return;\n    }\n    const columnsArray = this.dataGrid.visibleColumnsArray;\n    const accessibleTextArray = [];\n    // Add depth if node is part of a tree\n    if (this._hasChildren || !this.parent._isRoot) {\n      accessibleTextArray.push(ls`level ${this.depth + 1}`);\n    }\n    for (let i = 0; i < columnsArray.length; ++i) {\n      const column = columnsArray[i];\n      const cell = element.appendChild(this.createCell(column.id));\n      // Add each visibile cell to the node's accessible text by gathering 'Column Title: content'\n      const localizedTitle = ls`${column.title}`;\n\n      if (column.dataType === DataType.Boolean && this.data[column.id] === true) {\n        this.setCellAccessibleName(ls`checked`, cell, column.id);\n      }\n\n      accessibleTextArray.push(`${localizedTitle}: ${this.cellAccessibleTextMap.get(column.id) || cell.textContent}`);\n    }\n    this.nodeAccessibleText = accessibleTextArray.join(', ');\n    element.appendChild(this.createTDWithClass('corner'));\n  }\n\n  /**\n   * @return {!Object.<string, *>}\n   */\n  get data() {\n    return this._data;\n  }\n\n  /**\n   * @param {!Object.<string, *>} x\n   */\n  set data(x) {\n    this._data = x || {};\n    this.refresh();\n  }\n\n  /**\n   * @return {boolean}\n   */\n  get revealed() {\n    if (this._revealed !== undefined) {\n      return this._revealed;\n    }\n\n    let currentAncestor = this.parent;\n    while (currentAncestor && !currentAncestor._isRoot) {\n      if (!currentAncestor.expanded) {\n        this._revealed = false;\n        return false;\n      }\n\n      currentAncestor = currentAncestor.parent;\n    }\n\n    this.revealed = true;\n    return true;\n  }\n\n  /**\n   * @param {boolean} x\n   */\n  set revealed(x) {\n    if (this._revealed === x) {\n      return;\n    }\n\n    this._revealed = x;\n\n    if (this._element) {\n      this._element.classList.toggle('revealed', this._revealed);\n    }\n\n    for (let i = 0; i < this.children.length; ++i) {\n      this.children[i].revealed = x && this.expanded;\n    }\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isDirty() {\n    return this._dirty;\n  }\n\n  /**\n   * @param {boolean} dirty\n   */\n  setDirty(dirty) {\n    if (this._dirty === dirty) {\n      return;\n    }\n    this._dirty = dirty;\n    if (!this._element) {\n      return;\n    }\n    if (dirty) {\n      this._element.classList.add('dirty');\n    } else {\n      this._element.classList.remove('dirty');\n    }\n  }\n\n\n  /**\n   * @return {boolean}\n   */\n  isInactive() {\n    return this._inactive;\n  }\n\n  /**\n   * @param {boolean} inactive\n   */\n  setInactive(inactive) {\n    if (this._inactive === inactive) {\n      return;\n    }\n    this._inactive = inactive;\n    if (!this._element) {\n      return;\n    }\n    if (inactive) {\n      this._element.classList.add('inactive');\n    } else {\n      this._element.classList.remove('inactive');\n    }\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasChildren() {\n    return this._hasChildren;\n  }\n\n  /**\n   * @param {boolean} x\n   */\n  setHasChildren(x) {\n    if (this._hasChildren === x) {\n      return;\n    }\n\n    this._hasChildren = x;\n\n    if (!this._element) {\n      return;\n    }\n\n    this._element.classList.toggle('parent', this._hasChildren);\n    this._element.classList.toggle('expanded', this._hasChildren && this.expanded);\n  }\n\n  /**\n   * @return {number}\n   */\n  get depth() {\n    if (this._depth !== undefined) {\n      return this._depth;\n    }\n    if (this.parent && !this.parent._isRoot) {\n      this._depth = this.parent.depth + 1;\n    } else {\n      this._depth = 0;\n    }\n    return this._depth;\n  }\n\n  /**\n   * @return {number}\n   */\n  get leftPadding() {\n    return this.depth * (this.dataGrid ? this.dataGrid.indentWidth : 1);\n  }\n\n  /**\n   * @return {boolean}\n   */\n  get shouldRefreshChildren() {\n    return this._shouldRefreshChildren;\n  }\n\n  /**\n   * @param {boolean} x\n   */\n  set shouldRefreshChildren(x) {\n    this._shouldRefreshChildren = x;\n    if (x && this.expanded) {\n      this.expand();\n    }\n  }\n\n  /**\n   * @return {boolean}\n   */\n  get selected() {\n    return this._selected;\n  }\n\n  /**\n   * @param {boolean} x\n   */\n  set selected(x) {\n    if (x) {\n      this.select();\n    } else {\n      this.deselect();\n    }\n  }\n\n  /**\n   * @return {boolean}\n   */\n  get expanded() {\n    return this._expanded;\n  }\n\n  /**\n   * @param {boolean} x\n   */\n  set expanded(x) {\n    if (x) {\n      this.expand();\n    } else {\n      this.collapse();\n    }\n  }\n\n  refresh() {\n    if (!this.dataGrid) {\n      this._element = null;\n    }\n    if (!this._element) {\n      return;\n    }\n    this.createCells(this._element);\n  }\n\n  /**\n   * @param {string} className\n   * @return {!HTMLElement}\n   */\n  createTDWithClass(className) {\n    const cell = /** @type {!HTMLElement} */ (document.createElement('td'));\n    if (className) {\n      cell.className = className;\n    }\n    const cellClass = this.dataGrid ? this.dataGrid._cellClass : null;\n    if (cellClass) {\n      cell.classList.add(cellClass);\n    }\n    return cell;\n  }\n\n  /**\n   * @param {string} columnId\n   * @return {!HTMLElement}\n   */\n  createTD(columnId) {\n    const cell = this.createTDWithClass(columnId + '-column');\n    nodeToColumnIdMap.set(cell, columnId);\n\n    if (this.dataGrid) {\n      const alignment = this.dataGrid._columns[columnId].align;\n      if (alignment) {\n        cell.classList.add(alignment);\n      }\n\n      if (columnId === this.dataGrid.disclosureColumnId) {\n        cell.classList.add('disclosure');\n        if (this.leftPadding) {\n          cell.style.setProperty('padding-left', this.leftPadding + 'px');\n        }\n      }\n    }\n\n    return cell;\n  }\n\n  /**\n   * @param {string} columnId\n   * @return {!HTMLElement}\n   */\n  createCell(columnId) {\n    const cell = this.createTD(columnId);\n    const data = this.data[columnId];\n    if (data instanceof Node) {\n      cell.appendChild(data);\n    } else if (data !== null && this.dataGrid) {\n      this.dataGrid.setElementContent(cell, /** @type {string} */ (data));\n    }\n\n    return cell;\n  }\n\n  /**\n   * @param {string} name\n   * @param {!Element} cell\n   * @param {string} columnId\n   */\n  setCellAccessibleName(name, cell, columnId) {\n    this.cellAccessibleTextMap.set(columnId, name);\n    // Mark all direct children of cell as hidden so cell name is properly announced\n    for (let i = 0; i < cell.children.length; i++) {\n      UI.ARIAUtils.markAsHidden(cell.children[i]);\n    }\n    UI.ARIAUtils.setAccessibleName(cell, name);\n  }\n\n  /**\n   * @return {number}\n   */\n  nodeSelfHeight() {\n    return 20;\n  }\n\n  /**\n   * @param {!DataGridNode<!NODE_TYPE>} child\n   */\n  appendChild(child) {\n    this.insertChild(child, this.children.length);\n  }\n\n  /**\n   * @param {boolean=} onlyCaches\n   */\n  resetNode(onlyCaches) {\n    // @TODO(allada) This is a hack to make sure ViewportDataGrid can clean up these caches. Try Not To Use.\n    delete this._depth;\n    delete this._revealed;\n    if (onlyCaches) {\n      return;\n    }\n    if (this.previousSibling) {\n      this.previousSibling.nextSibling = this.nextSibling;\n    }\n    if (this.nextSibling) {\n      this.nextSibling.previousSibling = this.previousSibling;\n    }\n    this.dataGrid = null;\n    this.parent = null;\n    this.nextSibling = null;\n    this.previousSibling = null;\n    this._attached = false;\n  }\n\n  /**\n   * @param {!DataGridNode<!NODE_TYPE>} child\n   * @param {number} index\n   */\n  insertChild(child, index) {\n    if (!child) {\n      throw 'insertChild: Node can\\'t be undefined or null.';\n    }\n    if (child.parent === this) {\n      const currentIndex = this.children.indexOf(child);\n      if (currentIndex < 0) {\n        console.assert(false, 'Inconsistent DataGrid state');\n      }\n      if (currentIndex === index) {\n        return;\n      }\n      if (currentIndex < index) {\n        --index;\n      }\n    }\n\n    child.remove();\n\n    this.children.splice(index, 0, child);\n    this.setHasChildren(true);\n\n    child.parent = this;\n    child.dataGrid = this.dataGrid;\n    child.recalculateSiblings(index);\n\n    child._shouldRefreshChildren = true;\n\n    /** @type {?DataGridNode<!NODE_TYPE>} */\n    let current = child.children[0];\n    while (current) {\n      current.resetNode(true);\n      current.dataGrid = this.dataGrid;\n      current._attached = false;\n      current._shouldRefreshChildren = true;\n      current = current.traverseNextNode(false, child, true);\n    }\n\n    if (this.expanded) {\n      child._attach();\n    }\n    if (!this.revealed) {\n      child.revealed = false;\n    }\n  }\n\n  remove() {\n    if (this.parent) {\n      this.parent.removeChild(this);\n    }\n  }\n\n  /**\n   * @param {!DataGridNode<!NODE_TYPE>} child\n   */\n  removeChild(child) {\n    if (!child) {\n      throw 'removeChild: Node can\\'t be undefined or null.';\n    }\n    if (child.parent !== this) {\n      throw 'removeChild: Node is not a child of this node.';\n    }\n\n    if (this.dataGrid) {\n      this.dataGrid.updateSelectionBeforeRemoval(child, false);\n    }\n\n    child._detach();\n    child.resetNode();\n    Platform.ArrayUtilities.removeElement(this.children, child, true);\n\n    if (this.children.length <= 0) {\n      this.setHasChildren(false);\n    }\n  }\n\n  removeChildren() {\n    if (this.dataGrid) {\n      this.dataGrid.updateSelectionBeforeRemoval(this, true);\n    }\n    for (let i = 0; i < this.children.length; ++i) {\n      const child = this.children[i];\n      child._detach();\n      child.resetNode();\n    }\n\n    this.children = [];\n    this.setHasChildren(false);\n  }\n\n  /**\n   * @param {number} myIndex\n   */\n  recalculateSiblings(myIndex) {\n    if (!this.parent) {\n      return;\n    }\n\n    const previousChild = this.parent.children[myIndex - 1] || null;\n    if (previousChild) {\n      previousChild.nextSibling = this;\n    }\n    this.previousSibling = previousChild;\n\n    const nextChild = this.parent.children[myIndex + 1] || null;\n    if (nextChild) {\n      nextChild.previousSibling = this;\n    }\n    this.nextSibling = nextChild;\n  }\n\n  collapse() {\n    if (this._isRoot) {\n      return;\n    }\n    if (this._element) {\n      this._element.classList.remove('expanded');\n    }\n\n    this._expanded = false;\n    if (this.selected && this.dataGrid) {\n      this.dataGrid.updateGridAccessibleName(/* text */ ls`collapsed`);\n    }\n\n    for (let i = 0; i < this.children.length; ++i) {\n      this.children[i].revealed = false;\n    }\n  }\n\n  collapseRecursively() {\n    /** @type {?DataGridNode<!NODE_TYPE>} */\n    let item = this;\n    while (item) {\n      if (item.expanded) {\n        item.collapse();\n      }\n      item = item.traverseNextNode(false, this, true);\n    }\n  }\n\n  populate() {\n  }\n\n  expand() {\n    if (!this._hasChildren || this.expanded) {\n      return;\n    }\n    if (this._isRoot) {\n      return;\n    }\n\n    if (this.revealed && !this._shouldRefreshChildren) {\n      for (let i = 0; i < this.children.length; ++i) {\n        this.children[i].revealed = true;\n      }\n    }\n\n    if (this._shouldRefreshChildren) {\n      for (let i = 0; i < this.children.length; ++i) {\n        this.children[i]._detach();\n      }\n\n      this.populate();\n\n      if (this._attached) {\n        for (let i = 0; i < this.children.length; ++i) {\n          const child = this.children[i];\n          if (this.revealed) {\n            child.revealed = true;\n          }\n          child._attach();\n        }\n      }\n\n      this._shouldRefreshChildren = false;\n    }\n\n    if (this._element) {\n      this._element.classList.add('expanded');\n    }\n    if (this.selected && this.dataGrid) {\n      this.dataGrid.updateGridAccessibleName(/* text */ ls`expanded`);\n    }\n\n    this._expanded = true;\n  }\n\n  expandRecursively() {\n    /** @type {?DataGridNode<!NODE_TYPE>} */\n    let item = this;\n    while (item) {\n      item.expand();\n      item = item.traverseNextNode(false, this);\n    }\n  }\n\n  reveal() {\n    if (this._isRoot) {\n      return;\n    }\n    let currentAncestor = this.parent;\n    while (currentAncestor && !currentAncestor._isRoot) {\n      if (!currentAncestor.expanded) {\n        currentAncestor.expand();\n      }\n      currentAncestor = currentAncestor.parent;\n    }\n\n    this.element().scrollIntoViewIfNeeded(false);\n  }\n\n  /**\n   * @param {boolean=} supressSelectedEvent\n   */\n  select(supressSelectedEvent) {\n    if (!this.dataGrid || !this.selectable || this.selected) {\n      return;\n    }\n\n    if (this.dataGrid.selectedNode) {\n      this.dataGrid.selectedNode.deselect();\n    }\n\n    this._selected = true;\n    this.dataGrid.selectedNode = this;\n\n    if (this._element) {\n      this._element.classList.add('selected');\n      this.dataGrid.setHasSelection(true);\n      this.dataGrid.updateGridAccessibleName();\n    }\n\n    if (!supressSelectedEvent) {\n      this.dataGrid.dispatchEventToListeners(Events.SelectedNode, this);\n    }\n  }\n\n  revealAndSelect() {\n    if (this._isRoot) {\n      return;\n    }\n    this.reveal();\n    this.select();\n  }\n\n  /**\n   * @param {boolean=} supressDeselectedEvent\n   */\n  deselect(supressDeselectedEvent) {\n    if (!this.dataGrid || this.dataGrid.selectedNode !== this || !this.selected) {\n      return;\n    }\n\n    this._selected = false;\n    this.dataGrid.selectedNode = null;\n\n    if (this._element) {\n      this._element.classList.remove('selected');\n      this.dataGrid.setHasSelection(false);\n      this.dataGrid.updateGridAccessibleName('');\n    }\n\n    if (!supressDeselectedEvent) {\n      this.dataGrid.dispatchEventToListeners(Events.DeselectedNode);\n    }\n  }\n\n  /**\n   * @param {boolean} skipHidden\n   * @param {?DataGridNode<!NODE_TYPE>=} stayWithin\n   * @param {boolean=} dontPopulate\n   * @param {!{depthChange: number}=} info\n   * @return {?DataGridNode<!NODE_TYPE>}\n   */\n  traverseNextNode(skipHidden, stayWithin, dontPopulate, info) {\n    if (!dontPopulate && this._hasChildren) {\n      this.populate();\n    }\n\n    if (info) {\n      info.depthChange = 0;\n    }\n\n    let node = (!skipHidden || this.revealed) ? this.children[0] : null;\n    if (node && (!skipHidden || this.expanded)) {\n      if (info) {\n        info.depthChange = 1;\n      }\n      return node;\n    }\n\n    if (this === stayWithin) {\n      return null;\n    }\n\n    node = (!skipHidden || this.revealed) ? this.nextSibling : null;\n    if (node) {\n      return node;\n    }\n\n    node = this;\n    while (node && !node._isRoot && !((!skipHidden || node.revealed) ? node.nextSibling : null) &&\n           node.parent !== stayWithin) {\n      if (info) {\n        info.depthChange -= 1;\n      }\n      node = node.parent;\n    }\n\n    if (!node) {\n      return null;\n    }\n\n    return (!skipHidden || node.revealed) ? node.nextSibling : null;\n  }\n\n  /**\n   * @param {boolean} skipHidden\n   * @param {boolean=} dontPopulate\n   * @return {?DataGridNode<!NODE_TYPE>}\n   */\n  traversePreviousNode(skipHidden, dontPopulate) {\n    let node = (!skipHidden || this.revealed) ? this.previousSibling : null;\n    if (!dontPopulate && node && node._hasChildren) {\n      node.populate();\n    }\n\n    while (node &&\n           ((!skipHidden || (node.revealed && node.expanded)) ? node.children[node.children.length - 1] : null)) {\n      if (!dontPopulate && node._hasChildren) {\n        node.populate();\n      }\n      node = ((!skipHidden || (node.revealed && node.expanded)) ? node.children[node.children.length - 1] : null);\n    }\n\n    if (node) {\n      return node;\n    }\n\n    if (!this.parent || this.parent._isRoot) {\n      return null;\n    }\n\n    return this.parent;\n  }\n\n  /**\n   * @param {!MouseEvent} event\n   * @return {boolean}\n   */\n  isEventWithinDisclosureTriangle(event) {\n    if (!this._hasChildren) {\n      return false;\n    }\n    const cell = UI.UIUtils.enclosingNodeOrSelfWithNodeName(/** @type {!Node} */ (event.target), 'td');\n    if (!cell || !(cell instanceof HTMLElement) || !cell.classList.contains('disclosure')) {\n      return false;\n    }\n\n    const left = cell.totalOffsetLeft() + this.leftPadding;\n    return event.pageX >= left && event.pageX <= left + this.disclosureToggleWidth;\n  }\n\n  _attach() {\n    if (!this.dataGrid || this._attached) {\n      return;\n    }\n\n    this._attached = true;\n\n    const previousNode = this.traversePreviousNode(true, true);\n    const previousElement = previousNode ? previousNode.element() : this.dataGrid._topFillerRow;\n    this.dataGrid.dataTableBody.insertBefore(this.element(), previousElement.nextSibling);\n\n    if (this.expanded) {\n      for (let i = 0; i < this.children.length; ++i) {\n        this.children[i]._attach();\n      }\n    }\n  }\n\n  _detach() {\n    if (!this._attached) {\n      return;\n    }\n\n    this._attached = false;\n\n    if (this._element) {\n      this._element.remove();\n    }\n\n    for (let i = 0; i < this.children.length; ++i) {\n      this.children[i]._detach();\n    }\n  }\n\n  savePosition() {\n    if (this._savedPosition) {\n      return;\n    }\n\n    if (!this.parent) {\n      throw 'savePosition: Node must have a parent.';\n    }\n    this._savedPosition = {parent: this.parent, index: this.parent.children.indexOf(this)};\n  }\n\n  restorePosition() {\n    if (!this._savedPosition) {\n      return;\n    }\n\n    if (this.parent !== this._savedPosition.parent) {\n      this._savedPosition.parent.insertChild(this, this._savedPosition.index);\n    }\n\n    this._savedPosition = null;\n  }\n}\n\n/**\n * @extends {DataGridNode<!NODE_TYPE>}\n * @template NODE_TYPE\n */\nexport class CreationDataGridNode extends DataGridNode {\n  /**\n   * @param {?Object.<string, *>=} data\n   * @param {boolean=} hasChildren\n   */\n  constructor(data, hasChildren) {\n    super(data, hasChildren);\n    /** @type {boolean} */\n    this.isCreationNode = true;\n  }\n\n  makeNormal() {\n    this.isCreationNode = false;\n  }\n}\n\n/**\n * @template NODE_TYPE\n */\nexport class DataGridWidget extends UI.Widget.VBox {\n  /**\n   * @param {!DataGridImpl<!NODE_TYPE>} dataGrid\n   */\n  constructor(dataGrid) {\n    super();\n    this._dataGrid = dataGrid;\n    this.element.appendChild(dataGrid.element);\n    this.setDefaultFocusedElement(dataGrid.element);\n  }\n\n  /**\n   * @override\n   */\n  wasShown() {\n    this._dataGrid.wasShown();\n  }\n\n  /**\n   * @override\n   */\n  willHide() {\n    this._dataGrid.willHide();\n  }\n\n  /**\n   * @override\n   */\n  onResize() {\n    this._dataGrid.onResize();\n  }\n\n  /**\n   * @override\n   * @return {!Array.<!Element>}\n   */\n  elementsToRestoreScrollPositionsFor() {\n    return [this._dataGrid._scrollContainer];\n  }\n\n}\n\n/**\n * @typedef {{\n *   displayName: string,\n *   columns: !Array.<!ColumnDescriptor>,\n *   editCallback: (undefined|function(*, string, *, *):*),\n *   deleteCallback: (undefined|function(*):*),\n *   refreshCallback: (undefined|function():*)\n * }}\n */\n// @ts-ignore typedef\nexport let Parameters;\n\n/**\n * @typedef {{\n *   id: string,\n *   title: (!Platform.UIString.LocalizedString|undefined),\n *   titleDOMFragment: (?DocumentFragment|undefined),\n *   sortable: boolean,\n *   sort: (?Order|undefined),\n *   align: (?Align|undefined),\n *   width: (string|undefined),\n *   fixedWidth: (boolean|undefined),\n *   editable: (boolean|undefined),\n *   nonSelectable: (boolean|undefined),\n *   longText: (boolean|undefined),\n *   disclosure: (boolean|undefined),\n *   weight: (number|undefined),\n *   allowInSortByEvenWhenHidden: (boolean|undefined),\n *   dataType: (?DataType|undefined),\n *   defaultWeight: (number|undefined)\n * }}\n */\n// @ts-ignore typedef\nexport let ColumnDescriptor;\n"]}
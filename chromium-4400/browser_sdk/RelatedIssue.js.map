{"version":3,"file":"RelatedIssue.js","sourceRoot":"","sources":["../../../../../front_end/browser_sdk/RelatedIssue.js"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';\nimport * as SDK from '../sdk/sdk.js';\nimport {IssuesManager} from './IssuesManager.js';\n\n/**\n * @typedef {!SDK.NetworkRequest.NetworkRequest | !SDK.Cookie.Cookie}\n */\n// @ts-ignore typedef\nexport let IssuesAssociatable;\n\n/**\n * @param {!Array<!SDK.Issue.Issue>} issues\n * @param {!SDK.NetworkRequest.NetworkRequest} request\n * @return {!Array<!SDK.Issue.Issue>}\n */\nfunction issuesAssociatedWithNetworkRequest(issues, request) {\n  return issues.filter(issue => {\n    for (const affectedRequest of issue.requests()) {\n      if (affectedRequest.requestId === request.requestId()) {\n        return true;\n      }\n    }\n    return false;\n  });\n}\n\n/**\n * @param {!Array<!SDK.Issue.Issue>} issues\n * @param {string} domain\n * @param {string} name\n * @param {string} path\n * @return {!Array<!SDK.Issue.Issue>}\n */\nfunction issuesAssociatedWithCookie(issues, domain, name, path) {\n  return issues.filter(issue => {\n    for (const cookie of issue.cookies()) {\n      if (cookie.domain === domain && cookie.name === name && cookie.path === path) {\n        return true;\n      }\n    }\n    return false;\n  });\n}\n\n/**\n * @param {!Array<!SDK.Issue.Issue>} issues\n * @param {!IssuesAssociatable} obj\n * @return {!Array<!SDK.Issue.Issue>}\n * @throws In case obj has an unsupported type (i.e. not part of the IssuesAssociatble union).\n */\nexport function issuesAssociatedWith(issues, obj) {\n  if (obj instanceof SDK.NetworkRequest.NetworkRequest) {\n    return issuesAssociatedWithNetworkRequest(issues, obj);\n  }\n  if (obj instanceof SDK.Cookie.Cookie) {\n    return issuesAssociatedWithCookie(issues, obj.domain(), obj.name(), obj.path());\n  }\n  throw new Error(`issues can not be associated with ${JSON.stringify(obj)}`);\n}\n\n/**\n * @param {!IssuesAssociatable} obj\n * @return {boolean}\n */\nexport function hasIssues(obj) {\n  const issues = Array.from(IssuesManager.instance().issues());\n  return issuesAssociatedWith(issues, obj).length > 0;\n}\n\n/**\n * @param {!IssuesAssociatable} obj\n * @param {!SDK.Issue.IssueCategory} category\n * @return {boolean}\n */\nexport function hasIssueOfCategory(obj, category) {\n  const issues = Array.from(IssuesManager.instance().issues());\n  return issuesAssociatedWith(issues, obj).some(issue => issue.getCategory() === category);\n}\n\n/**\n * @param {!IssuesAssociatable} obj\n * @param {!SDK.Issue.IssueCategory=} category\n * @return {!Promise<undefined | void>}\n */\nexport async function reveal(obj, category) {\n  const issues = Array.from(IssuesManager.instance().issues());\n  const candidates = issuesAssociatedWith(issues, obj).filter(issue => !category || issue.getCategory() === category);\n  if (candidates.length > 0) {\n    return Common.Revealer.reveal(candidates[0]);\n  }\n}\n"]}
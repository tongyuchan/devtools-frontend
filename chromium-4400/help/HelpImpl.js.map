{"version":3,"file":"HelpImpl.js","sourceRoot":"","sources":["../../../../../front_end/help/HelpImpl.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,uDAAuD;AAEvD,OAAO,KAAK,MAAM,MAAM,qBAAqB,CAAC,CAAE,qCAAqC;AACrF,OAAO,KAAK,IAAI,MAAM,iBAAiB,CAAC;AACxC,OAAO,KAAK,EAAE,MAAM,aAAa,CAAC,CAAE,qCAAqC;AAEzE,OAAO,EAAC,eAAe,EAAC,MAAM,sBAAsB,CAAC;AAErD,MAAM,CAAC,MAAM,kBAAkB,GAAG,wBAAwB,CAAC;AAE3D,MAAM,CAAC,MAAM,iBAAiB,GAAW,cAAc,CAAC;AAExD,IAAI,kBAA+B,CAAC;AAEpC,MAAM,UAAU,iBAAiB;IAC/B,6CAA6C;IAC7C,MAAM,kBAAkB,GAAkB,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC;IACpE,IAAI,CAAC,kBAAkB,EAAE;QACvB,kBAAkB;YACd,CAAC,kBAAkB,IAAI,eAAe,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;KAC5G;IACD,OAAO,kBAAkB,CAAC;AAC5B,CAAC;AAED,MAAM,UAAU,uBAAuB;IACrC,MAAM,yBAAyB,GAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC;IAC3G,MAAM,8BAA8B,GAAG,yBAAyB,CAAC,GAAG,EAAE,CAAC;IACvE,4BAA4B,CACxB,8BAA8B,EAAE,iBAAiB,EAAE,CAAC,OAAO,EAC3D,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,wBAAwB,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;AACzF,CAAC;AAED,MAAM,UAAU,4BAA4B,CACxC,eAAuB,EAAE,aAAqB,EAAE,eAAwB;IAC1E,MAAM,yBAAyB,GAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC;IAC3G,IAAI,CAAC,eAAe,EAAE;QACpB,yBAAyB,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;QAC7C,OAAO;KACR;IACD,IAAI,CAAC,eAAe,EAAE;QACpB,OAAO;KACR;IACD,IAAI,eAAe,IAAI,aAAa,EAAE;QACpC,OAAO;KACR;IACD,yBAAyB,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;IAC7C,EAAE,CAAC,WAAW,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;AAC1E,CAAC;AAED,MAAM,OAAO,sBAAsB;IACjC,KAAK,CAAC,GAAG;QACP,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,WAAW,EAAE,EAAE;YAC7C,uBAAuB,EAAE,CAAC;SAC3B;IACH,CAAC;CACF;AAED,MAAM,OAAO,0BAA0B;IACrC,YAAY,CAAC,QAA4B,EAAE,SAAiB;QAC1D,IAAI,CAAC,qBAAqB,CAAC,6BAA6B,CAAC,YAAY,CAAC,iBAAiB,EAAE,CAAC,IAAI,CAAC,CAAC;QAChG,OAAO,IAAI,CAAC;IACd,CAAC;CACF;AAED,MAAM,OAAO,yBAAyB;IACpC,YAAY,CAAC,QAA4B,EAAE,SAAiB;QAC1D,IAAI,CAAC,qBAAqB,CAAC,6BAA6B,CAAC,YAAY,CACjE,2EAA2E,CAAC,CAAC;QACjF,OAAO,IAAI,CAAC;IACd,CAAC;CACF","sourcesContent":["// Copyright 2017 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/* eslint-disable rulesdir/no_underscored_properties */\n\nimport * as Common from '../common/common.js';  // eslint-disable-line no-unused-vars\nimport * as Host from '../host/host.js';\nimport * as UI from '../ui/ui.js';  // eslint-disable-line no-unused-vars\n\nimport {releaseNoteText} from './ReleaseNoteText.js';\n\nexport const releaseVersionSeen = 'releaseNoteVersionSeen';\n\nexport const releaseNoteViewId: string = 'release-note';\n\nlet _latestReleaseNote: ReleaseNote;\n\nexport function latestReleaseNote(): ReleaseNote {\n  // @ts-ignore Included only for layout tests.\n  const globalReleaseNotes: ReleaseNote[] = self.Help.releaseNoteText;\n  if (!_latestReleaseNote) {\n    _latestReleaseNote =\n        (globalReleaseNotes || releaseNoteText).reduce((acc, note) => note.version > acc.version ? note : acc);\n  }\n  return _latestReleaseNote;\n}\n\nexport function showReleaseNoteIfNeeded(): void {\n  const releaseNoteVersionSetting = Common.Settings.Settings.instance().createSetting(releaseVersionSeen, 0);\n  const releaseNoteVersionSettingValue = releaseNoteVersionSetting.get();\n  innerShowReleaseNoteIfNeeded(\n      releaseNoteVersionSettingValue, latestReleaseNote().version,\n      Common.Settings.Settings.instance().moduleSetting('help.show-release-note').get());\n}\n\nexport function innerShowReleaseNoteIfNeeded(\n    lastSeenVersion: number, latestVersion: number, showReleaseNote: boolean): void {\n  const releaseNoteVersionSetting = Common.Settings.Settings.instance().createSetting(releaseVersionSeen, 0);\n  if (!lastSeenVersion) {\n    releaseNoteVersionSetting.set(latestVersion);\n    return;\n  }\n  if (!showReleaseNote) {\n    return;\n  }\n  if (lastSeenVersion >= latestVersion) {\n    return;\n  }\n  releaseNoteVersionSetting.set(latestVersion);\n  UI.ViewManager.ViewManager.instance().showView(releaseNoteViewId, true);\n}\n\nexport class HelpLateInitialization implements Common.Runnable.Runnable {\n  async run(): Promise<void> {\n    if (!Host.InspectorFrontendHost.isUnderTest()) {\n      showReleaseNoteIfNeeded();\n    }\n  }\n}\n\nexport class ReleaseNotesActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  handleAction(_context: UI.Context.Context, _actionId: string): boolean {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.openInNewTab(latestReleaseNote().link);\n    return true;\n  }\n}\n\nexport class ReportIssueActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  handleAction(_context: UI.Context.Context, _actionId: string): boolean {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.openInNewTab(\n        'https://bugs.chromium.org/p/chromium/issues/entry?template=DevTools+issue');\n    return true;\n  }\n}\nexport interface ReleaseNoteHighlight {\n  title: string;\n  subtitle: string;\n  link: string;\n}\nexport interface ReleaseNote {\n  version: number;\n  header: string;\n  highlights: {title: string; subtitle: string; link: string;}[];\n  link: string;\n}\n"]}
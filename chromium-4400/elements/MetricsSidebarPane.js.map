{"version":3,"file":"MetricsSidebarPane.js","sourceRoot":"","sources":["../../../../../front_end/elements/MetricsSidebarPane.js"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2007 Apple Inc.  All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../common/common.js';\nimport * as Platform from '../platform/platform.js';\nimport * as SDK from '../sdk/sdk.js';\nimport * as UI from '../ui/ui.js';\n\nimport {ElementsSidebarPane} from './ElementsSidebarPane.js';\n\nexport class MetricsSidebarPane extends ElementsSidebarPane {\n  constructor() {\n    super();\n    this.registerRequiredCSS('elements/metricsSidebarPane.css', {enableLegacyPatching: true});\n\n    /** @type {?SDK.CSSProperty.CSSProperty} */\n    this.originalPropertyData = null;\n    /** @type {?SDK.CSSProperty.CSSProperty} */\n    this.previousPropertyDataCandidate = null;\n    /** @type {?SDK.CSSStyleDeclaration.CSSStyleDeclaration} */\n    this._inlineStyle = null;\n    /** @type {string} */\n    this._highlightMode = '';\n    /** @type {!Array<!{element: !HTMLElement, name: string, backgroundColor: string}>} */\n    this._boxElements = [];\n  }\n\n  /**\n   * @override\n   * @protected\n   * @return {!Promise.<?>}\n   */\n  doUpdate() {\n    // \"style\" attribute might have changed. Update metrics unless they are being edited\n    // (if a CSS property is added, a StyleSheetChanged event is dispatched).\n    if (this._isEditingMetrics) {\n      return Promise.resolve();\n    }\n\n    // FIXME: avoid updates of a collapsed pane.\n    const node = this.node();\n    const cssModel = this.cssModel();\n    if (!node || node.nodeType() !== Node.ELEMENT_NODE || !cssModel) {\n      this.contentElement.removeChildren();\n      this.element.classList.add('collapsed');\n      return Promise.resolve();\n    }\n\n    /**\n     * @param {?Map.<string, string>} style\n     * @this {MetricsSidebarPane}\n     */\n    function callback(style) {\n      if (!style || this.node() !== node) {\n        return;\n      }\n      this._updateMetrics(style);\n    }\n\n    if (!node.id) {\n      return Promise.resolve();\n    }\n\n    const promises = [\n      cssModel.computedStylePromise(node.id).then(callback.bind(this)),\n      cssModel.inlineStylesPromise(node.id).then(inlineStyleResult => {\n        if (inlineStyleResult && this.node() === node) {\n          this._inlineStyle = inlineStyleResult.inlineStyle;\n        }\n      }),\n    ];\n    return Promise.all(promises);\n  }\n\n  /**\n   * @override\n   */\n  onCSSModelChanged() {\n    this.update();\n  }\n\n  /**\n   * Toggle the visibility of the Metrics pane. This toggle allows external\n   * callers to control the visibility of this pane, but toggling this on does\n   * not guarantee the pane will always show up, because the pane's visibility\n   * is also controlled by the internal condition that style cannot be empty.\n   * @param {boolean} isVisible\n   */\n  toggleVisibility(isVisible) {\n    this.element.classList.toggle('invisible', !isVisible);\n  }\n\n  /**\n   * @param {!Map.<string, string>} style\n   * @param {string} propertyName\n   * @return {number}\n   */\n  _getPropertyValueAsPx(style, propertyName) {\n    const propertyValue = style.get(propertyName);\n    if (!propertyValue) {\n      return 0;\n    }\n    return Number(propertyValue.replace(/px$/, '') || 0);\n  }\n\n  /**\n   * @param {!Map.<string, string>} computedStyle\n   * @param {string} componentName\n   */\n  _getBox(computedStyle, componentName) {\n    const suffix = componentName === 'border' ? '-width' : '';\n    const left = this._getPropertyValueAsPx(computedStyle, componentName + '-left' + suffix);\n    const top = this._getPropertyValueAsPx(computedStyle, componentName + '-top' + suffix);\n    const right = this._getPropertyValueAsPx(computedStyle, componentName + '-right' + suffix);\n    const bottom = this._getPropertyValueAsPx(computedStyle, componentName + '-bottom' + suffix);\n    return {left, top, right, bottom};\n  }\n\n  /**\n   * @param {boolean} showHighlight\n   * @param {string} mode\n   * @param {!Event} event\n   */\n  _highlightDOMNode(showHighlight, mode, event) {\n    event.consume();\n    const node = this.node();\n    if (showHighlight && node) {\n      if (this._highlightMode === mode) {\n        return;\n      }\n      this._highlightMode = mode;\n      node.highlight(mode);\n    } else {\n      this._highlightMode = '';\n      SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n    }\n\n    for (const {element, name, backgroundColor} of this._boxElements) {\n      if (!node || mode === 'all' || name === mode) {\n        element.style.backgroundColor = backgroundColor;\n      } else {\n        element.style.backgroundColor = '';\n      }\n    }\n  }\n\n  /**\n   * @param {!Map.<string, string>} style\n   */\n  _updateMetrics(style) {\n    // Updating with computed style.\n    const metricsElement = document.createElement('div');\n    metricsElement.className = 'metrics';\n    const self = this;\n\n    /**\n     * @param {!Map.<string, string>} style\n     * @param {string} name\n     * @param {string} side\n     * @param {string} suffix\n     * @this {MetricsSidebarPane}\n     */\n    function createBoxPartElement(style, name, side, suffix) {\n      const element = document.createElement('div');\n      element.className = side;\n\n      const propertyName = (name !== 'position' ? name + '-' : '') + side + suffix;\n      let value = style.get(propertyName);\n      if (value === undefined) {\n        return element;\n      }\n\n      if (value === '' || (name !== 'position' && value === '0px')) {\n        value = '\\u2012';\n      } else if (name === 'position' && value === 'auto') {\n        value = '\\u2012';\n      }\n      value = value.replace(/px$/, '');\n      value = Platform.NumberUtilities.toFixedIfFloating(value);\n\n      element.textContent = value;\n      element.addEventListener('dblclick', this.startEditing.bind(this, element, name, propertyName, style), false);\n      return element;\n    }\n\n    /**\n     * @param {!Map.<string, string>} style\n     * @return {string}\n     */\n    function getContentAreaWidthPx(style) {\n      let width = style.get('width');\n      if (!width) {\n        return '';\n      }\n      width = width.replace(/px$/, '');\n      const widthValue = Number(width);\n      if (!isNaN(widthValue) && style.get('box-sizing') === 'border-box') {\n        const borderBox = self._getBox(style, 'border');\n        const paddingBox = self._getBox(style, 'padding');\n\n        width = (widthValue - borderBox.left - borderBox.right - paddingBox.left - paddingBox.right).toString();\n      }\n\n      return Platform.NumberUtilities.toFixedIfFloating(width);\n    }\n\n    /**\n     * @param {!Map.<string, string>} style\n     * @return {string}\n     */\n    function getContentAreaHeightPx(style) {\n      let height = style.get('height');\n      if (!height) {\n        return '';\n      }\n      height = height.replace(/px$/, '');\n      const heightValue = Number(height);\n      if (!isNaN(heightValue) && style.get('box-sizing') === 'border-box') {\n        const borderBox = self._getBox(style, 'border');\n        const paddingBox = self._getBox(style, 'padding');\n\n        height = (heightValue - borderBox.top - borderBox.bottom - paddingBox.top - paddingBox.bottom).toString();\n      }\n\n      return Platform.NumberUtilities.toFixedIfFloating(height);\n    }\n\n    // Display types for which margin is ignored.\n    const noMarginDisplayType = new Set([\n      'table-cell',\n      'table-column',\n      'table-column-group',\n      'table-footer-group',\n      'table-header-group',\n      'table-row',\n      'table-row-group',\n    ]);\n\n    // Display types for which padding is ignored.\n    const noPaddingDisplayType = new Set([\n      'table-column',\n      'table-column-group',\n      'table-footer-group',\n      'table-header-group',\n      'table-row',\n      'table-row-group',\n    ]);\n\n    // Position types for which top, left, bottom and right are ignored.\n    const noPositionType = new Set(['static']);\n\n    const boxes = ['content', 'padding', 'border', 'margin', 'position'];\n    const boxColors = [\n      Common.Color.PageHighlight.Content, Common.Color.PageHighlight.Padding, Common.Color.PageHighlight.Border,\n      Common.Color.PageHighlight.Margin, Common.Color.Color.fromRGBA([0, 0, 0, 0])\n    ];\n    const boxLabels = [\n      Common.UIString.UIString('content'), Common.UIString.UIString('padding'), Common.UIString.UIString('border'),\n      Common.UIString.UIString('margin'), Common.UIString.UIString('position')\n    ];\n    let previousBox = null;\n    this._boxElements = [];\n    for (let i = 0; i < boxes.length; ++i) {\n      const name = boxes[i];\n      const display = style.get('display');\n      const position = style.get('position');\n      if (!display || !position) {\n        continue;\n      }\n      if (name === 'margin' && noMarginDisplayType.has(display)) {\n        continue;\n      }\n      if (name === 'padding' && noPaddingDisplayType.has(display)) {\n        continue;\n      }\n      if (name === 'position' && noPositionType.has(position)) {\n        continue;\n      }\n\n      const boxElement = /** @type {!HTMLDivElement} */ (document.createElement('div'));\n      boxElement.className = name;\n      const backgroundColor = boxColors[i].asString(Common.Color.Format.RGBA) || '';\n      boxElement.style.backgroundColor = backgroundColor;\n      boxElement.addEventListener(\n          'mouseover', this._highlightDOMNode.bind(this, true, name === 'position' ? 'all' : name), false);\n      this._boxElements.push({element: boxElement, name, backgroundColor});\n\n      if (name === 'content') {\n        const widthElement = document.createElement('span');\n        widthElement.textContent = getContentAreaWidthPx(style);\n        widthElement.addEventListener(\n            'dblclick', this.startEditing.bind(this, widthElement, 'width', 'width', style), false);\n\n        const heightElement = document.createElement('span');\n        heightElement.textContent = getContentAreaHeightPx(style);\n        heightElement.addEventListener(\n            'dblclick', this.startEditing.bind(this, heightElement, 'height', 'height', style), false);\n\n        boxElement.appendChild(widthElement);\n        UI.UIUtils.createTextChild(boxElement, ' × ');\n        boxElement.appendChild(heightElement);\n      } else {\n        const suffix = (name === 'border' ? '-width' : '');\n\n        const labelElement = document.createElement('div');\n        labelElement.className = 'label';\n        labelElement.textContent = boxLabels[i];\n        boxElement.appendChild(labelElement);\n\n        boxElement.appendChild(createBoxPartElement.call(this, style, name, 'top', suffix));\n        boxElement.appendChild(document.createElement('br'));\n        boxElement.appendChild(createBoxPartElement.call(this, style, name, 'left', suffix));\n\n        if (previousBox) {\n          boxElement.appendChild(previousBox);\n        }\n\n        boxElement.appendChild(createBoxPartElement.call(this, style, name, 'right', suffix));\n        boxElement.appendChild(document.createElement('br'));\n        boxElement.appendChild(createBoxPartElement.call(this, style, name, 'bottom', suffix));\n      }\n\n      previousBox = boxElement;\n    }\n\n    metricsElement.appendChild(/** @type {!HTMLDivElement} */ (previousBox));\n    metricsElement.addEventListener('mouseover', this._highlightDOMNode.bind(this, false, 'all'), false);\n    metricsElement.addEventListener('mouseleave', this._highlightDOMNode.bind(this, false, 'all'), false);\n    this.contentElement.removeChildren();\n    this.contentElement.appendChild(metricsElement);\n    this.element.classList.remove('collapsed');\n  }\n\n  /**\n   * @param {!Element} targetElement\n   * @param {string} box\n   * @param {string} styleProperty\n   * @param {!Map.<string, string>} computedStyle\n   */\n  startEditing(targetElement, box, styleProperty, computedStyle) {\n    if (UI.UIUtils.isBeingEdited(targetElement)) {\n      return;\n    }\n\n    /** @type {!{box: string, styleProperty: string, computedStyle: !Map.<string, string>, keyDownHandler: function(!Event):void}} */\n    const context = {box, styleProperty, computedStyle, keyDownHandler: () => {}};\n    const boundKeyDown = this._handleKeyDown.bind(this, context);\n    context.keyDownHandler = boundKeyDown;\n    targetElement.addEventListener('keydown', boundKeyDown, false);\n\n    this._isEditingMetrics = true;\n\n    const config =\n        new UI.InplaceEditor.Config(this._editingCommitted.bind(this), this.editingCancelled.bind(this), context);\n    UI.InplaceEditor.InplaceEditor.startEditing(targetElement, /** @type {!UI.InplaceEditor.Config<?>} */ (config));\n\n    const selection = targetElement.getComponentSelection();\n    selection && selection.selectAllChildren(targetElement);\n  }\n\n  /**\n   * @param {!{box: string, styleProperty: string, computedStyle: !Map.<string, string>, keyDownHandler: function(!Event):void}} context\n   * @param {!Event} event\n   */\n  _handleKeyDown(context, event) {\n    const element = /** @type {!Element} */ (event.currentTarget);\n\n    /**\n     * @param {string} originalValue\n     * @param {string} replacementString\n     * @this {MetricsSidebarPane}\n     */\n    function finishHandler(originalValue, replacementString) {\n      this._applyUserInput(element, replacementString, originalValue, context, false);\n    }\n\n    /**\n     * @param {string} prefix\n     * @param {number} number\n     * @param {string} suffix\n     * @return {string}\n     */\n    function customNumberHandler(prefix, number, suffix) {\n      if (context.styleProperty !== 'margin' && number < 0) {\n        number = 0;\n      }\n      return prefix + number + suffix;\n    }\n\n    UI.UIUtils.handleElementValueModifications(\n        event, element, finishHandler.bind(this), undefined, customNumberHandler);\n  }\n\n  /**\n   * @param {!Element} element\n   * @param {!{keyDownHandler: function(!Event):void}} context\n   */\n  editingEnded(element, context) {\n    this.originalPropertyData = null;\n    this.previousPropertyDataCandidate = null;\n    element.removeEventListener('keydown', context.keyDownHandler, false);\n    delete this._isEditingMetrics;\n  }\n\n  /**\n   * @param {!Element} element\n   * @param {!{box: string, styleProperty: string, computedStyle: !Map.<string, string>, keyDownHandler: function(!Event):void}} context\n   */\n  editingCancelled(element, context) {\n    if (this._inlineStyle) {\n      if (!this.originalPropertyData) {\n        // An added property, remove the last property in the style.\n        const pastLastSourcePropertyIndex = this._inlineStyle.pastLastSourcePropertyIndex();\n        if (pastLastSourcePropertyIndex) {\n          this._inlineStyle.allProperties()[pastLastSourcePropertyIndex - 1].setText('', false);\n        }\n      } else {\n        this._inlineStyle.allProperties()[this.originalPropertyData.index].setText(\n            this.originalPropertyData.propertyText || '', false);\n      }\n    }\n    this.editingEnded(element, context);\n    this.update();\n  }\n\n  /**\n   * @param {!Element} element\n   * @param {string} userInput\n   * @param {string} previousContent\n   * @param {!{box: string, styleProperty: string, computedStyle: !Map.<string, string>, keyDownHandler: function(!Event):void}} context\n   * @param {boolean} commitEditor\n   */\n  _applyUserInput(element, userInput, previousContent, context, commitEditor) {\n    if (!this._inlineStyle) {\n      // Element has no renderer.\n      return this.editingCancelled(element, context);  // nothing changed, so cancel\n    }\n\n    if (commitEditor && userInput === previousContent) {\n      return this.editingCancelled(element, context);\n    }  // nothing changed, so cancel\n\n    if (context.box !== 'position' && (!userInput || userInput === '\\u2012')) {\n      userInput = '0px';\n    } else if (context.box === 'position' && (!userInput || userInput === '\\u2012')) {\n      userInput = 'auto';\n    }\n\n    userInput = userInput.toLowerCase();\n    // Append a \"px\" unit if the user input was just a number.\n    if (/^\\d+$/.test(userInput)) {\n      userInput += 'px';\n    }\n\n    const styleProperty = context.styleProperty;\n    const computedStyle = context.computedStyle;\n\n    if (computedStyle.get('box-sizing') === 'border-box' && (styleProperty === 'width' || styleProperty === 'height')) {\n      if (!userInput.match(/px$/)) {\n        Common.Console.Console.instance().error(\n            'For elements with box-sizing: border-box, only absolute content area dimensions can be applied');\n        return;\n      }\n\n      const borderBox = this._getBox(computedStyle, 'border');\n      const paddingBox = this._getBox(computedStyle, 'padding');\n      let userValuePx = Number(userInput.replace(/px$/, ''));\n      if (isNaN(userValuePx)) {\n        return;\n      }\n      if (styleProperty === 'width') {\n        userValuePx += borderBox.left + borderBox.right + paddingBox.left + paddingBox.right;\n      } else {\n        userValuePx += borderBox.top + borderBox.bottom + paddingBox.top + paddingBox.bottom;\n      }\n\n      userInput = userValuePx + 'px';\n    }\n\n    this.previousPropertyDataCandidate = null;\n\n    const allProperties = this._inlineStyle.allProperties();\n    for (let i = 0; i < allProperties.length; ++i) {\n      const property = allProperties[i];\n      if (property.name !== context.styleProperty || !property.activeInStyle()) {\n        continue;\n      }\n\n      this.previousPropertyDataCandidate = property;\n      property.setValue(userInput, commitEditor, true, callback.bind(this));\n      return;\n    }\n\n    this._inlineStyle.appendProperty(context.styleProperty, userInput, callback.bind(this));\n\n    /**\n     * @param {boolean} success\n     * @this {MetricsSidebarPane}\n     */\n    function callback(success) {\n      if (!success) {\n        return;\n      }\n      if (!this.originalPropertyData) {\n        this.originalPropertyData = this.previousPropertyDataCandidate;\n      }\n\n      if (this._highlightMode) {\n        const node = this.node();\n        if (!node) {\n          return;\n        }\n        node.highlight(this._highlightMode);\n      }\n\n      if (commitEditor) {\n        this.update();\n      }\n    }\n  }\n\n  /**\n   * @param {!Element} element\n   * @param {string} userInput\n   * @param {string} previousContent\n   * @param {!{box: string, styleProperty: string, computedStyle: !Map.<string, string>, keyDownHandler: function(!Event):void}} context\n   */\n  _editingCommitted(element, userInput, previousContent, context) {\n    this.editingEnded(element, context);\n    this._applyUserInput(element, userInput, previousContent, context, true);\n  }\n}\n"]}
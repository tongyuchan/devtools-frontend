{"version":3,"file":"ElementsTreeElement.js","sourceRoot":"","sources":["../../../../../front_end/elements/ElementsTreeElement.js"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA4BG;AAEH,OAAO,KAAK,MAAM,MAAM,qBAAqB,CAAC;AAC9C,OAAO,KAAK,UAAU,MAAM,6BAA6B,CAAC;AAC1D,OAAO,KAAK,SAAS,MAAM,2BAA2B,CAAC;AACvD,OAAO,KAAK,IAAI,MAAM,iBAAiB,CAAC;AACxC,OAAO,KAAK,QAAQ,MAAM,yBAAyB,CAAC;AACpD,OAAO,EAAC,EAAE,EAAC,MAAM,yBAAyB,CAAC;AAE3C,OAAO,KAAK,IAAI,MAAM,iBAAiB,CAAC;AACxC,OAAO,KAAK,GAAG,MAAM,eAAe,CAAC;AAErC,OAAO,KAAK,SAAS,MAAM,6BAA6B,CAAC;AACzD,OAAO,KAAK,EAAE,MAAM,aAAa,CAAC;AAElC,OAAO,EAAC,OAAO,EAAE,iBAAiB,EAAC,MAAM,cAAc,CAAC;AACxD,OAAO,EAAC,YAAY,EAAE,OAAO,EAAE,MAAM,EAAE,KAAK,EAAC,MAAM,cAAc,CAAC;AAClE,OAAO,EAAsB,kBAAkB,EAAe,MAAM,0BAA0B,CAAC,CAAE,qCAAqC;AACtI,OAAO,EAAC,mBAAmB,EAAC,MAAM,0BAA0B,CAAC;AAC7D,OAAO,EAAC,eAAe,EAAC,MAAM,sBAAsB,CAAC;AAErD,MAAM,OAAO,mBAAoB,SAAQ,EAAE,CAAC,WAAW,CAAC,WAAW;IACjE;;;OAGG;IACH,YAAY,IAAI,EAAE,YAAY;QAC5B,yCAAyC;QACzC,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,mCAAmC;QACnC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QAExB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,KAAK,EAAE,kBAAkB,CAAC,CAAC;QACpF,IAAI,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAClF,MAAM,cAAc,GAAG,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE,kBAAkB,CAAC,CAAC;QACjF,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC;QAClD,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAE9E,IAAI,CAAC,aAAa,GAAG,YAAY,CAAC;QAElC,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,YAAY,IAAI,CAAC,YAAY,EAAE;YAChE,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;SAC/B;QACD,sBAAsB;QACtB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,IAAI,CAAC,sBAAsB,GAAG,oBAAoB,CAAC;QACnD,IAAI,CAAC,qBAAqB,GAAG,IAAI,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;QAEjE,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QAEtB,6BAA6B;QAC7B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QAErB,kDAAkD;QAClD,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;QAE3B,IAAI,CAAC,YAAY,EAAE;YACjB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,KAAK,EAAE,0BAA0B,CAAC,CAAC;YAC7F,+BAA+B;YAC/B,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;YACpB,+BAA+B;YAC/B,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;YACzB,0CAA0C;YAC1C,IAAI,CAAC,kBAAkB,GAAG,IAAI,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YAE9D,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAE3B,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE;gBACxB,MAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,iBAAiB,CAAC,QAAQ,CAAC,CAAC;gBACjE,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAA,0CAA0C,CAAC,CAAC;aACnF;SACF;QAED;;WAEG;QACH,IAAI,CAAC,gBAAgB,CAAC;QAEtB,0CAA0C;QAC1C,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;IACrC,CAAC;IAED;;OAEG;IACH,MAAM,CAAC,kBAAkB,CAAC,WAAW;QACnC,MAAM,OAAO,GAAG,WAAW,CAAC,eAAe,CAAC,aAAa,CAAC,uBAAuB,CAAC,CAAC;QACnF,EAAE,CAAC,OAAO,CAAC,mBAAmB,CAAC,OAAO,IAAI,WAAW,CAAC,eAAe,EAAE,sBAAsB,CAAC,CAAC;IACjG,CAAC;IAED;;;OAGG;IACH,MAAM,CAAC,kBAAkB,CAAC,IAAI;QAC5B,IAAI,KAAK,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QAC/B,IAAI,KAAK,CAAC,MAAM,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,iBAAiB,CAAC,CAAC,GAAG,EAAE,EAAE;YAC/F,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;SAC9B;QAED;;WAEG;QACH,SAAS,MAAM,CAAC,IAAI;YAClB,OAAO,IAAI,CAAC,cAAc,EAAE,KAAK,GAAG,CAAC,QAAQ,CAAC,OAAO,CAAC,eAAe,CAAC,SAAS,CAAC;QAClF,CAAC;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IAED;;;OAGG;IACH,MAAM,CAAC,iBAAiB,CAAC,IAAI;QAC3B,IAAI,IAAI,CAAC,eAAe,EAAE,IAAI,IAAI,CAAC,gBAAgB,EAAE,IAAI,IAAI,CAAC,eAAe,EAAE;YAC3E,mBAAmB,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,MAAM,IAAI,IAAI,CAAC,iBAAiB,EAAE,EAAE;YACnF,OAAO,KAAK,CAAC;SACd;QACD,IAAI,IAAI,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,YAAY,EAAE;YACzC,OAAO,KAAK,CAAC;SACd;QACD,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,KAAK,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,SAAS,EAAE;YAC3G,OAAO,KAAK,CAAC;SACd;QACD,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC;QAClC,MAAM,wBAAwB,GAAG,EAAE,CAAC;QACpC,IAAI,SAAS,CAAC,SAAS,EAAE,CAAC,MAAM,GAAG,wBAAwB,EAAE;YAC3D,OAAO,IAAI,CAAC;SACb;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IAED;;;OAGG;IACH,MAAM,CAAC,8BAA8B,CAAC,WAAW,EAAE,IAAI;QACrD,MAAM,aAAa,GAAG,CAAC,QAAQ,EAAE,OAAO,EAAE,OAAO,EAAE,SAAS,EAAE,cAAc,EAAE,eAAe,CAAC,CAAC;QAC/F,MAAM,iBAAiB,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,QAAQ,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACvE,MAAM,SAAS,GAAG,WAAW,CAAC,YAAY,EAAE,CAAC,iBAAiB,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC;QACxG,KAAK,MAAM,WAAW,IAAI,aAAa,EAAE;YACvC,MAAM,iBAAiB,GAAG,iBAAiB,CAAC,CAAC,CAAC,iBAAiB,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;YAClG,SAAS,CAAC,cAAc,EAAE,CAAC,kBAAkB,CACzC,GAAG,GAAG,WAAW,EAAE,sBAAsB,CAAC,IAAI,CAAC,IAAI,EAAE,WAAW,EAAE,CAAC,iBAAiB,CAAC,EAAE,iBAAiB,EACxG,KAAK,CAAC,CAAC;SACZ;QAED;;;WAGG;QACH,SAAS,sBAAsB,CAAC,WAAW,EAAE,OAAO;YAClD,IAAI,CAAC,QAAQ,EAAE,CAAC,QAAQ,EAAE,CAAC,gBAAgB,CAAC,IAAI,EAAE,WAAW,EAAE,OAAO,CAAC,CAAC;QAC1E,CAAC;IACH,CAAC;IAED;;OAEG;IACH,YAAY;QACV,OAAO,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IACrC,CAAC;IAED;;OAEG;IACH,IAAI;QACF,OAAO,IAAI,CAAC,KAAK,CAAC;IACpB,CAAC;IAED;;OAEG;IACH,SAAS;QACP,OAAO,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAChC,CAAC;IAED;;OAEG;IACH,sBAAsB,CAAC,WAAW;QAChC,IAAI,IAAI,CAAC,YAAY,KAAK,WAAW,EAAE;YACrC,IAAI,CAAC,oBAAoB,EAAE,CAAC;SAC7B;QAED,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAChC,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;QACrC,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IAC/B,CAAC;IAED,oBAAoB;QAClB,OAAO,IAAI,CAAC,wBAAwB,CAAC;QACrC,IAAI,CAAC,oBAAoB,EAAE,CAAC;IAC9B,CAAC;IAED,oBAAoB;QAClB,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,KAAK,CAAC,EAAE;YACtC,OAAO;SACR;QAED,KAAK,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,EAAE;YAC5D,MAAM,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;YACvC,QAAQ,KAAK,CAAC,IAAI,EAAE;gBAClB,KAAK,OAAO;oBACV,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;oBACpB,MAAM;gBACR,KAAK,SAAS;oBACZ,KAAK,CAAC,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,OAAO,IAAI,IAAI,CAAC;oBAC/C,MAAM;aACT;SACF;QAED,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;IAC7B,CAAC;IAED;;OAEG;IACH,cAAc,CAAC,WAAW;QACxB,IAAI,IAAI,CAAC,YAAY,KAAK,WAAW,EAAE;YACrC,OAAO;SACR;QACD,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAChC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC,cAAc,EAAE,WAAW,CAAC,CAAC;IACrE,CAAC;IAED;;OAEG;IACH,IAAI,OAAO;QACT,OAAO,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IAED;;OAEG;IACH,IAAI,OAAO,CAAC,SAAS;QACnB,IAAI,IAAI,CAAC,QAAQ,KAAK,SAAS,EAAE;YAC/B,OAAO;SACR;QAED,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC;QAE1B,IAAI,IAAI,CAAC,eAAe,EAAE;YACxB,IAAI,SAAS,EAAE;gBACb,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBACxB,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;aAC/C;iBAAM;gBACL,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;aAClD;SACF;IACH,CAAC;IAED;;OAEG;IACH,qBAAqB;QACnB,OAAO,IAAI,CAAC,sBAAsB,CAAC;IACrC,CAAC;IAED;;OAEG;IACH,wBAAwB,CAAC,qBAAqB;QAC5C,IAAI,CAAC,sBAAsB,GAAG,qBAAqB,CAAC;IACtD,CAAC;IAED,gBAAgB;QACd,MAAM,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC;QAC7C,IAAI,CAAC,eAAe,EAAE;YACpB,OAAO;SACR;QAED,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE;YAC1B,IAAI,CAAC,gBAAgB,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YACtD,IAAI,CAAC,gBAAgB,CAAC,SAAS,GAAG,gBAAgB,CAAC;YACnD,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC;YAC5F,eAAe,CAAC,YAAY,CAAC,IAAI,CAAC,gBAAgB,EAAE,eAAe,CAAC,UAAU,CAAC,CAAC;SACjF;IACH,CAAC;IAED,WAAW;QACT,IAAI,IAAI,CAAC,eAAe,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YAC9C,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,MAAM,EAAE,eAAe,CAAC,CAAC;YAC9E,MAAM,sBAAsB,GAAG,IAAI,CAAC;YACpC,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CACtB,IAAI,CAAC,YAAY,EAAE,EAAE,CAAA,OAAO,sBAAsB,2CAA2C,CAAC,CAAC;YACnG,EAAE,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;SAC9C;IACH,CAAC;IAED;;OAEG;IACH,MAAM;QACJ,IAAI,IAAI,CAAC,WAAW,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;YAC3C,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;SAC1D;IACH,CAAC;IAED;;OAEG;IACH,QAAQ;QACN,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;SACxB;QACD,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,EAAE;YACnF,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACvD;IACH,CAAC;IAED;;OAEG;IACH,QAAQ;QACN,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACxB,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;SAC/C;QAED,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,eAAe,CAAC,SAAS,GAAG,IAAI,CAAC;IACxC,CAAC;IAED;;;OAGG;IACH,KAAK,CAAC,UAAU;QACd,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,OAAO,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;SACnD;IACH,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,iBAAiB;QACrB,MAAM,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;QACtC,MAAM,KAAK,CAAC,iBAAiB,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;IAClD,CAAC;IAED;;OAEG;IACH,QAAQ;QACN,IAAI,IAAI,CAAC,aAAa,EAAE;YACtB,OAAO;SACR;QAED,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IAED;;OAEG;IACH,UAAU;QACR,IAAI,IAAI,CAAC,aAAa,EAAE;YACtB,OAAO;SACR;QAED,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IAED;;;;;OAKG;IACH,MAAM,CAAC,SAAS,EAAE,cAAc;QAC9B,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,OAAO,KAAK,CAAC;SACd;QACD,OAAO,KAAK,CAAC,MAAM,CAAC,SAAS,EAAE,cAAc,CAAC,CAAC;IACjD,CAAC;IAED;;;;OAIG;IACH,QAAQ,CAAC,cAAc;QACrB,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACrB,OAAO,KAAK,CAAC;SACd;QACD,IAAI,CAAC,WAAW,CAAC,uBAAuB,GAAG,IAAI,CAAC;QAChD,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC;QAC3D,IAAI,cAAc,EAAE;YAClB,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC;YACvB,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,kCAAkC,CAAC,CAAC;SAC1F;QACD,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,WAAW,CAAC,uBAAuB,GAAG,KAAK,CAAC;QACjD,OAAO,IAAI,CAAC;IACd,CAAC;IAED;;;OAGG;IACH,QAAQ;QACN,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACrB,OAAO,KAAK,CAAC;SACd;QACD,MAAM,mBAAmB,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACzE,mBAAmB,CAAC,CAAC,CAAC,mBAAmB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;QACnE,OAAO,IAAI,CAAC;IACd,CAAC;IAED;;;OAGG;IACH,OAAO;QACL,uDAAuD;QACvD,qDAAqD;QACrD,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,OAAO,KAAK,CAAC;SACd;QAED,IAAI,CAAC,aAAa,EAAE,CAAC;QAErB,oDAAoD;QACpD,OAAO,IAAI,CAAC;IACd,CAAC;IAED;;;OAGG;IACH,iBAAiB,CAAC,KAAK;QACrB,KAAK,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;QAE/B,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,OAAO;SACR;QAED,sDAAsD;QACtD,IAAI,KAAK,CAAC,MAAM,IAAI,CAAC,EAAE;YACrB,KAAK,CAAC,cAAc,EAAE,CAAC;SACxB;IACH,CAAC;IAED;;;;OAIG;IACH,UAAU,CAAC,KAAK;QACd,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,aAAa,EAAE;YACvC,OAAO,KAAK,CAAC;SACd;QAED,IAAI,IAAI,CAAC,mBAAmB,CAAC,uBAAuB,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE;YACpE,OAAO,KAAK,CAAC;SACd;QAED,IAAI,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YACzC,IAAI,CAAC,MAAM,EAAE,CAAC;SACf;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IAED;;OAEG;IACH,eAAe;QACb,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,2BAA2B,EAAE,CAAC;IACjF,CAAC;IAED;;;OAGG;IACH,8BAA8B,CAAC,GAAG,EAAE,IAAI;QACtC,IAAI,GAAG,CAAC,sBAAsB,CAAC,uBAAuB,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE;YAClE,GAAG,CAAC,YAAY,CAAC,IAAI,EAAE,GAAG,CAAC,SAAS,CAAC,CAAC;SACvC;aAAM,IAAI,GAAG,CAAC,WAAW,KAAK,IAAI,EAAE;YACnC,MAAM,WAAW,GAAG,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;YACvD,IAAI,CAAC,WAAW,EAAE;gBAChB,OAAO;aACR;YACD,MAAM,QAAQ,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC;YAChC,GAAG,CAAC,WAAW,GAAG,EAAE,CAAC;YACrB,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,GAAG,EAAE,GAAG,GAAG,QAAQ,CAAC,CAAC;YAChD,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YACtB,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;SACtC;IACH,CAAC;IAED;;;OAGG;IACH,mBAAmB,CAAC,WAAW;QAC7B,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,KAAK,IAAI,CAAC,KAAK,EAAE;YAC1E,OAAO,KAAK,CAAC;SACd;QAED,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,SAAS,EAAE;YAC3F,OAAO,KAAK,CAAC;SACd;QAED,MAAM,QAAQ,GAAG,WAAW,CAAC,4BAA4B,CAAC,uBAAuB,CAAC,CAAC;QACnF,IAAI,QAAQ,EAAE;YACZ,OAAO,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,CAAC;SAC7C;QAED,MAAM,SAAS,GAAG,WAAW,CAAC,4BAA4B,CAAC,uBAAuB,CAAC,CAAC;QACpF,IAAI,SAAS,EAAE;YACb,OAAO,IAAI,CAAC,sBAAsB,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;SAC5D;QAED,MAAM,OAAO,GAAG,WAAW,CAAC,4BAA4B,CAAC,sBAAsB,CAAC,CAAC;QACjF,IAAI,OAAO,EAAE;YACX,OAAO,IAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC;SAC3C;QAED,MAAM,YAAY,GAAG,WAAW,CAAC,4BAA4B,CAAC,eAAe,CAAC,CAAC;QAC/E,IAAI,YAAY,EAAE;YAChB,OAAO,IAAI,CAAC,gBAAgB,EAAE,CAAC;SAChC;QAED,OAAO,KAAK,CAAC;IACf,CAAC;IAED;;OAEG;IACH,gBAAgB,CAAC,KAAK;QACpB,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;IACpE,CAAC;IAED;;;OAGG;IACH,sBAAsB,CAAC,WAAW,EAAE,KAAK;QACvC,iCAAiC;QACjC,MAAM,WAAW,GAAG,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QACjH,IAAI,CAAC,WAAW,EAAE;YAChB,OAAO;SACR;QACD,WAAW,CAAC,WAAW,EAAE,CAAC,UAAU,CAChC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,eAAe,CAAC,EAAE,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;QAE/F,MAAM,MAAM,GAAG,uBAAuB,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;QACtD,MAAM,SAAS,GAAG,MAAM,CAAC,4BAA4B,CAAC,uBAAuB,CAAC,CAAC;QAC/E,MAAM,YAAY,GAAG,MAAM,CAAC,4BAA4B,CAAC,eAAe,CAAC,CAAC;QAC1E,IAAI,SAAS,IAAI,CAAC,YAAY,EAAE;YAC9B,WAAW,CAAC,WAAW,EAAE,CAAC,UAAU,CAChC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,gBAAgB,CAAC,EAAE,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC,CAAC;SAC5G;QACD,IAAI,CAAC,uBAAuB,CAAC,WAAW,CAAC,CAAC;QAC1C,mBAAmB,CAAC,8BAA8B,CAAC,WAAW,EAAE,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC;QACpF,IAAI,CAAC,sBAAsB,CAAC,WAAW,CAAC,CAAC;QACzC,WAAW,CAAC,WAAW,EAAE,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE,KAAK,IAAI,EAAE;YACjF,MAAM,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;QAC3B,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;OAEG;IACH,sBAAsB,CAAC,WAAW;QAChC,WAAW,CAAC,WAAW,EAAE,CAAC,UAAU,CAChC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,kBAAkB,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC,CAAC;IACvF,CAAC;IAED;;;OAGG;IACH,uBAAuB,CAAC,WAAW,EAAE,QAAQ;QAC3C,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAClB,WAAW,CAAC,WAAW,EAAE,CAAC,UAAU,CAChC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAC;SAC7F;QACD,IAAI,CAAC,uBAAuB,CAAC,WAAW,CAAC,CAAC;IAC5C,CAAC;IAED;;OAEG;IACH,uBAAuB,CAAC,WAAW;QACjC,sCAAsC;QACtC,MAAM,UAAU,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAC1C,IAAI,UAAU,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAChC,WAAW,CAAC,WAAW,EAAE,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SAC7G;QACD,MAAM,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC;QAE/C,6DAA6D;QAC7D,MAAM,QAAQ,GAAG,WAAW,CAAC,gBAAgB,EAAE,CAAC,iBAAiB,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;QACpG,MAAM,cAAc,GAAG,EAAE,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACxF,MAAM,QAAQ,GAAG,EAAE,CAAC,gBAAgB,CAAC,SAAS,CAAC,UAAU,CAAC;QAC1D,MAAM,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;QACrC,IAAI,CAAC,WAAW,EAAE;YAChB,OAAO;SACR;QACD,IAAI,QAAQ,CAAC;QACb,MAAM,OAAO,GAAG,QAAQ,CAAC,OAAO,EAAE,CAAC;QACnC,IAAI,CAAC,YAAY,EAAE;YACjB,QAAQ,GAAG,OAAO,CAAC,UAAU,CACzB,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,gBAAgB,CAAC,EAC1C,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YACvE,QAAQ,CAAC,WAAW,CAAC,cAAc,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC,CAAC;SACrD;QACD,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,YAAY,EAAE;YAC/C,OAAO,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,eAAe,CAAC,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YAC5F,OAAO,CAAC,UAAU,CACd,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YACtG,OAAO,CAAC,UAAU,CAAC,EAAE,CAAA,aAAa,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SAClE;QACD,IAAI,CAAC,YAAY,EAAE;YACjB,OAAO,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACvF,OAAO,CAAC,UAAU,CAAC,EAAE,CAAA,iBAAiB,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SACzE;QAED,IAAI,CAAC,YAAY,EAAE;YACjB,QAAQ,GAAG,QAAQ,CAAC,gBAAgB,EAAE,CAAC,UAAU,CAC7C,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,aAAa,CAAC,EAAE,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,EACzG,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC;YAC7B,QAAQ,CAAC,WAAW,CAAC,cAAc,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC,CAAC;YACpD,QAAQ,GAAG,QAAQ,CAAC,gBAAgB,EAAE,CAAC,UAAU,CAC7C,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YACjH,QAAQ,CAAC,WAAW,CAAC,cAAc,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC,CAAC;YACpD,QAAQ,GAAG,QAAQ,CAAC,gBAAgB,EAAE,CAAC,UAAU,CAC7C,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,eAAe,CAAC,EAAE,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,KAAK,CAAC,EAC9F,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YACvC,QAAQ,CAAC,WAAW,CAAC,cAAc,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC,CAAC;YAEpD,6DAA6D;YAC7D,MAAM,aAAa,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,QAAQ,EAAE,KAAK,WAAW,CAAC;YACjG,QAAQ,GAAG,WAAW,CAAC,WAAW,EAAE,CAAC,UAAU,CAC3C,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,mBAAmB,CAAC,EAAE,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,KAAK,CAAC,EACtG,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,IAAI,aAAa,CAAC,CAAC,CAAC;SACrD;QAED,QAAQ,GAAG,WAAW,CAAC,YAAY,EAAE,CAAC,kBAAkB,CACpD,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE,WAAW,CAAC,iBAAiB,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,KAAK,CAAC,EACrG,WAAW,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QAC/C,QAAQ,CAAC,WAAW,CAChB,EAAE,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC,sBAAsB,CAAC,uBAAuB,CAAC,IAAI,EAAE,CAAC,CAAC;QAE3G,IAAI,UAAU,EAAE;YACd,WAAW,CAAC,WAAW,EAAE,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,gBAAgB,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SAC1G;QAED,WAAW,CAAC,WAAW,EAAE,CAAC,UAAU,CAAC,EAAE,CAAA,oBAAoB,EAAE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAChG,WAAW,CAAC,WAAW,EAAE,CAAC,UAAU,CAAC,EAAE,CAAA,mBAAmB,EAAE,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC9F,MAAM,uBAAuB,GAAG,IAAI,SAAS,CAAC,iBAAiB,CAAC,cAAc,EAAE,CAAC;QACjF,WAAW,CAAC,WAAW,EAAE,CAAC,UAAU,CAChC,EAAE,CAAA,yBAAyB,EAC3B,uBAAuB,CAAC,YAAY,CAAC,IAAI,CACrC,IAAI,EAAE,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,mCAAmC,CAAC,CAAC,CAAC;IACrF,CAAC;IAED,aAAa;QACX,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,KAAK,IAAI,CAAC,KAAK,EAAE;YAC1E,OAAO;SACR;QAED,MAAM,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC;QAEtC,IAAI,IAAI,CAAC,iBAAiB,EAAE;YAC1B,MAAM,SAAS,GAAG,QAAQ,CAAC,sBAAsB,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,CAAC;YAC9E,IAAI,SAAS,EAAE;gBACb,OAAO,IAAI,CAAC,sBAAsB,CAC9B,SAAS,EAAE,SAAS,CAAC,sBAAsB,CAAC,6BAA6B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aACpF;YAED,OAAO,IAAI,CAAC,gBAAgB,EAAE,CAAC;SAChC;QAED,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,SAAS,EAAE;YAC5C,MAAM,QAAQ,GAAG,QAAQ,CAAC,sBAAsB,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7E,IAAI,QAAQ,EAAE;gBACZ,OAAO,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,CAAC;aAC7C;SACF;QAED,OAAO;IACT,CAAC;IAED,gBAAgB;QACd,+DAA+D;QAC/D,8DAA8D;QAC9D,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QACjD,MAAM,IAAI,GAAG,IAAI,CAAC,kBAAkB,CAAC,SAAS,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;QAC/D,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,KAAK,CAAC,CAAG,qCAAqC;QACtE,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,KAAK,CAAC,CAAE,qCAAqC;QAEtE,MAAM,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC,sBAAsB,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;QAC9E,IAAI,CAAC,8BAA8B,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;QAC/C,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;QAClC,OAAO,IAAI,CAAC,sBAAsB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IACjD,CAAC;IAED;;OAEG;IACH,qBAAqB,CAAC,aAAa;QACjC,MAAM,iBAAiB,GAAG,IAAI,CAAC,eAAe,CAAC,sBAAsB,CAAC,4BAA4B,CAAC,CAAC;QACpG,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,iBAAiB,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,EAAE,CAAC,EAAE;YAC5D,IAAI,iBAAiB,CAAC,CAAC,CAAC,CAAC,WAAW,KAAK,aAAa,EAAE;gBACtD,KAAK,IAAI,IAAI,GAAG,iBAAiB,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC,WAAW,EAAE;oBAC/E,IAAI,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,YAAY,EAAE;wBACvC,SAAS;qBACV;oBAED,KAAI,uBAAwB,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,6BAA6B,CAAC,EAAE;wBACpF,OAAO,IAAI,CAAC,sBAAsB;wBAC9B,2BAA2B,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,uBAAuB,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;qBACvF;iBACF;aACF;SACF;QAED,OAAO;IACT,CAAC;IAED;;;OAGG;IACH,sBAAsB,CAAC,SAAS,EAAE,mBAAmB;QACnD,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC;QAE3D,IAAI,EAAE,CAAC,OAAO,CAAC,aAAa,CAAC,SAAS,CAAC,EAAE;YACvC,OAAO,IAAI,CAAC;SACb;QAED,MAAM,oBAAoB,GAAG,SAAS,CAAC,sBAAsB,CAAC,4BAA4B,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/F,IAAI,CAAC,oBAAoB,EAAE;YACzB,OAAO,KAAK,CAAC;SACd;QAED,MAAM,aAAa,GAAG,oBAAoB,CAAC,WAAW,CAAC;QACvD,MAAM,qBAAqB,GAAG,SAAS,CAAC,sBAAsB,CAAC,6BAA6B,CAAC,CAAC,CAAC,CAAC,CAAC;QAEjG,yEAAyE;QACzE,mBAAmB;YACf,qBAAqB,CAAC,UAAU,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,mBAAmB,CAAC;QAExG;;WAEG;QACH,SAAS,6BAA6B,CAAC,IAAI;YACzC,IAAI,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,SAAS,EAAE;gBACpC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC7E,OAAO;aACR;YAED,IAAI,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,YAAY,EAAE;gBACvC,OAAO;aACR;YAED,KAAK,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,EAAE,KAAK,EAAE,KAAK,GAAG,KAAK,CAAC,WAAW,EAAE;gBAClE,6BAA6B,CAAC,KAAK,CAAC,CAAC;aACtC;QACH,CAAC;QAED,MAAM,cAAc,GAAG,aAAa,IAAI,qBAAqB,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;QACnH,IAAI,cAAc,KAAK,SAAS,EAAE;YAChC,qBAAqB,CAAC,+BAA+B,CACjD,cAAc,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,8BAA8B,CAAC,CAAC,CAAC;SAC/E;QAED,6DAA6D;QAC7D,6BAA6B,CAAC,SAAS,CAAC,CAAC;QAEzC,MAAM,MAAM,GAAG,IAAI,EAAE,CAAC,aAAa,CAAC,MAAM;QACtC,8EAA8E,CAAC,CAC3E,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,EAC/C,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,aAAa,IAAI,SAAS,CAAC,CAAC;QAEnE;;;WAGG;QACH,SAAS,wBAAwB,CAAC,KAAK;YACrC,EAAE,CAAC,OAAO,CAAC,+BAA+B,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;YAC7D,OAAO,EAAE,CAAC;QACZ,CAAC;QAED,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,UAAU,CAAC,qBAAqB,CAAC,WAAW,IAAI,EAAE,CAAC,EAAE;YACnF,MAAM,CAAC,2BAA2B,CAAC,wBAAwB,CAAC,CAAC;SAC9D;QAED,IAAI,CAAC,oBAAoB,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;QAE7C,MAAM,kBAAkB,GAAG,IAAI,CAAC,eAAe,CAAC,qBAAqB,EAAE,CAAC;QACxE,kBAAkB,IAAI,kBAAkB,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,CAAC;QAGhF,OAAO,IAAI,CAAC;IACd,CAAC;IAGD;;OAEG;IACH,qBAAqB,CAAC,eAAe;QACnC,IAAI,EAAE,CAAC,OAAO,CAAC,aAAa,CAAC,eAAe,CAAC,EAAE;YAC7C,OAAO,IAAI,CAAC;SACb;QAED,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC;QAC1B,iEAAiE;QACjE,qDAAqD;QACrD,IAAI,QAAQ,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,YAAY,IAAI,QAAQ,CAAC,UAAU,EAAE;YACpE,QAAQ,GAAG,QAAQ,CAAC,UAAU,CAAC;SAChC;QAED,MAAM,SAAS,GAAG,eAAe,CAAC,4BAA4B,CAAC,uBAAuB,CAAC,CAAC;QACxF,IAAI,SAAS,EAAE;YACb,SAAS,CAAC,WAAW,GAAG,QAAQ,CAAC,SAAS,EAAE,CAAC;SAC9C,CAAE,+CAA+C;QAClD,MAAM,MAAM,GAAG,IAAI,EAAE,CAAC,aAAa,CAAC,MAAM,CACtC,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,EAAE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC5F,IAAI,CAAC,oBAAoB,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC;QACnD,MAAM,kBAAkB,GAAG,IAAI,CAAC,eAAe,CAAC,qBAAqB,EAAE,CAAC;QACxE,kBAAkB,IAAI,kBAAkB,CAAC,iBAAiB,CAAC,eAAe,CAAC,CAAC;QAE5E,OAAO,IAAI,CAAC;IACd,CAAC;IAED;;OAEG;IACH,oBAAoB,CAAC,cAAc;QACjC,IAAI,CAAC,cAAc,EAAE;YACnB,cAAc,GAAG,IAAI,CAAC,eAAe,CAAC,sBAAsB,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC,CAAC;YACxF,IAAI,CAAC,cAAc,EAAE;gBACnB,OAAO,KAAK,CAAC;aACd;SACF;QAED,MAAM,OAAO,GAAG,cAAc,CAAC,WAAW,CAAC;QAC3C,IAAI,OAAO,KAAK,IAAI,IAAI,gBAAgB,CAAC,GAAG,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,EAAE;YACnE,OAAO,KAAK,CAAC;SACd;QAED,IAAI,EAAE,CAAC,OAAO,CAAC,aAAa,CAAC,cAAc,CAAC,EAAE;YAC5C,OAAO,IAAI,CAAC;SACb;QAED,MAAM,iBAAiB,GAAG,IAAI,CAAC,0BAA0B,EAAE,CAAC;QAE5D,SAAS,aAAa;YACpB,IAAI,iBAAiB,IAAI,cAAc,EAAE;gBACvC,iBAAiB,CAAC,WAAW,GAAG,IAAI,GAAG,cAAc,CAAC,WAAW,GAAG,GAAG,CAAC;aACzE;QACH,CAAC;QAED;;WAEG;QACH,MAAM,eAAe,GAAG,KAAK,CAAC,EAAE;YAC9B,KAAI,6BAA8B,CAAC,KAAK,CAAC,CAAC,GAAG,KAAK,GAAG,EAAE;gBACrD,OAAO;aACR;YACD,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;YACxC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACtB,CAAC,CAAC;QAEF;;;;;;;WAOG;QACH,SAAS,gBAAgB,CAAC,OAAO,EAAE,UAAU,EAAE,OAAO,EAAE,OAAO,EAAE,aAAa;YAC5E,IAAI,CAAC,cAAc,EAAE;gBACnB,OAAO;aACR;YACD,cAAc,CAAC,mBAAmB,CAAC,OAAO,EAAE,aAAa,EAAE,KAAK,CAAC,CAAC;YAClE,cAAc,CAAC,mBAAmB,CAAC,SAAS,EAAE,eAAe,EAAE,KAAK,CAAC,CAAC;YACtE,IAAI,CAAC,wBAAwB,CAAC,OAAO,EAAE,UAAU,EAAE,OAAO,EAAE,qBAAqB,CAAC,CAAC,OAAO,CAAC,EAAE,aAAa,CAAC,CAAC;QAC9G,CAAC;QAED;;;;WAIG;QACH,SAAS,gBAAgB,CAAC,OAAO,EAAE,OAAO;YACxC,IAAI,CAAC,cAAc,EAAE;gBACnB,OAAO;aACR;YACD,cAAc,CAAC,mBAAmB,CAAC,OAAO,EAAE,aAAa,EAAE,KAAK,CAAC,CAAC;YAClE,cAAc,CAAC,mBAAmB,CAAC,SAAS,EAAE,eAAe,EAAE,KAAK,CAAC,CAAC;YACtE,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QAC3C,CAAC;QAED,cAAc,CAAC,gBAAgB,CAAC,OAAO,EAAE,aAAa,EAAE,KAAK,CAAC,CAAC;QAC/D,cAAc,CAAC,gBAAgB,CAAC,SAAS,EAAE,eAAe,EAAE,KAAK,CAAC,CAAC;QAEnE,MAAM,MAAM,GAAG,IAAI,EAAE,CAAC,aAAa,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,OAAO,CAAC,CAAC;QAC9G,IAAI,CAAC,oBAAoB,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC;QAClD,MAAM,kBAAkB,GAAG,IAAI,CAAC,eAAe,CAAC,qBAAqB,EAAE,CAAC;QACxE,kBAAkB,IAAI,kBAAkB,CAAC,iBAAiB,CAAC,cAAc,CAAC,CAAC;QAC3E,OAAO,IAAI,CAAC;IACd,CAAC;IAED;;;OAGG;IACH,oBAAoB,CAAC,OAAO,EAAE,MAAM;QAClC,MAAM,aAAa,GAAG,EAAE,CAAC,aAAa,CAAC,aAAa,CAAC,YAAY,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;QACnF,IAAI,CAAC,aAAa,EAAE;YAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;SACtB;aAAM;YACL,IAAI,CAAC,QAAQ,GAAG;gBACd,MAAM,EAAE,aAAa,CAAC,MAAM;gBAC5B,MAAM,EAAE,aAAa,CAAC,MAAM;gBAC5B,MAAM,EAAE,SAAS;gBACjB,MAAM,EAAE,GAAG,EAAE,GAAE,CAAC;aACjB,CAAC;SACH;IACH,CAAC;IAED;;;;OAIG;IACH,mBAAmB,CAAC,cAAc,EAAE,eAAe,EAAE,iBAAiB;QACpE,IAAI,iBAAiB,KAAK,IAAI,EAAE;YAC9B,OAAO;SACR;QACD,IAAI,YAAY,GAAG,iBAAiB,CAAC,CAAE,kCAAkC;QACzE,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,OAAO;SACR;QAED,YAAY,GAAG,IAAI,CAAC,4BAA4B,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC;QAEpE,IAAI,CAAC,gBAAgB,GAAG,2BAA2B,CAAC,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;QACpF,IAAI,CAAC,gBAAgB,CAAC,SAAS,GAAG,kCAAkC,CAAC;QAErE,qBAAqB;QACrB,IAAI,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC;QAC5C,OAAO,KAAK,EAAE;YACZ,2BAA2B,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;YAC3D,KAAK,GAAG,KAAK,CAAC,WAAW,CAAC;SAC3B;QACD,sBAAsB;QACtB,IAAI,IAAI,CAAC,mBAAmB,EAAE;YAC5B,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;SACjD;QACD,iBAAiB;QACjB,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAExD,MAAM,mBAAmB,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC;QACvG,IAAI,mBAAmB,EAAE;YACvB,mBAAmB,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;gBAC5C,UAAU,CAAC,IAAI,CAAC,IAAI,EAAE,+CAA+C,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;YACnF,CAAC,CAAC,CAAC;SACJ;QAGD;;;WAGG;QACH,SAAS,UAAU,CAAC,OAAO;YACzB,MAAM,MAAM,GAAG,OAAO,CAAC,YAAY,CAAC;gBAClC,WAAW,EAAE,KAAK;gBAClB,YAAY,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC,GAAG,EAAE;gBACpF,QAAQ,EAAE,WAAW;gBACrB,UAAU,EAAE,KAAK;gBACjB,SAAS,EAAE,KAAK;gBAChB,sBAAsB,EAAE,SAAS;gBACjC,sBAAsB,EAAE,SAAS;gBACjC,kBAAkB,EAAE,SAAS;gBAC7B,WAAW,EAAE,SAAS;gBACtB,eAAe,EAAE,SAAS;gBAC1B,UAAU,EAAE,SAAS;aACtB,CAAC,CAAC;YACH,IAAI,CAAC,QAAQ,GAAG,EAAC,MAAM,EAAE,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC,CAAC;YAC3G,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAElB,MAAM,CAAC,MAAM,EAAE,CAAC,IAAI;YAChB,2BAA2B,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;YACzD,MAAM,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;YAC7B,MAAM,CAAC,MAAM,EAAE,CAAC,KAAK,EAAE,CAAC;YACxB,MAAM,CAAC,MAAM,EAAE,CAAC,OAAO,CAAC,gBAAgB,CAAC,UAAU,EAAE,KAAK,CAAC,EAAE;gBAC3D,iFAAiF;gBACjF,MAAM,aAAa,GAAG,oBAAoB,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;gBACjE,IAAI,aAAa,IAAI,CAAC,aAAa,CAAC,kBAAkB,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,OAAO,CAAC,EAAE;oBAC/E,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;iBACzC;YACH,CAAC,EAAE,KAAK,CAAC,CAAC;YACV,MAAM,CAAC,MAAM,EAAE,CAAC,OAAO,CAAC,gBAAgB,CAAC,SAAS,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;YAE9E,IAAI,CAAC,WAAW;gBACZ,IAAI,CAAC,WAAW,CAAC,mBAAmB;gBAChC,2HAA2H;gBAC3H,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;QAC3B,CAAC;QAED;;WAEG;QACH,SAAS,MAAM;YACb,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,gBAAgB,EAAE;gBAC7C,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,GAAG,IAAI,CAAC,kBAAkB,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC;aAC7G;YAED,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;gBACzC,oEAAoE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE,CAAC;aACxG;QACH,CAAC;QAED;;WAEG;QACH,SAAS,MAAM;YACb,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;gBACzC,cAAc,CAAC,YAAY,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC;aAC3D;YACD,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACrB,CAAC;QAED;;WAEG;QACH,SAAS,OAAO;YACd,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;gBAC3C,OAAO;aACR;YACD,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,OAAO,CAAC,mBAAmB,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YAC9F,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,MAAM,EAAE,CAAC;YACvC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YAErB,iBAAiB;YACjB,IAAI,IAAI,CAAC,gBAAgB,EAAE;gBACzB,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;aACzD;YACD,IAAI,CAAC,gBAAgB,GAAG,SAAS,CAAC;YAClC,wBAAwB;YACxB,IAAI,IAAI,CAAC,mBAAmB,EAAE;gBAC5B,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;aAC1D;YACD,uBAAuB;YACvB,IAAI,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC;YAC5C,OAAO,KAAK,EAAE;gBACZ,2BAA2B,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;gBACpE,KAAK,GAAG,KAAK,CAAC,WAAW,CAAC;aAC3B;YAED,IAAI,IAAI,CAAC,WAAW,EAAE;gBACpB,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;gBAC3C,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC;aAC1B;YAED,eAAe,EAAE,CAAC;QACpB,CAAC;QAED;;;WAGG;QACH,SAAS,OAAO,CAAC,KAAK;YACpB,MAAM,aAAa,GAAG,6BAA6B,CAAC,CAAC,KAAK,CAAC,CAAC;YAC5D,MAAM,YAAY,GAAG,EAAE,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,aAAa,CAAC;gBACvF,CAAC,aAAa,CAAC,MAAM,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC;YACrD,IAAI,aAAa,CAAC,GAAG,KAAK,OAAO,IAAI,CAAC,YAAY,IAAI,aAAa,CAAC,mBAAmB,CAAC,EAAE;gBACxF,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;gBAC5B,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;aACzC;iBAAM,IAAI,aAAa,CAAC,OAAO,KAAK,EAAE,CAAC,gBAAgB,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,IAAI,aAAa,CAAC,GAAG,KAAK,QAAQ,EAAE;gBACxG,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;gBAC5B,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;aACzC;QACH,CAAC;IACH,CAAC;IAED;;;;;;OAMG;IACH,0BAA0B,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,aAAa,EAAE,aAAa;QAChF,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QAErB,MAAM,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;QAErC;;;WAGG;QACH,SAAS,2BAA2B,CAAC,KAAK;YACxC,IAAI,KAAK,EAAE;gBACT,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;aAChD;YAED,IAAI,CAAC,aAAa,EAAE;gBAClB,OAAO;aACR;YAED,IAAI,WAAW,EAAE;gBACf,WAAW,CAAC,iBAAiB,EAAE,CAAC;gBAChC,WAAW,CAAC,KAAK,EAAE,CAAC;aACrB;YAED,yEAAyE;YACzE,MAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC;YAC3C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;gBAC1C,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,aAAa,EAAE;oBACxC,SAAS;iBACV;gBAED,IAAI,aAAa,KAAK,UAAU,EAAE;oBAChC,IAAI,CAAC,KAAK,CAAC,EAAE;wBACX,IAAI,CAAC,oBAAoB,EAAE,CAAC;qBAC7B;yBAAM;wBACL,IAAI,CAAC,qBAAqB,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;qBACpD;iBACF;qBAAM;oBACL,IAAI,CAAC,KAAK,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;wBAC/B,IAAI,CAAC,gBAAgB,EAAE,CAAC;qBACzB;yBAAM;wBACL,IAAI,CAAC,qBAAqB,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;qBACpD;iBACF;gBACD,OAAO;aACR;YAED,4CAA4C;YAC5C,IAAI,aAAa,KAAK,UAAU,EAAE;gBAChC,IAAI,OAAO,KAAK,GAAG,EAAE;oBACnB,kDAAkD;oBAClD,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;wBACzB,IAAI,CAAC,qBAAqB,CAAC,UAAU,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;qBACpE;iBACF;qBAAM;oBACL,mDAAmD;oBACnD,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;wBACzB,IAAI,CAAC,qBAAqB,CAAC,UAAU,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;qBACpE;iBACF;aACF;iBAAM,IAAI,aAAa,KAAK,SAAS,EAAE;gBACtC,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,YAAY,CAAC,OAAO,CAAC,EAAE;oBACnD,IAAI,CAAC,gBAAgB,EAAE,CAAC;iBACzB;qBAAM;oBACL,IAAI,CAAC,oBAAoB,EAAE,CAAC;iBAC7B;aACF;QACH,CAAC;QAED,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,IAAI,OAAO,CAAC,IAAI,EAAE,CAAC,IAAI,OAAO,KAAK,OAAO,EAAE;YACnE,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,aAAa,EAAE,OAAO,EAAE,2BAA2B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACxF,OAAO;SACR;QAED,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,2BAA2B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACzC,CAAC;IAED;;;;;;OAMG;IACH,wBAAwB,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,aAAa;QACxE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,MAAM,IAAI,GAAG,IAAI,CAAC;QAElB,SAAS,MAAM;YACb,MAAM,iBAAiB,GAAG,IAAI,CAAC,0BAA0B,EAAE,CAAC;YAC5D,IAAI,iBAAiB,EAAE;gBACrB,iBAAiB,CAAC,WAAW,GAAG,IAAI,GAAG,OAAO,GAAG,GAAG,CAAC;aACtD;YAED,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACzC,2BAA2B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACzC,CAAC;QAED;;WAEG;QACH,SAAS,2BAA2B;YAClC,IAAI,aAAa,KAAK,SAAS,EAAE;gBAC/B,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBACxB,OAAO;aACR;YAED,MAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC;YAC3C,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;gBACzB,IAAI,CAAC,qBAAqB,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;aAChD;iBAAM;gBACL,IAAI,CAAC,gBAAgB,EAAE,CAAC;aACzB;QACH,CAAC;QAED,OAAO,GAAG,OAAO,CAAC,IAAI,EAAE,CAAC;QACzB,IAAI,OAAO,KAAK,OAAO,EAAE;YACvB,MAAM,EAAE,CAAC;YACT,OAAO;SACR;QAED,MAAM,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;QACrC,MAAM,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC;QAElC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YACjD,IAAI,KAAK,IAAI,CAAC,OAAO,EAAE;gBACrB,MAAM,EAAE,CAAC;gBACT,OAAO;aACR;YACD,IAAI,CAAC,WAAW,EAAE;gBAChB,OAAO;aACR;YACD,MAAM,WAAW,GAAG,WAAW,CAAC,mBAAmB,CAAC,WAAW,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC;YACjF,2BAA2B,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAChD,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;;;OAIG;IACH,yBAAyB,CAAC,QAAQ,EAAE,OAAO,EAAE,OAAO;QAClD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QAErB;;WAEG;QACH,SAAS,QAAQ;YACf,IAAI,CAAC,WAAW,EAAE,CAAC;QACrB,CAAC;QACD,QAAQ,CAAC,YAAY,CAAC,OAAO,EAAE,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACtD,CAAC;IAED;;;OAGG;IACH,iBAAiB,CAAC,OAAO,EAAE,OAAO;QAChC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QAErB,wCAAwC;QACxC,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IAED;;OAEG;IACH,0BAA0B;QACxB,oFAAoF;QAEpF,0EAA0E;QAC1E,6BAA6B;QAC7B,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,MAAM,OAAO,GAAG,IAAI,CAAC,mBAAmB,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;YACpE,OAAO,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;SACpC;QAED,uEAAuE;QACvE,qEAAqE;QACrE,oDAAoD;QACpD,MAAM,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,sBAAsB,CAAC,iBAAiB,CAAC,CAAC;QAC5E,OAAO,IAAI,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IAC1D,CAAC;IAED;;;OAGG;IACH,WAAW,CAAC,YAAY,EAAE,sBAAsB;QAC9C,iEAAiE;QACjE,yDAAyD;QACzD,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,OAAO;SACR;QAED,IAAI,sBAAsB,EAAE;YAC1B,IAAI,CAAC,oBAAoB,EAAE,CAAC;SAC7B;aAAM;YACL,MAAM,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,YAAY,IAAI,IAAI,CAAC,CAAC;YAC3D,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,sBAAsB,IAAI,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE;gBACpF,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,EAAE;gBAC/B,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;gBACtD,IAAI,KAAK,GAAG,CAAC,CAAC;gBACd,KAAK,IAAI,IAAI,GAAG,oCAAoC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,KAAK,IAAI,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC,UAAU,EAAE;oBACxG,IAAI,IAAI,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,sBAAsB,EAAE;wBACnD,KAAK,EAAE,CAAC;qBACT;iBACF;gBACD,IAAI,CAAC,KAAK,EAAE;oBACV,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;iBAC5D;qBAAM;oBACL,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,GAAG,CAAC,oBAAoB,GAAG,KAAK,CAAC,CAAC;iBACtE;aACF;YACD,MAAM,gBAAgB,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YACxD,gBAAgB,CAAC,SAAS,GAAG,WAAW,CAAC;YACzC,gBAAgB,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;YACvC,uFAAuF;YACvF,IAAI,CAAC,KAAK,GAAG,gBAAgB,CAAC;YAC9B,IAAI,CAAC,iBAAiB,EAAE,CAAC;YACzB,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;YAC1F,IAAI,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,iBAAiB,EAAE;gBACjD,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;aAC1D;YACD,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;YAC3B,OAAO,IAAI,CAAC,gBAAgB,CAAC;YAC7B,OAAO,IAAI,CAAC,YAAY,CAAC;YACzB,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBACxB,IAAI,CAAC,WAAW,EAAE,CAAC;aACpB;SACF;QAED,IAAI,CAAC,uBAAuB,EAAE,CAAC;IACjC,CAAC;IAED;;OAEG;IACH,kBAAkB;QAChB,IAAI,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC;QAC9B,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,OAAO,WAAW,KAAK,IAAI,EAAE;YAC3B,KAAK,EAAE,CAAC;YACR,WAAW,GAAG,WAAW,CAAC,MAAM,CAAC;SAClC;QAED,oDAAoD;QACpD,OAAO,EAAE,GAAG,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IAC3D,CAAC;IAED,iBAAiB;QACf,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,GAAG,IAAI,CAAC;QAEvE,IAAI,IAAI,CAAC,YAAY,EAAE,EAAE;YACvB,OAAO;SACR;QAED,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,YAAY,EAAE;YAC/C,OAAO;SACR;QAED,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAClF,CAAC;IAED;;OAEG;IACH,0BAA0B;QACxB,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACrB,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;SAC1B;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;QAExB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,mBAAmB,EAAE;YACzC,IAAI,CAAC,WAAW,CAAC,mBAAmB,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC;SACpG;QAED,MAAM,iBAAiB,GAAG,IAAI,GAAG,EAAE,CAAC;QACpC,KAAK,MAAM,kBAAkB,IAAI,IAAI,CAAC,WAAW,CAAC,mBAAmB,EAAE;YACrE,MAAM,UAAU,GAAG,kBAAkB,CAAC,UAAU,EAAE,CAAC;YACnD,IAAI,QAAQ,IAAI,UAAU,EAAE;gBAC1B,iBAAiB,CAAC,GAAG,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE,kBAAkB,CAAC,CAAC;aACjE;SACF;QAED,qCAAqC;QACrC,MAAM,QAAQ,GAAG,EAAE,CAAC;QACpB,sDAAsD;QACtD,MAAM,WAAW,GAAG,EAAE,CAAC;QACvB,sDAAsD;QACtD,MAAM,qBAAqB,GAAG,EAAE,CAAC;QACjC,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;QAE9B;;;WAGG;QACH,SAAS,OAAO,CAAC,CAAC,EAAE,MAAM;YACxB,MAAM,SAAS,GAAG,iBAAiB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YAChD,IAAI,CAAC,SAAS,EAAE;gBACd,OAAO;aACR;YACD,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAC5E,CAAC;QAED;;;WAGG;QACH,SAAS,iBAAiB,CAAC,CAAC,EAAE,SAAS;YACrC,MAAM,UAAU,GAAG,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACzC,IAAI,CAAC,UAAU,EAAE;gBACf,OAAO;aACR;YACD,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACtE,CAAC;QAED,OAAO,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAElE;;WAEG;QACH,SAAS,mBAAmB;YAC1B,IAAI,CAAC,mBAAmB,CAAC,cAAc,EAAE,CAAC;YAC1C,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YACjD,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,MAAM,CAClC,iBAAiB,EAAE,OAAO,CAAC,WAAW,CAAC,MAAM,IAAI,qBAAqB,CAAC,MAAM,CAAC,CAAC,CAAC;YACpF,EAAE,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,mBAAmB,EAAE,EAAE,CAAC,CAAC;YAE7D,IAAI,CAAC,WAAW,CAAC,MAAM,IAAI,CAAC,qBAAqB,CAAC,MAAM,EAAE;gBACxD,OAAO;aACR;YAED,MAAM,MAAM,GAAG,IAAI,GAAG,EAAE,CAAC;YACzB,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAE7C,KAAK,MAAM,UAAU,IAAI,WAAW,EAAE;gBACpC,MAAM,YAAY,GAAG,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;gBAC/C,YAAY,CAAC,WAAW,GAAG,UAAU,CAAC,KAAK,CAAC;gBAC5C,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;aAC9B;YACD,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;gBACxC,OAAO;aACR;YAED,MAAM,gBAAgB,GAAG,IAAI,GAAG,EAAE,CAAC;YACnC,IAAI,qBAAqB,CAAC,MAAM,EAAE;gBAChC,IAAI,OAAO,GAAG,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;gBACxC,OAAO,CAAC,WAAW,GAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;gBAC5D,KAAK,MAAM,UAAU,IAAI,qBAAqB,EAAE;oBAC9C,OAAO,GAAG,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;oBACpC,OAAO,CAAC,KAAK,CAAC,UAAU,GAAG,MAAM,CAAC;oBAClC,OAAO,CAAC,WAAW,GAAG,UAAU,CAAC,KAAK,CAAC;oBACvC,gBAAgB,CAAC,GAAG,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;iBACxC;aACF;YAED,IAAI,MAAM,GAAG,CAAC,CAAC;YACf,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,4BAA4B,CAAC,CAAC;YAC/D,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;gBAClB,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,gBAAgB,EAAE,4DAA4D,CAAC,CAAC;aAC1G;YACD,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,mBAAmB,EAAE,MAAM,CAAC,CAAC;YAC7D,EAAE,CAAC,SAAS,CAAC,iBAAiB,CAAC,IAAI,CAAC,mBAAmB,EAAE,MAAM,CAAC,WAAW,IAAI,EAAE,CAAC,CAAC;YAEnF;;;;eAIG;YACH,SAAS,aAAa,CAAC,MAAM,EAAE,SAAS;gBACtC,KAAK,MAAM,KAAK,IAAI,MAAM,EAAE;oBAC1B,MAAM,KAAK,GAAG,IAAI,CAAC,mBAAmB,CAAC,WAAW,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;oBACrE,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;oBACpD,KAAK,CAAC,KAAK,CAAC,eAAe,GAAG,KAAK,CAAC;oBACpC,KAAK,CAAC,KAAK,CAAC,WAAW,GAAG,KAAK,CAAC;oBAChC,IAAI,MAAM,EAAE;wBACV,KAAK,CAAC,KAAK,CAAC,UAAU,GAAG,MAAM,GAAG,IAAI,CAAC;qBACxC;oBACD,MAAM,IAAI,CAAC,CAAC;iBACb;YACH,CAAC;QACH,CAAC;IACH,CAAC;IAED;;;;;;;;OAQG;IACH,kBAAkB,CAAC,aAAa,EAAE,IAAI,EAAE,KAAK,EAAE,YAAY,EAAE,UAAU,EAAE,IAAI;QAC3E,MAAM,uBAAuB,GAAG,eAAe,CAAC;QAChD,IAAI,cAAc,GAAG,CAAC,CAAC;QACvB,IAAI,cAAc,GAAG,CAAC,CAAC;QACvB,IAAI,yBAAyB,GAAG,CAAC,CAAC;QAElC;;;;WAIG;QACH,SAAS,oBAAoB,CAAC,OAAO,EAAE,KAAK;YAC1C,MAAM,MAAM,GAAG,IAAI,CAAC,4BAA4B,CAAC,KAAK,CAAC,CAAC;YACxD,cAAc,GAAG,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC;YAC5C,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,uBAAuB,EAAE,CAAC,KAAK,EAAE,aAAa,EAAE,EAAE;gBAC5E,OAAO,cAAc,GAAG,cAAc,IAAI,MAAM,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,MAAM,GAAG,aAAa,EAAE;oBACpG,MAAM,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,MAAM,IAAI,yBAAyB,CAAC;oBACxE,EAAE,cAAc,CAAC;iBAClB;gBACD,yBAAyB,IAAI,CAAC,CAAC;gBAC/B,OAAO,KAAK,GAAG,QAAQ,CAAC;YAC1B,CAAC,CAAC,CAAC;YAEH,OAAO,cAAc,GAAG,cAAc,EAAE;gBACtC,MAAM,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,MAAM,IAAI,yBAAyB,CAAC;gBACxE,EAAE,cAAc,CAAC;aAClB;YACD,OAAO,CAAC,+BAA+B,CAAC,KAAK,CAAC,CAAC;YAC/C,EAAE,CAAC,OAAO,CAAC,6BAA6B,CAAC,OAAO,EAAE,MAAM,CAAC,YAAY,EAAE,0BAA0B,CAAC,CAAC;QACrG,CAAC;QAED,MAAM,OAAO,GAAG,CAAC,UAAU,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QACjD,MAAM,eAAe,GAAG,2BAA2B,CAAC,CAAC,aAAa,CAAC,WAAW,CAAC,MAAM,EAAE,uBAAuB,CAAC,CAAC,CAAC;QACjH,MAAM,eAAe,GAAG,eAAe,CAAC,WAAW,CAAC,MAAM,EAAE,4BAA4B,CAAC,CAAC;QAC1F,eAAe,CAAC,WAAW,GAAG,IAAI,CAAC;QAEnC,IAAI,OAAO,EAAE;YACX,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,eAAe,EAAE,UAAU,CAAC,CAAC;SACzD;QAED,MAAM,gBAAgB,GAAG,eAAe,CAAC,WAAW,CAAC,MAAM,EAAE,6BAA6B,CAAC,CAAC;QAE5F,IAAI,YAAY,IAAI,YAAY,CAAC,mBAAmB,CAAC,IAAI,CAAC,EAAE;YAC1D,EAAE,CAAC,OAAO,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,eAAe,EAAE,sBAAsB,CAAC,CAAC;SACtG;QAED;;;;WAIG;QACH,SAAS,YAAY,CAAC,KAAK;YACzB,MAAM,aAAa,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAC3D,IAAI,aAAa,KAAK,IAAI,EAAE;gBAC1B,MAAM,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;gBAC5C,oBAAoB,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;gBAC7C,OAAO,IAAI,CAAC;aACb;YACD,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,uBAAuB,EAAE,UAAU,CAAC,CAAC;YAC3D,IAAI,KAAK,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE;gBAC7B,KAAK,GAAG,QAAQ,CAAC,eAAe,CAAC,UAAU,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;aACxD;YACD,MAAM,IAAI,GAAG,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC,WAAW,EAAE,KAAK,GAAG,CAAC,CAAC;gBACxD,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,aAAa,EAAE,KAAK,EAAE,EAAE,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;gBAC1E,UAAU,CAAC,SAAS,CAAC,SAAS,CAAC,UAAU,CAAC,aAAa,EAAE;oBACvD,IAAI,EAAE,KAAK;oBACX,YAAY,EAAE,IAAI;oBAClB,SAAS,EAAE,SAAS;oBACpB,UAAU,EAAE,SAAS;oBACrB,YAAY,EAAE,SAAS;oBACvB,SAAS,EAAE,SAAS;oBACpB,OAAO,EAAE,SAAS;oBAClB,iBAAiB,EAAE,SAAS;iBAC7B,CAAC,CAAC;YACP,OAAO,mBAAmB,CAAC,WAAW,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;QAC9D,CAAC;QAED,MAAM,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;QAC3D,IAAI,QAAQ,IAAI,CAAC,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,MAAM,CAAC,EAAE;YACnD,gBAAgB,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;SAC9D;aAAM,IAAI,CAAC,QAAQ,KAAK,KAAK,IAAI,QAAQ,KAAK,QAAQ,CAAC,IAAI,IAAI,KAAK,QAAQ,EAAE;YAC7E,gBAAgB,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;SAC/D;aAAM,IAAI,QAAQ,KAAK,OAAO,IAAI,CAAC,IAAI,KAAK,YAAY,IAAI,IAAI,KAAK,MAAM,CAAC,EAAE;YAC7E,gBAAgB,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;SAC/D;aAAM;YACL,oBAAoB,CAAC,IAAI,CAAC,IAAI,EAAE,gBAAgB,EAAE,KAAK,CAAC,CAAC;SAC1D;QAED,IAAI,OAAO,EAAE;YACX,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,eAAe,EAAE,GAAG,CAAC,CAAC;SAClD;QAED;;;;WAIG;QACH,SAAS,aAAa,CAAC,KAAK;YAC1B,yGAAyG;YACzG,wDAAwD;YACxD,gGAAgG;YAChG,sDAAsD;YACtD,uDAAuD;YACvD,gHAAgH;YAChH,2DAA2D;YAC3D,MAAM,QAAQ,GAAG,QAAQ,CAAC,sBAAsB,EAAE,CAAC;YACnD,IAAI,CAAC,GAAG,CAAC,CAAC;YACV,OAAO,KAAK,CAAC,MAAM,EAAE;gBACnB,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE;oBACX,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;iBAC3C;gBACD,KAAK,GAAG,KAAK,CAAC,IAAI,EAAE,CAAC;gBACrB,0DAA0D;gBAC1D,IAAI,GAAG,GAAG,EAAE,CAAC;gBACb,IAAI,UAAU,GAAG,EAAE,CAAC;gBACpB,MAAM,YAAY,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;gBACxC,IAAI,YAAY,KAAK,CAAC,CAAC,EAAE;oBACvB,GAAG,GAAG,KAAK,CAAC;iBACb;qBAAM,IAAI,YAAY,GAAG,CAAC,IAAI,KAAK,CAAC,YAAY,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;oBAC9D,GAAG,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC;iBACxC;qBAAM;oBACL,GAAG,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC;oBACvC,MAAM,YAAY,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC;oBACtD,IAAI,YAAY,KAAK,CAAC,CAAC,EAAE;wBACvB,UAAU,GAAG,KAAK,CAAC,SAAS,CAAC,YAAY,EAAE,YAAY,GAAG,CAAC,CAAC,CAAC;qBAC9D;yBAAM;wBACL,UAAU,GAAG,KAAK,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;qBAC5C;iBACF;gBAED,IAAI,GAAG,EAAE;oBACP,yDAAyD;oBACzD,IAAI,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;wBACrB,QAAQ,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;wBAChF,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;qBAC3C;yBAAM;wBACL,QAAQ,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;qBACpD;iBACF;gBACD,IAAI,UAAU,EAAE;oBACd,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;iBAClD;gBACD,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;aACzD;YACD,OAAO,QAAQ,CAAC;QAClB,CAAC;QAED,OAAO,eAAe,CAAC;IACzB,CAAC;IAED;;;OAGG;IACH,sBAAsB,CAAC,aAAa,EAAE,iBAAiB;QACrD,MAAM,aAAa,GAAG,aAAa,CAAC,WAAW,CAAC,MAAM,EAAE,4BAA4B,CAAC,CAAC;QACtF,aAAa,CAAC,WAAW,GAAG,IAAI,GAAG,iBAAiB,CAAC;QACrD,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAC;IACtD,CAAC;IAED;;;;;;OAMG;IACH,YAAY,CAAC,aAAa,EAAE,OAAO,EAAE,YAAY,EAAE,qBAAqB,EAAE,YAAY;QACpF,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;QACxB,MAAM,OAAO,GAAG,CAAC,iBAAiB,CAAC,CAAC;QACpC,IAAI,YAAY,IAAI,qBAAqB,EAAE;YACzC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SACvB;QACD,MAAM,UAAU,GAAG,aAAa,CAAC,WAAW,CAAC,MAAM,EAAE,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;QACxE,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;QAC5C,MAAM,cAAc,GAChB,UAAU,CAAC,WAAW,CAAC,MAAM,EAAE,YAAY,CAAC,CAAC,CAAC,4BAA4B,CAAC,CAAC,CAAC,sBAAsB,CAAC,CAAC;QACzG,cAAc,CAAC,WAAW,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC;QACjE,kHAAkH;QAClH,EAAE,CAAC,SAAS,CAAC,iBAAiB,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;QACxD,IAAI,CAAC,YAAY,EAAE;YACjB,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE;gBACxB,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;gBACrC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;oBAC1C,MAAM,IAAI,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;oBAC3B,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;oBAC5C,IAAI,CAAC,kBAAkB,CAAC,UAAU,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,EAAE,YAAY,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;iBACvF;aACF;YACD,IAAI,YAAY,EAAE;gBAChB,IAAI,UAAU,GAAG,YAAY,CAAC,oBAAoB,EAAE,IAAI,YAAY,CAAC,kBAAkB,EAAE,CAAC;gBAC1F,UAAU,GAAG,UAAU,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,YAAY,CAAC,kBAAkB,EAAE,CAAC,CAAC;gBACjF,IAAI,UAAU,EAAE;oBACd,EAAE,CAAC,OAAO,CAAC,mBAAmB,CAAC,cAAc,EAAE,sBAAsB,CAAC,CAAC;iBACxE;aACF;SACF;QAED,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;QAC5C,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAC;IACtD,CAAC;IAED;;;OAGG;IACH,4BAA4B,CAAC,IAAI;QAC/B,IAAI,MAAM,GAAG,EAAE,CAAC;QAChB,IAAI,oBAAoB,GAAG,CAAC,CAAC;QAC7B,MAAM,YAAY,GAAG,EAAE,CAAC;QACxB,MAAM,YAAY,GAAG,kBAAkB,CAAC;QACxC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,IAAI,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG,IAAI,EAAE,EAAE,CAAC,EAAE;YACjD,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAC5B,IAAI,YAAY,CAAC,IAAI,CAAC,EAAE;gBACtB,MAAM,IAAI,IAAI,CAAC,SAAS,CAAC,oBAAoB,EAAE,CAAC,CAAC,CAAC;gBAClD,MAAM,WAAW,GAAG,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC;gBACnD,YAAY,CAAC,IAAI,CAAC,EAAC,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,MAAM,EAAE,WAAW,CAAC,MAAM,EAAC,CAAC,CAAC;gBACvE,MAAM,IAAI,WAAW,CAAC;gBACtB,oBAAoB,GAAG,CAAC,GAAG,CAAC,CAAC;aAC9B;SACF;QACD,IAAI,MAAM,EAAE;YACV,MAAM,IAAI,IAAI,CAAC,SAAS,CAAC,oBAAoB,CAAC,CAAC;SAChD;QACD,OAAO,EAAC,IAAI,EAAE,MAAM,IAAI,IAAI,EAAE,YAAY,EAAE,YAAY,EAAC,CAAC;IAC5D,CAAC;IAED;;;OAGG;IACH,cAAc,CAAC,YAAY;QACzB,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;QACxB,MAAM,QAAQ,GAAG,QAAQ,CAAC,sBAAsB,EAAE,CAAC;QACnD,MAAM,qBAAqB,GAAG,GAAG,EAAE;YACjC,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;YAC3B,IAAI,CAAC,uBAAuB,EAAE,CAAC;QACjC,CAAC,CAAC;QAEF,QAAQ,IAAI,CAAC,QAAQ,EAAE,EAAE;YACvB,KAAK,IAAI,CAAC,cAAc;gBACtB,IAAI,CAAC,kBAAkB,CACnB,QAAQ,EAAE,qBAAqB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,qBAAqB,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,YAAY,EAAE,IAAI,CAAC,CAAC;gBACzG,MAAM;YAER,KAAK,IAAI,CAAC,YAAY,CAAC,CAAC;gBACtB,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;gBACrC,IAAI,UAAU,EAAE;oBACd,IAAI,CAAC,sBAAsB,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;oBAClD,MAAM;iBACP;gBAED,MAAM,OAAO,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;gBAC7C,IAAI,IAAI,CAAC,aAAa,EAAE;oBACtB,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,YAAY,CAAC,CAAC;oBAC/D,MAAM;iBACP;gBAED,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,YAAY,CAAC,CAAC;gBAEjE,IAAI,IAAI,CAAC,YAAY,EAAE,EAAE;oBACvB,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;wBAClB,MAAM,eAAe,GAAG,QAAQ,CAAC,WAAW,CAAC,MAAM,EAAE,6BAA6B,CAAC,CAAC;wBACpF,eAAe,CAAC,WAAW,GAAG,GAAG,CAAC;wBAClC,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;wBAC/C,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,YAAY,CAAC,CAAC;qBACjE;oBACD,MAAM;iBACP;gBAED,IAAI,mBAAmB,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE;oBAC/C,MAAM,eAAe,GAAG,QAAQ,CAAC,WAAW,CAAC,MAAM,EAAE,uBAAuB,CAAC,CAAC;oBAC9E,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;oBACnC,IAAI,CAAC,UAAU,EAAE;wBACf,MAAM,IAAI,KAAK,CAAC,2EAA2E,CAAC,CAAC;qBAC9F;oBACD,MAAM,MAAM,GAAG,IAAI,CAAC,4BAA4B,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC,CAAC;oBACzE,eAAe,CAAC,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC;oBAC1C,EAAE,CAAC,OAAO,CAAC,6BAA6B,CAAC,eAAe,EAAE,MAAM,CAAC,YAAY,EAAE,0BAA0B,CAAC,CAAC;oBAC3G,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;oBAC/C,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,YAAY,CAAC,CAAC;oBAChE,IAAI,YAAY,IAAI,YAAY,CAAC,kBAAkB,EAAE,EAAE;wBACrD,EAAE,CAAC,OAAO,CAAC,mBAAmB,CAAC,eAAe,EAAE,sBAAsB,CAAC,CAAC;qBACzE;oBACD,IAAI,YAAY,IAAI,YAAY,CAAC,kBAAkB,EAAE,EAAE;wBACrD,EAAE,CAAC,OAAO,CAAC,mBAAmB,CAAC,eAAe,EAAE,sBAAsB,CAAC,CAAC;qBACzE;oBACD,MAAM;iBACP;gBAED,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,aAAa,IAAI,CAAC,2BAA2B,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE;oBACnG,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,YAAY,CAAC,CAAC;iBACjE;gBACD,MAAM;aACP;YAED,KAAK,IAAI,CAAC,SAAS;gBACjB,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC,WAAW,EAAE,KAAK,QAAQ,EAAE;oBAC5E,MAAM,OAAO,GAAG,QAAQ,CAAC,WAAW,CAAC,MAAM,EAAE,2CAA2C,CAAC,CAAC;oBAC1F,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;oBAC9B,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;oBAEvE,MAAM,2BAA2B,GAAG,IAAI,EAAE,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;oBACxG,2BAA2B,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;iBACtF;qBAAM,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC,WAAW,EAAE,KAAK,OAAO,EAAE;oBAClF,MAAM,OAAO,GAAG,QAAQ,CAAC,WAAW,CAAC,MAAM,EAAE,4CAA4C,CAAC,CAAC;oBAC3F,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;oBAC9B,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;oBAEvE,MAAM,oBAAoB,GAAG,IAAI,EAAE,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;oBAC1F,oBAAoB,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;iBAC/E;qBAAM;oBACL,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;oBAC1C,MAAM,eAAe,GAAG,QAAQ,CAAC,WAAW,CAAC,MAAM,EAAE,uBAAuB,CAAC,CAAC;oBAC9E,MAAM,MAAM,GAAG,IAAI,CAAC,4BAA4B,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;oBACnE,eAAe,CAAC,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC;oBAC1C,EAAE,CAAC,OAAO,CAAC,6BAA6B,CAAC,eAAe,EAAE,MAAM,CAAC,YAAY,EAAE,0BAA0B,CAAC,CAAC;oBAC3G,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;oBAC1C,IAAI,YAAY,IAAI,YAAY,CAAC,kBAAkB,EAAE,EAAE;wBACrD,EAAE,CAAC,OAAO,CAAC,mBAAmB,CAAC,eAAe,EAAE,sBAAsB,CAAC,CAAC;qBACzE;iBACF;gBACD,MAAM;YAER,KAAK,IAAI,CAAC,YAAY,CAAC,CAAC;gBACtB,MAAM,cAAc,GAAG,QAAQ,CAAC,WAAW,CAAC,MAAM,EAAE,qBAAqB,CAAC,CAAC;gBAC3E,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,cAAc,EAAE,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,GAAG,KAAK,CAAC,CAAC;gBAC9E,MAAM;aACP;YAED,KAAK,IAAI,CAAC,kBAAkB,CAAC,CAAC;gBAC5B,MAAM,cAAc,GAAG,QAAQ,CAAC,WAAW,CAAC,MAAM,EAAE,qBAAqB,CAAC,CAAC;gBAC3E,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,cAAc,EAAE,YAAY,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;gBAC3E,IAAI,IAAI,CAAC,QAAQ,EAAE;oBACjB,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,cAAc,EAAE,WAAW,GAAG,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAC;oBAC9E,IAAI,IAAI,CAAC,QAAQ,EAAE;wBACjB,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,cAAc,EAAE,IAAI,GAAG,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAC;qBACxE;iBACF;qBAAM,IAAI,IAAI,CAAC,QAAQ,EAAE;oBACxB,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,cAAc,EAAE,WAAW,GAAG,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAC;iBAC/E;gBAED,IAAI,IAAI,CAAC,cAAc,EAAE;oBACvB,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,cAAc,EAAE,IAAI,GAAG,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC,CAAC;iBAC9E;gBAED,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC;gBAChD,MAAM;aACP;YAED,KAAK,IAAI,CAAC,kBAAkB,CAAC,CAAC;gBAC5B,MAAM,YAAY,GAAG,QAAQ,CAAC,WAAW,CAAC,MAAM,EAAE,uBAAuB,CAAC,CAAC;gBAC3E,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,YAAY,EAAE,WAAW,GAAG,IAAI,CAAC,SAAS,EAAE,GAAG,KAAK,CAAC,CAAC;gBACjF,MAAM;aACP;YAED,KAAK,IAAI,CAAC,sBAAsB,CAAC,CAAC;gBAChC,MAAM,eAAe,GAAG,QAAQ,CAAC,WAAW,CAAC,MAAM,EAAE,sBAAsB,CAAC,CAAC;gBAC7E,eAAe,CAAC,WAAW,GAAG,QAAQ,CAAC,eAAe,CAAC,kBAAkB,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,CAAC;gBACxG,MAAM;aACP;YAED,OAAO,CAAC,CAAC;gBACP,MAAM,sBAAsB,GAAG,QAAQ,CAAC,eAAe,CAAC,kBAAkB,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,CAAC;gBACzG,EAAE,CAAC,OAAO,CAAC,eAAe,CAAC,QAAQ,EAAE,sBAAsB,CAAC,CAAC;aAC9D;SACF;QAED,OAAO,QAAQ,CAAC;IAClB,CAAC;IAED,MAAM;QACJ,IAAI,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,EAAE;YAC3B,OAAO;SACR;QACD,MAAM,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC;QAClC,IAAI,CAAC,aAAa,EAAE;YAClB,OAAO;SACR;QAED,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,aAAa,EAAE;YACrF,OAAO;SACR;QACD,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC;IAC1B,CAAC;IAED;;;OAGG;IACH,gBAAgB,CAAC,QAAQ,EAAE,YAAY;QACrC,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,gBAAgB,EAAE;YAC1C,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;YACvB,OAAO;SACR;QAED,IAAI,YAAY,KAAK,KAAK,EAAE;YAC1B,OAAO;SACR;QAED;;WAEG;QACH,SAAS,UAAU,CAAC,KAAK;YACvB,IAAI,QAAQ,EAAE;gBACZ,QAAQ,CAAC,CAAC,KAAK,CAAC,CAAC;aAClB;QACH,CAAC;QAED;;;WAGG;QACH,SAAS,YAAY,CAAC,YAAY,EAAE,KAAK;YACvC,IAAI,YAAY,KAAK,KAAK,EAAE;gBAC1B,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC;aACtC;QACH,CAAC;QAED,SAAS,eAAe;YACtB,IAAI,QAAQ,EAAE;gBACZ,QAAQ,CAAC,KAAK,CAAC,CAAC;aACjB;QACH,CAAC;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;QACxB,IAAI,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,EAAE,YAAY,EAAE,eAAe,CAAC,CAAC,CAAC;IAC/F,CAAC;IAED,YAAY;QACV,IAAI,CAAC,qBAAqB,CAAC,6BAA6B,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;IAC/F,CAAC;IAED,WAAW;QACT,IAAI,CAAC,qBAAqB,CAAC,6BAA6B,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;IAC9F,CAAC;IAED,UAAU;QACR,IAAI,CAAC,qBAAqB,CAAC,6BAA6B,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;IAC7F,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,qBAAqB,CAAC,6BAA6B,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;IAC9F,CAAC;IAED,KAAK,CAAC,WAAW;QACf,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;QACxB,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,QAAQ,EAAE,CAAC;QAC5C,MAAM,OAAO,GAAG,MAAM,QAAQ,CAAC,2BAA2B,CAAC,IAAI,CAAC,CAAC;QACjE,IAAI,CAAC,OAAO,EAAE;YACZ,OAAO;SACR;QAED,MAAM,MAAM,GAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC,GAAG,EAAE,CAAC;QAC3F,6BAA6B;QAC7B,MAAM,KAAK,GAAG,EAAE,CAAC;QACjB,KAAK,MAAM,KAAK,IAAI,OAAO,CAAC,UAAU,EAAE,CAAC,OAAO,EAAE,EAAE;YAClD,KAAK,MAAM,QAAQ,IAAI,KAAK,CAAC,iBAAiB,EAAE,EAAE;gBAChD,IAAI,CAAC,QAAQ,CAAC,QAAQ,IAAI,QAAQ,CAAC,QAAQ,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE,IAAI,QAAQ,CAAC,QAAQ,EAAE;oBAC7F,SAAS;iBACV;gBACD,IAAI,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC,mBAAmB,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;oBACnG,SAAS;iBACV;gBACD,IAAI,KAAK,CAAC,UAAU,IAAI,KAAK,CAAC,UAAU,CAAC,WAAW,EAAE,EAAE;oBACtD,SAAS;iBACV;gBACD,IAAI,OAAO,CAAC,aAAa,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,gBAAgB,CAAC,aAAa,CAAC,MAAM,EAAE;oBACjF,SAAS;iBACV;gBACD,KAAK,CAAC,IAAI,CAAC,GAAG,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,QAAQ,CAAC,KAAK,GAAG,CAAC,CAAC;aAC7D;SACF;QAED,IAAI,CAAC,qBAAqB,CAAC,6BAA6B,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACtF,CAAC;IAED,uBAAuB;QACrB,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,wBAAwB,EAAE;YACxD,OAAO;SACR;QACD,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAE5B,MAAM,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,WAAW,IAAI,EAAE,CAAC;QACpD,MAAM,WAAW,GAAG,0BAA0B,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QAExE,IAAI,KAAK,GAAG,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACnC,MAAM,WAAW,GAAG,EAAE,CAAC;QACvB,OAAO,KAAK,EAAE;YACZ,WAAW,CAAC,IAAI,CAAC,IAAI,SAAS,CAAC,SAAS,CAAC,WAAW,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACpF,KAAK,GAAG,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAChC;QAED,qCAAqC;QACrC,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;YACvB,WAAW,CAAC,IAAI,CAAC,IAAI,SAAS,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;SACvE;QAED,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;QAC3B,EAAE,CAAC,OAAO,CAAC,sBAAsB,CAAC,IAAI,CAAC,eAAe,EAAE,WAAW,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;IAC9F,CAAC;IAED,WAAW;QACT,MAAM,OAAO,GAAG,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;QACpD,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE;YAChB,MAAM,MAAM,GAAG,EAAE,CAAC,cAAc,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,uBAAuB,CAAC,CAAC;YAC3F,IAAI,CAAC,MAAM,EAAE;gBACX,OAAO;aACR;YACD,OAAO,MAAM,CAAC,OAAO,EAAE,CAAC;QAC1B,CAAC,CAAC,CAAC;IACL,CAAC;IAED,iGAAiG;IACjG;;;;OAIG;IACH,SAAS,CAAC,IAAI,EAAE,QAAQ;QACtB,MAAM,cAAc,GAAG,2BAA2B,CAAC,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;QACpF,cAAc,CAAC,WAAW,GAAG,IAAI,CAAC;QAClC,MAAM,OAAO,GAAG;YACd,QAAQ;SACT,CAAC;QACF,MAAM,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,cAAc,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;QAC9D,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC7B,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,OAAO,OAAO,CAAC;IACjB,CAAC;IAED;;OAEG;IACH,aAAa,CAAC,eAAe;QAC3B,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC;QAChC,eAAe,CAAC,MAAM,EAAE,CAAC;QACzB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;YACxC,IAAI,QAAQ,CAAC,CAAC,CAAC,KAAK,eAAe,EAAE;gBACnC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBACtB,IAAI,CAAC,eAAe,EAAE,CAAC;gBACvB,OAAO;aACR;SACF;IACH,CAAC;IAED,iBAAiB;QACf,KAAK,MAAM,OAAO,IAAI,IAAI,CAAC,SAAS,EAAE;YACpC,OAAO,CAAC,MAAM,EAAE,CAAC;SAClB;QAED,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED,eAAe;QACb,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAC5E,CAAC;IAED;;OAEG;IACH,uBAAuB;QACrB,MAAM,gBAAgB,GAAG,IAAI,CAAC,iBAAiB,CAAC;QAChD,IAAI,CAAC,gBAAgB,EAAE;YACrB,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;SAC1B;QACD,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC;QAChC,IAAI,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE;YACzB,gBAAgB,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YACzC,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;SAC1B;QAED,QAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAEjC,gBAAgB,CAAC,cAAc,EAAE,CAAC;QAClC,KAAK,MAAM,OAAO,IAAI,QAAQ,EAAE;YAC9B,gBAAgB,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;SACvC;QACD,gBAAgB,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAC5C,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;IAC3B,CAAC;IAED,KAAK,CAAC,mBAAmB;QACvB,IAAI,IAAI,CAAC,aAAa,EAAE;YACtB,OAAO;SACR;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC;QACzB,MAAM,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC;QACvB,IAAI,IAAI,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,sBAAsB;YACxF,MAAM,KAAK,SAAS,EAAE;YACxB,OAAO;SACR;QAED,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,QAAQ,EAAE,CAAC,QAAQ,EAAE,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC;QAC7E,KAAK,MAAM,YAAY,IAAI,IAAI,CAAC,cAAc,EAAE;YAC9C,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;SAClC;QACD,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;QACzB,IAAI,CAAC,MAAM,EAAE;YACX,OAAO;SACR;QAED,MAAM,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACtC,MAAM,MAAM,GAAG,OAAO,KAAK,MAAM,IAAI,OAAO,KAAK,aAAa,CAAC;QAC/D,MAAM,MAAM,GACR,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,oBAAoB,CAAC,IAAI,CAAC,OAAO,KAAK,MAAM,IAAI,OAAO,KAAK,aAAa,CAAC,CAAC;QAElH,IAAI,OAAO,CAAC;QACZ,IAAI,MAAM,EAAE;YACV,OAAO,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;SACpC;QACD,IAAI,MAAM,EAAE;YACV,OAAO,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;SACpC;QAED,IAAI,OAAO,EAAE;YACX,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SACnC;IACH,CAAC;IAED;;OAEG;IACH,iBAAiB;QACf,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC;QACzB,MAAM,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC;QACvB,IAAI,CAAC,MAAM,EAAE;YACX,OAAO,IAAI,CAAC;SACb;QAED,MAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,iBAAiB,CAAC,MAAM,CAAC,CAAC;QACjE,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAE9B,MAAM,OAAO,GAAG,6BAA6B,CAAC,CAAC,GAAG,EAAE;YAClD,IAAI,OAAO,CAAC,QAAQ,EAAE,EAAE;gBACtB,IAAI,CAAC,QAAQ,EAAE,CAAC,YAAY,EAAE,CAAC,gCAAgC,CAAC,MAAM,CAAC,CAAC;aACzE;iBAAM;gBACL,IAAI,CAAC,QAAQ,EAAE,CAAC,YAAY,EAAE,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC;aACpE;QACH,CAAC,CAAC,CAAC;QACH,OAAO,CAAC,cAAc,CAAC,OAAO,EAAE;YAC9B,QAAQ,EAAE,IAAI;YACd,wBAAwB,EAAE,KAAK;YAC/B,gBAAgB,EAAE,EAAE,CAAA,kBAAkB;YACtC,eAAe,EAAE,EAAE,CAAA,mBAAmB;SACvC,CAAC,CAAC;QAEH,IAAI,CAAC,QAAQ,EAAE,CAAC,YAAY,EAAE,CAAC,gBAAgB,CAC3C,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,iCAAiC,EAAE,KAAK,CAAC,EAAE;YACjE,MAAM,EAAC,MAAM,EAAE,WAAW,EAAE,OAAO,EAAC,GAAG,KAAK,CAAC,IAAI,CAAC;YAClD,IAAI,WAAW,KAAK,MAAM,EAAE;gBAC1B,OAAO;aACR;YACD,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QAC1B,CAAC,CAAC,CAAC;QAEP,OAAO,OAAO,CAAC;IACjB,CAAC;IAED;;OAEG;IACH,iBAAiB;QACf,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC;QACzB,MAAM,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC;QACvB,IAAI,CAAC,MAAM,EAAE;YACX,OAAO,IAAI,CAAC;SACb;QACD,MAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,iBAAiB,CAAC,MAAM,CAAC,CAAC;QACjE,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAE9B,MAAM,OAAO,GAAG,6BAA6B,CAAC,CAAC,GAAG,EAAE;YAClD,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,YAAY,EAAE,CAAC;YAC7C,IAAI,OAAO,CAAC,QAAQ,EAAE,EAAE;gBACtB,KAAK,CAAC,yCAAyC,CAAC,MAAM,CAAC,CAAC;aACzD;iBAAM;gBACL,KAAK,CAAC,oCAAoC,CAAC,MAAM,CAAC,CAAC;aACpD;QACH,CAAC,CAAC,CAAC;QAEH,OAAO,CAAC,cAAc,CAAC,OAAO,EAAE;YAC9B,QAAQ,EAAE,IAAI;YACd,wBAAwB,EAAE,KAAK;YAC/B,gBAAgB,EAAE,EAAE,CAAA,kBAAkB;YACtC,eAAe,EAAE,EAAE,CAAA,mBAAmB;SACvC,CAAC,CAAC;QAEH,IAAI,CAAC,QAAQ,EAAE,CAAC,YAAY,EAAE,CAAC,gBAAgB,CAC3C,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,0CAA0C,EAAE,KAAK,CAAC,EAAE;YAC1E,MAAM,EAAC,MAAM,EAAE,WAAW,EAAE,OAAO,EAAC,GAAG,KAAK,CAAC,IAAI,CAAC;YAClD,IAAI,WAAW,KAAK,MAAM,EAAE;gBAC1B,OAAO;aACR;YACD,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QAC1B,CAAC,CAAC,CAAC;QAEP,OAAO,OAAO,CAAC;IACjB,CAAC;CACF;AAED,MAAM,CAAC,MAAM,oBAAoB,GAAG,GAAG,CAAC;AAExC,4DAA4D;AAC5D,oDAAoD;AACpD,MAAM,CAAC,MAAM,2BAA2B,GAAG,IAAI,GAAG,CAAC;IACjD,MAAM,EAAE,MAAM,EAAG,UAAU,EAAE,IAAI,EAAI,QAAQ,EAAI,KAAK,EAAG,SAAS,EAAE,OAAO,EAAG,OAAO,EAAE,IAAI;IAC3F,KAAK,EAAG,OAAO,EAAE,QAAQ,EAAI,MAAM,EAAE,UAAU,EAAE,MAAM,EAAE,OAAO,EAAI,QAAQ,EAAE,OAAO,EAAE,KAAK;CAC7F,CAAC,CAAC;AAEH,qDAAqD;AACrD,MAAM,CAAC,MAAM,gBAAgB,GAAG,IAAI,GAAG,CAAC,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC,CAAC;AAElE,MAAM,wBAAwB,GAAG;IAC/B,iBAAiB,CAAC,QAAQ;IAC1B,iBAAiB,CAAC,MAAM;IACxB,iBAAiB,CAAC,OAAO;CAC1B,CAAC;AACF,mEAAmE;AACnE,MAAM,oBAAoB,GAAG,IAAI,GAAG,CAAC,wBAAwB,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC,QAAQ,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAE3G;;;;;GAKG;AACH,SAAS,iBAAiB,CAAC,QAAQ,EAAE,QAAQ;IAC3C,MAAM,MAAM,GAAG,oBAAoB,CAAC,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,MAAM,CAAC,iBAAiB,CAAC;IACvF,MAAM,MAAM,GAAG,oBAAoB,CAAC,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,MAAM,CAAC,iBAAiB,CAAC;IACvF,IAAI,MAAM,KAAK,MAAM,EAAE;QACrB,OAAO,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;KACnD;IACD,OAAO,MAAM,GAAG,MAAM,CAAC;AACzB,CAAC;AAED;;;;;;GAMG;AACH,qBAAqB;AACrB,MAAM,CAAC,IAAI,aAAa,CAAC","sourcesContent":["/*\n * Copyright (C) 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2008 Matt Lilek <webkit@mattlilek.com>\n * Copyright (C) 2009 Joseph Pecoraro\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../common/common.js';\nimport * as Components from '../components/components.js';\nimport * as Emulation from '../emulation/emulation.js';\nimport * as Host from '../host/host.js';\nimport * as Platform from '../platform/platform.js';\nimport {ls} from '../platform/platform.js';\nimport * as ProtocolClient from '../protocol_client/protocol_client.js';  // eslint-disable-line no-unused-vars\nimport * as Root from '../root/root.js';\nimport * as SDK from '../sdk/sdk.js';\nimport * as TextEditor from '../text_editor/text_editor.js';  // eslint-disable-line no-unused-vars\nimport * as TextUtils from '../text_utils/text_utils.js';\nimport * as UI from '../ui/ui.js';\n\nimport {Adorner, AdornerCategories} from './Adorner.js';\nimport {canGetJSPath, cssPath, jsPath, xPath} from './DOMPath.js';\nimport {ElementsTreeOutline, MappedCharToEntity, UpdateRecord} from './ElementsTreeOutline.js';  // eslint-disable-line no-unused-vars\nimport {ImagePreviewPopover} from './ImagePreviewPopover.js';\nimport {MarkerDecorator} from './MarkerDecorator.js';\n\nexport class ElementsTreeElement extends UI.TreeOutline.TreeElement {\n  /**\n   * @param {!SDK.DOMModel.DOMNode} node\n   * @param {boolean=} isClosingTag\n   */\n  constructor(node, isClosingTag) {\n    // The title will be updated in onattach.\n    super();\n    this._node = node;\n    /** @type {?ElementsTreeOutline} */\n    this.treeOutline = null;\n\n    this._gutterContainer = this.listItemElement.createChild('div', 'gutter-container');\n    this._gutterContainer.addEventListener('click', this._showContextMenu.bind(this));\n    const gutterMenuIcon = UI.Icon.Icon.create('largeicon-menu', 'gutter-menu-icon');\n    this._gutterContainer.appendChild(gutterMenuIcon);\n    this._decorationsElement = this._gutterContainer.createChild('div', 'hidden');\n\n    this._isClosingTag = isClosingTag;\n\n    if (this._node.nodeType() === Node.ELEMENT_NODE && !isClosingTag) {\n      this._canAddAttributes = true;\n    }\n    /** @type {?string} */\n    this._searchQuery = null;\n    this._expandedChildrenLimit = InitialChildrenLimit;\n    this._decorationsThrottler = new Common.Throttler.Throttler(100);\n\n    this._inClipboard = false;\n    this._hovered = false;\n\n    /** @type {?EditorHandles} */\n    this._editing = null;\n\n    /** @type {!Array<!UI.UIUtils.HighlightChange>} */\n    this._highlightResult = [];\n\n    if (!isClosingTag) {\n      this._adornerContainer = this.listItemElement.createChild('div', 'adorner-container hidden');\n      /** @type {!Array<!Adorner>} */\n      this._adorners = [];\n      /** @type {!Array<!Adorner>} */\n      this._styleAdorners = [];\n      /** @type {!Common.Throttler.Throttler} */\n      this._adornersThrottler = new Common.Throttler.Throttler(100);\n\n      this.updateStyleAdorners();\n\n      if (node.isAdFrameNode()) {\n        const adorner = this.adornText('Ad', AdornerCategories.Security);\n        UI.Tooltip.Tooltip.install(adorner, ls`This frame was identified as an ad frame`);\n      }\n    }\n\n    /**\n     * @type {!HTMLElement|undefined}\n     */\n    this._htmlEditElement;\n\n    /** @type {?UI.TreeOutline.TreeElement} */\n    this.expandAllButtonElement = null;\n  }\n\n  /**\n   * @param {!ElementsTreeElement} treeElement\n   */\n  static animateOnDOMUpdate(treeElement) {\n    const tagName = treeElement.listItemElement.querySelector('.webkit-html-tag-name');\n    UI.UIUtils.runCSSAnimationOnce(tagName || treeElement.listItemElement, 'dom-update-highlight');\n  }\n\n  /**\n   * @param {!SDK.DOMModel.DOMNode} node\n   * @return {!Array<!SDK.DOMModel.DOMNode>}\n   */\n  static visibleShadowRoots(node) {\n    let roots = node.shadowRoots();\n    if (roots.length && !Common.Settings.Settings.instance().moduleSetting('showUAShadowDOM').get()) {\n      roots = roots.filter(filter);\n    }\n\n    /**\n     * @param {!SDK.DOMModel.DOMNode} root\n     */\n    function filter(root) {\n      return root.shadowRootType() !== SDK.DOMModel.DOMNode.ShadowRootTypes.UserAgent;\n    }\n    return roots;\n  }\n\n  /**\n   * @param {!SDK.DOMModel.DOMNode} node\n   * @return {boolean}\n   */\n  static canShowInlineText(node) {\n    if (node.contentDocument() || node.importedDocument() || node.templateContent() ||\n        ElementsTreeElement.visibleShadowRoots(node).length || node.hasPseudoElements()) {\n      return false;\n    }\n    if (node.nodeType() !== Node.ELEMENT_NODE) {\n      return false;\n    }\n    if (!node.firstChild || node.firstChild !== node.lastChild || node.firstChild.nodeType() !== Node.TEXT_NODE) {\n      return false;\n    }\n    const textChild = node.firstChild;\n    const maxInlineTextChildLength = 80;\n    if (textChild.nodeValue().length < maxInlineTextChildLength) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @param {!UI.ContextMenu.ContextMenu} contextMenu\n   * @param {!SDK.DOMModel.DOMNode} node\n   */\n  static populateForcedPseudoStateItems(contextMenu, node) {\n    const pseudoClasses = ['active', 'hover', 'focus', 'visited', 'focus-within', 'focus-visible'];\n    const forcedPseudoState = node.domModel().cssModel().pseudoState(node);\n    const stateMenu = contextMenu.debugSection().appendSubMenuItem(Common.UIString.UIString('Force state'));\n    for (const pseudoClass of pseudoClasses) {\n      const pseudoClassForced = forcedPseudoState ? forcedPseudoState.indexOf(pseudoClass) >= 0 : false;\n      stateMenu.defaultSection().appendCheckboxItem(\n          ':' + pseudoClass, setPseudoStateCallback.bind(null, pseudoClass, !pseudoClassForced), pseudoClassForced,\n          false);\n    }\n\n    /**\n     * @param {string} pseudoState\n     * @param {boolean} enabled\n     */\n    function setPseudoStateCallback(pseudoState, enabled) {\n      node.domModel().cssModel().forcePseudoState(node, pseudoState, enabled);\n    }\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isClosingTag() {\n    return Boolean(this._isClosingTag);\n  }\n\n  /**\n   * @return {!SDK.DOMModel.DOMNode}\n   */\n  node() {\n    return this._node;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isEditing() {\n    return Boolean(this._editing);\n  }\n\n  /**\n   * @param {string} searchQuery\n   */\n  highlightSearchResults(searchQuery) {\n    if (this._searchQuery !== searchQuery) {\n      this._hideSearchHighlight();\n    }\n\n    this._searchQuery = searchQuery;\n    this._searchHighlightsVisible = true;\n    this.updateTitle(null, true);\n  }\n\n  hideSearchHighlights() {\n    delete this._searchHighlightsVisible;\n    this._hideSearchHighlight();\n  }\n\n  _hideSearchHighlight() {\n    if (this._highlightResult.length === 0) {\n      return;\n    }\n\n    for (let i = (this._highlightResult.length - 1); i >= 0; --i) {\n      const entry = this._highlightResult[i];\n      switch (entry.type) {\n        case 'added':\n          entry.node.remove();\n          break;\n        case 'changed':\n          entry.node.textContent = entry.oldText || null;\n          break;\n      }\n    }\n\n    this._highlightResult = [];\n  }\n\n  /**\n   * @param {boolean} inClipboard\n   */\n  setInClipboard(inClipboard) {\n    if (this._inClipboard === inClipboard) {\n      return;\n    }\n    this._inClipboard = inClipboard;\n    this.listItemElement.classList.toggle('in-clipboard', inClipboard);\n  }\n\n  /**\n   * @return {boolean}\n   */\n  get hovered() {\n    return this._hovered;\n  }\n\n  /**\n   * @param {boolean} isHovered\n   */\n  set hovered(isHovered) {\n    if (this._hovered === isHovered) {\n      return;\n    }\n\n    this._hovered = isHovered;\n\n    if (this.listItemElement) {\n      if (isHovered) {\n        this._createSelection();\n        this.listItemElement.classList.add('hovered');\n      } else {\n        this.listItemElement.classList.remove('hovered');\n      }\n    }\n  }\n\n  /**\n   * @return {number}\n   */\n  expandedChildrenLimit() {\n    return this._expandedChildrenLimit;\n  }\n\n  /**\n   * @param {number} expandedChildrenLimit\n   */\n  setExpandedChildrenLimit(expandedChildrenLimit) {\n    this._expandedChildrenLimit = expandedChildrenLimit;\n  }\n\n  _createSelection() {\n    const listItemElement = this.listItemElement;\n    if (!listItemElement) {\n      return;\n    }\n\n    if (!this.selectionElement) {\n      this.selectionElement = document.createElement('div');\n      this.selectionElement.className = 'selection fill';\n      this.selectionElement.style.setProperty('margin-left', (-this._computeLeftIndent()) + 'px');\n      listItemElement.insertBefore(this.selectionElement, listItemElement.firstChild);\n    }\n  }\n\n  _createHint() {\n    if (this.listItemElement && !this._hintElement) {\n      this._hintElement = this.listItemElement.createChild('span', 'selected-hint');\n      const selectedElementCommand = '$0';\n      UI.Tooltip.Tooltip.install(\n          this._hintElement, ls`Use ${selectedElementCommand} in the console to refer to this element.`);\n      UI.ARIAUtils.markAsHidden(this._hintElement);\n    }\n  }\n\n  /**\n   * @override\n   */\n  onbind() {\n    if (this.treeOutline && !this._isClosingTag) {\n      this.treeOutline.treeElementByNode.set(this._node, this);\n    }\n  }\n\n  /**\n   * @override\n   */\n  onunbind() {\n    if (this._editing) {\n      this._editing.cancel();\n    }\n    if (this.treeOutline && this.treeOutline.treeElementByNode.get(this._node) === this) {\n      this.treeOutline.treeElementByNode.delete(this._node);\n    }\n  }\n\n  /**\n   * @override\n   */\n  onattach() {\n    if (this._hovered) {\n      this._createSelection();\n      this.listItemElement.classList.add('hovered');\n    }\n\n    this.updateTitle();\n    this.listItemElement.draggable = true;\n  }\n\n  /**\n   * @override\n   * @returns {!Promise<void>}\n   */\n  async onpopulate() {\n    if (this.treeOutline) {\n      return this.treeOutline.populateTreeElement(this);\n    }\n  }\n\n  /**\n   * @override\n   */\n  async expandRecursively() {\n    await this._node.getSubtree(-1, true);\n    await super.expandRecursively(Number.MAX_VALUE);\n  }\n\n  /**\n   * @override\n   */\n  onexpand() {\n    if (this._isClosingTag) {\n      return;\n    }\n\n    this.updateTitle();\n  }\n\n  /**\n   * @override\n   */\n  oncollapse() {\n    if (this._isClosingTag) {\n      return;\n    }\n\n    this.updateTitle();\n  }\n\n  /**\n   * @override\n   * @param {boolean=} omitFocus\n   * @param {boolean=} selectedByUser\n   * @return {boolean}\n   */\n  select(omitFocus, selectedByUser) {\n    if (this._editing) {\n      return false;\n    }\n    return super.select(omitFocus, selectedByUser);\n  }\n\n  /**\n   * @override\n   * @param {boolean=} selectedByUser\n   * @return {boolean}\n   */\n  onselect(selectedByUser) {\n    if (!this.treeOutline) {\n      return false;\n    }\n    this.treeOutline.suppressRevealAndSelect = true;\n    this.treeOutline.selectDOMNode(this._node, selectedByUser);\n    if (selectedByUser) {\n      this._node.highlight();\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.ChangeInspectedNodeInElementsPanel);\n    }\n    this._createSelection();\n    this._createHint();\n    this.treeOutline.suppressRevealAndSelect = false;\n    return true;\n  }\n\n  /**\n   * @override\n   * @return {boolean}\n   */\n  ondelete() {\n    if (!this.treeOutline) {\n      return false;\n    }\n    const startTagTreeElement = this.treeOutline.findTreeElement(this._node);\n    startTagTreeElement ? startTagTreeElement.remove() : this.remove();\n    return true;\n  }\n\n  /**\n   * @override\n   * @return {boolean}\n   */\n  onenter() {\n    // On Enter or Return start editing the first attribute\n    // or create a new attribute on the selected element.\n    if (this._editing) {\n      return false;\n    }\n\n    this._startEditing();\n\n    // prevent a newline from being immediately inserted\n    return true;\n  }\n\n  /**\n   * @override\n   * @param {!MouseEvent} event\n   */\n  selectOnMouseDown(event) {\n    super.selectOnMouseDown(event);\n\n    if (this._editing) {\n      return;\n    }\n\n    // Prevent selecting the nearest word on double click.\n    if (event.detail >= 2) {\n      event.preventDefault();\n    }\n  }\n\n  /**\n   * @override\n   * @param {!Event} event\n   * @return {boolean}\n   */\n  ondblclick(event) {\n    if (this._editing || this._isClosingTag) {\n      return false;\n    }\n\n    if (this._startEditingTarget(/** @type {!Element} */ (event.target))) {\n      return false;\n    }\n\n    if (this.isExpandable() && !this.expanded) {\n      this.expand();\n    }\n    return false;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasEditableNode() {\n    return !this._node.isShadowRoot() && !this._node.ancestorUserAgentShadowRoot();\n  }\n\n  /**\n   * @param {!Element} tag\n   * @param {!Element} node\n   */\n  _insertInLastAttributePosition(tag, node) {\n    if (tag.getElementsByClassName('webkit-html-attribute').length > 0) {\n      tag.insertBefore(node, tag.lastChild);\n    } else if (tag.textContent !== null) {\n      const matchResult = tag.textContent.match(/^<(.*?)>$/);\n      if (!matchResult) {\n        return;\n      }\n      const nodeName = matchResult[1];\n      tag.textContent = '';\n      UI.UIUtils.createTextChild(tag, '<' + nodeName);\n      tag.appendChild(node);\n      UI.UIUtils.createTextChild(tag, '>');\n    }\n  }\n\n  /**\n   * @param {!Element} eventTarget\n   * @return {boolean}\n   */\n  _startEditingTarget(eventTarget) {\n    if (!this.treeOutline || this.treeOutline.selectedDOMNode() !== this._node) {\n      return false;\n    }\n\n    if (this._node.nodeType() !== Node.ELEMENT_NODE && this._node.nodeType() !== Node.TEXT_NODE) {\n      return false;\n    }\n\n    const textNode = eventTarget.enclosingNodeOrSelfWithClass('webkit-html-text-node');\n    if (textNode) {\n      return this._startEditingTextNode(textNode);\n    }\n\n    const attribute = eventTarget.enclosingNodeOrSelfWithClass('webkit-html-attribute');\n    if (attribute) {\n      return this._startEditingAttribute(attribute, eventTarget);\n    }\n\n    const tagName = eventTarget.enclosingNodeOrSelfWithClass('webkit-html-tag-name');\n    if (tagName) {\n      return this._startEditingTagName(tagName);\n    }\n\n    const newAttribute = eventTarget.enclosingNodeOrSelfWithClass('add-attribute');\n    if (newAttribute) {\n      return this._addNewAttribute();\n    }\n\n    return false;\n  }\n\n  /**\n   * @param {!Event} event\n   */\n  _showContextMenu(event) {\n    this.treeOutline && this.treeOutline.showContextMenu(this, event);\n  }\n\n  /**\n   * @param {!UI.ContextMenu.ContextMenu} contextMenu\n   * @param {!Event} event\n   */\n  populateTagContextMenu(contextMenu, event) {\n    // Add attribute-related actions.\n    const treeElement = this._isClosingTag && this.treeOutline ? this.treeOutline.findTreeElement(this._node) : this;\n    if (!treeElement) {\n      return;\n    }\n    contextMenu.editSection().appendItem(\n        Common.UIString.UIString('Add attribute'), treeElement._addNewAttribute.bind(treeElement));\n\n    const target = /** @type {!Element} */ (event.target);\n    const attribute = target.enclosingNodeOrSelfWithClass('webkit-html-attribute');\n    const newAttribute = target.enclosingNodeOrSelfWithClass('add-attribute');\n    if (attribute && !newAttribute) {\n      contextMenu.editSection().appendItem(\n          Common.UIString.UIString('Edit attribute'), this._startEditingAttribute.bind(this, attribute, target));\n    }\n    this.populateNodeContextMenu(contextMenu);\n    ElementsTreeElement.populateForcedPseudoStateItems(contextMenu, treeElement.node());\n    this.populateScrollIntoView(contextMenu);\n    contextMenu.viewSection().appendItem(Common.UIString.UIString('Focus'), async () => {\n      await this._node.focus();\n    });\n  }\n\n  /**\n   * @param {!UI.ContextMenu.ContextMenu} contextMenu\n   */\n  populateScrollIntoView(contextMenu) {\n    contextMenu.viewSection().appendItem(\n        Common.UIString.UIString('Scroll into view'), () => this._node.scrollIntoView());\n  }\n\n  /**\n   * @param {!UI.ContextMenu.ContextMenu} contextMenu\n   * @param {!Element} textNode\n   */\n  populateTextContextMenu(contextMenu, textNode) {\n    if (!this._editing) {\n      contextMenu.editSection().appendItem(\n          Common.UIString.UIString('Edit text'), this._startEditingTextNode.bind(this, textNode));\n    }\n    this.populateNodeContextMenu(contextMenu);\n  }\n\n  /**\n   * @param {!UI.ContextMenu.ContextMenu} contextMenu\n   */\n  populateNodeContextMenu(contextMenu) {\n    // Add free-form node-related actions.\n    const isEditable = this.hasEditableNode();\n    if (isEditable && !this._editing) {\n      contextMenu.editSection().appendItem(Common.UIString.UIString('Edit as HTML'), this._editAsHTML.bind(this));\n    }\n    const isShadowRoot = this._node.isShadowRoot();\n\n    // Place it here so that all \"Copy\"-ing items stick together.\n    const copyMenu = contextMenu.clipboardSection().appendSubMenuItem(Common.UIString.UIString('Copy'));\n    const createShortcut = UI.KeyboardShortcut.KeyboardShortcut.shortcutToString.bind(null);\n    const modifier = UI.KeyboardShortcut.Modifiers.CtrlOrMeta;\n    const treeOutline = this.treeOutline;\n    if (!treeOutline) {\n      return;\n    }\n    let menuItem;\n    const section = copyMenu.section();\n    if (!isShadowRoot) {\n      menuItem = section.appendItem(\n          Common.UIString.UIString('Copy outerHTML'),\n          treeOutline.performCopyOrCut.bind(treeOutline, false, this._node));\n      menuItem.setShortcut(createShortcut('V', modifier));\n    }\n    if (this._node.nodeType() === Node.ELEMENT_NODE) {\n      section.appendItem(Common.UIString.UIString('Copy selector'), this._copyCSSPath.bind(this));\n      section.appendItem(\n          Common.UIString.UIString('Copy JS path'), this._copyJSPath.bind(this), !canGetJSPath(this._node));\n      section.appendItem(ls`Copy styles`, this._copyStyles.bind(this));\n    }\n    if (!isShadowRoot) {\n      section.appendItem(Common.UIString.UIString('Copy XPath'), this._copyXPath.bind(this));\n      section.appendItem(ls`Copy full XPath`, this._copyFullXPath.bind(this));\n    }\n\n    if (!isShadowRoot) {\n      menuItem = copyMenu.clipboardSection().appendItem(\n          Common.UIString.UIString('Cut element'), treeOutline.performCopyOrCut.bind(treeOutline, true, this._node),\n          !this.hasEditableNode());\n      menuItem.setShortcut(createShortcut('X', modifier));\n      menuItem = copyMenu.clipboardSection().appendItem(\n          Common.UIString.UIString('Copy element'), treeOutline.performCopyOrCut.bind(treeOutline, false, this._node));\n      menuItem.setShortcut(createShortcut('C', modifier));\n      menuItem = copyMenu.clipboardSection().appendItem(\n          Common.UIString.UIString('Paste element'), treeOutline.pasteNode.bind(treeOutline, this._node),\n          !treeOutline.canPaste(this._node));\n      menuItem.setShortcut(createShortcut('V', modifier));\n\n      // Duplicate element, disabled on root element and ShadowDOM.\n      const isRootElement = !this._node.parentNode || this._node.parentNode.nodeName() === '#document';\n      menuItem = contextMenu.editSection().appendItem(\n          Common.UIString.UIString('Duplicate element'), treeOutline.duplicateNode.bind(treeOutline, this._node),\n          (this._node.isInShadowTree() || isRootElement));\n    }\n\n    menuItem = contextMenu.debugSection().appendCheckboxItem(\n        Common.UIString.UIString('Hide element'), treeOutline.toggleHideElement.bind(treeOutline, this._node),\n        treeOutline.isToggledToHidden(this._node));\n    menuItem.setShortcut(\n        UI.ShortcutRegistry.ShortcutRegistry.instance().shortcutTitleForAction('elements.hide-element') || '');\n\n    if (isEditable) {\n      contextMenu.editSection().appendItem(Common.UIString.UIString('Delete element'), this.remove.bind(this));\n    }\n\n    contextMenu.viewSection().appendItem(ls`Expand recursively`, this.expandRecursively.bind(this));\n    contextMenu.viewSection().appendItem(ls`Collapse children`, this.collapseChildren.bind(this));\n    const deviceModeWrapperAction = new Emulation.DeviceModeWrapper.ActionDelegate();\n    contextMenu.viewSection().appendItem(\n        ls`Capture node screenshot`,\n        deviceModeWrapperAction.handleAction.bind(\n            null, UI.Context.Context.instance(), 'emulation.capture-node-screenshot'));\n  }\n\n  _startEditing() {\n    if (!this.treeOutline || this.treeOutline.selectedDOMNode() !== this._node) {\n      return;\n    }\n\n    const listItem = this.listItemElement;\n\n    if (this._canAddAttributes) {\n      const attribute = listItem.getElementsByClassName('webkit-html-attribute')[0];\n      if (attribute) {\n        return this._startEditingAttribute(\n            attribute, attribute.getElementsByClassName('webkit-html-attribute-value')[0]);\n      }\n\n      return this._addNewAttribute();\n    }\n\n    if (this._node.nodeType() === Node.TEXT_NODE) {\n      const textNode = listItem.getElementsByClassName('webkit-html-text-node')[0];\n      if (textNode) {\n        return this._startEditingTextNode(textNode);\n      }\n    }\n\n    return;\n  }\n\n  _addNewAttribute() {\n    // Cannot just convert the textual html into an element without\n    // a parent node. Use a temporary span container for the HTML.\n    const container = document.createElement('span');\n    const attr = this._buildAttributeDOM(container, ' ', '', null);\n    attr.style.marginLeft = '2px';   // overrides the .editing margin rule\n    attr.style.marginRight = '2px';  // overrides the .editing margin rule\n\n    const tag = this.listItemElement.getElementsByClassName('webkit-html-tag')[0];\n    this._insertInLastAttributePosition(tag, attr);\n    attr.scrollIntoViewIfNeeded(true);\n    return this._startEditingAttribute(attr, attr);\n  }\n\n  /**\n   * @param {string} attributeName\n   */\n  _triggerEditAttribute(attributeName) {\n    const attributeElements = this.listItemElement.getElementsByClassName('webkit-html-attribute-name');\n    for (let i = 0, len = attributeElements.length; i < len; ++i) {\n      if (attributeElements[i].textContent === attributeName) {\n        for (let elem = attributeElements[i].nextSibling; elem; elem = elem.nextSibling) {\n          if (elem.nodeType !== Node.ELEMENT_NODE) {\n            continue;\n          }\n\n          if (/** @type {!Element} */ (elem).classList.contains('webkit-html-attribute-value')) {\n            return this._startEditingAttribute(\n                /** @type {!HTMLElement} */ (elem.parentElement), /** @type {!Element} */ (elem));\n          }\n        }\n      }\n    }\n\n    return;\n  }\n\n  /**\n   * @param {!Element} attribute\n   * @param {!Element} elementForSelection\n   */\n  _startEditingAttribute(attribute, elementForSelection) {\n    console.assert(this.listItemElement.isAncestor(attribute));\n\n    if (UI.UIUtils.isBeingEdited(attribute)) {\n      return true;\n    }\n\n    const attributeNameElement = attribute.getElementsByClassName('webkit-html-attribute-name')[0];\n    if (!attributeNameElement) {\n      return false;\n    }\n\n    const attributeName = attributeNameElement.textContent;\n    const attributeValueElement = attribute.getElementsByClassName('webkit-html-attribute-value')[0];\n\n    // Make sure elementForSelection is not a child of attributeValueElement.\n    elementForSelection =\n        attributeValueElement.isAncestor(elementForSelection) ? attributeValueElement : elementForSelection;\n\n    /**\n     * @param {!Node} node\n     */\n    function removeZeroWidthSpaceRecursive(node) {\n      if (node.nodeType === Node.TEXT_NODE) {\n        node.nodeValue = node.nodeValue ? node.nodeValue.replace(/\\u200B/g, '') : '';\n        return;\n      }\n\n      if (node.nodeType !== Node.ELEMENT_NODE) {\n        return;\n      }\n\n      for (let child = node.firstChild; child; child = child.nextSibling) {\n        removeZeroWidthSpaceRecursive(child);\n      }\n    }\n\n    const attributeValue = attributeName && attributeValueElement ? this._node.getAttribute(attributeName) : undefined;\n    if (attributeValue !== undefined) {\n      attributeValueElement.setTextContentTruncatedIfNeeded(\n          attributeValue, Common.UIString.UIString('<value is too large to edit>'));\n    }\n\n    // Remove zero-width spaces that were added by nodeTitleInfo.\n    removeZeroWidthSpaceRecursive(attribute);\n\n    const config = new UI.InplaceEditor.Config(\n        /** @type {function(!Element, string, string, (*|undefined), string): void} */ (\n            this._attributeEditingCommitted.bind(this)),\n        this._editingCancelled.bind(this), attributeName || undefined);\n\n    /**\n     * @param {!Event} event\n     * @return {string}\n     */\n    function postKeyDownFinishHandler(event) {\n      UI.UIUtils.handleElementValueModifications(event, attribute);\n      return '';\n    }\n\n    if (!Common.ParsedURL.ParsedURL.fromString(attributeValueElement.textContent || '')) {\n      config.setPostKeydownFinishHandler(postKeyDownFinishHandler);\n    }\n\n    this._updateEditorHandles(attribute, config);\n\n    const componentSelection = this.listItemElement.getComponentSelection();\n    componentSelection && componentSelection.selectAllChildren(elementForSelection);\n\n\n    return true;\n  }\n\n\n  /**\n   * @param {!Element} textNodeElement\n   */\n  _startEditingTextNode(textNodeElement) {\n    if (UI.UIUtils.isBeingEdited(textNodeElement)) {\n      return true;\n    }\n\n    let textNode = this._node;\n    // We only show text nodes inline in elements if the element only\n    // has a single child, and that child is a text node.\n    if (textNode.nodeType() === Node.ELEMENT_NODE && textNode.firstChild) {\n      textNode = textNode.firstChild;\n    }\n\n    const container = textNodeElement.enclosingNodeOrSelfWithClass('webkit-html-text-node');\n    if (container) {\n      container.textContent = textNode.nodeValue();\n    }  // Strip the CSS or JS highlighting if present.\n    const config = new UI.InplaceEditor.Config(\n        this._textNodeEditingCommitted.bind(this, textNode), this._editingCancelled.bind(this));\n    this._updateEditorHandles(textNodeElement, config);\n    const componentSelection = this.listItemElement.getComponentSelection();\n    componentSelection && componentSelection.selectAllChildren(textNodeElement);\n\n    return true;\n  }\n\n  /**\n   * @param {!Element=} tagNameElement\n   */\n  _startEditingTagName(tagNameElement) {\n    if (!tagNameElement) {\n      tagNameElement = this.listItemElement.getElementsByClassName('webkit-html-tag-name')[0];\n      if (!tagNameElement) {\n        return false;\n      }\n    }\n\n    const tagName = tagNameElement.textContent;\n    if (tagName !== null && EditTagBlocklist.has(tagName.toLowerCase())) {\n      return false;\n    }\n\n    if (UI.UIUtils.isBeingEdited(tagNameElement)) {\n      return true;\n    }\n\n    const closingTagElement = this._distinctClosingTagElement();\n\n    function keyupListener() {\n      if (closingTagElement && tagNameElement) {\n        closingTagElement.textContent = '</' + tagNameElement.textContent + '>';\n      }\n    }\n\n    /**\n     * @param {!Event} event\n     */\n    const keydownListener = event => {\n      if (/** @type {!KeyboardEvent} */ (event).key !== ' ') {\n        return;\n      }\n      this._editing && this._editing.commit();\n      event.consume(true);\n    };\n\n    /**\n     * @param {!Element} element\n     * @param {string} newTagName\n     * @param {string} oldText\n     * @param {*} tagName\n     * @param {string} moveDirection\n     * @this {ElementsTreeElement}\n     */\n    function editingCommitted(element, newTagName, oldText, tagName, moveDirection) {\n      if (!tagNameElement) {\n        return;\n      }\n      tagNameElement.removeEventListener('keyup', keyupListener, false);\n      tagNameElement.removeEventListener('keydown', keydownListener, false);\n      this._tagNameEditingCommitted(element, newTagName, oldText, /** @type {string} */ (tagName), moveDirection);\n    }\n\n    /**\n     * @param {!Element} element\n     * @param {*} context\n     * @this {ElementsTreeElement}\n     */\n    function editingCancelled(element, context) {\n      if (!tagNameElement) {\n        return;\n      }\n      tagNameElement.removeEventListener('keyup', keyupListener, false);\n      tagNameElement.removeEventListener('keydown', keydownListener, false);\n      this._editingCancelled(element, context);\n    }\n\n    tagNameElement.addEventListener('keyup', keyupListener, false);\n    tagNameElement.addEventListener('keydown', keydownListener, false);\n\n    const config = new UI.InplaceEditor.Config(editingCommitted.bind(this), editingCancelled.bind(this), tagName);\n    this._updateEditorHandles(tagNameElement, config);\n    const componentSelection = this.listItemElement.getComponentSelection();\n    componentSelection && componentSelection.selectAllChildren(tagNameElement);\n    return true;\n  }\n\n  /**\n   * @param {!Element} element\n   * @param {!UI.InplaceEditor.Config<?>=} config\n   */\n  _updateEditorHandles(element, config) {\n    const editorHandles = UI.InplaceEditor.InplaceEditor.startEditing(element, config);\n    if (!editorHandles) {\n      this._editing = null;\n    } else {\n      this._editing = {\n        commit: editorHandles.commit,\n        cancel: editorHandles.cancel,\n        editor: undefined,\n        resize: () => {},\n      };\n    }\n  }\n\n  /**\n   * @param {function(string, string):void} commitCallback\n   * @param {function():void} disposeCallback\n   * @param {?string} maybeInitialValue\n   */\n  _startEditingAsHTML(commitCallback, disposeCallback, maybeInitialValue) {\n    if (maybeInitialValue === null) {\n      return;\n    }\n    let initialValue = maybeInitialValue;  // To suppress a compiler warning.\n    if (this._editing) {\n      return;\n    }\n\n    initialValue = this._convertWhitespaceToEntities(initialValue).text;\n\n    this._htmlEditElement = /** @type {!HTMLElement} */ (document.createElement('div'));\n    this._htmlEditElement.className = 'source-code elements-tree-editor';\n\n    // Hide header items.\n    let child = this.listItemElement.firstChild;\n    while (child) {\n      /** @type {!HTMLElement} */ (child).style.display = 'none';\n      child = child.nextSibling;\n    }\n    // Hide children item.\n    if (this.childrenListElement) {\n      this.childrenListElement.style.display = 'none';\n    }\n    // Append editor.\n    this.listItemElement.appendChild(this._htmlEditElement);\n\n    const textEditorExtension = Root.Runtime.Runtime.instance().extension(UI.TextEditor.TextEditorFactory);\n    if (textEditorExtension) {\n      textEditorExtension.instance().then(factory => {\n        gotFactory.call(this, /** @type {!UI.TextEditor.TextEditorFactory} */ (factory));\n      });\n    }\n\n\n    /**\n     * @param {!UI.TextEditor.TextEditorFactory} factory\n     * @this {ElementsTreeElement}\n     */\n    function gotFactory(factory) {\n      const editor = factory.createEditor({\n        lineNumbers: false,\n        lineWrapping: Common.Settings.Settings.instance().moduleSetting('domWordWrap').get(),\n        mimeType: 'text/html',\n        autoHeight: false,\n        padBottom: false,\n        bracketMatchingSetting: undefined,\n        devtoolsAccessibleName: undefined,\n        maxHighlightLength: undefined,\n        placeholder: undefined,\n        lineWiseCopyCut: undefined,\n        inputStyle: undefined,\n      });\n      this._editing = {commit: commit.bind(this), cancel: dispose.bind(this), editor, resize: resize.bind(this)};\n      resize.call(this);\n\n      editor.widget().show(\n          /** @type {!HTMLElement} */ (this._htmlEditElement));\n      editor.setText(initialValue);\n      editor.widget().focus();\n      editor.widget().element.addEventListener('focusout', event => {\n        // The relatedTarget is null when no element gains focus, e.g. switching windows.\n        const relatedTarget = /** @type {?Node} */ (event.relatedTarget);\n        if (relatedTarget && !relatedTarget.isSelfOrDescendant(editor.widget().element)) {\n          this._editing && this._editing.commit();\n        }\n      }, false);\n      editor.widget().element.addEventListener('keydown', keydown.bind(this), true);\n\n      this.treeOutline &&\n          this.treeOutline.setMultilineEditing(\n              /** @type {!{commit: function():void, cancel: function():void, editor: !UI.TextEditor.TextEditor, resize: function():*}} */\n              (this._editing));\n    }\n\n    /**\n     * @this {ElementsTreeElement}\n     */\n    function resize() {\n      if (this.treeOutline && this._htmlEditElement) {\n        this._htmlEditElement.style.width = this.treeOutline.visibleWidth() - this._computeLeftIndent() - 30 + 'px';\n      }\n\n      if (this._editing && this._editing.editor) {\n        /** @type {!TextEditor.CodeMirrorTextEditor.CodeMirrorTextEditor} */ (this._editing.editor).onResize();\n      }\n    }\n\n    /**\n     * @this {ElementsTreeElement}\n     */\n    function commit() {\n      if (this._editing && this._editing.editor) {\n        commitCallback(initialValue, this._editing.editor.text());\n      }\n      dispose.call(this);\n    }\n\n    /**\n     * @this {ElementsTreeElement}\n     */\n    function dispose() {\n      if (!this._editing || !this._editing.editor) {\n        return;\n      }\n      this._editing.editor.widget().element.removeEventListener('blur', this._editing.commit, true);\n      this._editing.editor.widget().detach();\n      this._editing = null;\n\n      // Remove editor.\n      if (this._htmlEditElement) {\n        this.listItemElement.removeChild(this._htmlEditElement);\n      }\n      this._htmlEditElement = undefined;\n      // Unhide children item.\n      if (this.childrenListElement) {\n        this.childrenListElement.style.removeProperty('display');\n      }\n      // Unhide header items.\n      let child = this.listItemElement.firstChild;\n      while (child) {\n        /** @type {!HTMLElement} */ (child).style.removeProperty('display');\n        child = child.nextSibling;\n      }\n\n      if (this.treeOutline) {\n        this.treeOutline.setMultilineEditing(null);\n        this.treeOutline.focus();\n      }\n\n      disposeCallback();\n    }\n\n    /**\n     * @param {!Event} event\n     * @this {!ElementsTreeElement}\n     */\n    function keydown(event) {\n      const keyboardEvent = /** @type {!KeyboardEvent} */ (event);\n      const isMetaOrCtrl = UI.KeyboardShortcut.KeyboardShortcut.eventHasCtrlOrMeta(keyboardEvent) &&\n          !keyboardEvent.altKey && !keyboardEvent.shiftKey;\n      if (keyboardEvent.key === 'Enter' && (isMetaOrCtrl || keyboardEvent.isMetaOrCtrlForTest)) {\n        keyboardEvent.consume(true);\n        this._editing && this._editing.commit();\n      } else if (keyboardEvent.keyCode === UI.KeyboardShortcut.Keys.Esc.code || keyboardEvent.key === 'Escape') {\n        keyboardEvent.consume(true);\n        this._editing && this._editing.cancel();\n      }\n    }\n  }\n\n  /**\n   * @param {!Element} element\n   * @param {string} newText\n   * @param {string} oldText\n   * @param {string} attributeName\n   * @param {string} moveDirection\n   */\n  _attributeEditingCommitted(element, newText, oldText, attributeName, moveDirection) {\n    this._editing = null;\n\n    const treeOutline = this.treeOutline;\n\n    /**\n     * @param {?ProtocolClient.InspectorBackend.ProtocolError=} error\n     * @this {ElementsTreeElement}\n     */\n    function moveToNextAttributeIfNeeded(error) {\n      if (error) {\n        this._editingCancelled(element, attributeName);\n      }\n\n      if (!moveDirection) {\n        return;\n      }\n\n      if (treeOutline) {\n        treeOutline.runPendingUpdates();\n        treeOutline.focus();\n      }\n\n      // Search for the attribute's position, and then decide where to move to.\n      const attributes = this._node.attributes();\n      for (let i = 0; i < attributes.length; ++i) {\n        if (attributes[i].name !== attributeName) {\n          continue;\n        }\n\n        if (moveDirection === 'backward') {\n          if (i === 0) {\n            this._startEditingTagName();\n          } else {\n            this._triggerEditAttribute(attributes[i - 1].name);\n          }\n        } else {\n          if (i === attributes.length - 1) {\n            this._addNewAttribute();\n          } else {\n            this._triggerEditAttribute(attributes[i + 1].name);\n          }\n        }\n        return;\n      }\n\n      // Moving From the \"New Attribute\" position.\n      if (moveDirection === 'backward') {\n        if (newText === ' ') {\n          // Moving from \"New Attribute\" that was not edited\n          if (attributes.length > 0) {\n            this._triggerEditAttribute(attributes[attributes.length - 1].name);\n          }\n        } else {\n          // Moving from \"New Attribute\" that holds new value\n          if (attributes.length > 1) {\n            this._triggerEditAttribute(attributes[attributes.length - 2].name);\n          }\n        }\n      } else if (moveDirection === 'forward') {\n        if (!Platform.StringUtilities.isWhitespace(newText)) {\n          this._addNewAttribute();\n        } else {\n          this._startEditingTagName();\n        }\n      }\n    }\n\n    if ((attributeName.trim() || newText.trim()) && oldText !== newText) {\n      this._node.setAttribute(attributeName, newText, moveToNextAttributeIfNeeded.bind(this));\n      return;\n    }\n\n    this.updateTitle();\n    moveToNextAttributeIfNeeded.call(this);\n  }\n\n  /**\n   * @param {!Element} element\n   * @param {string} newText\n   * @param {string} oldText\n   * @param {string} tagName\n   * @param {string} moveDirection\n   */\n  _tagNameEditingCommitted(element, newText, oldText, tagName, moveDirection) {\n    this._editing = null;\n    const self = this;\n\n    function cancel() {\n      const closingTagElement = self._distinctClosingTagElement();\n      if (closingTagElement) {\n        closingTagElement.textContent = '</' + tagName + '>';\n      }\n\n      self._editingCancelled(element, tagName);\n      moveToNextAttributeIfNeeded.call(self);\n    }\n\n    /**\n     * @this {ElementsTreeElement}\n     */\n    function moveToNextAttributeIfNeeded() {\n      if (moveDirection !== 'forward') {\n        this._addNewAttribute();\n        return;\n      }\n\n      const attributes = this._node.attributes();\n      if (attributes.length > 0) {\n        this._triggerEditAttribute(attributes[0].name);\n      } else {\n        this._addNewAttribute();\n      }\n    }\n\n    newText = newText.trim();\n    if (newText === oldText) {\n      cancel();\n      return;\n    }\n\n    const treeOutline = this.treeOutline;\n    const wasExpanded = this.expanded;\n\n    this._node.setNodeName(newText, (error, newNode) => {\n      if (error || !newNode) {\n        cancel();\n        return;\n      }\n      if (!treeOutline) {\n        return;\n      }\n      const newTreeItem = treeOutline.selectNodeAfterEdit(wasExpanded, error, newNode);\n      moveToNextAttributeIfNeeded.call(newTreeItem);\n    });\n  }\n\n  /**\n   * @param {!SDK.DOMModel.DOMNode} textNode\n   * @param {!Element} element\n   * @param {string} newText\n   */\n  _textNodeEditingCommitted(textNode, element, newText) {\n    this._editing = null;\n\n    /**\n     * @this {ElementsTreeElement}\n     */\n    function callback() {\n      this.updateTitle();\n    }\n    textNode.setNodeValue(newText, callback.bind(this));\n  }\n\n  /**\n   * @param {!Element} element\n   * @param {*} context\n   */\n  _editingCancelled(element, context) {\n    this._editing = null;\n\n    // Need to restore attributes structure.\n    this.updateTitle();\n  }\n\n  /**\n   * @return {?Element}\n   */\n  _distinctClosingTagElement() {\n    // FIXME: Improve the Tree Element / Outline Abstraction to prevent crawling the DOM\n\n    // For an expanded element, it will be the last element with class \"close\"\n    // in the child element list.\n    if (this.expanded) {\n      const closers = this.childrenListElement.querySelectorAll('.close');\n      return closers[closers.length - 1];\n    }\n\n    // Remaining cases are single line non-expanded elements with a closing\n    // tag, or HTML elements without a closing tag (such as <br>). Return\n    // null in the case where there isn't a closing tag.\n    const tags = this.listItemElement.getElementsByClassName('webkit-html-tag');\n    return tags.length === 1 ? null : tags[tags.length - 1];\n  }\n\n  /**\n   * @param {?UpdateRecord=} updateRecord\n   * @param {boolean=} onlySearchQueryChanged\n   */\n  updateTitle(updateRecord, onlySearchQueryChanged) {\n    // If we are editing, return early to prevent canceling the edit.\n    // After editing is committed updateTitle will be called.\n    if (this._editing) {\n      return;\n    }\n\n    if (onlySearchQueryChanged) {\n      this._hideSearchHighlight();\n    } else {\n      const nodeInfo = this._nodeTitleInfo(updateRecord || null);\n      if (this._node.nodeType() === Node.DOCUMENT_FRAGMENT_NODE && this._node.isInShadowTree() &&\n          this._node.shadowRootType()) {\n        this.childrenListElement.classList.add('shadow-root');\n        let depth = 4;\n        for (let node = /** @type {?SDK.DOMModel.DOMNode} */ (this._node); depth && node; node = node.parentNode) {\n          if (node.nodeType() === Node.DOCUMENT_FRAGMENT_NODE) {\n            depth--;\n          }\n        }\n        if (!depth) {\n          this.childrenListElement.classList.add('shadow-root-deep');\n        } else {\n          this.childrenListElement.classList.add('shadow-root-depth-' + depth);\n        }\n      }\n      const highlightElement = document.createElement('span');\n      highlightElement.className = 'highlight';\n      highlightElement.appendChild(nodeInfo);\n      // fixme: make it clear that `this.title = x` is a setter with significant side effects\n      this.title = highlightElement;\n      this.updateDecorations();\n      this.listItemElement.insertBefore(this._gutterContainer, this.listItemElement.firstChild);\n      if (!this._isClosingTag && this._adornerContainer) {\n        this.listItemElement.appendChild(this._adornerContainer);\n      }\n      this._highlightResult = [];\n      delete this.selectionElement;\n      delete this._hintElement;\n      if (this.selected) {\n        this._createSelection();\n        this._createHint();\n      }\n    }\n\n    this._highlightSearchResults();\n  }\n\n  /**\n   * @return {number}\n   */\n  _computeLeftIndent() {\n    let treeElement = this.parent;\n    let depth = 0;\n    while (treeElement !== null) {\n      depth++;\n      treeElement = treeElement.parent;\n    }\n\n    /** Keep it in sync with elementsTreeOutline.css **/\n    return 12 * (depth - 2) + (this.isExpandable() ? 1 : 12);\n  }\n\n  updateDecorations() {\n    this._gutterContainer.style.left = (-this._computeLeftIndent()) + 'px';\n\n    if (this.isClosingTag()) {\n      return;\n    }\n\n    if (this._node.nodeType() !== Node.ELEMENT_NODE) {\n      return;\n    }\n\n    this._decorationsThrottler.schedule(this._updateDecorationsInternal.bind(this));\n  }\n\n  /**\n   * @return {!Promise<void>}\n   */\n  _updateDecorationsInternal() {\n    if (!this.treeOutline) {\n      return Promise.resolve();\n    }\n\n    const node = this._node;\n\n    if (!this.treeOutline.decoratorExtensions) {\n      this.treeOutline.decoratorExtensions = Root.Runtime.Runtime.instance().extensions(MarkerDecorator);\n    }\n\n    const markerToExtension = new Map();\n    for (const decoratorExtension of this.treeOutline.decoratorExtensions) {\n      const descriptor = decoratorExtension.descriptor();\n      if ('marker' in descriptor) {\n        markerToExtension.set(descriptor['marker'], decoratorExtension);\n      }\n    }\n\n    /** @type {!Array<!Promise<void>>} */\n    const promises = [];\n    /** @type {!Array<!{title: string, color: string}>} */\n    const decorations = [];\n    /** @type {!Array<!{title: string, color: string}>} */\n    const descendantDecorations = [];\n    node.traverseMarkers(visitor);\n\n    /**\n     * @param {!SDK.DOMModel.DOMNode} n\n     * @param {string} marker\n     */\n    function visitor(n, marker) {\n      const extension = markerToExtension.get(marker);\n      if (!extension) {\n        return;\n      }\n      promises.push(extension.instance().then(collectDecoration.bind(null, n)));\n    }\n\n    /**\n     * @param {!SDK.DOMModel.DOMNode} n\n     * @param {!MarkerDecorator} decorator\n     */\n    function collectDecoration(n, decorator) {\n      const decoration = decorator.decorate(n);\n      if (!decoration) {\n        return;\n      }\n      (n === node ? decorations : descendantDecorations).push(decoration);\n    }\n\n    return Promise.all(promises).then(updateDecorationsUI.bind(this));\n\n    /**\n     * @this {ElementsTreeElement}\n     */\n    function updateDecorationsUI() {\n      this._decorationsElement.removeChildren();\n      this._decorationsElement.classList.add('hidden');\n      this._gutterContainer.classList.toggle(\n          'has-decorations', Boolean(decorations.length || descendantDecorations.length));\n      UI.ARIAUtils.setAccessibleName(this._decorationsElement, '');\n\n      if (!decorations.length && !descendantDecorations.length) {\n        return;\n      }\n\n      const colors = new Set();\n      const titles = document.createElement('div');\n\n      for (const decoration of decorations) {\n        const titleElement = titles.createChild('div');\n        titleElement.textContent = decoration.title;\n        colors.add(decoration.color);\n      }\n      if (this.expanded && !decorations.length) {\n        return;\n      }\n\n      const descendantColors = new Set();\n      if (descendantDecorations.length) {\n        let element = titles.createChild('div');\n        element.textContent = Common.UIString.UIString('Children:');\n        for (const decoration of descendantDecorations) {\n          element = titles.createChild('div');\n          element.style.marginLeft = '15px';\n          element.textContent = decoration.title;\n          descendantColors.add(decoration.color);\n        }\n      }\n\n      let offset = 0;\n      processColors.call(this, colors, 'elements-gutter-decoration');\n      if (!this.expanded) {\n        processColors.call(this, descendantColors, 'elements-gutter-decoration elements-has-decorated-children');\n      }\n      UI.Tooltip.Tooltip.install(this._decorationsElement, titles);\n      UI.ARIAUtils.setAccessibleName(this._decorationsElement, titles.textContent || '');\n\n      /**\n       * @param {!Set<string>} colors\n       * @param {string} className\n       * @this {ElementsTreeElement}\n       */\n      function processColors(colors, className) {\n        for (const color of colors) {\n          const child = this._decorationsElement.createChild('div', className);\n          this._decorationsElement.classList.remove('hidden');\n          child.style.backgroundColor = color;\n          child.style.borderColor = color;\n          if (offset) {\n            child.style.marginLeft = offset + 'px';\n          }\n          offset += 3;\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {!Element|!DocumentFragment} parentElement\n   * @param {string} name\n   * @param {string} value\n   * @param {?UpdateRecord} updateRecord\n   * @param {boolean=} forceValue\n   * @param {!SDK.DOMModel.DOMNode=} node\n   * @returns {!HTMLElement}\n   */\n  _buildAttributeDOM(parentElement, name, value, updateRecord, forceValue, node) {\n    const closingPunctuationRegex = /[\\/;:\\)\\]\\}]/g;\n    let highlightIndex = 0;\n    let highlightCount = 0;\n    let additionalHighlightOffset = 0;\n\n    /**\n     * @param {!Element} element\n     * @param {string} value\n     * @this {ElementsTreeElement}\n     */\n    function setValueWithEntities(element, value) {\n      const result = this._convertWhitespaceToEntities(value);\n      highlightCount = result.entityRanges.length;\n      value = result.text.replace(closingPunctuationRegex, (match, replaceOffset) => {\n        while (highlightIndex < highlightCount && result.entityRanges[highlightIndex].offset < replaceOffset) {\n          result.entityRanges[highlightIndex].offset += additionalHighlightOffset;\n          ++highlightIndex;\n        }\n        additionalHighlightOffset += 1;\n        return match + '\\u200B';\n      });\n\n      while (highlightIndex < highlightCount) {\n        result.entityRanges[highlightIndex].offset += additionalHighlightOffset;\n        ++highlightIndex;\n      }\n      element.setTextContentTruncatedIfNeeded(value);\n      UI.UIUtils.highlightRangesWithStyleClass(element, result.entityRanges, 'webkit-html-entity-value');\n    }\n\n    const hasText = (forceValue || value.length > 0);\n    const attrSpanElement = /** @type {!HTMLElement} */ (parentElement.createChild('span', 'webkit-html-attribute'));\n    const attrNameElement = attrSpanElement.createChild('span', 'webkit-html-attribute-name');\n    attrNameElement.textContent = name;\n\n    if (hasText) {\n      UI.UIUtils.createTextChild(attrSpanElement, '=\\u200B\"');\n    }\n\n    const attrValueElement = attrSpanElement.createChild('span', 'webkit-html-attribute-value');\n\n    if (updateRecord && updateRecord.isAttributeModified(name)) {\n      UI.UIUtils.runCSSAnimationOnce(hasText ? attrValueElement : attrNameElement, 'dom-update-highlight');\n    }\n\n    /**\n     * @this {ElementsTreeElement}\n     * @param {string} value\n     * @return {!Element}\n     */\n    function linkifyValue(value) {\n      const rewrittenHref = node ? node.resolveURL(value) : null;\n      if (rewrittenHref === null) {\n        const span = document.createElement('span');\n        setValueWithEntities.call(this, span, value);\n        return span;\n      }\n      value = value.replace(closingPunctuationRegex, '$&\\u200B');\n      if (value.startsWith('data:')) {\n        value = Platform.StringUtilities.trimMiddle(value, 60);\n      }\n      const link = node && node.nodeName().toLowerCase() === 'a' ?\n          UI.XLink.XLink.create(rewrittenHref, value, '', true /* preventClick */) :\n          Components.Linkifier.Linkifier.linkifyURL(rewrittenHref, {\n            text: value,\n            preventClick: true,\n            className: undefined,\n            lineNumber: undefined,\n            columnNumber: undefined,\n            maxLength: undefined,\n            tabStop: undefined,\n            bypassURLTrimming: undefined,\n          });\n      return ImagePreviewPopover.setImageUrl(link, rewrittenHref);\n    }\n\n    const nodeName = node ? node.nodeName().toLowerCase() : '';\n    if (nodeName && (name === 'src' || name === 'href')) {\n      attrValueElement.appendChild(linkifyValue.call(this, value));\n    } else if ((nodeName === 'img' || nodeName === 'source') && name === 'srcset') {\n      attrValueElement.appendChild(linkifySrcset.call(this, value));\n    } else if (nodeName === 'image' && (name === 'xlink:href' || name === 'href')) {\n      attrValueElement.appendChild(linkifySrcset.call(this, value));\n    } else {\n      setValueWithEntities.call(this, attrValueElement, value);\n    }\n\n    if (hasText) {\n      UI.UIUtils.createTextChild(attrSpanElement, '\"');\n    }\n\n    /**\n     * @param {string} value\n     * @return {!DocumentFragment}\n     * @this {!ElementsTreeElement}\n     */\n    function linkifySrcset(value) {\n      // Splitting normally on commas or spaces will break on valid srcsets \"foo 1x,bar 2x\" and \"data:,foo 1x\".\n      // 1) Let the index of the next space be `indexOfSpace`.\n      // 2a) If the character at `indexOfSpace - 1` is a comma, collect the preceding characters up to\n      //     `indexOfSpace - 1` as a URL and repeat step 1).\n      // 2b) Else, collect the preceding characters as a URL.\n      // 3) Collect the characters from `indexOfSpace` up to the next comma as the size descriptor and repeat step 1).\n      // https://html.spec.whatwg.org/C/#parse-a-srcset-attribute\n      const fragment = document.createDocumentFragment();\n      let i = 0;\n      while (value.length) {\n        if (i++ > 0) {\n          UI.UIUtils.createTextChild(fragment, ' ');\n        }\n        value = value.trim();\n        // The url and descriptor may end with a separating comma.\n        let url = '';\n        let descriptor = '';\n        const indexOfSpace = value.search(/\\s/);\n        if (indexOfSpace === -1) {\n          url = value;\n        } else if (indexOfSpace > 0 && value[indexOfSpace - 1] === ',') {\n          url = value.substring(0, indexOfSpace);\n        } else {\n          url = value.substring(0, indexOfSpace);\n          const indexOfComma = value.indexOf(',', indexOfSpace);\n          if (indexOfComma !== -1) {\n            descriptor = value.substring(indexOfSpace, indexOfComma + 1);\n          } else {\n            descriptor = value.substring(indexOfSpace);\n          }\n        }\n\n        if (url) {\n          // Up to one trailing comma should be removed from `url`.\n          if (url.endsWith(',')) {\n            fragment.appendChild(linkifyValue.call(this, url.substring(0, url.length - 1)));\n            UI.UIUtils.createTextChild(fragment, ',');\n          } else {\n            fragment.appendChild(linkifyValue.call(this, url));\n          }\n        }\n        if (descriptor) {\n          UI.UIUtils.createTextChild(fragment, descriptor);\n        }\n        value = value.substring(url.length + descriptor.length);\n      }\n      return fragment;\n    }\n\n    return attrSpanElement;\n  }\n\n  /**\n   * @param {!DocumentFragment} parentElement\n   * @param {string} pseudoElementName\n   */\n  _buildPseudoElementDOM(parentElement, pseudoElementName) {\n    const pseudoElement = parentElement.createChild('span', 'webkit-html-pseudo-element');\n    pseudoElement.textContent = '::' + pseudoElementName;\n    UI.UIUtils.createTextChild(parentElement, '\\u200B');\n  }\n\n  /**\n   * @param {!DocumentFragment} parentElement\n   * @param {string} tagName\n   * @param {boolean} isClosingTag\n   * @param {boolean} isDistinctTreeElement\n   * @param {?UpdateRecord} updateRecord\n   */\n  _buildTagDOM(parentElement, tagName, isClosingTag, isDistinctTreeElement, updateRecord) {\n    const node = this._node;\n    const classes = ['webkit-html-tag'];\n    if (isClosingTag && isDistinctTreeElement) {\n      classes.push('close');\n    }\n    const tagElement = parentElement.createChild('span', classes.join(' '));\n    UI.UIUtils.createTextChild(tagElement, '<');\n    const tagNameElement =\n        tagElement.createChild('span', isClosingTag ? 'webkit-html-close-tag-name' : 'webkit-html-tag-name');\n    tagNameElement.textContent = (isClosingTag ? '/' : '') + tagName;\n    // Force screen readers to consider the tagname as one label, this avoids announcing <div id> as one word \"divid\".\n    UI.ARIAUtils.setAccessibleName(tagNameElement, tagName);\n    if (!isClosingTag) {\n      if (node.hasAttributes()) {\n        const attributes = node.attributes();\n        for (let i = 0; i < attributes.length; ++i) {\n          const attr = attributes[i];\n          UI.UIUtils.createTextChild(tagElement, ' ');\n          this._buildAttributeDOM(tagElement, attr.name, attr.value, updateRecord, false, node);\n        }\n      }\n      if (updateRecord) {\n        let hasUpdates = updateRecord.hasRemovedAttributes() || updateRecord.hasRemovedChildren();\n        hasUpdates = hasUpdates || (!this.expanded && updateRecord.hasChangedChildren());\n        if (hasUpdates) {\n          UI.UIUtils.runCSSAnimationOnce(tagNameElement, 'dom-update-highlight');\n        }\n      }\n    }\n\n    UI.UIUtils.createTextChild(tagElement, '>');\n    UI.UIUtils.createTextChild(parentElement, '\\u200B');\n  }\n\n  /**\n   * @param {string} text\n   * @return {!{text: string, entityRanges: !Array.<!TextUtils.TextRange.SourceRange>}}\n   */\n  _convertWhitespaceToEntities(text) {\n    let result = '';\n    let lastIndexAfterEntity = 0;\n    const entityRanges = [];\n    const charToEntity = MappedCharToEntity;\n    for (let i = 0, size = text.length; i < size; ++i) {\n      const char = text.charAt(i);\n      if (charToEntity[char]) {\n        result += text.substring(lastIndexAfterEntity, i);\n        const entityValue = '&' + charToEntity[char] + ';';\n        entityRanges.push({offset: result.length, length: entityValue.length});\n        result += entityValue;\n        lastIndexAfterEntity = i + 1;\n      }\n    }\n    if (result) {\n      result += text.substring(lastIndexAfterEntity);\n    }\n    return {text: result || text, entityRanges: entityRanges};\n  }\n\n  /**\n   * @param {?UpdateRecord} updateRecord\n   * @return {!DocumentFragment} result\n   */\n  _nodeTitleInfo(updateRecord) {\n    const node = this._node;\n    const titleDOM = document.createDocumentFragment();\n    const updateSearchHighlight = () => {\n      this._highlightResult = [];\n      this._highlightSearchResults();\n    };\n\n    switch (node.nodeType()) {\n      case Node.ATTRIBUTE_NODE:\n        this._buildAttributeDOM(\n            titleDOM, /** @type {string} */ (node.name), /** @type {string} */ (node.value), updateRecord, true);\n        break;\n\n      case Node.ELEMENT_NODE: {\n        const pseudoType = node.pseudoType();\n        if (pseudoType) {\n          this._buildPseudoElementDOM(titleDOM, pseudoType);\n          break;\n        }\n\n        const tagName = node.nodeNameInCorrectCase();\n        if (this._isClosingTag) {\n          this._buildTagDOM(titleDOM, tagName, true, true, updateRecord);\n          break;\n        }\n\n        this._buildTagDOM(titleDOM, tagName, false, false, updateRecord);\n\n        if (this.isExpandable()) {\n          if (!this.expanded) {\n            const textNodeElement = titleDOM.createChild('span', 'webkit-html-text-node bogus');\n            textNodeElement.textContent = '…';\n            UI.UIUtils.createTextChild(titleDOM, '\\u200B');\n            this._buildTagDOM(titleDOM, tagName, true, false, updateRecord);\n          }\n          break;\n        }\n\n        if (ElementsTreeElement.canShowInlineText(node)) {\n          const textNodeElement = titleDOM.createChild('span', 'webkit-html-text-node');\n          const firstChild = node.firstChild;\n          if (!firstChild) {\n            throw new Error('ElementsTreeElement._nodeTitleInfo expects node.firstChild to be defined.');\n          }\n          const result = this._convertWhitespaceToEntities(firstChild.nodeValue());\n          textNodeElement.textContent = result.text;\n          UI.UIUtils.highlightRangesWithStyleClass(textNodeElement, result.entityRanges, 'webkit-html-entity-value');\n          UI.UIUtils.createTextChild(titleDOM, '\\u200B');\n          this._buildTagDOM(titleDOM, tagName, true, false, updateRecord);\n          if (updateRecord && updateRecord.hasChangedChildren()) {\n            UI.UIUtils.runCSSAnimationOnce(textNodeElement, 'dom-update-highlight');\n          }\n          if (updateRecord && updateRecord.isCharDataModified()) {\n            UI.UIUtils.runCSSAnimationOnce(textNodeElement, 'dom-update-highlight');\n          }\n          break;\n        }\n\n        if (this.treeOutline && this.treeOutline.isXMLMimeType || !ForbiddenClosingTagElements.has(tagName)) {\n          this._buildTagDOM(titleDOM, tagName, true, false, updateRecord);\n        }\n        break;\n      }\n\n      case Node.TEXT_NODE:\n        if (node.parentNode && node.parentNode.nodeName().toLowerCase() === 'script') {\n          const newNode = titleDOM.createChild('span', 'webkit-html-text-node webkit-html-js-node');\n          const text = node.nodeValue();\n          newNode.textContent = text.startsWith('\\n') ? text.substring(1) : text;\n\n          const javascriptSyntaxHighlighter = new UI.SyntaxHighlighter.SyntaxHighlighter('text/javascript', true);\n          javascriptSyntaxHighlighter.syntaxHighlightNode(newNode).then(updateSearchHighlight);\n        } else if (node.parentNode && node.parentNode.nodeName().toLowerCase() === 'style') {\n          const newNode = titleDOM.createChild('span', 'webkit-html-text-node webkit-html-css-node');\n          const text = node.nodeValue();\n          newNode.textContent = text.startsWith('\\n') ? text.substring(1) : text;\n\n          const cssSyntaxHighlighter = new UI.SyntaxHighlighter.SyntaxHighlighter('text/css', true);\n          cssSyntaxHighlighter.syntaxHighlightNode(newNode).then(updateSearchHighlight);\n        } else {\n          UI.UIUtils.createTextChild(titleDOM, '\"');\n          const textNodeElement = titleDOM.createChild('span', 'webkit-html-text-node');\n          const result = this._convertWhitespaceToEntities(node.nodeValue());\n          textNodeElement.textContent = result.text;\n          UI.UIUtils.highlightRangesWithStyleClass(textNodeElement, result.entityRanges, 'webkit-html-entity-value');\n          UI.UIUtils.createTextChild(titleDOM, '\"');\n          if (updateRecord && updateRecord.isCharDataModified()) {\n            UI.UIUtils.runCSSAnimationOnce(textNodeElement, 'dom-update-highlight');\n          }\n        }\n        break;\n\n      case Node.COMMENT_NODE: {\n        const commentElement = titleDOM.createChild('span', 'webkit-html-comment');\n        UI.UIUtils.createTextChild(commentElement, '<!--' + node.nodeValue() + '-->');\n        break;\n      }\n\n      case Node.DOCUMENT_TYPE_NODE: {\n        const docTypeElement = titleDOM.createChild('span', 'webkit-html-doctype');\n        UI.UIUtils.createTextChild(docTypeElement, '<!DOCTYPE ' + node.nodeName());\n        if (node.publicId) {\n          UI.UIUtils.createTextChild(docTypeElement, ' PUBLIC \"' + node.publicId + '\"');\n          if (node.systemId) {\n            UI.UIUtils.createTextChild(docTypeElement, ' \"' + node.systemId + '\"');\n          }\n        } else if (node.systemId) {\n          UI.UIUtils.createTextChild(docTypeElement, ' SYSTEM \"' + node.systemId + '\"');\n        }\n\n        if (node.internalSubset) {\n          UI.UIUtils.createTextChild(docTypeElement, ' [' + node.internalSubset + ']');\n        }\n\n        UI.UIUtils.createTextChild(docTypeElement, '>');\n        break;\n      }\n\n      case Node.CDATA_SECTION_NODE: {\n        const cdataElement = titleDOM.createChild('span', 'webkit-html-text-node');\n        UI.UIUtils.createTextChild(cdataElement, '<![CDATA[' + node.nodeValue() + ']]>');\n        break;\n      }\n\n      case Node.DOCUMENT_FRAGMENT_NODE: {\n        const fragmentElement = titleDOM.createChild('span', 'webkit-html-fragment');\n        fragmentElement.textContent = Platform.StringUtilities.collapseWhitespace(node.nodeNameInCorrectCase());\n        break;\n      }\n\n      default: {\n        const nameWithSpaceCollapsed = Platform.StringUtilities.collapseWhitespace(node.nodeNameInCorrectCase());\n        UI.UIUtils.createTextChild(titleDOM, nameWithSpaceCollapsed);\n      }\n    }\n\n    return titleDOM;\n  }\n\n  remove() {\n    if (this._node.pseudoType()) {\n      return;\n    }\n    const parentElement = this.parent;\n    if (!parentElement) {\n      return;\n    }\n\n    if (!this._node.parentNode || this._node.parentNode.nodeType() === Node.DOCUMENT_NODE) {\n      return;\n    }\n    this._node.removeNode();\n  }\n\n  /**\n   * @param {function(boolean)=} callback\n   * @param {boolean=} startEditing\n   */\n  toggleEditAsHTML(callback, startEditing) {\n    if (this._editing && this._htmlEditElement) {\n      this._editing.commit();\n      return;\n    }\n\n    if (startEditing === false) {\n      return;\n    }\n\n    /**\n     * @param {?ProtocolClient.InspectorBackend.ProtocolError} error\n     */\n    function selectNode(error) {\n      if (callback) {\n        callback(!error);\n      }\n    }\n\n    /**\n     * @param {string} initialValue\n     * @param {string} value\n     */\n    function commitChange(initialValue, value) {\n      if (initialValue !== value) {\n        node.setOuterHTML(value, selectNode);\n      }\n    }\n\n    function disposeCallback() {\n      if (callback) {\n        callback(false);\n      }\n    }\n\n    const node = this._node;\n    node.getOuterHTML().then(this._startEditingAsHTML.bind(this, commitChange, disposeCallback));\n  }\n\n  _copyCSSPath() {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(cssPath(this._node, true));\n  }\n\n  _copyJSPath() {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(jsPath(this._node, true));\n  }\n\n  _copyXPath() {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(xPath(this._node, true));\n  }\n\n  _copyFullXPath() {\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(xPath(this._node, false));\n  }\n\n  async _copyStyles() {\n    const node = this._node;\n    const cssModel = node.domModel().cssModel();\n    const cascade = await cssModel.cachedMatchedCascadeForNode(node);\n    if (!cascade) {\n      return;\n    }\n\n    const indent = Common.Settings.Settings.instance().moduleSetting('textEditorIndent').get();\n    /** @type {!Array<string>} */\n    const lines = [];\n    for (const style of cascade.nodeStyles().reverse()) {\n      for (const property of style.leadingProperties()) {\n        if (!property.parsedOk || property.disabled || !property.activeInStyle() || property.implicit) {\n          continue;\n        }\n        if (cascade.isInherited(style) && !SDK.CSSMetadata.cssMetadata().isPropertyInherited(property.name)) {\n          continue;\n        }\n        if (style.parentRule && style.parentRule.isUserAgent()) {\n          continue;\n        }\n        if (cascade.propertyState(property) !== SDK.CSSMatchedStyles.PropertyState.Active) {\n          continue;\n        }\n        lines.push(`${indent}${property.name}: ${property.value};`);\n      }\n    }\n\n    Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(lines.join('\\n'));\n  }\n\n  _highlightSearchResults() {\n    if (!this._searchQuery || !this._searchHighlightsVisible) {\n      return;\n    }\n    this._hideSearchHighlight();\n\n    const text = this.listItemElement.textContent || '';\n    const regexObject = createPlainTextSearchRegex(this._searchQuery, 'gi');\n\n    let match = regexObject.exec(text);\n    const matchRanges = [];\n    while (match) {\n      matchRanges.push(new TextUtils.TextRange.SourceRange(match.index, match[0].length));\n      match = regexObject.exec(text);\n    }\n\n    // Fall back for XPath, etc. matches.\n    if (!matchRanges.length) {\n      matchRanges.push(new TextUtils.TextRange.SourceRange(0, text.length));\n    }\n\n    this._highlightResult = [];\n    UI.UIUtils.highlightSearchResults(this.listItemElement, matchRanges, this._highlightResult);\n  }\n\n  _editAsHTML() {\n    const promise = Common.Revealer.reveal(this.node());\n    promise.then(() => {\n      const action = UI.ActionRegistry.ActionRegistry.instance().action('elements.edit-as-html');\n      if (!action) {\n        return;\n      }\n      return action.execute();\n    });\n  }\n\n  // TODO: add unit tests for adorner-related methods after component and TypeScript works are done\n  /**\n   * @param {string} text\n   * @param {!AdornerCategories} category\n   * @return {!Adorner}\n   */\n  adornText(text, category) {\n    const adornerContent = /** @type {!HTMLElement} */ (document.createElement('span'));\n    adornerContent.textContent = text;\n    const options = {\n      category,\n    };\n    const adorner = Adorner.create(adornerContent, text, options);\n    this._adorners.push(adorner);\n    this._updateAdorners();\n    return adorner;\n  }\n\n  /**\n   * @param {!Adorner} adornerToRemove\n   */\n  removeAdorner(adornerToRemove) {\n    const adorners = this._adorners;\n    adornerToRemove.remove();\n    for (let i = 0; i < adorners.length; ++i) {\n      if (adorners[i] === adornerToRemove) {\n        adorners.splice(i, 1);\n        this._updateAdorners();\n        return;\n      }\n    }\n  }\n\n  removeAllAdorners() {\n    for (const adorner of this._adorners) {\n      adorner.remove();\n    }\n\n    this._adorners = [];\n    this._updateAdorners();\n  }\n\n  _updateAdorners() {\n    this._adornersThrottler.schedule(this._updateAdornersInternal.bind(this));\n  }\n\n  /**\n   * @return {!Promise<void>}\n   */\n  _updateAdornersInternal() {\n    const adornerContainer = this._adornerContainer;\n    if (!adornerContainer) {\n      return Promise.resolve();\n    }\n    const adorners = this._adorners;\n    if (adorners.length === 0) {\n      adornerContainer.classList.add('hidden');\n      return Promise.resolve();\n    }\n\n    adorners.sort(adornerComparator);\n\n    adornerContainer.removeChildren();\n    for (const adorner of adorners) {\n      adornerContainer.appendChild(adorner);\n    }\n    adornerContainer.classList.remove('hidden');\n    return Promise.resolve();\n  }\n\n  async updateStyleAdorners() {\n    if (this._isClosingTag) {\n      return;\n    }\n\n    const node = this.node();\n    const nodeId = node.id;\n    if (node.nodeType() === Node.COMMENT_NODE || node.nodeType() === Node.DOCUMENT_FRAGMENT_NODE ||\n        nodeId === undefined) {\n      return;\n    }\n\n    const styles = await node.domModel().cssModel().computedStylePromise(nodeId);\n    for (const styleAdorner of this._styleAdorners) {\n      this.removeAdorner(styleAdorner);\n    }\n    this._styleAdorners = [];\n    if (!styles) {\n      return;\n    }\n\n    const display = styles.get('display');\n    const isGrid = display === 'grid' || display === 'inline-grid';\n    const isFlex =\n        Root.Runtime.experiments.isEnabled('cssFlexboxFeatures') && (display === 'flex' || display === 'inline-flex');\n\n    let adorner;\n    if (isGrid) {\n      adorner = this.createGridAdorner();\n    }\n    if (isFlex) {\n      adorner = this.createFlexAdorner();\n    }\n\n    if (adorner) {\n      this._styleAdorners.push(adorner);\n    }\n  }\n\n  /**\n   * @return {?Adorner}\n   */\n  createGridAdorner() {\n    const node = this.node();\n    const nodeId = node.id;\n    if (!nodeId) {\n      return null;\n    }\n\n    const adorner = this.adornText('grid', AdornerCategories.Layout);\n    adorner.classList.add('grid');\n\n    const onClick = /** @type {!EventListener} */ (() => {\n      if (adorner.isActive()) {\n        node.domModel().overlayModel().highlightGridInPersistentOverlay(nodeId);\n      } else {\n        node.domModel().overlayModel().hideGridInPersistentOverlay(nodeId);\n      }\n    });\n    adorner.addInteraction(onClick, {\n      isToggle: true,\n      shouldPropagateOnKeydown: false,\n      ariaLabelDefault: ls`Enable grid mode`,\n      ariaLabelActive: ls`Disable grid mode`,\n    });\n\n    node.domModel().overlayModel().addEventListener(\n        SDK.OverlayModel.Events.PersistentGridOverlayStateChanged, event => {\n          const {nodeId: eventNodeId, enabled} = event.data;\n          if (eventNodeId !== nodeId) {\n            return;\n          }\n          adorner.toggle(enabled);\n        });\n\n    return adorner;\n  }\n\n  /**\n   * @return {?Adorner}\n   */\n  createFlexAdorner() {\n    const node = this.node();\n    const nodeId = node.id;\n    if (!nodeId) {\n      return null;\n    }\n    const adorner = this.adornText('flex', AdornerCategories.Layout);\n    adorner.classList.add('flex');\n\n    const onClick = /** @type {!EventListener} */ (() => {\n      const model = node.domModel().overlayModel();\n      if (adorner.isActive()) {\n        model.highlightFlexContainerInPersistentOverlay(nodeId);\n      } else {\n        model.hideFlexContainerInPersistentOverlay(nodeId);\n      }\n    });\n\n    adorner.addInteraction(onClick, {\n      isToggle: true,\n      shouldPropagateOnKeydown: false,\n      ariaLabelDefault: ls`Enable flex mode`,\n      ariaLabelActive: ls`Disable flex mode`,\n    });\n\n    node.domModel().overlayModel().addEventListener(\n        SDK.OverlayModel.Events.PersistentFlexContainerOverlayStateChanged, event => {\n          const {nodeId: eventNodeId, enabled} = event.data;\n          if (eventNodeId !== nodeId) {\n            return;\n          }\n          adorner.toggle(enabled);\n        });\n\n    return adorner;\n  }\n}\n\nexport const InitialChildrenLimit = 500;\n\n// A union of HTML4 and HTML5-Draft elements that explicitly\n// or implicitly (for HTML5) forbid the closing tag.\nexport const ForbiddenClosingTagElements = new Set([\n  'area', 'base',  'basefont', 'br',   'canvas',   'col',  'command', 'embed',  'frame', 'hr',\n  'img',  'input', 'keygen',   'link', 'menuitem', 'meta', 'param',   'source', 'track', 'wbr'\n]);\n\n// These tags we do not allow editing their tag name.\nexport const EditTagBlocklist = new Set(['html', 'head', 'body']);\n\nconst OrderedAdornerCategories = [\n  AdornerCategories.Security,\n  AdornerCategories.Layout,\n  AdornerCategories.Default,\n];\n// Use idx + 1 for the order to avoid JavaScript's 0 == false issue\nconst AdornerCategoryOrder = new Map(OrderedAdornerCategories.map((category, idx) => [category, idx + 1]));\n\n/**\n *\n * @param {!Adorner} adornerA\n * @param {!Adorner} adornerB\n * @return {number}\n */\nfunction adornerComparator(adornerA, adornerB) {\n  const orderA = AdornerCategoryOrder.get(adornerA.category) || Number.POSITIVE_INFINITY;\n  const orderB = AdornerCategoryOrder.get(adornerB.category) || Number.POSITIVE_INFINITY;\n  if (orderA === orderB) {\n    return adornerA.name.localeCompare(adornerB.name);\n  }\n  return orderA - orderB;\n}\n\n/** @typedef {{\n *  commit: function():void,\n *  cancel: function():void,\n *  editor: (!UI.TextEditor.TextEditor|TextEditor.CodeMirrorTextEditor.CodeMirrorTextEditor|undefined),\n *  resize: function():*,\n * }}\n */\n// @ts-ignore typedef\nexport let EditorHandles;\n"]}
{"version":3,"file":"ScopeChainSidebarPane.js","sourceRoot":"","sources":["../../../../../front_end/sources/ScopeChainSidebarPane.js"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2008 Apple Inc. All Rights Reserved.\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../common/common.js';\nimport * as Components from '../components/components.js';\nimport * as LinearMemoryInspector from '../linear_memory_inspector/linear_memory_inspector.js';\nimport * as ObjectUI from '../object_ui/object_ui.js';\nimport {ls} from '../platform/platform.js';\nimport * as SDK from '../sdk/sdk.js';\nimport * as UI from '../ui/ui.js';\n\nimport {resolveScopeChain, resolveScopeInObject, resolveThisObject} from './SourceMapNamesResolver.js';\n\n/** @type {!ScopeChainSidebarPane} */\nlet scopeChainSidebarPaneInstance;\n\n/**\n * @implements {UI.ContextFlavorListener.ContextFlavorListener}\n */\nexport class ScopeChainSidebarPane extends UI.Widget.VBox {\n  /**\n   * @private\n   */\n  constructor() {\n    super(true);\n    this.registerRequiredCSS('sources/scopeChainSidebarPane.css', {enableLegacyPatching: false});\n    this._treeOutline = new ObjectUI.ObjectPropertiesSection.ObjectPropertiesSectionsTreeOutline();\n    this._treeOutline.registerRequiredCSS('sources/scopeChainSidebarPane.css', {enableLegacyPatching: false});\n    this._treeOutline.setShowSelectionOnKeyboardFocus(/* show */ true);\n    this._expandController =\n        new ObjectUI.ObjectPropertiesSection.ObjectPropertiesSectionsTreeExpandController(this._treeOutline);\n    this._linkifier = new Components.Linkifier.Linkifier();\n    this._infoElement = document.createElement('div');\n    this._infoElement.className = 'gray-info-message';\n    this._infoElement.tabIndex = -1;\n    this._update();\n  }\n\n  static instance() {\n    if (!scopeChainSidebarPaneInstance) {\n      scopeChainSidebarPaneInstance = new ScopeChainSidebarPane();\n    }\n    return scopeChainSidebarPaneInstance;\n  }\n\n  /**\n   * @override\n   * @param {?Object} object\n   */\n  flavorChanged(object) {\n    this._update();\n  }\n\n  /**\n   * @override\n   */\n  focus() {\n    if (this.hasFocus()) {\n      return;\n    }\n\n    if (UI.Context.Context.instance().flavor(SDK.DebuggerModel.DebuggerPausedDetails)) {\n      this._treeOutline.forceSelect();\n    }\n  }\n\n  async _update() {\n    // The `resolveThisObject(callFrame)` and `resolveScopeChain(callFrame)` calls\n    // below may take a while to complete, so indicate to the user that something\n    // is happening (see https://crbug.com/1162416).\n    this._infoElement.textContent = ls`Loading...`;\n    this.contentElement.removeChildren();\n    this.contentElement.appendChild(this._infoElement);\n\n    this._linkifier.reset();\n\n    const callFrame = UI.Context.Context.instance().flavor(SDK.DebuggerModel.CallFrame);\n    const [thisObject, scopeChain] = await Promise.all([resolveThisObject(callFrame), resolveScopeChain(callFrame)]);\n    // By now the developer might have moved on, and we don't want to show stale\n    // scope information, so check again that we're still on the same CallFrame.\n    if (callFrame === UI.Context.Context.instance().flavor(SDK.DebuggerModel.CallFrame)) {\n      const details = UI.Context.Context.instance().flavor(SDK.DebuggerModel.DebuggerPausedDetails);\n      this._treeOutline.removeChildren();\n\n      if (!details || !callFrame || !scopeChain) {\n        this._infoElement.textContent = ls`Not paused`;\n        return;\n      }\n\n      this.contentElement.removeChildren();\n      this.contentElement.appendChild(this._treeOutline.element);\n      let foundLocalScope = false;\n      for (let i = 0; i < scopeChain.length; ++i) {\n        const scope = scopeChain[i];\n        const extraProperties = this._extraPropertiesForScope(scope, details, callFrame, thisObject, i === 0);\n\n        if (scope.type() === Protocol.Debugger.ScopeType.Local) {\n          foundLocalScope = true;\n        }\n\n        const section = this._createScopeSectionTreeElement(scope, extraProperties);\n        if (scope.type() === Protocol.Debugger.ScopeType.Global) {\n          section.collapse();\n        } else if (!foundLocalScope || scope.type() === Protocol.Debugger.ScopeType.Local) {\n          section.expand();\n        }\n\n        this._treeOutline.appendChild(section);\n        if (i === 0) {\n          section.select(/* omitFocus */ true);\n        }\n      }\n      this._sidebarPaneUpdatedForTest();\n    }\n  }\n\n  /**\n   * @param {!SDK.DebuggerModel.ScopeChainEntry} scope\n   * @param {!Array.<!SDK.RemoteObject.RemoteObjectProperty>} extraProperties\n   * @return {!ObjectUI.ObjectPropertiesSection.RootElement}\n   */\n  _createScopeSectionTreeElement(scope, extraProperties) {\n    let emptyPlaceholder = null;\n    if (scope.type() === Protocol.Debugger.ScopeType.Local || Protocol.Debugger.ScopeType.Closure) {\n      emptyPlaceholder = ls`No variables`;\n    }\n\n    let title = scope.typeName();\n    if (scope.type() === Protocol.Debugger.ScopeType.Closure) {\n      const scopeName = scope.name();\n      if (scopeName) {\n        title = ls`Closure (${UI.UIUtils.beautifyFunctionName(scopeName)})`;\n      } else {\n        title = ls`Closure`;\n      }\n    }\n    /** @type {?string} */\n    let subtitle = scope.description();\n    if (!title || title === subtitle) {\n      subtitle = null;\n    }\n    const icon = scope.icon();\n\n    const titleElement = document.createElement('div');\n    titleElement.classList.add('scope-chain-sidebar-pane-section-header');\n    titleElement.classList.add('tree-element-title');\n    if (icon) {\n      const iconElement = document.createElement('img');\n      iconElement.classList.add('scope-chain-sidebar-pane-section-icon');\n      iconElement.src = icon;\n      titleElement.appendChild(iconElement);\n    }\n    titleElement.createChild('div', 'scope-chain-sidebar-pane-section-subtitle').textContent = subtitle;\n    titleElement.createChild('div', 'scope-chain-sidebar-pane-section-title').textContent = title;\n\n    const section = new ObjectUI.ObjectPropertiesSection.RootElement(\n        resolveScopeInObject(scope), this._linkifier, emptyPlaceholder,\n        /* ignoreHasOwnProperty */ true, extraProperties);\n    section.title = titleElement;\n    section.listItemElement.classList.add('scope-chain-sidebar-pane-section');\n    section.listItemElement.setAttribute('aria-label', title);\n    this._expandController.watchSection(title + (subtitle ? ':' + subtitle : ''), section);\n\n    return section;\n  }\n\n  /**\n   * @param {!SDK.DebuggerModel.ScopeChainEntry} scope\n   * @param {!SDK.DebuggerModel.DebuggerPausedDetails} details\n   * @param {!SDK.DebuggerModel.CallFrame} callFrame\n   * @param {?SDK.RemoteObject.RemoteObject} thisObject\n   * @param {boolean} isFirstScope\n   * @return {!Array.<!SDK.RemoteObject.RemoteObjectProperty>}\n   */\n  _extraPropertiesForScope(scope, details, callFrame, thisObject, isFirstScope) {\n    if (scope.type() !== Protocol.Debugger.ScopeType.Local || callFrame.script.isWasm()) {\n      return [];\n    }\n\n    const extraProperties = [];\n    if (thisObject) {\n      extraProperties.push(new SDK.RemoteObject.RemoteObjectProperty('this', thisObject));\n    }\n    if (isFirstScope) {\n      const exception = details.exception();\n      if (exception) {\n        extraProperties.push(new SDK.RemoteObject.RemoteObjectProperty(\n            Common.UIString.UIString('Exception'), exception, undefined, undefined, undefined, undefined, undefined,\n            /* synthetic */ true));\n      }\n      const returnValue = callFrame.returnValue();\n      if (returnValue) {\n        extraProperties.push(new SDK.RemoteObject.RemoteObjectProperty(\n            Common.UIString.UIString('Return value'), returnValue, undefined, undefined, undefined, undefined,\n            undefined,\n            /* synthetic */ true, callFrame.setReturnValue.bind(callFrame)));\n      }\n    }\n\n    return extraProperties;\n  }\n\n  _sidebarPaneUpdatedForTest() {\n  }\n}\n\n/**\n * @implements {UI.ContextMenu.Provider}\n */\nexport class OpenLinearMemoryInspector extends UI.Widget.VBox {\n  /**\n   * @param {!SDK.RemoteObject.RemoteObject} obj\n   */\n  _isMemoryObjectProperty(obj) {\n    return obj.type === 'object' && obj.subtype &&\n        LinearMemoryInspector.LinearMemoryInspectorController.ACCEPTED_MEMORY_TYPES.includes(obj.subtype);\n  }\n\n  /**\n   * @override\n   * @param {!Event} event\n   * @param {!UI.ContextMenu.ContextMenu} contextMenu\n   * @param {!Object} target\n   */\n  appendApplicableItems(event, contextMenu, target) {\n    if (target instanceof ObjectUI.ObjectPropertiesSection.ObjectPropertyTreeElement) {\n      if (target.property && target.property.value && this._isMemoryObjectProperty(target.property.value)) {\n        contextMenu.debugSection().appendItem(\n            ls`Reveal in Memory Inspector panel`, this._openMemoryInspector.bind(this, target.property.value));\n      }\n    }\n  }\n\n  /**\n   * @param {!SDK.RemoteObject.RemoteObject} obj\n   */\n  async _openMemoryInspector(obj) {\n    const controller = LinearMemoryInspector.LinearMemoryInspectorController.LinearMemoryInspectorController.instance();\n    const address = 0;\n    controller.openInspectorView(obj, address);\n  }\n}\n"]}
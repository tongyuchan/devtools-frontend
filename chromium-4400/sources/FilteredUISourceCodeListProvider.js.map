{"version":3,"file":"FilteredUISourceCodeListProvider.js","sourceRoot":"","sources":["../../../../../front_end/sources/FilteredUISourceCodeListProvider.js"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../common/common.js';\nimport * as Persistence from '../persistence/persistence.js';\nimport * as QuickOpen from '../quick_open/quick_open.js';\nimport * as UI from '../ui/ui.js';\nimport * as Workspace from '../workspace/workspace.js';\n\nimport {FilePathScoreFunction} from './FilePathScoreFunction.js';\n\nexport class FilteredUISourceCodeListProvider extends QuickOpen.FilteredListWidget.Provider {\n  constructor() {\n    super();\n\n    this._queryLineNumberAndColumnNumber = '';\n    this._defaultScores = null;\n    this._scorer = new FilePathScoreFunction('');\n\n    /** @type {!Array<!Workspace.UISourceCode.UISourceCode>} */\n    this._uiSourceCodes = [];\n    /** @type {!Set<string>} */\n    this._uiSourceCodeUrls = new Set();\n\n    /** @type {string} */\n    this._query;\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   */\n  _projectRemoved(event) {\n    const project = /** @type {!Workspace.Workspace.Project} */ (event.data);\n    this._populate(project);\n    this.refresh();\n  }\n\n  /**\n   * @param {!Workspace.Workspace.Project=} skipProject\n   */\n  _populate(skipProject) {\n    this._uiSourceCodes = [];\n    this._uiSourceCodeUrls.clear();\n    for (const project of Workspace.Workspace.WorkspaceImpl.instance().projects()) {\n      if (project !== skipProject && this.filterProject(project)) {\n        for (const uiSourceCode of project.uiSourceCodes()) {\n          if (this._filterUISourceCode(uiSourceCode)) {\n            this._uiSourceCodes.push(uiSourceCode);\n            this._uiSourceCodeUrls.add(uiSourceCode.url());\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {!Workspace.UISourceCode.UISourceCode} uiSourceCode\n   * @return {boolean}\n   */\n  _filterUISourceCode(uiSourceCode) {\n    if (this._uiSourceCodeUrls.has(uiSourceCode.url())) {\n      return false;\n    }\n    const binding = Persistence.Persistence.PersistenceImpl.instance().binding(uiSourceCode);\n    return !binding || binding.fileSystem === uiSourceCode;\n  }\n\n  /**\n   * @param {?Workspace.UISourceCode.UISourceCode} uiSourceCode\n   * @param {number=} lineNumber\n   * @param {number=} columnNumber\n   */\n  uiSourceCodeSelected(uiSourceCode, lineNumber, columnNumber) {\n    // Overridden by subclasses\n  }\n\n  /**\n   * @param {!Workspace.Workspace.Project} project\n   * @return {boolean}\n   */\n  filterProject(project) {\n    return true;\n    // Overridden by subclasses\n  }\n\n  /**\n   * @override\n   * @return {number}\n   */\n  itemCount() {\n    return this._uiSourceCodes.length;\n  }\n\n  /**\n   * @override\n   * @param {number} itemIndex\n   * @return {string}\n   */\n  itemKeyAt(itemIndex) {\n    return this._uiSourceCodes[itemIndex].url();\n  }\n\n  /**\n   * @protected\n   * @param {?Map.<!Workspace.UISourceCode.UISourceCode, number>} defaultScores\n   */\n  setDefaultScores(defaultScores) {\n    this._defaultScores = defaultScores;\n  }\n\n  /**\n   * @override\n   * @param {number} itemIndex\n   * @param {string} query\n   * @return {number}\n   */\n  itemScoreAt(itemIndex, query) {\n    const uiSourceCode = this._uiSourceCodes[itemIndex];\n    const score = this._defaultScores ? (this._defaultScores.get(uiSourceCode) || 0) : 0;\n    if (!query || query.length < 2) {\n      return score;\n    }\n\n    if (this._query !== query) {\n      this._query = query;\n      this._scorer = new FilePathScoreFunction(query);\n    }\n\n    let multiplier = 10;\n    if (uiSourceCode.project().type() === Workspace.Workspace.projectTypes.FileSystem &&\n        !Persistence.Persistence.PersistenceImpl.instance().binding(uiSourceCode)) {\n      multiplier = 5;\n    }\n\n    const fullDisplayName = uiSourceCode.fullDisplayName();\n    return score + multiplier * this._scorer.score(fullDisplayName, null);\n  }\n\n  /**\n   * @override\n   * @param {number} itemIndex\n   * @param {string} query\n   * @param {!Element} titleElement\n   * @param {!Element} subtitleElement\n   */\n  renderItem(itemIndex, query, titleElement, subtitleElement) {\n    query = this.rewriteQuery(query);\n    const uiSourceCode = this._uiSourceCodes[itemIndex];\n    const fullDisplayName = uiSourceCode.fullDisplayName();\n    /** @type {!Array<number>} */\n    const indexes = [];\n    new FilePathScoreFunction(query).score(fullDisplayName, indexes);\n    const fileNameIndex = fullDisplayName.lastIndexOf('/');\n\n    titleElement.classList.add('monospace');\n    subtitleElement.classList.add('monospace');\n    titleElement.textContent = uiSourceCode.displayName() + (this._queryLineNumberAndColumnNumber || '');\n    this._renderSubtitleElement(subtitleElement, fullDisplayName);\n    /** @type {!HTMLElement} */ UI.Tooltip.Tooltip.install((subtitleElement), fullDisplayName);\n    const ranges = [];\n    for (let i = 0; i < indexes.length; ++i) {\n      ranges.push({offset: indexes[i], length: 1});\n    }\n\n    if (indexes[0] > fileNameIndex) {\n      for (let i = 0; i < ranges.length; ++i) {\n        ranges[i].offset -= fileNameIndex + 1;\n      }\n      UI.UIUtils.highlightRangesWithStyleClass(titleElement, ranges, 'highlight');\n    } else {\n      UI.UIUtils.highlightRangesWithStyleClass(subtitleElement, ranges, 'highlight');\n    }\n  }\n\n  /**\n   * @param {!Element} element\n   * @param {string} text\n   */\n  _renderSubtitleElement(element, text) {\n    element.removeChildren();\n    let splitPosition = text.lastIndexOf('/');\n    if (text.length > 55) {\n      splitPosition = text.length - 55;\n    }\n    const first = element.createChild('div', 'first-part');\n    first.textContent = text.substring(0, splitPosition);\n    const second = element.createChild('div', 'second-part');\n    second.textContent = text.substring(splitPosition);\n    /** @type {!HTMLElement} */ UI.Tooltip.Tooltip.install((element), text);\n  }\n\n  /**\n   * @override\n   * @param {?number} itemIndex\n   * @param {string} promptValue\n   */\n  selectItem(itemIndex, promptValue) {\n    const parsedExpression = promptValue.trim().match(/^([^:]*)(:\\d+)?(:\\d+)?$/);\n    if (!parsedExpression) {\n      return;\n    }\n\n    let lineNumber;\n    let columnNumber;\n    if (parsedExpression[2]) {\n      lineNumber = parseInt(parsedExpression[2].substr(1), 10) - 1;\n    }\n    if (parsedExpression[3]) {\n      columnNumber = parseInt(parsedExpression[3].substr(1), 10) - 1;\n    }\n    const uiSourceCode = itemIndex !== null ? this._uiSourceCodes[itemIndex] : null;\n    this.uiSourceCodeSelected(uiSourceCode, lineNumber, columnNumber);\n  }\n\n  /**\n   * @override\n   * @param {string} query\n   * @return {string}\n   */\n  rewriteQuery(query) {\n    query = query ? query.trim() : '';\n    if (!query || query === ':') {\n      return '';\n    }\n    const lineNumberMatch = query.match(/^([^:]+)((?::[^:]*){0,2})$/);\n    this._queryLineNumberAndColumnNumber = lineNumberMatch ? lineNumberMatch[2] : '';\n    return lineNumberMatch ? lineNumberMatch[1] : query;\n  }\n\n  /**\n   * @param {!Common.EventTarget.EventTargetEvent} event\n   */\n  _uiSourceCodeAdded(event) {\n    const uiSourceCode = /** @type {!Workspace.UISourceCode.UISourceCode} */ (event.data);\n    if (!this._filterUISourceCode(uiSourceCode) || !this.filterProject(uiSourceCode.project())) {\n      return;\n    }\n    this._uiSourceCodes.push(uiSourceCode);\n    this._uiSourceCodeUrls.add(uiSourceCode.url());\n    this.refresh();\n  }\n\n  /**\n   * @override\n   * @return {string}\n   */\n  notFoundText() {\n    return Common.UIString.UIString('No files found');\n  }\n\n  /**\n   * @override\n   */\n  attach() {\n    Workspace.Workspace.WorkspaceImpl.instance().addEventListener(\n        Workspace.Workspace.Events.UISourceCodeAdded, this._uiSourceCodeAdded, this);\n    Workspace.Workspace.WorkspaceImpl.instance().addEventListener(\n        Workspace.Workspace.Events.ProjectRemoved, this._projectRemoved, this);\n    this._populate();\n  }\n\n  /**\n   * @override\n   */\n  detach() {\n    Workspace.Workspace.WorkspaceImpl.instance().removeEventListener(\n        Workspace.Workspace.Events.UISourceCodeAdded, this._uiSourceCodeAdded, this);\n    Workspace.Workspace.WorkspaceImpl.instance().removeEventListener(\n        Workspace.Workspace.Events.ProjectRemoved, this._projectRemoved, this);\n    this._queryLineNumberAndColumnNumber = '';\n    this._defaultScores = null;\n  }\n}\n"]}
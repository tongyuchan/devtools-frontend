{"version":3,"file":"RenderingOptions.js","sourceRoot":"","sources":["../../../../../front_end/inspector_main/RenderingOptions.js"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2013 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../common/common.js';  // eslint-disable-line no-unused-vars\nimport {ls} from '../platform/platform.js';\nimport * as UI from '../ui/ui.js';\n\n\n// TODO(1096068): remove this feature detection and expose the UI\n// unconditionally once prefers-reduced-data ships unflagged. At that\n// point, we can also add `category` and `tags` to the entry in\n// `front_end/sdk/module.json` to make this feature available in the\n// Command Menu.\n/**\n * @return {boolean}\n */\nconst supportsPrefersReducedData = () => {\n  const query = '(prefers-reduced-data: reduce)';\n  // Note: `media` serializes to `'not all'` for unsupported queries.\n  return window.matchMedia(query).media === query;\n};\n\n/** @type {!RenderingOptionsView} */\nlet renderingOptionsViewInstance;\n\nexport class RenderingOptionsView extends UI.Widget.VBox {\n  /**\n     * @private\n     */\n  constructor() {\n    super(true);\n    this.registerRequiredCSS('inspector_main/renderingOptions.css', {enableLegacyPatching: false});\n\n    this._appendCheckbox(\n        ls`Paint flashing`,\n        ls`Highlights areas of the page (green) that need to be repainted. May not be suitable for people prone to photosensitive epilepsy.`,\n        Common.Settings.Settings.instance().moduleSetting('showPaintRects'));\n    this._appendCheckbox(\n        ls`Layout Shift Regions`,\n        ls`Highlights areas of the page (blue) that were shifted. May not be suitable for people prone to photosensitive epilepsy.`,\n        Common.Settings.Settings.instance().moduleSetting('showLayoutShiftRegions'));\n    this._appendCheckbox(\n        ls`Layer borders`, ls`Shows layer borders (orange/olive) and tiles (cyan).`,\n        Common.Settings.Settings.instance().moduleSetting('showDebugBorders'));\n    this._appendCheckbox(\n        ls`Frame Rendering Stats`, ls`Plots frame throughput, dropped frames distribution, and GPU memory.`,\n        Common.Settings.Settings.instance().moduleSetting('showFPSCounter'));\n    this._appendCheckbox(\n        ls`Scrolling performance issues`,\n        ls`Highlights elements (teal) that can slow down scrolling, including touch & wheel event handlers and other main-thread scrolling situations.`,\n        Common.Settings.Settings.instance().moduleSetting('showScrollBottleneckRects'));\n    this._appendCheckbox(\n        ls`Highlight ad frames`, ls`Highlights frames (red) detected to be ads.`,\n        Common.Settings.Settings.instance().moduleSetting('showAdHighlights'));\n    this._appendCheckbox(\n        ls`Hit-test borders`, ls`Shows borders around hit-test regions.`,\n        Common.Settings.Settings.instance().moduleSetting('showHitTestBorders'));\n    this._appendCheckbox(\n        ls`Disable local fonts`, ls`Disables local() sources in @font-face rules. Requires a page reload to apply.`,\n        Common.Settings.Settings.instance().moduleSetting('localFontsDisabled'));\n    this._appendCheckbox(\n        ls`Emulate a focused page`, ls`Emulates a focused page.`,\n        Common.Settings.Settings.instance().moduleSetting('emulatePageFocus'));\n    this.contentElement.createChild('div').classList.add('panel-section-separator');\n\n    this._appendSelect(\n        ls`Forces media type for testing print and screen styles`,\n        Common.Settings.Settings.instance().moduleSetting('emulatedCSSMedia'));\n    this._appendSelect(\n        ls`Forces CSS prefers-color-scheme media feature`,\n        Common.Settings.Settings.instance().moduleSetting('emulatedCSSMediaFeaturePrefersColorScheme'));\n    this._appendSelect(\n        ls`Forces CSS prefers-reduced-motion media feature`,\n        Common.Settings.Settings.instance().moduleSetting('emulatedCSSMediaFeaturePrefersReducedMotion'));\n    if (supportsPrefersReducedData()) {\n      this._appendSelect(\n          ls`Forces CSS prefers-reduced-data media feature`,\n          Common.Settings.Settings.instance().moduleSetting('emulatedCSSMediaFeaturePrefersReducedData'));\n    }\n    this._appendSelect(\n        ls`Forces CSS color-gamut media feature`,\n        Common.Settings.Settings.instance().moduleSetting('emulatedCSSMediaFeatureColorGamut'));\n    this.contentElement.createChild('div').classList.add('panel-section-separator');\n\n    this._appendSelect(\n        ls`Forces vision deficiency emulation`,\n        Common.Settings.Settings.instance().moduleSetting('emulatedVisionDeficiency'));\n\n    this.contentElement.createChild('div').classList.add('panel-section-separator');\n\n    this._appendCheckbox(\n        ls`Disable AVIF image format`, ls`Requires a page reload to apply and disables caching for image requests.`,\n        Common.Settings.Settings.instance().moduleSetting('avifFormatDisabled'));\n\n    this._appendCheckbox(\n        ls`Disable WebP image format`, ls`Requires a page reload to apply and disables caching for image requests.`,\n        Common.Settings.Settings.instance().moduleSetting('webpFormatDisabled'));\n\n    this.contentElement.createChild('div').classList.add('panel-section-separator');\n  }\n\n  /**\n   * @param {{forceNew: ?boolean}} opts\n   */\n  static instance(opts = {forceNew: null}) {\n    const {forceNew} = opts;\n    if (!renderingOptionsViewInstance || forceNew) {\n      renderingOptionsViewInstance = new RenderingOptionsView();\n    }\n\n    return renderingOptionsViewInstance;\n  }\n\n  /**\n   * @param {string} label\n   * @param {string} subtitle\n   * @param {!Common.Settings.Setting<boolean>} setting\n   */\n  _appendCheckbox(label, subtitle, setting) {\n    const checkboxLabel = UI.UIUtils.CheckboxLabel.create(label, false, subtitle);\n    UI.SettingsUI.bindCheckbox(checkboxLabel.checkboxElement, setting);\n    this.contentElement.appendChild(checkboxLabel);\n  }\n\n  /**\n   * @param {string} label\n   * @param {!Common.Settings.Setting<*>} setting\n   */\n  _appendSelect(label, setting) {\n    const control = UI.SettingsUI.createControlForSetting(setting, label);\n    if (control) {\n      this.contentElement.appendChild(control);\n    }\n  }\n}\n"]}
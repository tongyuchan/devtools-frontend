{"version":3,"file":"JSONView.js","sourceRoot":"","sources":["../../../../../front_end/source_frame/JSONView.js"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../common/common.js';\nimport * as ObjectUI from '../object_ui/object_ui.js';\nimport * as Platform from '../platform/platform.js';\nimport * as SDK from '../sdk/sdk.js';\nimport * as UI from '../ui/ui.js';\n\n/**\n * @implements {UI.SearchableView.Searchable}\n */\nexport class JSONView extends UI.Widget.VBox {\n  /**\n   * @param {!ParsedJSON} parsedJSON\n   * @param {boolean=} startCollapsed\n   */\n  constructor(parsedJSON, startCollapsed) {\n    super();\n    this._initialized = false;\n    this.registerRequiredCSS('source_frame/jsonView.css', {enableLegacyPatching: false});\n    this._parsedJSON = parsedJSON;\n    this._startCollapsed = Boolean(startCollapsed);\n    this.element.classList.add('json-view');\n\n    /** @type {?UI.SearchableView.SearchableView} */\n    this._searchableView;\n    /** @type {!ObjectUI.ObjectPropertiesSection.ObjectPropertiesSection} */\n    this._treeOutline;\n    /** @type {number} */\n    this._currentSearchFocusIndex = 0;\n    /** @type {!Array.<!ObjectUI.ObjectPropertiesSection.ObjectPropertyTreeElement>} */\n    this._currentSearchTreeElements = [];\n    /** @type {?RegExp} */\n    this._searchRegex = null;\n  }\n\n  /**\n   * @param {string} content\n   * @return {!Promise<?UI.SearchableView.SearchableView>}\n   */\n  static async createView(content) {\n    // We support non-strict JSON parsing by parsing an AST tree which is why we offload it to a worker.\n    const parsedJSON = await JSONView._parseJSON(content);\n    if (!parsedJSON || typeof parsedJSON.data !== 'object') {\n      return null;\n    }\n\n    const jsonView = new JSONView(parsedJSON);\n    const searchableView = new UI.SearchableView.SearchableView(jsonView, null);\n    searchableView.setPlaceholder(Common.UIString.UIString('Find'));\n    jsonView._searchableView = searchableView;\n    jsonView.show(searchableView.element);\n    return searchableView;\n  }\n\n  /**\n   * @param {?Object} obj\n   * @return {!UI.SearchableView.SearchableView}\n   */\n  static createViewSync(obj) {\n    const jsonView = new JSONView(new ParsedJSON(obj, '', ''));\n    const searchableView = new UI.SearchableView.SearchableView(jsonView, null);\n    searchableView.setPlaceholder(Common.UIString.UIString('Find'));\n    jsonView._searchableView = searchableView;\n    jsonView.show(searchableView.element);\n    jsonView.element.tabIndex = 0;\n    return searchableView;\n  }\n\n  /**\n   * @param {?string} text\n   * @return {!Promise<?ParsedJSON>}\n   */\n  static _parseJSON(text) {\n    let returnObj = null;\n    if (text) {\n      returnObj = JSONView._extractJSON(/** @type {string} */ (text));\n    }\n    if (!returnObj) {\n      return Promise.resolve(null);\n    }\n    try {\n      const json = JSON.parse(returnObj.data);\n      if (!json) {\n        return Promise.resolve(null);\n      }\n      returnObj.data = json;\n    } catch (e) {\n      returnObj = null;\n    }\n\n    return Promise.resolve(returnObj);\n  }\n\n  /**\n   * @param {string} text\n   * @return {?ParsedJSON}\n   */\n  static _extractJSON(text) {\n    // Do not treat HTML as JSON.\n    if (text.startsWith('<')) {\n      return null;\n    }\n    let inner = JSONView._findBrackets(text, '{', '}');\n    const inner2 = JSONView._findBrackets(text, '[', ']');\n    inner = inner2.length > inner.length ? inner2 : inner;\n\n    // Return on blank payloads or on payloads significantly smaller than original text.\n    if (inner.length === -1 || text.length - inner.length > 80) {\n      return null;\n    }\n\n    const prefix = text.substring(0, inner.start);\n    const suffix = text.substring(inner.end + 1);\n    text = text.substring(inner.start, inner.end + 1);\n\n    // Only process valid JSONP.\n    if (suffix.trim().length && !(suffix.trim().startsWith(')') && prefix.trim().endsWith('('))) {\n      return null;\n    }\n\n    return new ParsedJSON(text, prefix, suffix);\n  }\n\n  /**\n   * @param {string} text\n   * @param {string} open\n   * @param {string} close\n   * @return {{start: number, end: number, length: number}}\n   */\n  static _findBrackets(text, open, close) {\n    const start = text.indexOf(open);\n    const end = text.lastIndexOf(close);\n    let length = end - start - 1;\n    if (start === -1 || end === -1 || end < start) {\n      length = -1;\n    }\n    return {start: start, end: end, length: length};\n  }\n\n  /**\n   * @override\n   */\n  wasShown() {\n    this._initialize();\n  }\n\n  _initialize() {\n    if (this._initialized) {\n      return;\n    }\n    this._initialized = true;\n\n    const obj = SDK.RemoteObject.RemoteObject.fromLocalObject(this._parsedJSON.data);\n    const title = this._parsedJSON.prefix + obj.description + this._parsedJSON.suffix;\n    this._treeOutline = new ObjectUI.ObjectPropertiesSection.ObjectPropertiesSection(\n        obj, title, undefined, undefined, undefined, undefined, true /* showOverflow */);\n    this._treeOutline.enableContextMenu();\n    this._treeOutline.setEditable(false);\n    if (!this._startCollapsed) {\n      this._treeOutline.expand();\n    }\n    this.element.appendChild(this._treeOutline.element);\n    const firstChild = this._treeOutline.firstChild();\n    if (firstChild) {\n      firstChild.select(true /* omitFocus */, false /* selectedByUser */);\n    }\n  }\n\n  /**\n   * @param {number} index\n   */\n  _jumpToMatch(index) {\n    if (!this._searchRegex) {\n      return;\n    }\n    const previousFocusElement = this._currentSearchTreeElements[this._currentSearchFocusIndex];\n    if (previousFocusElement) {\n      previousFocusElement.setSearchRegex(this._searchRegex);\n    }\n\n    const newFocusElement = this._currentSearchTreeElements[index];\n    if (newFocusElement) {\n      this._updateSearchIndex(index);\n      newFocusElement.setSearchRegex(this._searchRegex, UI.UIUtils.highlightedCurrentSearchResultClassName);\n      newFocusElement.reveal();\n    } else {\n      this._updateSearchIndex(0);\n    }\n  }\n\n  /**\n   * @param {number} count\n   */\n  _updateSearchCount(count) {\n    if (!this._searchableView) {\n      return;\n    }\n    this._searchableView.updateSearchMatchesCount(count);\n  }\n\n  /**\n   * @param {number} index\n   */\n  _updateSearchIndex(index) {\n    this._currentSearchFocusIndex = index;\n    if (!this._searchableView) {\n      return;\n    }\n    this._searchableView.updateCurrentMatchIndex(index);\n  }\n\n  /**\n   * @override\n   */\n  searchCanceled() {\n    this._searchRegex = null;\n    this._currentSearchTreeElements = [];\n\n    /**\n     * @type {?UI.TreeOutline.TreeElement}\n     */\n    let element;\n    for (element = this._treeOutline.rootElement(); element; element = element.traverseNextTreeElement(false)) {\n      if (!(element instanceof ObjectUI.ObjectPropertiesSection.ObjectPropertyTreeElement)) {\n        continue;\n      }\n      element.revertHighlightChanges();\n    }\n    this._updateSearchCount(0);\n    this._updateSearchIndex(0);\n  }\n\n  /**\n   * @override\n   * @param {!UI.SearchableView.SearchConfig} searchConfig\n   * @param {boolean} shouldJump\n   * @param {boolean=} jumpBackwards\n   */\n  performSearch(searchConfig, shouldJump, jumpBackwards) {\n    let newIndex = this._currentSearchFocusIndex;\n    const previousSearchFocusElement = this._currentSearchTreeElements[newIndex];\n    this.searchCanceled();\n    this._searchRegex = searchConfig.toSearchRegex(true);\n\n    /**\n     * @type {?UI.TreeOutline.TreeElement}\n     */\n    let element;\n    for (element = this._treeOutline.rootElement(); element; element = element.traverseNextTreeElement(false)) {\n      if (!(element instanceof ObjectUI.ObjectPropertiesSection.ObjectPropertyTreeElement)) {\n        continue;\n      }\n      const hasMatch = element.setSearchRegex(this._searchRegex);\n      if (hasMatch) {\n        this._currentSearchTreeElements.push(element);\n      }\n      if (previousSearchFocusElement === element) {\n        const currentIndex = this._currentSearchTreeElements.length - 1;\n        if (hasMatch || jumpBackwards) {\n          newIndex = currentIndex;\n        } else {\n          newIndex = currentIndex + 1;\n        }\n      }\n    }\n    this._updateSearchCount(this._currentSearchTreeElements.length);\n\n    if (!this._currentSearchTreeElements.length) {\n      this._updateSearchIndex(-1);\n      return;\n    }\n    newIndex = Platform.NumberUtilities.mod(newIndex, this._currentSearchTreeElements.length);\n\n    this._jumpToMatch(newIndex);\n  }\n\n  /**\n   * @override\n   */\n  jumpToNextSearchResult() {\n    if (!this._currentSearchTreeElements.length) {\n      return;\n    }\n    const newIndex =\n        Platform.NumberUtilities.mod(this._currentSearchFocusIndex + 1, this._currentSearchTreeElements.length);\n    this._jumpToMatch(newIndex);\n  }\n\n  /**\n   * @override\n   */\n  jumpToPreviousSearchResult() {\n    if (!this._currentSearchTreeElements.length) {\n      return;\n    }\n    const newIndex =\n        Platform.NumberUtilities.mod(this._currentSearchFocusIndex - 1, this._currentSearchTreeElements.length);\n    this._jumpToMatch(newIndex);\n  }\n\n  /**\n   * @override\n   * @return {boolean}\n   */\n  supportsCaseSensitiveSearch() {\n    return true;\n  }\n\n  /**\n   * @override\n   * @return {boolean}\n   */\n  supportsRegexSearch() {\n    return true;\n  }\n}\n\n\nexport class ParsedJSON {\n  /**\n   * @param {*} data\n   * @param {string} prefix\n   * @param {string} suffix\n   */\n  constructor(data, prefix, suffix) {\n    this.data = data;\n    this.prefix = prefix;\n    this.suffix = suffix;\n  }\n}\n"]}
{"version":3,"file":"SourceFrame.js","sourceRoot":"","sources":["../../../../../front_end/source_frame/SourceFrame.js"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../common/common.js';\nimport * as Formatter from '../formatter/formatter.js';\nimport * as Platform from '../platform/platform.js';\nimport {ls} from '../platform/platform.js';\nimport * as TextEditor from '../text_editor/text_editor.js';  // eslint-disable-line no-unused-vars\nimport * as TextUtils from '../text_utils/text_utils.js';\nimport * as UI from '../ui/ui.js';\nimport * as Workspace from '../workspace/workspace.js';  // eslint-disable-line no-unused-vars\n\nimport {Events, SourcesTextEditor, SourcesTextEditorDelegate} from './SourcesTextEditor.js';  // eslint-disable-line no-unused-vars\n\n/**\n * @implements {UI.SearchableView.Searchable}\n * @implements {UI.SearchableView.Replaceable}\n * @implements {SourcesTextEditorDelegate}\n * @implements {Transformer}\n */\nexport class SourceFrameImpl extends UI.View.SimpleView {\n  /**\n   * @param {function(): !Promise<!TextUtils.ContentProvider.DeferredContent>} lazyContent\n   * @param {!UI.TextEditor.Options=} codeMirrorOptions\n   */\n  constructor(lazyContent, codeMirrorOptions) {\n    super(Common.UIString.UIString('Source'));\n\n    this._lazyContent = lazyContent;\n\n    this._pretty = false;\n    /** @type {?string} */\n    this._rawContent = null;\n    /** @type {?Promise<{content: string, map: !Formatter.ScriptFormatter.FormatterSourceMapping}>} */\n    this._formattedContentPromise = null;\n    /** @type {?Formatter.ScriptFormatter.FormatterSourceMapping} */\n    this._formattedMap = null;\n    this._prettyToggle = new UI.Toolbar.ToolbarToggle(ls`Pretty print`, 'largeicon-pretty-print');\n    this._prettyToggle.addEventListener(UI.Toolbar.ToolbarButton.Events.Click, () => {\n      this._setPretty(!this._prettyToggle.toggled());\n    });\n    this._shouldAutoPrettyPrint = false;\n    this._prettyToggle.setVisible(false);\n\n    this._progressToolbarItem = new UI.Toolbar.ToolbarItem(document.createElement('div'));\n\n    this._textEditor = new SourcesTextEditor(this, codeMirrorOptions);\n    this._textEditor.show(this.element);\n\n    /** @type {?number} */\n    this._prettyCleanGeneration = null;\n    this._cleanGeneration = 0;\n\n    this._searchConfig = null;\n    this._delayedFindSearchMatches = null;\n    this._currentSearchResultIndex = -1;\n    /** @type {!Array<!TextUtils.TextRange.TextRange>} */\n    this._searchResults = [];\n    this._searchRegex = null;\n    this._loadError = false;\n\n    this._textEditor.addEventListener(Events.EditorFocused, this._resetCurrentSearchResultIndex, this);\n    this._textEditor.addEventListener(Events.SelectionChanged, this._updateSourcePosition, this);\n    this._textEditor.addEventListener(UI.TextEditor.Events.TextChanged, event => {\n      if (!this._muteChangeEventsForSetContent) {\n        this.onTextChanged(event.data.oldRange, event.data.newRange);\n      }\n    });\n    /** @type {boolean} */\n    this._muteChangeEventsForSetContent = false;\n\n    this._sourcePosition = new UI.Toolbar.ToolbarText();\n\n    /**\n     * @type {?UI.SearchableView.SearchableView}\n     */\n    this._searchableView = null;\n    this._editable = false;\n    this._textEditor.setReadOnly(true);\n\n    /** @type {?{line: number, column: (number|undefined), shouldHighlight: (boolean|undefined)}} */\n    this._positionToReveal = null;\n    this._lineToScrollTo = null;\n    this._selectionToSet = null;\n    this._loaded = false;\n    this._contentRequested = false;\n    this._highlighterType = '';\n\n    /** @type {?Common.WasmDisassembly.WasmDisassembly} */\n    this._wasmDisassembly = null;\n  }\n\n  get wasmDisassembly() {\n    return this._wasmDisassembly;\n  }\n\n  /**\n   * @override\n   * @param {number} lineNumber\n   * @param {number=} columnNumber\n   * @return {{lineNumber: number, columnNumber?: number}}\n   */\n  editorLocationToUILocation(lineNumber, columnNumber) {\n    if (this._wasmDisassembly) {\n      columnNumber = this._wasmDisassembly.lineNumberToBytecodeOffset(lineNumber);\n      lineNumber = 0;\n    } else if (this._pretty) {\n      [lineNumber, columnNumber] = this._prettyToRawLocation(lineNumber, columnNumber);\n    }\n    return {lineNumber, columnNumber};\n  }\n\n  /**\n   * @override\n   * @param {number} lineNumber\n   * @param {number=} columnNumber\n   * @return {{lineNumber: number, columnNumber: number}}\n   */\n  uiLocationToEditorLocation(lineNumber, columnNumber = 0) {\n    if (this._wasmDisassembly) {\n      lineNumber = this._wasmDisassembly.bytecodeOffsetToLineNumber(columnNumber);\n      columnNumber = 0;\n    } else if (this._pretty) {\n      [lineNumber, columnNumber] = this._rawToPrettyLocation(lineNumber, columnNumber);\n    }\n    return {lineNumber, columnNumber};\n  }\n\n  /**\n   * @param {boolean} canPrettyPrint\n   * @param {boolean=} autoPrettyPrint\n   */\n  setCanPrettyPrint(canPrettyPrint, autoPrettyPrint) {\n    this._shouldAutoPrettyPrint = canPrettyPrint && Boolean(autoPrettyPrint);\n    this._prettyToggle.setVisible(canPrettyPrint);\n  }\n\n  /**\n   * @param {boolean} value\n   * @return {!Promise<void>}\n   */\n  async _setPretty(value) {\n    this._pretty = value;\n    this._prettyToggle.setEnabled(false);\n\n    const wasLoaded = this.loaded;\n    const selection = this.selection();\n    let newSelection;\n    if (this._pretty) {\n      const formatInfo = await this._requestFormattedContent();\n      this._formattedMap = formatInfo.map;\n      this.setContent(formatInfo.content, null);\n      this._prettyCleanGeneration = this._textEditor.markClean();\n      const start = this._rawToPrettyLocation(selection.startLine, selection.startColumn);\n      const end = this._rawToPrettyLocation(selection.endLine, selection.endColumn);\n      newSelection = new TextUtils.TextRange.TextRange(start[0], start[1], end[0], end[1]);\n    } else {\n      this.setContent(this._rawContent, null);\n      this._cleanGeneration = this._textEditor.markClean();\n      const start = this._prettyToRawLocation(selection.startLine, selection.startColumn);\n      const end = this._prettyToRawLocation(selection.endLine, selection.endColumn);\n      newSelection = new TextUtils.TextRange.TextRange(start[0], start[1], end[0], end[1]);\n    }\n    if (wasLoaded) {\n      this.textEditor.revealPosition(newSelection.endLine, newSelection.endColumn, this._editable);\n      this.textEditor.setSelection(newSelection);\n    }\n    this._prettyToggle.setEnabled(true);\n    this._updatePrettyPrintState();\n  }\n\n  _updateLineNumberFormatter() {\n    if (this._wasmDisassembly) {\n      const disassembly = this._wasmDisassembly;\n      const lastBytecodeOffset = disassembly.lineNumberToBytecodeOffset(disassembly.lineNumbers - 1);\n      const bytecodeOffsetDigits = lastBytecodeOffset.toString(16).length + 1;\n      this._textEditor.setLineNumberFormatter(lineNumber => {\n        const bytecodeOffset = disassembly.lineNumberToBytecodeOffset(lineNumber - 1);\n        return `0x${bytecodeOffset.toString(16).padStart(bytecodeOffsetDigits, '0')}`;\n      });\n    } else if (this._pretty) {\n      this._textEditor.setLineNumberFormatter(lineNumber => {\n        const line = this._prettyToRawLocation(lineNumber - 1, 0)[0] + 1;\n        if (lineNumber === 1) {\n          return String(line);\n        }\n        if (line !== this._prettyToRawLocation(lineNumber - 2, 0)[0] + 1) {\n          return String(line);\n        }\n        return '-';\n      });\n    } else {\n      this._textEditor.setLineNumberFormatter(lineNumber => {\n        return String(lineNumber);\n      });\n    }\n  }\n\n  _updatePrettyPrintState() {\n    this._prettyToggle.setToggled(this._pretty);\n    this._textEditor.element.classList.toggle('pretty-printed', this._pretty);\n    this._updateLineNumberFormatter();\n  }\n\n  /**\n   * @param {number} line\n   * @param {number=} column\n   * @return {!Array<number>}\n   */\n  _prettyToRawLocation(line, column = 0) {\n    if (!this._formattedMap) {\n      return [line, column];\n    }\n    return this._formattedMap.formattedToOriginal(line, column);\n  }\n\n  /**\n   * @param {number} line\n   * @param {number} column\n   * @return {!Array<number>}\n   */\n  _rawToPrettyLocation(line, column) {\n    if (!this._formattedMap) {\n      return [line, column];\n    }\n    return this._formattedMap.originalToFormatted(line, column);\n  }\n\n  /**\n   * @param {boolean} editable\n   * @protected\n   */\n  setEditable(editable) {\n    this._editable = editable;\n    if (this._loaded) {\n      this._textEditor.setReadOnly(!editable);\n    }\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasLoadError() {\n    return this._loadError;\n  }\n\n  /**\n   * @override\n   */\n  wasShown() {\n    this._ensureContentLoaded();\n    this._wasShownOrLoaded();\n  }\n\n  /**\n   * @override\n   */\n  willHide() {\n    super.willHide();\n\n    this._clearPositionToReveal();\n  }\n\n  /**\n   * @override\n   * @return {!Promise<!Array<!UI.Toolbar.ToolbarItem>>}\n   */\n  async toolbarItems() {\n    return [this._prettyToggle, this._sourcePosition, this._progressToolbarItem];\n  }\n\n  get loaded() {\n    return this._loaded;\n  }\n\n  get textEditor() {\n    return this._textEditor;\n  }\n\n  /**\n   * @protected\n   */\n  get pretty() {\n    return this._pretty;\n  }\n\n  async _ensureContentLoaded() {\n    if (!this._contentRequested) {\n      this._contentRequested = true;\n\n      const progressIndicator = new UI.ProgressIndicator.ProgressIndicator();\n      progressIndicator.setTitle(Common.UIString.UIString('Loading…'));\n      progressIndicator.setTotalWork(100);\n      this._progressToolbarItem.element.appendChild(progressIndicator.element);\n\n      const deferredContent = (await this._lazyContent());\n      let error, content;\n      if (deferredContent.content === null) {\n        error = deferredContent.error;\n        this._rawContent = deferredContent.error;\n      } else {\n        content = deferredContent.content;\n        this._rawContent = deferredContent.content;\n      }\n\n      progressIndicator.setWorked(1);\n\n      if (!error && this._highlighterType === 'application/wasm') {\n        const worker = Common.Worker.WorkerWrapper.fromURL(\n            new URL('../wasmparser_worker/wasmparser_worker-entrypoint.js', import.meta.url));\n        /** @type {!Promise<!{source: string, offsets: !Array<number>, functionBodyOffsets: !Array<{start: number, end: number}>}>} */\n        const promise = new Promise((resolve, reject) => {\n          worker.onmessage = ({/** @type {{event:string, params:{percentage:number}}} */ data}) => {\n            if ('event' in data) {\n              switch (data.event) {\n                case 'progress':\n                  progressIndicator.setWorked(data.params.percentage);\n                  break;\n              }\n            } else if ('method' in data) {\n              switch (data.method) {\n                case 'disassemble':\n                  if ('error' in data) {\n                    reject(data.error);\n                  } else if ('result' in data) {\n                    resolve(data.result);\n                  }\n                  break;\n              }\n            }\n          };\n          worker.onerror = reject;\n        });\n        worker.postMessage({method: 'disassemble', params: {content}});\n        try {\n          const {source, offsets, functionBodyOffsets} = await promise;\n          this._rawContent = content = source;\n          this._wasmDisassembly = new Common.WasmDisassembly.WasmDisassembly(offsets, functionBodyOffsets);\n        } catch (e) {\n          this._rawContent = content = error = e.message;\n        } finally {\n          worker.terminate();\n        }\n      }\n\n      progressIndicator.setWorked(100);\n      progressIndicator.done();\n\n      this._formattedContentPromise = null;\n      this._formattedMap = null;\n      this._prettyToggle.setEnabled(true);\n\n      if (error) {\n        this.setContent(null, error);\n        this._prettyToggle.setEnabled(false);\n\n        // Occasionally on load, there can be a race in which it appears the CodeMirror plugin\n        // runs the highlighter type assignment out of order. In case of an error then, set\n        // the highlighter type after a short delay. This appears to only occur the first\n        // time that CodeMirror is initialized, likely because the highlighter type was first\n        // initialized based on the file type, and the syntax highlighting is in a race\n        // with the new highlighter assignment. As the option is just an option and is not\n        // observable, we can't handle waiting for it here.\n        // https://github.com/codemirror/CodeMirror/issues/6019\n        // CRBug 1011445\n        setTimeout(() => this.setHighlighterType('text/plain'), 50);\n      } else {\n        if (this._shouldAutoPrettyPrint && TextUtils.TextUtils.isMinified(content)) {\n          await this._setPretty(true);\n        } else {\n          this.setContent(this._rawContent, null);\n        }\n      }\n    }\n  }\n\n  /**\n   * @return {!Promise<{content: string, map: !Formatter.ScriptFormatter.FormatterSourceMapping}>}\n   */\n  _requestFormattedContent() {\n    if (this._formattedContentPromise) {\n      return this._formattedContentPromise;\n    }\n    /** @type {function({content: string, map: !Formatter.ScriptFormatter.FormatterSourceMapping}): void} */\n    let fulfill;\n    this._formattedContentPromise = new Promise(x => {\n      fulfill = x;\n    });\n    new Formatter.ScriptFormatter.ScriptFormatter(\n        this._highlighterType, this._rawContent || '', async (content, map) => {\n          fulfill({content, map});\n        });\n    return this._formattedContentPromise;\n  }\n\n  /**\n   * @param {number} line 0-based\n   * @param {number=} column\n   * @param {boolean=} shouldHighlight\n   */\n  revealPosition(line, column, shouldHighlight) {\n    this._lineToScrollTo = null;\n    this._selectionToSet = null;\n    this._positionToReveal = {line: line, column: column, shouldHighlight: shouldHighlight};\n    this._innerRevealPositionIfNeeded();\n  }\n\n  _innerRevealPositionIfNeeded() {\n    if (!this._positionToReveal) {\n      return;\n    }\n\n    if (!this.loaded || !this.isShowing()) {\n      return;\n    }\n\n    const {lineNumber, columnNumber} =\n        this.uiLocationToEditorLocation(this._positionToReveal.line, this._positionToReveal.column);\n\n    this._textEditor.revealPosition(lineNumber, columnNumber, this._positionToReveal.shouldHighlight);\n    this._positionToReveal = null;\n  }\n\n  _clearPositionToReveal() {\n    this._textEditor.clearPositionHighlight();\n    this._positionToReveal = null;\n  }\n\n  /**\n   * @param {number} line\n   */\n  scrollToLine(line) {\n    this._clearPositionToReveal();\n    this._lineToScrollTo = line;\n    this._innerScrollToLineIfNeeded();\n  }\n\n  _innerScrollToLineIfNeeded() {\n    if (this._lineToScrollTo !== null) {\n      if (this.loaded && this.isShowing()) {\n        this._textEditor.scrollToLine(this._lineToScrollTo);\n        this._lineToScrollTo = null;\n      }\n    }\n  }\n\n  /**\n   * @return {!TextUtils.TextRange.TextRange}\n   */\n  selection() {\n    return this.textEditor.selection();\n  }\n\n  /**\n   * @param {!TextUtils.TextRange.TextRange} textRange\n   */\n  setSelection(textRange) {\n    this._selectionToSet = textRange;\n    this._innerSetSelectionIfNeeded();\n  }\n\n  _innerSetSelectionIfNeeded() {\n    if (this._selectionToSet && this.loaded && this.isShowing()) {\n      this._textEditor.setSelection(this._selectionToSet, true);\n      this._selectionToSet = null;\n    }\n  }\n\n  _wasShownOrLoaded() {\n    this._innerRevealPositionIfNeeded();\n    this._innerSetSelectionIfNeeded();\n    this._innerScrollToLineIfNeeded();\n  }\n\n  /**\n   * @param {!TextUtils.TextRange.TextRange} oldRange\n   * @param {!TextUtils.TextRange.TextRange} newRange\n   */\n  onTextChanged(oldRange, newRange) {\n    const wasPretty = this.pretty;\n    this._pretty = this._prettyCleanGeneration !== null && this.textEditor.isClean(this._prettyCleanGeneration);\n    if (this._pretty !== wasPretty) {\n      this._updatePrettyPrintState();\n    }\n    this._prettyToggle.setEnabled(this.isClean());\n\n    if (this._searchConfig && this._searchableView) {\n      this.performSearch(this._searchConfig, false, false);\n    }\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isClean() {\n    return this.textEditor.isClean(this._cleanGeneration) ||\n        (this._prettyCleanGeneration !== null && this.textEditor.isClean(this._prettyCleanGeneration));\n  }\n\n  contentCommitted() {\n    this._cleanGeneration = this._textEditor.markClean();\n    this._prettyCleanGeneration = null;\n    this._rawContent = this.textEditor.text();\n    this._formattedMap = null;\n    this._formattedContentPromise = null;\n    if (this._pretty) {\n      this._pretty = false;\n      this._updatePrettyPrintState();\n    }\n    this._prettyToggle.setEnabled(true);\n  }\n\n  /**\n   * @param {string} content\n   * @param {string} mimeType\n   * @return {string}\n   */\n  _simplifyMimeType(content, mimeType) {\n    if (!mimeType) {\n      return '';\n    }\n    // There are plenty of instances where TSX/JSX files are served with out the trailing x, i.e. JSX with a 'js' suffix\n    // which breaks the formatting. Therefore, if the mime type is TypeScript or JavaScript, we switch to the TSX/JSX\n    // superset so that we don't break formatting.\n    if (mimeType.indexOf('typescript') >= 0) {\n      return 'text/typescript-jsx';\n    }\n    if (mimeType.indexOf('javascript') >= 0 || mimeType.indexOf('jscript') >= 0 ||\n        mimeType.indexOf('ecmascript') >= 0) {\n      return 'text/jsx';\n    }\n    // A hack around the fact that files with \"php\" extension might be either standalone or html embedded php scripts.\n    if (mimeType === 'text/x-php' && content.match(/\\<\\?.*\\?\\>/g)) {\n      return 'application/x-httpd-php';\n    }\n    if (mimeType === 'application/wasm') {\n      // text/webassembly is not a proper MIME type, but CodeMirror uses it for WAT syntax highlighting.\n      // We generally use application/wasm, which is the correct MIME type for Wasm binary data.\n      return 'text/webassembly';\n    }\n    return mimeType;\n  }\n\n  /**\n   * @param {string} highlighterType\n   */\n  setHighlighterType(highlighterType) {\n    this._highlighterType = highlighterType;\n    this._updateHighlighterType('');\n  }\n\n  /**\n   * @protected\n   * @return {string}\n   */\n  highlighterType() {\n    return this._highlighterType;\n  }\n\n  /**\n   * @param {string} content\n   */\n  _updateHighlighterType(content) {\n    this._textEditor.setMimeType(this._simplifyMimeType(content, this._highlighterType));\n  }\n\n  /**\n   * @param {?string} content\n   * @param {?string} loadError\n   */\n  setContent(content, loadError) {\n    this._muteChangeEventsForSetContent = true;\n    if (!this._loaded) {\n      this._loaded = true;\n      if (!loadError) {\n        this._textEditor.setText(content || '');\n        this._cleanGeneration = this._textEditor.markClean();\n        this._textEditor.setReadOnly(!this._editable);\n        this._loadError = false;\n      } else {\n        this._textEditor.setText(loadError || '');\n        this._highlighterType = 'text/plain';\n        this._textEditor.setReadOnly(true);\n        this._loadError = true;\n      }\n    } else {\n      const scrollTop = this._textEditor.scrollTop();\n      const selection = this._textEditor.selection();\n      this._textEditor.setText(content || '');\n      this._textEditor.setScrollTop(scrollTop);\n      this._textEditor.setSelection(selection);\n    }\n\n    // Mark non-breakable lines in the Wasm disassembly after setting\n    // up the content for the text editor (which creates the gutter).\n    if (this._wasmDisassembly) {\n      for (const lineNumber of this._wasmDisassembly.nonBreakableLineNumbers()) {\n        this._textEditor.toggleLineClass(lineNumber, 'cm-non-breakable-line', true);\n      }\n    }\n\n    this._updateLineNumberFormatter();\n    this._updateHighlighterType(content || '');\n    this._wasShownOrLoaded();\n\n    if (this._delayedFindSearchMatches) {\n      this._delayedFindSearchMatches();\n      this._delayedFindSearchMatches = null;\n    }\n    this._muteChangeEventsForSetContent = false;\n  }\n\n  /**\n   * @param {?UI.SearchableView.SearchableView} view\n   */\n  setSearchableView(view) {\n    this._searchableView = view;\n  }\n\n  /**\n   * @param {!UI.SearchableView.SearchConfig} searchConfig\n   * @param {boolean} shouldJump\n   * @param {boolean} jumpBackwards\n   */\n  _doFindSearchMatches(searchConfig, shouldJump, jumpBackwards) {\n    this._currentSearchResultIndex = -1;\n    this._searchResults = [];\n\n    const regex = searchConfig.toSearchRegex();\n    this._searchRegex = regex;\n    this._searchResults = this._collectRegexMatches(regex);\n\n    if (this._searchableView) {\n      this._searchableView.updateSearchMatchesCount(this._searchResults.length);\n    }\n\n    if (!this._searchResults.length) {\n      this._textEditor.cancelSearchResultsHighlight();\n    } else if (shouldJump && jumpBackwards) {\n      this.jumpToPreviousSearchResult();\n    } else if (shouldJump) {\n      this.jumpToNextSearchResult();\n    } else {\n      this._textEditor.highlightSearchResults(regex, null);\n    }\n  }\n\n  /**\n   * @override\n   * @param {!UI.SearchableView.SearchConfig} searchConfig\n   * @param {boolean} shouldJump\n   * @param {boolean=} jumpBackwards\n   */\n  performSearch(searchConfig, shouldJump, jumpBackwards) {\n    if (this._searchableView) {\n      this._searchableView.updateSearchMatchesCount(0);\n    }\n\n    this._resetSearch();\n    this._searchConfig = searchConfig;\n    if (this.loaded) {\n      this._doFindSearchMatches(searchConfig, shouldJump, Boolean(jumpBackwards));\n    } else {\n      this._delayedFindSearchMatches =\n          this._doFindSearchMatches.bind(this, searchConfig, shouldJump, Boolean(jumpBackwards));\n    }\n\n    this._ensureContentLoaded();\n  }\n\n  _resetCurrentSearchResultIndex() {\n    if (!this._searchResults.length) {\n      return;\n    }\n    this._currentSearchResultIndex = -1;\n    if (this._searchableView) {\n      this._searchableView.updateCurrentMatchIndex(this._currentSearchResultIndex);\n    }\n    this._textEditor.highlightSearchResults(/** @type {!RegExp} */ (this._searchRegex), null);\n  }\n\n  _resetSearch() {\n    this._searchConfig = null;\n    this._delayedFindSearchMatches = null;\n    this._currentSearchResultIndex = -1;\n    this._searchResults = [];\n    this._searchRegex = null;\n  }\n\n  /**\n   * @override\n   */\n  searchCanceled() {\n    const range = this._currentSearchResultIndex !== -1 ? this._searchResults[this._currentSearchResultIndex] : null;\n    this._resetSearch();\n    if (!this.loaded) {\n      return;\n    }\n    this._textEditor.cancelSearchResultsHighlight();\n    if (range) {\n      this.setSelection(range);\n    }\n  }\n\n  jumpToLastSearchResult() {\n    this.jumpToSearchResult(this._searchResults.length - 1);\n  }\n\n  /**\n   * @return {number}\n   */\n  _searchResultIndexForCurrentSelection() {\n    return Platform.ArrayUtilities.lowerBound(\n        this._searchResults, this._textEditor.selection().collapseToEnd(), TextUtils.TextRange.TextRange.comparator);\n  }\n\n  /**\n   * @override\n   */\n  jumpToNextSearchResult() {\n    const currentIndex = this._searchResultIndexForCurrentSelection();\n    const nextIndex = this._currentSearchResultIndex === -1 ? currentIndex : currentIndex + 1;\n    this.jumpToSearchResult(nextIndex);\n  }\n\n  /**\n   * @override\n   */\n  jumpToPreviousSearchResult() {\n    const currentIndex = this._searchResultIndexForCurrentSelection();\n    this.jumpToSearchResult(currentIndex - 1);\n  }\n\n  /**\n   * @override\n   * @return {boolean}\n   */\n  supportsCaseSensitiveSearch() {\n    return true;\n  }\n\n  /**\n   * @override\n   * @return {boolean}\n   */\n  supportsRegexSearch() {\n    return true;\n  }\n\n  /**\n   * @param {number} index\n   */\n  jumpToSearchResult(index) {\n    if (!this.loaded || !this._searchResults.length) {\n      return;\n    }\n    this._currentSearchResultIndex = (index + this._searchResults.length) % this._searchResults.length;\n    if (this._searchableView) {\n      this._searchableView.updateCurrentMatchIndex(this._currentSearchResultIndex);\n    }\n    this._textEditor.highlightSearchResults(\n        /** @type {!RegExp} */ (this._searchRegex), this._searchResults[this._currentSearchResultIndex]);\n  }\n\n  /**\n   * @override\n   * @param {!UI.SearchableView.SearchConfig} searchConfig\n   * @param {string} replacement\n   */\n  replaceSelectionWith(searchConfig, replacement) {\n    const range = this._searchResults[this._currentSearchResultIndex];\n    if (!range) {\n      return;\n    }\n    this._textEditor.highlightSearchResults(/** @type {!RegExp} */ (this._searchRegex), null);\n\n    const oldText = this._textEditor.text(range);\n    const regex = searchConfig.toSearchRegex();\n    let text;\n    if (regex.__fromRegExpQuery) {\n      text = oldText.replace(regex, replacement);\n    } else {\n      text = oldText.replace(regex, function() {\n        return replacement;\n      });\n    }\n\n    const newRange = this._textEditor.editRange(range, text);\n    this._textEditor.setSelection(newRange.collapseToEnd());\n  }\n\n  /**\n   * @override\n   * @param {!UI.SearchableView.SearchConfig} searchConfig\n   * @param {string} replacement\n   */\n  replaceAllWith(searchConfig, replacement) {\n    this._resetCurrentSearchResultIndex();\n\n    let text = this._textEditor.text();\n    const range = this._textEditor.fullRange();\n\n    const regex = searchConfig.toSearchRegex(true);\n    if (regex.__fromRegExpQuery) {\n      text = text.replace(regex, replacement);\n    } else {\n      text = text.replace(regex, function() {\n        return replacement;\n      });\n    }\n\n    const ranges = this._collectRegexMatches(regex);\n    if (!ranges.length) {\n      return;\n    }\n\n    // Calculate the position of the end of the last range to be edited.\n    const currentRangeIndex = Platform.ArrayUtilities.lowerBound(\n        ranges, this._textEditor.selection(), TextUtils.TextRange.TextRange.comparator);\n    const lastRangeIndex = Platform.NumberUtilities.mod(currentRangeIndex - 1, ranges.length);\n    const lastRange = ranges[lastRangeIndex];\n    const replacementLineEndings = Platform.StringUtilities.findLineEndingIndexes(replacement);\n    const replacementLineCount = replacementLineEndings.length;\n    const lastLineNumber = lastRange.startLine + replacementLineEndings.length - 1;\n    let lastColumnNumber = lastRange.startColumn;\n    if (replacementLineEndings.length > 1) {\n      lastColumnNumber =\n          replacementLineEndings[replacementLineCount - 1] - replacementLineEndings[replacementLineCount - 2] - 1;\n    }\n\n    this._textEditor.editRange(range, text);\n    this._textEditor.revealPosition(lastLineNumber, lastColumnNumber);\n    this._textEditor.setSelection(TextUtils.TextRange.TextRange.createFromLocation(lastLineNumber, lastColumnNumber));\n  }\n\n  /**\n   * @param {!RegExp} regexObject\n   */\n  _collectRegexMatches(regexObject) {\n    const ranges = [];\n    for (let i = 0; i < this._textEditor.linesCount; ++i) {\n      let line = this._textEditor.line(i);\n      let offset = 0;\n      let match;\n      do {\n        match = regexObject.exec(line);\n        if (match) {\n          const matchEndIndex = match.index + Math.max(match[0].length, 1);\n          if (match[0].length) {\n            ranges.push(new TextUtils.TextRange.TextRange(i, offset + match.index, i, offset + matchEndIndex));\n          }\n          offset += matchEndIndex;\n          line = line.substring(matchEndIndex);\n        }\n      } while (match && line);\n    }\n    return ranges;\n  }\n\n  /**\n   * @override\n   * @param {!UI.ContextMenu.ContextMenu} contextMenu\n   * @param {number} editorLineNumber\n   * @return {!Promise<void>}\n   */\n  populateLineGutterContextMenu(contextMenu, editorLineNumber) {\n    return Promise.resolve();\n  }\n\n  /**\n   * @override\n   * @param {!UI.ContextMenu.ContextMenu} contextMenu\n   * @param {number} editorLineNumber\n   * @param {number} editorColumnNumber\n   * @return {!Promise<void>}\n   */\n  populateTextAreaContextMenu(contextMenu, editorLineNumber, editorColumnNumber) {\n    return Promise.resolve();\n  }\n\n  /**\n   * @return {boolean}\n   */\n  canEditSource() {\n    return this._editable;\n  }\n\n  _updateSourcePosition() {\n    const selections = this._textEditor.selections();\n    if (!selections.length) {\n      return;\n    }\n    if (selections.length > 1) {\n      this._sourcePosition.setText(Common.UIString.UIString('%d selection regions', selections.length));\n      return;\n    }\n    let textRange = selections[0];\n    if (textRange.isEmpty()) {\n      const location = this._prettyToRawLocation(textRange.endLine, textRange.endColumn);\n      if (this._wasmDisassembly) {\n        const disassembly = this._wasmDisassembly;\n        const lastBytecodeOffset = disassembly.lineNumberToBytecodeOffset(disassembly.lineNumbers - 1);\n        const bytecodeOffsetDigits = lastBytecodeOffset.toString(16).length;\n        const bytecodeOffset = disassembly.lineNumberToBytecodeOffset(location[0]);\n\n        this._sourcePosition.setText(\n            ls`Bytecode position 0x${bytecodeOffset.toString(16).padStart(bytecodeOffsetDigits, '0')}`);\n      } else {\n        this._sourcePosition.setText(ls`Line ${location[0] + 1}, Column ${location[1] + 1}`);\n      }\n      return;\n    }\n    textRange = textRange.normalize();\n\n    const selectedText = this._textEditor.text(textRange);\n    if (textRange.startLine === textRange.endLine) {\n      this._sourcePosition.setText(Common.UIString.UIString('%d characters selected', selectedText.length));\n    } else {\n      this._sourcePosition.setText(Common.UIString.UIString(\n          '%d lines, %d characters selected', textRange.endLine - textRange.startLine + 1, selectedText.length));\n    }\n  }\n}\n\n/**\n * @interface\n */\nexport class LineDecorator {\n  /**\n   * @param {!Workspace.UISourceCode.UISourceCode} uiSourceCode\n   * @param {!SourcesTextEditor} textEditor\n   * @param {string} type\n   */\n  decorate(uiSourceCode, textEditor, type) {\n  }\n}\n\n/**\n * @interface\n */\nexport class Transformer {\n  /**\n   * @param {number} lineNumber\n   * @param {number=} columnNumber\n   * @return {{lineNumber: number, columnNumber?: number}}\n   */\n  editorLocationToUILocation(lineNumber, columnNumber) {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @param {number} lineNumber\n   * @param {number=} columnNumber\n   * @return {{lineNumber: number, columnNumber: number}}\n   */\n  uiLocationToEditorLocation(lineNumber, columnNumber) {\n    throw new Error('Not implemented');\n  }\n}\n"]}